var BF=Object.defineProperty;var UF=(t,e,n)=>e in t?BF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Cn=(t,e,n)=>UF(t,typeof e!="symbol"?e+"":e,n);function $F(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var WF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function AP(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var pw={exports:{}},cm={},mw={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PN;function VF(){if(PN)return Dn;PN=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(ne){return ne===null||typeof ne!="object"?null:(ne=d&&ne[d]||ne["@@iterator"],typeof ne=="function"?ne:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function v(ne,D,G){this.props=ne,this.context=D,this.refs=x,this.updater=G||p}v.prototype.isReactComponent={},v.prototype.setState=function(ne,D){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,D,"setState")},v.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function b(){}b.prototype=v.prototype;function S(ne,D,G){this.props=ne,this.context=D,this.refs=x,this.updater=G||p}var k=S.prototype=new b;k.constructor=S,y(k,v.prototype),k.isPureReactComponent=!0;var T=Array.isArray,j=Object.prototype.hasOwnProperty,P={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(ne,D,G){var V,H={},te=null,ge=null;if(D!=null)for(V in D.ref!==void 0&&(ge=D.ref),D.key!==void 0&&(te=""+D.key),D)j.call(D,V)&&!C.hasOwnProperty(V)&&(H[V]=D[V]);var xe=arguments.length-2;if(xe===1)H.children=G;else if(1<xe){for(var ve=Array(xe),Ne=0;Ne<xe;Ne++)ve[Ne]=arguments[Ne+2];H.children=ve}if(ne&&ne.defaultProps)for(V in xe=ne.defaultProps,xe)H[V]===void 0&&(H[V]=xe[V]);return{$$typeof:t,type:ne,key:te,ref:ge,props:H,_owner:P.current}}function O(ne,D){return{$$typeof:t,type:ne.type,key:D,ref:ne.ref,props:ne.props,_owner:ne._owner}}function z(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function L(ne){var D={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(G){return D[G]})}var M=/\/+/g;function K(ne,D){return typeof ne=="object"&&ne!==null&&ne.key!=null?L(""+ne.key):D.toString(36)}function W(ne,D,G,V,H){var te=typeof ne;(te==="undefined"||te==="boolean")&&(ne=null);var ge=!1;if(ne===null)ge=!0;else switch(te){case"string":case"number":ge=!0;break;case"object":switch(ne.$$typeof){case t:case e:ge=!0}}if(ge)return ge=ne,H=H(ge),ne=V===""?"."+K(ge,0):V,T(H)?(G="",ne!=null&&(G=ne.replace(M,"$&/")+"/"),W(H,D,G,"",function(Ne){return Ne})):H!=null&&(z(H)&&(H=O(H,G+(!H.key||ge&&ge.key===H.key?"":(""+H.key).replace(M,"$&/")+"/")+ne)),D.push(H)),1;if(ge=0,V=V===""?".":V+":",T(ne))for(var xe=0;xe<ne.length;xe++){te=ne[xe];var ve=V+K(te,xe);ge+=W(te,D,G,ve,H)}else if(ve=h(ne),typeof ve=="function")for(ne=ve.call(ne),xe=0;!(te=ne.next()).done;)te=te.value,ve=V+K(te,xe++),ge+=W(te,D,G,ve,H);else if(te==="object")throw D=String(ne),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ge}function Z(ne,D,G){if(ne==null)return ne;var V=[],H=0;return W(ne,V,"","",function(te){return D.call(G,te,H++)}),V}function U(ne){if(ne._status===-1){var D=ne._result;D=D(),D.then(function(G){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=G)},function(G){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=G)}),ne._status===-1&&(ne._status=0,ne._result=D)}if(ne._status===1)return ne._result.default;throw ne._result}var F={current:null},J={transition:null},Q={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:J,ReactCurrentOwner:P};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Dn.Children={map:Z,forEach:function(ne,D,G){Z(ne,function(){D.apply(this,arguments)},G)},count:function(ne){var D=0;return Z(ne,function(){D++}),D},toArray:function(ne){return Z(ne,function(D){return D})||[]},only:function(ne){if(!z(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},Dn.Component=v,Dn.Fragment=n,Dn.Profiler=i,Dn.PureComponent=S,Dn.StrictMode=r,Dn.Suspense=l,Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Dn.act=ee,Dn.cloneElement=function(ne,D,G){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var V=y({},ne.props),H=ne.key,te=ne.ref,ge=ne._owner;if(D!=null){if(D.ref!==void 0&&(te=D.ref,ge=P.current),D.key!==void 0&&(H=""+D.key),ne.type&&ne.type.defaultProps)var xe=ne.type.defaultProps;for(ve in D)j.call(D,ve)&&!C.hasOwnProperty(ve)&&(V[ve]=D[ve]===void 0&&xe!==void 0?xe[ve]:D[ve])}var ve=arguments.length-2;if(ve===1)V.children=G;else if(1<ve){xe=Array(ve);for(var Ne=0;Ne<ve;Ne++)xe[Ne]=arguments[Ne+2];V.children=xe}return{$$typeof:t,type:ne.type,key:H,ref:te,props:V,_owner:ge}},Dn.createContext=function(ne){return ne={$$typeof:o,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:s,_context:ne},ne.Consumer=ne},Dn.createElement=N,Dn.createFactory=function(ne){var D=N.bind(null,ne);return D.type=ne,D},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(ne){return{$$typeof:a,render:ne}},Dn.isValidElement=z,Dn.lazy=function(ne){return{$$typeof:u,_payload:{_status:-1,_result:ne},_init:U}},Dn.memo=function(ne,D){return{$$typeof:c,type:ne,compare:D===void 0?null:D}},Dn.startTransition=function(ne){var D=J.transition;J.transition={};try{ne()}finally{J.transition=D}},Dn.unstable_act=ee,Dn.useCallback=function(ne,D){return F.current.useCallback(ne,D)},Dn.useContext=function(ne){return F.current.useContext(ne)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(ne){return F.current.useDeferredValue(ne)},Dn.useEffect=function(ne,D){return F.current.useEffect(ne,D)},Dn.useId=function(){return F.current.useId()},Dn.useImperativeHandle=function(ne,D,G){return F.current.useImperativeHandle(ne,D,G)},Dn.useInsertionEffect=function(ne,D){return F.current.useInsertionEffect(ne,D)},Dn.useLayoutEffect=function(ne,D){return F.current.useLayoutEffect(ne,D)},Dn.useMemo=function(ne,D){return F.current.useMemo(ne,D)},Dn.useReducer=function(ne,D,G){return F.current.useReducer(ne,D,G)},Dn.useRef=function(ne){return F.current.useRef(ne)},Dn.useState=function(ne){return F.current.useState(ne)},Dn.useSyncExternalStore=function(ne,D,G){return F.current.useSyncExternalStore(ne,D,G)},Dn.useTransition=function(){return F.current.useTransition()},Dn.version="18.3.1",Dn}var DN;function s1(){return DN||(DN=1,mw.exports=VF()),mw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON;function HF(){if(ON)return cm;ON=1;var t=s1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,d={},h=null,p=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:a,key:h,ref:p,props:d,_owner:i.current}}return cm.Fragment=n,cm.jsx=o,cm.jsxs=o,cm}var LN;function qF(){return LN||(LN=1,pw.exports=HF()),pw.exports}var g=qF(),Y=s1();const Mt=Pv(Y),GF=$F({__proto__:null,default:Mt},[Y]);var oy={},gw={exports:{}},wo={},yw={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function KF(){return MN||(MN=1,function(t){function e(J,Q){var ee=J.length;J.push(Q);e:for(;0<ee;){var ne=ee-1>>>1,D=J[ne];if(0<i(D,Q))J[ne]=Q,J[ee]=D,ee=ne;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var Q=J[0],ee=J.pop();if(ee!==Q){J[0]=ee;e:for(var ne=0,D=J.length,G=D>>>1;ne<G;){var V=2*(ne+1)-1,H=J[V],te=V+1,ge=J[te];if(0>i(H,ee))te<D&&0>i(ge,H)?(J[ne]=ge,J[te]=ee,ne=te):(J[ne]=H,J[V]=ee,ne=V);else if(te<D&&0>i(ge,ee))J[ne]=ge,J[te]=ee,ne=te;else break e}}return Q}function i(J,Q){var ee=J.sortIndex-Q.sortIndex;return ee!==0?ee:J.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(J){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=J)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function T(J){if(x=!1,k(J),!y)if(n(l)!==null)y=!0,U(j);else{var Q=n(c);Q!==null&&F(T,Q.startTime-J)}}function j(J,Q){y=!1,x&&(x=!1,b(N),N=-1),p=!0;var ee=h;try{for(k(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||J&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,h=d.priorityLevel;var D=ne(d.expirationTime<=Q);Q=t.unstable_now(),typeof D=="function"?d.callback=D:d===n(l)&&r(l),k(Q)}else r(l);d=n(l)}if(d!==null)var G=!0;else{var V=n(c);V!==null&&F(T,V.startTime-Q),G=!1}return G}finally{d=null,h=ee,p=!1}}var P=!1,C=null,N=-1,O=5,z=-1;function L(){return!(t.unstable_now()-z<O)}function M(){if(C!==null){var J=t.unstable_now();z=J;var Q=!0;try{Q=C(!0,J)}finally{Q?K():(P=!1,C=null)}}else P=!1}var K;if(typeof S=="function")K=function(){S(M)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=M,K=function(){Z.postMessage(null)}}else K=function(){v(M,0)};function U(J){C=J,P||(P=!0,K())}function F(J,Q){N=v(function(){J(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,U(j))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var ee=h;h=Q;try{return J()}finally{h=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,Q){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=h;h=J;try{return Q()}finally{h=ee}},t.unstable_scheduleCallback=function(J,Q,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,J){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ee+D,J={id:u++,callback:Q,priorityLevel:J,startTime:ee,expirationTime:D,sortIndex:-1},ee>ne?(J.sortIndex=ee,e(c,J),n(l)===null&&J===n(c)&&(x?(b(N),N=-1):x=!0,F(T,ee-ne))):(J.sortIndex=D,e(l,J),y||p||(y=!0,U(j))),J},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(J){var Q=h;return function(){var ee=h;h=Q;try{return J.apply(this,arguments)}finally{h=ee}}}}(xw)),xw}var IN;function XF(){return IN||(IN=1,yw.exports=KF()),yw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN;function YF(){if(RN)return wo;RN=1;var t=s1(),e=XF();function n(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(f,m){o(f,m),o(f+"Capture",m)}function o(f,m){for(i[f]=m,f=0;f<m.length;f++)r.add(m[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(f){return l.call(d,f)?!0:l.call(u,f)?!1:c.test(f)?d[f]=!0:(u[f]=!0,!1)}function p(f,m,w,E){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return E?!1:w!==null?!w.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function y(f,m,w,E){if(m===null||typeof m>"u"||p(f,m,w,E))return!0;if(E)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function x(f,m,w,E,R,q,ae){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=E,this.attributeNamespace=R,this.mustUseProperty=w,this.propertyName=f,this.type=m,this.sanitizeURL=q,this.removeEmptyString=ae}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new x(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];v[m]=new x(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new x(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new x(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new x(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new x(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new x(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new x(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new x(f,5,!1,f.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function S(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(b,S);v[m]=new x(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(b,S);v[m]=new x(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(b,S);v[m]=new x(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!0,!0)});function k(f,m,w,E){var R=v.hasOwnProperty(m)?v[m]:null;(R!==null?R.type!==0:E||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(y(m,w,R,E)&&(w=null),E||R===null?h(m)&&(w===null?f.removeAttribute(m):f.setAttribute(m,""+w)):R.mustUseProperty?f[R.propertyName]=w===null?R.type===3?!1:"":w:(m=R.attributeName,E=R.attributeNamespace,w===null?f.removeAttribute(m):(R=R.type,w=R===3||R===4&&w===!0?"":""+w,E?f.setAttributeNS(E,m,w):f.setAttribute(m,w))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),P=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),J=Symbol.iterator;function Q(f){return f===null||typeof f!="object"?null:(f=J&&f[J]||f["@@iterator"],typeof f=="function"?f:null)}var ee=Object.assign,ne;function D(f){if(ne===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);ne=m&&m[1]||""}return`
`+ne+f}var G=!1;function V(f,m){if(!f||G)return"";G=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Je){var E=Je}Reflect.construct(f,[],m)}else{try{m.call()}catch(Je){E=Je}f.call(m.prototype)}else{try{throw Error()}catch(Je){E=Je}f()}}catch(Je){if(Je&&E&&typeof Je.stack=="string"){for(var R=Je.stack.split(`
`),q=E.stack.split(`
`),ae=R.length-1,Se=q.length-1;1<=ae&&0<=Se&&R[ae]!==q[Se];)Se--;for(;1<=ae&&0<=Se;ae--,Se--)if(R[ae]!==q[Se]){if(ae!==1||Se!==1)do if(ae--,Se--,0>Se||R[ae]!==q[Se]){var Ae=`
`+R[ae].replace(" at new "," at ");return f.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",f.displayName)),Ae}while(1<=ae&&0<=Se);break}}}finally{G=!1,Error.prepareStackTrace=w}return(f=f?f.displayName||f.name:"")?D(f):""}function H(f){switch(f.tag){case 5:return D(f.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return f=V(f.type,!1),f;case 11:return f=V(f.type.render,!1),f;case 1:return f=V(f.type,!0),f;default:return""}}function te(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case C:return"Fragment";case P:return"Portal";case O:return"Profiler";case N:return"StrictMode";case K:return"Suspense";case W:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case L:return(f.displayName||"Context")+".Consumer";case z:return(f._context.displayName||"Context")+".Provider";case M:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case Z:return m=f.displayName||null,m!==null?m:te(f.type)||"Memo";case U:m=f._payload,f=f._init;try{return te(f(m))}catch{}}return null}function ge(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(m);case 8:return m===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function xe(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ve(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ne(f){var m=ve(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),E=""+f[m];if(!f.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var R=w.get,q=w.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return R.call(this)},set:function(ae){E=""+ae,q.call(this,ae)}}),Object.defineProperty(f,m,{enumerable:w.enumerable}),{getValue:function(){return E},setValue:function(ae){E=""+ae},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function He(f){f._valueTracker||(f._valueTracker=Ne(f))}function Ke(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var w=m.getValue(),E="";return f&&(E=ve(f)?f.checked?"true":"false":f.value),f=E,f!==w?(m.setValue(f),!0):!1}function qe(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Be(f,m){var w=m.checked;return ee({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??f._wrapperState.initialChecked})}function Te(f,m){var w=m.defaultValue==null?"":m.defaultValue,E=m.checked!=null?m.checked:m.defaultChecked;w=xe(m.value!=null?m.value:w),f._wrapperState={initialChecked:E,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function fe(f,m){m=m.checked,m!=null&&k(f,"checked",m,!1)}function Ge(f,m){fe(f,m);var w=xe(m.value),E=m.type;if(w!=null)E==="number"?(w===0&&f.value===""||f.value!=w)&&(f.value=""+w):f.value!==""+w&&(f.value=""+w);else if(E==="submit"||E==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?Le(f,m.type,w):m.hasOwnProperty("defaultValue")&&Le(f,m.type,xe(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function et(f,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var E=m.type;if(!(E!=="submit"&&E!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,w||m===f.value||(f.value=m),f.defaultValue=m}w=f.name,w!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,w!==""&&(f.name=w)}function Le(f,m,w){(m!=="number"||qe(f.ownerDocument)!==f)&&(w==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+w&&(f.defaultValue=""+w))}var ke=Array.isArray;function We(f,m,w,E){if(f=f.options,m){m={};for(var R=0;R<w.length;R++)m["$"+w[R]]=!0;for(w=0;w<f.length;w++)R=m.hasOwnProperty("$"+f[w].value),f[w].selected!==R&&(f[w].selected=R),R&&E&&(f[w].defaultSelected=!0)}else{for(w=""+xe(w),m=null,R=0;R<f.length;R++){if(f[R].value===w){f[R].selected=!0,E&&(f[R].defaultSelected=!0);return}m!==null||f[R].disabled||(m=f[R])}m!==null&&(m.selected=!0)}}function at(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function xt(f,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(n(92));if(ke(w)){if(1<w.length)throw Error(n(93));w=w[0]}m=w}m==null&&(m=""),w=m}f._wrapperState={initialValue:xe(w)}}function _t(f,m){var w=xe(m.value),E=xe(m.defaultValue);w!=null&&(w=""+w,w!==f.value&&(f.value=w),m.defaultValue==null&&f.defaultValue!==w&&(f.defaultValue=w)),E!=null&&(f.defaultValue=""+E)}function Pt(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function Vt(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xt(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?Vt(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Bt,It=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,E,R){MSApp.execUnsafeLocalFunction(function(){return f(m,w,E,R)})}:f}(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(Bt=Bt||document.createElement("div"),Bt.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Bt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function Ft(f,m){if(m){var w=f.firstChild;if(w&&w===f.lastChild&&w.nodeType===3){w.nodeValue=m;return}}f.textContent=m}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tn=["Webkit","ms","Moz","O"];Object.keys(dt).forEach(function(f){Tn.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),dt[m]=dt[f]})});function sn(f,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||dt.hasOwnProperty(f)&&dt[f]?(""+m).trim():m+"px"}function Wn(f,m){f=f.style;for(var w in m)if(m.hasOwnProperty(w)){var E=w.indexOf("--")===0,R=sn(w,m[w],E);w==="float"&&(w="cssFloat"),E?f.setProperty(w,R):f[w]=R}}var hn=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jn(f,m){if(m){if(hn[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function Wr(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yn=null;function Fr(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Nn=null,vr=null,pn=null;function tn(f){if(f=$u(f)){if(typeof Nn!="function")throw Error(n(280));var m=f.stateNode;m&&(m=kf(m),Nn(f.stateNode,f.type,m))}}function Rt(f){vr?pn?pn.push(f):pn=[f]:vr=f}function nn(){if(vr){var f=vr,m=pn;if(pn=vr=null,tn(f),m)for(f=0;f<m.length;f++)tn(m[f])}}function rr(f,m){return f(m)}function xn(){}var On=!1;function Sr(f,m,w){if(On)return f(m,w);On=!0;try{return rr(f,m,w)}finally{On=!1,(vr!==null||pn!==null)&&(xn(),nn())}}function jt(f,m){var w=f.stateNode;if(w===null)return null;var E=kf(w);if(E===null)return null;w=E[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(w&&typeof w!="function")throw Error(n(231,m,typeof w));return w}var pe=!1;if(a)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){pe=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{pe=!1}function vt(f,m,w,E,R,q,ae,Se,Ae){var Je=Array.prototype.slice.call(arguments,3);try{m.apply(w,Je)}catch(ht){this.onError(ht)}}var $t=!1,Et=null,re=!1,ye=null,de={onError:function(f){$t=!0,Et=f}};function he(f,m,w,E,R,q,ae,Se,Ae){$t=!1,Et=null,vt.apply(de,arguments)}function we(f,m,w,E,R,q,ae,Se,Ae){if(he.apply(this,arguments),$t){if($t){var Je=Et;$t=!1,Et=null}else throw Error(n(198));re||(re=!0,ye=Je)}}function be(f){var m=f,w=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(w=m.return),f=m.return;while(f)}return m.tag===3?w:null}function Ue(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function Ye(f){if(be(f)!==f)throw Error(n(188))}function Me(f){var m=f.alternate;if(!m){if(m=be(f),m===null)throw Error(n(188));return m!==f?null:f}for(var w=f,E=m;;){var R=w.return;if(R===null)break;var q=R.alternate;if(q===null){if(E=R.return,E!==null){w=E;continue}break}if(R.child===q.child){for(q=R.child;q;){if(q===w)return Ye(R),f;if(q===E)return Ye(R),m;q=q.sibling}throw Error(n(188))}if(w.return!==E.return)w=R,E=q;else{for(var ae=!1,Se=R.child;Se;){if(Se===w){ae=!0,w=R,E=q;break}if(Se===E){ae=!0,E=R,w=q;break}Se=Se.sibling}if(!ae){for(Se=q.child;Se;){if(Se===w){ae=!0,w=q,E=R;break}if(Se===E){ae=!0,E=q,w=R;break}Se=Se.sibling}if(!ae)throw Error(n(189))}}if(w.alternate!==E)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?f:m}function Ie(f){return f=Me(f),f!==null?$e(f):null}function $e(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=$e(f);if(m!==null)return m;f=f.sibling}return null}var ut=e.unstable_scheduleCallback,wt=e.unstable_cancelCallback,Dt=e.unstable_shouldYield,bt=e.unstable_requestPaint,gt=e.unstable_now,dn=e.unstable_getCurrentPriorityLevel,zn=e.unstable_ImmediatePriority,Zn=e.unstable_UserBlockingPriority,kr=e.unstable_NormalPriority,Oo=e.unstable_LowPriority,ua=e.unstable_IdlePriority,Bs=null,Vr=null;function da(f){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Bs,f,void 0,(f.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:zh,zr=Math.log,Fh=Math.LN2;function zh(f){return f>>>=0,f===0?32:31-(zr(f)/Fh|0)|0}var xc=64,Al=4194304;function vc(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function fs(f,m){var w=f.pendingLanes;if(w===0)return 0;var E=0,R=f.suspendedLanes,q=f.pingedLanes,ae=w&268435455;if(ae!==0){var Se=ae&~R;Se!==0?E=vc(Se):(q&=ae,q!==0&&(E=vc(q)))}else ae=w&~R,ae!==0?E=vc(ae):q!==0&&(E=vc(q));if(E===0)return 0;if(m!==0&&m!==E&&(m&R)===0&&(R=E&-E,q=m&-m,R>=q||R===16&&(q&4194240)!==0))return m;if((E&4)!==0&&(E|=w&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=E;0<m;)w=31-Nr(m),R=1<<w,E|=f[w],m&=~R;return E}function yu(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(f,m){for(var w=f.suspendedLanes,E=f.pingedLanes,R=f.expirationTimes,q=f.pendingLanes;0<q;){var ae=31-Nr(q),Se=1<<ae,Ae=R[ae];Ae===-1?((Se&w)===0||(Se&E)!==0)&&(R[ae]=yu(Se,m)):Ae<=m&&(f.expiredLanes|=Se),q&=~Se}}function wc(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function sf(){var f=xc;return xc<<=1,(xc&4194240)===0&&(xc=64),f}function of(f){for(var m=[],w=0;31>w;w++)m.push(f);return m}function Tl(f,m,w){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Nr(m),f[m]=w}function R0(f,m){var w=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<w;){var R=31-Nr(w),q=1<<R;m[R]=0,E[R]=-1,f[R]=-1,w&=~q}}function xu(f,m){var w=f.entangledLanes|=m;for(f=f.entanglements;w;){var E=31-Nr(w),R=1<<E;R&m|f[E]&m&&(f[E]|=m),w&=~R}}var Vn=0;function vu(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Bh,af,Uh,fa,bc,jl=!1,_c=[],Cr=null,ha=null,Lo=null,cn=new Map,Sc=new Map,pa=[],ma="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lf(f,m){switch(f){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":cn.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(m.pointerId)}}function Pl(f,m,w,E,R,q){return f===null||f.nativeEvent!==q?(f={blockedOn:m,domEventName:w,eventSystemFlags:E,nativeEvent:q,targetContainers:[R]},m!==null&&(m=$u(m),m!==null&&af(m)),f):(f.eventSystemFlags|=E,m=f.targetContainers,R!==null&&m.indexOf(R)===-1&&m.push(R),f)}function wu(f,m,w,E,R){switch(m){case"focusin":return Cr=Pl(Cr,f,m,w,E,R),!0;case"dragenter":return ha=Pl(ha,f,m,w,E,R),!0;case"mouseover":return Lo=Pl(Lo,f,m,w,E,R),!0;case"pointerover":var q=R.pointerId;return cn.set(q,Pl(cn.get(q)||null,f,m,w,E,R)),!0;case"gotpointercapture":return q=R.pointerId,Sc.set(q,Pl(Sc.get(q)||null,f,m,w,E,R)),!0}return!1}function bu(f){var m=Ul(f.target);if(m!==null){var w=be(m);if(w!==null){if(m=w.tag,m===13){if(m=Ue(w),m!==null){f.blockedOn=m,bc(f.priority,function(){Uh(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){f.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}f.blockedOn=null}function _u(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var w=ku(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(w===null){w=f.nativeEvent;var E=new w.constructor(w.type,w);yn=E,w.target.dispatchEvent(E),yn=null}else return m=$u(w),m!==null&&af(m),f.blockedOn=w,!1;m.shift()}return!0}function $h(f,m,w){_u(f)&&w.delete(m)}function F0(){jl=!1,Cr!==null&&_u(Cr)&&(Cr=null),ha!==null&&_u(ha)&&(ha=null),Lo!==null&&_u(Lo)&&(Lo=null),cn.forEach($h),Sc.forEach($h)}function qa(f,m){f.blockedOn===m&&(f.blockedOn=null,jl||(jl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,F0)))}function Mo(f){function m(R){return qa(R,f)}if(0<_c.length){qa(_c[0],f);for(var w=1;w<_c.length;w++){var E=_c[w];E.blockedOn===f&&(E.blockedOn=null)}}for(Cr!==null&&qa(Cr,f),ha!==null&&qa(ha,f),Lo!==null&&qa(Lo,f),cn.forEach(m),Sc.forEach(m),w=0;w<pa.length;w++)E=pa[w],E.blockedOn===f&&(E.blockedOn=null);for(;0<pa.length&&(w=pa[0],w.blockedOn===null);)bu(w),w.blockedOn===null&&pa.shift()}var Us=T.ReactCurrentBatchConfig,Su=!0;function kc(f,m,w,E){var R=Vn,q=Us.transition;Us.transition=null;try{Vn=1,Dl(f,m,w,E)}finally{Vn=R,Us.transition=q}}function cf(f,m,w,E){var R=Vn,q=Us.transition;Us.transition=null;try{Vn=4,Dl(f,m,w,E)}finally{Vn=R,Us.transition=q}}function Dl(f,m,w,E){if(Su){var R=ku(f,m,w,E);if(R===null)bf(f,m,E,Nc,w),lf(f,E);else if(wu(R,f,m,w,E))E.stopPropagation();else if(lf(f,E),m&4&&-1<ma.indexOf(f)){for(;R!==null;){var q=$u(R);if(q!==null&&Bh(q),q=ku(f,m,w,E),q===null&&bf(f,m,E,Nc,w),q===R)break;R=q}R!==null&&E.stopPropagation()}else bf(f,m,E,null,w)}}var Nc=null;function ku(f,m,w,E){if(Nc=null,f=Fr(E),f=Ul(f),f!==null)if(m=be(f),m===null)f=null;else if(w=m.tag,w===13){if(f=Ue(m),f!==null)return f;f=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return Nc=f,null}function uf(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dn()){case zn:return 1;case Zn:return 4;case kr:case Oo:return 16;case ua:return 536870912;default:return 16}default:return 16}}var Io=null,Ro=null,Fo=null;function Wh(){if(Fo)return Fo;var f,m=Ro,w=m.length,E,R="value"in Io?Io.value:Io.textContent,q=R.length;for(f=0;f<w&&m[f]===R[f];f++);var ae=w-f;for(E=1;E<=ae&&m[w-E]===R[q-E];E++);return Fo=R.slice(f,1<E?1-E:void 0)}function zo(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function ps(){return!0}function Nu(){return!1}function ei(f){function m(w,E,R,q,ae){this._reactName=w,this._targetInst=R,this.type=E,this.nativeEvent=q,this.target=ae,this.currentTarget=null;for(var Se in f)f.hasOwnProperty(Se)&&(w=f[Se],this[Se]=w?w(q):q[Se]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?ps:Nu,this.isPropagationStopped=Nu,this}return ee(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),m}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=ei(Ol),Cc=ee({},Ol,{view:0,detail:0}),df=ei(Cc),Ec,Cu,ga,Ml=ee({},Cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ga&&(ga&&f.type==="mousemove"?(Ec=f.screenX-ga.screenX,Cu=f.screenY-ga.screenY):Cu=Ec=0,ga=f),Ec)},movementY:function(f){return"movementY"in f?f.movementY:Cu}}),Eu=ei(Ml),Vh=ee({},Ml,{dataTransfer:0}),z0=ei(Vh),Au=ee({},Cc,{relatedTarget:0}),Ga=ei(Au),ff=ee({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),Il=ei(ff),hf=ee({},Ol,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),I=ei(hf),se=ee({},Ol,{data:0}),_e=ei(se),Ce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Re={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mt(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=tt[f])?!!m[f]:!1}function Ot(){return mt}var Qt=ee({},Cc,{key:function(f){if(f.key){var m=Ce[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=zo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Re[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(f){return f.type==="keypress"?zo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?zo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),vn=ei(Qt),Sn=ee({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ln=ei(Sn),Er=ee({},Cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot}),Mr=ei(Er),Hr=ee({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ci=ei(Hr),fi=ee({},Ml,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Bo=ei(fi),$s=[9,13,27,32],Uo=a&&"CompositionEvent"in window,Rl=null;a&&"documentMode"in document&&(Rl=document.documentMode);var pf=a&&"TextEvent"in window&&!Rl,Tu=a&&(!Uo||Rl&&8<Rl&&11>=Rl),Ac=" ",ju=!1;function Pu(f,m){switch(f){case"keyup":return $s.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tc(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var ti=!1;function Du(f,m){switch(f){case"compositionend":return Tc(m);case"keypress":return m.which!==32?null:(ju=!0,Ac);case"textInput":return f=m.data,f===Ac&&ju?null:f;default:return null}}function Ou(f,m){if(ti)return f==="compositionend"||!Uo&&Pu(f,m)?(f=Wh(),Fo=Ro=Io=null,ti=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Tu&&m.locale!=="ko"?null:m.data;default:return null}}var Lu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!Lu[f.type]:m==="textarea"}function Gi(f,m,w,E){Rt(E),m=Xh(m,"onChange"),0<m.length&&(w=new Ll("onChange","change",null,w,E),f.push({event:w,listeners:m}))}var jc=null,Ka=null;function Hh(f){vf(f,0)}function ms(f){var m=Rc(f);if(Ke(m))return f}function mf(f,m){if(f==="change")return m}var qh=!1;if(a){var gf;if(a){var ya="oninput"in document;if(!ya){var Ws=document.createElement("div");Ws.setAttribute("oninput","return;"),ya=typeof Ws.oninput=="function"}gf=ya}else gf=!1;qh=gf&&(!document.documentMode||9<document.documentMode)}function ao(){jc&&(jc.detachEvent("onpropertychange",Xa),Ka=jc=null)}function Xa(f){if(f.propertyName==="value"&&ms(Ka)){var m=[];Gi(m,Ka,f,Fr(f)),Sr(Hh,m)}}function xa(f,m,w){f==="focusin"?(ao(),jc=m,Ka=w,jc.attachEvent("onpropertychange",Xa)):f==="focusout"&&ao()}function Ya(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return ms(Ka)}function Iu(f,m){if(f==="click")return ms(m)}function $o(f,m){if(f==="input"||f==="change")return ms(m)}function Ru(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Ki=typeof Object.is=="function"?Object.is:Ru;function lo(f,m){if(Ki(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var w=Object.keys(f),E=Object.keys(m);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var R=w[E];if(!l.call(m,R)||!Ki(f[R],m[R]))return!1}return!0}function co(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function va(f,m){var w=co(f);f=0;for(var E;w;){if(w.nodeType===3){if(E=f+w.textContent.length,f<=m&&E>=m)return{node:w,offset:m-f};f=E}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=co(w)}}function Fl(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?Fl(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function Pc(){for(var f=window,m=qe();m instanceof f.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)f=m.contentWindow;else break;m=qe(f.document)}return m}function Ja(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function zl(f){var m=Pc(),w=f.focusedElem,E=f.selectionRange;if(m!==w&&w&&w.ownerDocument&&Fl(w.ownerDocument.documentElement,w)){if(E!==null&&Ja(w)){if(m=E.start,f=E.end,f===void 0&&(f=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(f,w.value.length);else if(f=(m=w.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var R=w.textContent.length,q=Math.min(E.start,R);E=E.end===void 0?q:Math.min(E.end,R),!f.extend&&q>E&&(R=E,E=q,q=R),R=va(w,q);var ae=va(w,E);R&&ae&&(f.rangeCount!==1||f.anchorNode!==R.node||f.anchorOffset!==R.offset||f.focusNode!==ae.node||f.focusOffset!==ae.offset)&&(m=m.createRange(),m.setStart(R.node,R.offset),f.removeAllRanges(),q>E?(f.addRange(m),f.extend(ae.node,ae.offset)):(m.setEnd(ae.node,ae.offset),f.addRange(m)))}}for(m=[],f=w;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)f=m[w],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var yf=a&&"documentMode"in document&&11>=document.documentMode,wi=null,Wo=null,qn=null,ir=!1;function Ir(f,m,w){var E=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ir||wi==null||wi!==qe(E)||(E=wi,"selectionStart"in E&&Ja(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),qn&&lo(qn,E)||(qn=E,E=Xh(Wo,"onSelect"),0<E.length&&(m=new Ll("onSelect","select",null,m,w),f.push({event:m,listeners:E}),m.target=wi)))}function Rr(f,m){var w={};return w[f.toLowerCase()]=m.toLowerCase(),w["Webkit"+f]="webkit"+m,w["Moz"+f]="moz"+m,w}var gs={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionend:Rr("Transition","TransitionEnd")},wa={},Dc={};a&&(Dc=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Oc(f){if(wa[f])return wa[f];if(!gs[f])return f;var m=gs[f],w;for(w in m)if(m.hasOwnProperty(w)&&w in Dc)return wa[f]=m[w];return f}var B0=Oc("animationend"),U0=Oc("animationiteration"),$0=Oc("animationstart"),W0=Oc("transitionend"),V0=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ba(f,m){V0.set(f,m),s(m,[f])}for(var Fu=0;Fu<H0.length;Fu++){var Xi=H0[Fu],uo=Xi.toLowerCase(),Gh=Xi[0].toUpperCase()+Xi.slice(1);ba(uo,"on"+Gh)}ba(B0,"onAnimationEnd"),ba(U0,"onAnimationIteration"),ba($0,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(W0,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function xf(f,m,w){var E=f.type||"unknown-event";f.currentTarget=w,we(E,m,void 0,f),f.currentTarget=null}function vf(f,m){m=(m&4)!==0;for(var w=0;w<f.length;w++){var E=f[w],R=E.event;E=E.listeners;e:{var q=void 0;if(m)for(var ae=E.length-1;0<=ae;ae--){var Se=E[ae],Ae=Se.instance,Je=Se.currentTarget;if(Se=Se.listener,Ae!==q&&R.isPropagationStopped())break e;xf(R,Se,Je),q=Ae}else for(ae=0;ae<E.length;ae++){if(Se=E[ae],Ae=Se.instance,Je=Se.currentTarget,Se=Se.listener,Ae!==q&&R.isPropagationStopped())break e;xf(R,Se,Je),q=Ae}}}if(re)throw f=ye,re=!1,ye=null,f}function cr(f,m){var w=m[xs];w===void 0&&(w=m[xs]=new Set);var E=f+"__bubble";w.has(E)||(wf(m,f,2,!1),w.add(E))}function Kh(f,m,w){var E=0;m&&(E|=4),wf(w,f,E,m)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Lc(f){if(!f[zu]){f[zu]=!0,r.forEach(function(w){w!=="selectionchange"&&(C1.has(w)||Kh(w,!1,f),Kh(w,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[zu]||(m[zu]=!0,Kh("selectionchange",!1,m))}}function wf(f,m,w,E){switch(uf(m)){case 1:var R=kc;break;case 4:R=cf;break;default:R=Dl}w=R.bind(null,m,w,f),R=void 0,!pe||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(R=!0),E?R!==void 0?f.addEventListener(m,w,{capture:!0,passive:R}):f.addEventListener(m,w,!0):R!==void 0?f.addEventListener(m,w,{passive:R}):f.addEventListener(m,w,!1)}function bf(f,m,w,E,R){var q=E;if((m&1)===0&&(m&2)===0&&E!==null)e:for(;;){if(E===null)return;var ae=E.tag;if(ae===3||ae===4){var Se=E.stateNode.containerInfo;if(Se===R||Se.nodeType===8&&Se.parentNode===R)break;if(ae===4)for(ae=E.return;ae!==null;){var Ae=ae.tag;if((Ae===3||Ae===4)&&(Ae=ae.stateNode.containerInfo,Ae===R||Ae.nodeType===8&&Ae.parentNode===R))return;ae=ae.return}for(;Se!==null;){if(ae=Ul(Se),ae===null)return;if(Ae=ae.tag,Ae===5||Ae===6){E=q=ae;continue e}Se=Se.parentNode}}E=E.return}Sr(function(){var Je=q,ht=Fr(w),yt=[];e:{var ft=V0.get(f);if(ft!==void 0){var Ut=Ll,qt=f;switch(f){case"keypress":if(zo(w)===0)break e;case"keydown":case"keyup":Ut=vn;break;case"focusin":qt="focus",Ut=Ga;break;case"focusout":qt="blur",Ut=Ga;break;case"beforeblur":case"afterblur":Ut=Ga;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ut=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ut=z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ut=Mr;break;case B0:case U0:case $0:Ut=Il;break;case W0:Ut=Ci;break;case"scroll":Ut=df;break;case"wheel":Ut=Bo;break;case"copy":case"cut":case"paste":Ut=I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ut=Ln}var Kt=(m&4)!==0,si=!Kt&&f==="scroll",Ve=Kt?ft!==null?ft+"Capture":null:ft;Kt=[];for(var De=Je,Xe;De!==null;){Xe=De;var St=Xe.stateNode;if(Xe.tag===5&&St!==null&&(Xe=St,Ve!==null&&(St=jt(De,Ve),St!=null&&Kt.push(_f(De,St,Xe)))),si)break;De=De.return}0<Kt.length&&(ft=new Ut(ft,qt,null,w,ht),yt.push({event:ft,listeners:Kt}))}}if((m&7)===0){e:{if(ft=f==="mouseover"||f==="pointerover",Ut=f==="mouseout"||f==="pointerout",ft&&w!==yn&&(qt=w.relatedTarget||w.fromElement)&&(Ul(qt)||qt[Ei]))break e;if((Ut||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,Ut?(qt=w.relatedTarget||w.toElement,Ut=Je,qt=qt?Ul(qt):null,qt!==null&&(si=be(qt),qt!==si||qt.tag!==5&&qt.tag!==6)&&(qt=null)):(Ut=null,qt=Je),Ut!==qt)){if(Kt=Eu,St="onMouseLeave",Ve="onMouseEnter",De="mouse",(f==="pointerout"||f==="pointerover")&&(Kt=Ln,St="onPointerLeave",Ve="onPointerEnter",De="pointer"),si=Ut==null?ft:Rc(Ut),Xe=qt==null?ft:Rc(qt),ft=new Kt(St,De+"leave",Ut,w,ht),ft.target=si,ft.relatedTarget=Xe,St=null,Ul(ht)===Je&&(Kt=new Kt(Ve,De+"enter",qt,w,ht),Kt.target=Xe,Kt.relatedTarget=si,St=Kt),si=St,Ut&&qt)t:{for(Kt=Ut,Ve=qt,De=0,Xe=Kt;Xe;Xe=Mc(Xe))De++;for(Xe=0,St=Ve;St;St=Mc(St))Xe++;for(;0<De-Xe;)Kt=Mc(Kt),De--;for(;0<Xe-De;)Ve=Mc(Ve),Xe--;for(;De--;){if(Kt===Ve||Ve!==null&&Kt===Ve.alternate)break t;Kt=Mc(Kt),Ve=Mc(Ve)}Kt=null}else Kt=null;Ut!==null&&E1(yt,ft,Ut,Kt,!1),qt!==null&&si!==null&&E1(yt,si,qt,Kt,!0)}}e:{if(ft=Je?Rc(Je):window,Ut=ft.nodeName&&ft.nodeName.toLowerCase(),Ut==="select"||Ut==="input"&&ft.type==="file")var Yt=mf;else if(Mu(ft))if(qh)Yt=$o;else{Yt=Ya;var on=xa}else(Ut=ft.nodeName)&&Ut.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Yt=Iu);if(Yt&&(Yt=Yt(f,Je))){Gi(yt,Yt,w,ht);break e}on&&on(f,ft,Je),f==="focusout"&&(on=ft._wrapperState)&&on.controlled&&ft.type==="number"&&Le(ft,"number",ft.value)}switch(on=Je?Rc(Je):window,f){case"focusin":(Mu(on)||on.contentEditable==="true")&&(wi=on,Wo=Je,qn=null);break;case"focusout":qn=Wo=wi=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,Ir(yt,w,ht);break;case"selectionchange":if(yf)break;case"keydown":case"keyup":Ir(yt,w,ht)}var an;if(Uo)e:{switch(f){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else ti?Pu(f,w)&&(gn="onCompositionEnd"):f==="keydown"&&w.keyCode===229&&(gn="onCompositionStart");gn&&(Tu&&w.locale!=="ko"&&(ti||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&ti&&(an=Wh()):(Io=ht,Ro="value"in Io?Io.value:Io.textContent,ti=!0)),on=Xh(Je,gn),0<on.length&&(gn=new _e(gn,f,null,w,ht),yt.push({event:gn,listeners:on}),an?gn.data=an:(an=Tc(w),an!==null&&(gn.data=an)))),(an=pf?Du(f,w):Ou(f,w))&&(Je=Xh(Je,"onBeforeInput"),0<Je.length&&(ht=new _e("onBeforeInput","beforeinput",null,w,ht),yt.push({event:ht,listeners:Je}),ht.data=an))}vf(yt,m)})}function _f(f,m,w){return{instance:f,listener:m,currentTarget:w}}function Xh(f,m){for(var w=m+"Capture",E=[];f!==null;){var R=f,q=R.stateNode;R.tag===5&&q!==null&&(R=q,q=jt(f,w),q!=null&&E.unshift(_f(f,q,R)),q=jt(f,m),q!=null&&E.push(_f(f,q,R))),f=f.return}return E}function Mc(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function E1(f,m,w,E,R){for(var q=m._reactName,ae=[];w!==null&&w!==E;){var Se=w,Ae=Se.alternate,Je=Se.stateNode;if(Ae!==null&&Ae===E)break;Se.tag===5&&Je!==null&&(Se=Je,R?(Ae=jt(w,q),Ae!=null&&ae.unshift(_f(w,Ae,Se))):R||(Ae=jt(w,q),Ae!=null&&ae.push(_f(w,Ae,Se)))),w=w.return}ae.length!==0&&f.push({event:m,listeners:ae})}var A2=/\r\n?/g,T2=/\u0000|\uFFFD/g;function A1(f){return(typeof f=="string"?f:""+f).replace(A2,`
`).replace(T2,"")}function Yh(f,m,w){if(m=A1(m),A1(f)!==m&&w)throw Error(n(425))}function Bu(){}var Sf=null,Ic=null;function q0(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,T1=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,j2=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(f){return j1.resolve(null).then(f).catch(P2)}:G0;function P2(f){setTimeout(function(){throw f})}function K0(f,m){var w=m,E=0;do{var R=w.nextSibling;if(f.removeChild(w),R&&R.nodeType===8)if(w=R.data,w==="/$"){if(E===0){f.removeChild(R),Mo(m);return}E--}else w!=="$"&&w!=="$?"&&w!=="$!"||E++;w=R}while(w);Mo(m)}function Yi(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function fo(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var w=f.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return f;m--}else w==="/$"&&m++}f=f.previousSibling}return null}var ys=Math.random().toString(36).slice(2),_a="__reactFiber$"+ys,Uu="__reactProps$"+ys,Ei="__reactContainer$"+ys,xs="__reactEvents$"+ys,D2="__reactListeners$"+ys,O2="__reactHandles$"+ys;function Ul(f){var m=f[_a];if(m)return m;for(var w=f.parentNode;w;){if(m=w[Ei]||w[_a]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(f=fo(f);f!==null;){if(w=f[_a])return w;f=fo(f)}return m}f=w,w=f.parentNode}return null}function $u(f){return f=f[_a]||f[Ei],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Rc(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function kf(f){return f[Uu]||null}var X0=[],Za=-1;function Vo(f){return{current:f}}function Qn(f){0>Za||(f.current=X0[Za],X0[Za]=null,Za--)}function sr(f,m){Za++,X0[Za]=f.current,f.current=m}var $l={},bi=Vo($l),vs=Vo(!1),Fc=$l;function Wu(f,m){var w=f.type.contextTypes;if(!w)return $l;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===m)return E.__reactInternalMemoizedMaskedChildContext;var R={},q;for(q in w)R[q]=m[q];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=R),R}function ws(f){return f=f.childContextTypes,f!=null}function Jh(){Qn(vs),Qn(bi)}function P1(f,m,w){if(bi.current!==$l)throw Error(n(168));sr(bi,m),sr(vs,w)}function Y0(f,m,w){var E=f.stateNode;if(m=m.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var R in E)if(!(R in m))throw Error(n(108,ge(f)||"Unknown",R));return ee({},w,E)}function zc(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||$l,Fc=bi.current,sr(bi,f),sr(vs,vs.current),!0}function D1(f,m,w){var E=f.stateNode;if(!E)throw Error(n(169));w?(f=Y0(f,m,Fc),E.__reactInternalMemoizedMergedChildContext=f,Qn(vs),Qn(bi),sr(bi,f)):Qn(vs),sr(vs,w)}var Qa=null,Nf=!1,_=!1;function A(f){Qa===null?Qa=[f]:Qa.push(f)}function B(f){Nf=!0,A(f)}function X(){if(!_&&Qa!==null){_=!0;var f=0,m=Vn;try{var w=Qa;for(Vn=1;f<w.length;f++){var E=w[f];do E=E(!0);while(E!==null)}Qa=null,Nf=!1}catch(R){throw Qa!==null&&(Qa=Qa.slice(f+1)),ut(zn,X),R}finally{Vn=m,_=!1}}return null}var ie=[],oe=0,le=null,ce=0,ue=[],me=0,Ee=null,Fe=1,ze="";function Oe(f,m){ie[oe++]=ce,ie[oe++]=le,le=f,ce=m}function ot(f,m,w){ue[me++]=Fe,ue[me++]=ze,ue[me++]=Ee,Ee=f;var E=Fe;f=ze;var R=32-Nr(E)-1;E&=~(1<<R),w+=1;var q=32-Nr(m)+R;if(30<q){var ae=R-R%5;q=(E&(1<<ae)-1).toString(32),E>>=ae,R-=ae,Fe=1<<32-Nr(m)+R|w<<R|E,ze=q+f}else Fe=1<<q|w<<R|E,ze=f}function Ze(f){f.return!==null&&(Oe(f,1),ot(f,1,0))}function je(f){for(;f===le;)le=ie[--oe],ie[oe]=null,ce=ie[--oe],ie[oe]=null;for(;f===Ee;)Ee=ue[--me],ue[me]=null,ze=ue[--me],ue[me]=null,Fe=ue[--me],ue[me]=null}var Pe=null,rt=null,nt=!1,st=null;function Lt(f,m){var w=Aa(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=f,m=f.deletions,m===null?(f.deletions=[w],f.flags|=16):m.push(w)}function At(f,m){switch(f.tag){case 5:var w=f.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,Pe=f,rt=Yi(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,Pe=f,rt=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=Ee!==null?{id:Fe,overflow:ze}:null,f.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=Aa(18,null,null,0),w.stateNode=m,w.return=f,f.child=w,Pe=f,rt=null,!0):!1;default:return!1}}function en(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Tt(f){if(nt){var m=rt;if(m){var w=m;if(!At(f,m)){if(en(f))throw Error(n(418));m=Yi(w.nextSibling);var E=Pe;m&&At(f,m)?Lt(E,w):(f.flags=f.flags&-4097|2,nt=!1,Pe=f)}}else{if(en(f))throw Error(n(418));f.flags=f.flags&-4097|2,nt=!1,Pe=f}}}function Bn(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Pe=f}function Un(f){if(f!==Pe)return!1;if(!nt)return Bn(f),nt=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!q0(f.type,f.memoizedProps)),m&&(m=rt)){if(en(f))throw Mn(),Error(n(418));for(;m;)Lt(f,m),m=Yi(m.nextSibling)}if(Bn(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var w=f.data;if(w==="/$"){if(m===0){rt=Yi(f.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}f=f.nextSibling}rt=null}}else rt=Pe?Yi(f.stateNode.nextSibling):null;return!0}function Mn(){for(var f=rt;f;)f=Yi(f.nextSibling)}function _n(){rt=Pe=null,nt=!1}function er(f){st===null?st=[f]:st.push(f)}var or=T.ReactCurrentBatchConfig;function mn(f,m,w){if(f=w.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var E=w.stateNode}if(!E)throw Error(n(147,f));var R=E,q=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===q?m.ref:(m=function(ae){var Se=R.refs;ae===null?delete Se[q]:Se[q]=ae},m._stringRef=q,m)}if(typeof f!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,f))}return f}function Ar(f,m){throw f=Object.prototype.toString.call(m),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function Ji(f){var m=f._init;return m(f._payload)}function Br(f){function m(Ve,De){if(f){var Xe=Ve.deletions;Xe===null?(Ve.deletions=[De],Ve.flags|=16):Xe.push(De)}}function w(Ve,De){if(!f)return null;for(;De!==null;)m(Ve,De),De=De.sibling;return null}function E(Ve,De){for(Ve=new Map;De!==null;)De.key!==null?Ve.set(De.key,De):Ve.set(De.index,De),De=De.sibling;return Ve}function R(Ve,De){return Ve=td(Ve,De),Ve.index=0,Ve.sibling=null,Ve}function q(Ve,De,Xe){return Ve.index=Xe,f?(Xe=Ve.alternate,Xe!==null?(Xe=Xe.index,Xe<De?(Ve.flags|=2,De):Xe):(Ve.flags|=2,De)):(Ve.flags|=1048576,De)}function ae(Ve){return f&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Se(Ve,De,Xe,St){return De===null||De.tag!==6?(De=lw(Xe,Ve.mode,St),De.return=Ve,De):(De=R(De,Xe),De.return=Ve,De)}function Ae(Ve,De,Xe,St){var Yt=Xe.type;return Yt===C?ht(Ve,De,Xe.props.children,St,Xe.key):De!==null&&(De.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===U&&Ji(Yt)===De.type)?(St=R(De,Xe.props),St.ref=mn(Ve,De,Xe),St.return=Ve,St):(St=Z1(Xe.type,Xe.key,Xe.props,null,Ve.mode,St),St.ref=mn(Ve,De,Xe),St.return=Ve,St)}function Je(Ve,De,Xe,St){return De===null||De.tag!==4||De.stateNode.containerInfo!==Xe.containerInfo||De.stateNode.implementation!==Xe.implementation?(De=cw(Xe,Ve.mode,St),De.return=Ve,De):(De=R(De,Xe.children||[]),De.return=Ve,De)}function ht(Ve,De,Xe,St,Yt){return De===null||De.tag!==7?(De=Of(Xe,Ve.mode,St,Yt),De.return=Ve,De):(De=R(De,Xe),De.return=Ve,De)}function yt(Ve,De,Xe){if(typeof De=="string"&&De!==""||typeof De=="number")return De=lw(""+De,Ve.mode,Xe),De.return=Ve,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case j:return Xe=Z1(De.type,De.key,De.props,null,Ve.mode,Xe),Xe.ref=mn(Ve,null,De),Xe.return=Ve,Xe;case P:return De=cw(De,Ve.mode,Xe),De.return=Ve,De;case U:var St=De._init;return yt(Ve,St(De._payload),Xe)}if(ke(De)||Q(De))return De=Of(De,Ve.mode,Xe,null),De.return=Ve,De;Ar(Ve,De)}return null}function ft(Ve,De,Xe,St){var Yt=De!==null?De.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Yt!==null?null:Se(Ve,De,""+Xe,St);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case j:return Xe.key===Yt?Ae(Ve,De,Xe,St):null;case P:return Xe.key===Yt?Je(Ve,De,Xe,St):null;case U:return Yt=Xe._init,ft(Ve,De,Yt(Xe._payload),St)}if(ke(Xe)||Q(Xe))return Yt!==null?null:ht(Ve,De,Xe,St,null);Ar(Ve,Xe)}return null}function Ut(Ve,De,Xe,St,Yt){if(typeof St=="string"&&St!==""||typeof St=="number")return Ve=Ve.get(Xe)||null,Se(De,Ve,""+St,Yt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case j:return Ve=Ve.get(St.key===null?Xe:St.key)||null,Ae(De,Ve,St,Yt);case P:return Ve=Ve.get(St.key===null?Xe:St.key)||null,Je(De,Ve,St,Yt);case U:var on=St._init;return Ut(Ve,De,Xe,on(St._payload),Yt)}if(ke(St)||Q(St))return Ve=Ve.get(Xe)||null,ht(De,Ve,St,Yt,null);Ar(De,St)}return null}function qt(Ve,De,Xe,St){for(var Yt=null,on=null,an=De,gn=De=0,Pi=null;an!==null&&gn<Xe.length;gn++){an.index>gn?(Pi=an,an=null):Pi=an.sibling;var Xn=ft(Ve,an,Xe[gn],St);if(Xn===null){an===null&&(an=Pi);break}f&&an&&Xn.alternate===null&&m(Ve,an),De=q(Xn,De,gn),on===null?Yt=Xn:on.sibling=Xn,on=Xn,an=Pi}if(gn===Xe.length)return w(Ve,an),nt&&Oe(Ve,gn),Yt;if(an===null){for(;gn<Xe.length;gn++)an=yt(Ve,Xe[gn],St),an!==null&&(De=q(an,De,gn),on===null?Yt=an:on.sibling=an,on=an);return nt&&Oe(Ve,gn),Yt}for(an=E(Ve,an);gn<Xe.length;gn++)Pi=Ut(an,Ve,gn,Xe[gn],St),Pi!==null&&(f&&Pi.alternate!==null&&an.delete(Pi.key===null?gn:Pi.key),De=q(Pi,De,gn),on===null?Yt=Pi:on.sibling=Pi,on=Pi);return f&&an.forEach(function(nd){return m(Ve,nd)}),nt&&Oe(Ve,gn),Yt}function Kt(Ve,De,Xe,St){var Yt=Q(Xe);if(typeof Yt!="function")throw Error(n(150));if(Xe=Yt.call(Xe),Xe==null)throw Error(n(151));for(var on=Yt=null,an=De,gn=De=0,Pi=null,Xn=Xe.next();an!==null&&!Xn.done;gn++,Xn=Xe.next()){an.index>gn?(Pi=an,an=null):Pi=an.sibling;var nd=ft(Ve,an,Xn.value,St);if(nd===null){an===null&&(an=Pi);break}f&&an&&nd.alternate===null&&m(Ve,an),De=q(nd,De,gn),on===null?Yt=nd:on.sibling=nd,on=nd,an=Pi}if(Xn.done)return w(Ve,an),nt&&Oe(Ve,gn),Yt;if(an===null){for(;!Xn.done;gn++,Xn=Xe.next())Xn=yt(Ve,Xn.value,St),Xn!==null&&(De=q(Xn,De,gn),on===null?Yt=Xn:on.sibling=Xn,on=Xn);return nt&&Oe(Ve,gn),Yt}for(an=E(Ve,an);!Xn.done;gn++,Xn=Xe.next())Xn=Ut(an,Ve,gn,Xn.value,St),Xn!==null&&(f&&Xn.alternate!==null&&an.delete(Xn.key===null?gn:Xn.key),De=q(Xn,De,gn),on===null?Yt=Xn:on.sibling=Xn,on=Xn);return f&&an.forEach(function(zF){return m(Ve,zF)}),nt&&Oe(Ve,gn),Yt}function si(Ve,De,Xe,St){if(typeof Xe=="object"&&Xe!==null&&Xe.type===C&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case j:e:{for(var Yt=Xe.key,on=De;on!==null;){if(on.key===Yt){if(Yt=Xe.type,Yt===C){if(on.tag===7){w(Ve,on.sibling),De=R(on,Xe.props.children),De.return=Ve,Ve=De;break e}}else if(on.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===U&&Ji(Yt)===on.type){w(Ve,on.sibling),De=R(on,Xe.props),De.ref=mn(Ve,on,Xe),De.return=Ve,Ve=De;break e}w(Ve,on);break}else m(Ve,on);on=on.sibling}Xe.type===C?(De=Of(Xe.props.children,Ve.mode,St,Xe.key),De.return=Ve,Ve=De):(St=Z1(Xe.type,Xe.key,Xe.props,null,Ve.mode,St),St.ref=mn(Ve,De,Xe),St.return=Ve,Ve=St)}return ae(Ve);case P:e:{for(on=Xe.key;De!==null;){if(De.key===on)if(De.tag===4&&De.stateNode.containerInfo===Xe.containerInfo&&De.stateNode.implementation===Xe.implementation){w(Ve,De.sibling),De=R(De,Xe.children||[]),De.return=Ve,Ve=De;break e}else{w(Ve,De);break}else m(Ve,De);De=De.sibling}De=cw(Xe,Ve.mode,St),De.return=Ve,Ve=De}return ae(Ve);case U:return on=Xe._init,si(Ve,De,on(Xe._payload),St)}if(ke(Xe))return qt(Ve,De,Xe,St);if(Q(Xe))return Kt(Ve,De,Xe,St);Ar(Ve,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,De!==null&&De.tag===6?(w(Ve,De.sibling),De=R(De,Xe),De.return=Ve,Ve=De):(w(Ve,De),De=lw(Xe,Ve.mode,St),De.return=Ve,Ve=De),ae(Ve)):w(Ve,De)}return si}var ni=Br(!0),Gn=Br(!1),Ai=Vo(null),Ti=null,Tr=null,ri=null;function _i(){ri=Tr=Ti=null}function bs(f){var m=Ai.current;Qn(Ai),f._currentValue=m}function ho(f,m,w){for(;f!==null;){var E=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),f===w)break;f=f.return}}function jr(f,m){Ti=f,ri=Tr=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(yo=!0),f.firstContext=null)}function qr(f){var m=f._currentValue;if(ri!==f)if(f={context:f,memoizedValue:m,next:null},Tr===null){if(Ti===null)throw Error(n(308));Tr=f,Ti.dependencies={lanes:0,firstContext:f}}else Tr=Tr.next=f;return m}var Vs=null;function Wl(f){Vs===null?Vs=[f]:Vs.push(f)}function el(f,m,w,E){var R=m.interleaved;return R===null?(w.next=w,Wl(m)):(w.next=R.next,R.next=w),m.interleaved=w,Kn(f,E)}function Kn(f,m){f.lanes|=m;var w=f.alternate;for(w!==null&&(w.lanes|=m),w=f,f=f.return;f!==null;)f.childLanes|=m,w=f.alternate,w!==null&&(w.childLanes|=m),w=f,f=f.return;return w.tag===3?w.stateNode:null}var Sa=!1;function Zh(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J0(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function po(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function mo(f,m,w){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(Hn&2)!==0){var R=E.pending;return R===null?m.next=m:(m.next=R.next,R.next=m),E.pending=m,Kn(f,w)}return R=E.interleaved,R===null?(m.next=m,Wl(E)):(m.next=R.next,R.next=m),E.interleaved=m,Kn(f,w)}function Bc(f,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var E=m.lanes;E&=f.pendingLanes,w|=E,m.lanes=w,xu(f,w)}}function go(f,m){var w=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var R=null,q=null;if(w=w.firstBaseUpdate,w!==null){do{var ae={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};q===null?R=q=ae:q=q.next=ae,w=w.next}while(w!==null);q===null?R=q=m:q=q.next=m}else R=q=m;w={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:q,shared:E.shared,effects:E.effects},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=m:f.next=m,w.lastBaseUpdate=m}function tl(f,m,w,E){var R=f.updateQueue;Sa=!1;var q=R.firstBaseUpdate,ae=R.lastBaseUpdate,Se=R.shared.pending;if(Se!==null){R.shared.pending=null;var Ae=Se,Je=Ae.next;Ae.next=null,ae===null?q=Je:ae.next=Je,ae=Ae;var ht=f.alternate;ht!==null&&(ht=ht.updateQueue,Se=ht.lastBaseUpdate,Se!==ae&&(Se===null?ht.firstBaseUpdate=Je:Se.next=Je,ht.lastBaseUpdate=Ae))}if(q!==null){var yt=R.baseState;ae=0,ht=Je=Ae=null,Se=q;do{var ft=Se.lane,Ut=Se.eventTime;if((E&ft)===ft){ht!==null&&(ht=ht.next={eventTime:Ut,lane:0,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null});e:{var qt=f,Kt=Se;switch(ft=m,Ut=w,Kt.tag){case 1:if(qt=Kt.payload,typeof qt=="function"){yt=qt.call(Ut,yt,ft);break e}yt=qt;break e;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=Kt.payload,ft=typeof qt=="function"?qt.call(Ut,yt,ft):qt,ft==null)break e;yt=ee({},yt,ft);break e;case 2:Sa=!0}}Se.callback!==null&&Se.lane!==0&&(f.flags|=64,ft=R.effects,ft===null?R.effects=[Se]:ft.push(Se))}else Ut={eventTime:Ut,lane:ft,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},ht===null?(Je=ht=Ut,Ae=yt):ht=ht.next=Ut,ae|=ft;if(Se=Se.next,Se===null){if(Se=R.shared.pending,Se===null)break;ft=Se,Se=ft.next,ft.next=null,R.lastBaseUpdate=ft,R.shared.pending=null}}while(!0);if(ht===null&&(Ae=yt),R.baseState=Ae,R.firstBaseUpdate=Je,R.lastBaseUpdate=ht,m=R.shared.interleaved,m!==null){R=m;do ae|=R.lane,R=R.next;while(R!==m)}else q===null&&(R.shared.lanes=0);Tf|=ae,f.lanes=ae,f.memoizedState=yt}}function Uc(f,m,w){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var E=f[m],R=E.callback;if(R!==null){if(E.callback=null,E=w,typeof R!="function")throw Error(n(191,R));R.call(E)}}}var Vu={},Hs=Vo(Vu),Hu=Vo(Vu),Vl=Vo(Vu);function nl(f){if(f===Vu)throw Error(n(174));return f}function qu(f,m){switch(sr(Vl,m),sr(Hu,f),sr(Hs,Vu),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Xt(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=Xt(m,f)}Qn(Hs),sr(Hs,m)}function ka(){Qn(Hs),Qn(Hu),Qn(Vl)}function O1(f){nl(Vl.current);var m=nl(Hs.current),w=Xt(m,f.type);m!==w&&(sr(Hu,f),sr(Hs,w))}function Z0(f){Hu.current===f&&(Qn(Hs),Qn(Hu))}var gr=Vo(0);function Ho(f){for(var m=f;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Q0=[];function em(){for(var f=0;f<Q0.length;f++)Q0[f]._workInProgressVersionPrimary=null;Q0.length=0}var Qh=T.ReactCurrentDispatcher,ep=T.ReactCurrentBatchConfig,Na=0,wr=null,Gr=null,Ur=null,Gu=!1,rl=!1,Ku=0,L2=0;function ii(){throw Error(n(321))}function tp(f,m){if(m===null)return!1;for(var w=0;w<m.length&&w<f.length;w++)if(!Ki(f[w],m[w]))return!1;return!0}function Cf(f,m,w,E,R,q){if(Na=q,wr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Qh.current=f===null||f.memoizedState===null?dF:fF,f=w(E,R),rl){q=0;do{if(rl=!1,Ku=0,25<=q)throw Error(n(301));q+=1,Ur=Gr=null,m.updateQueue=null,Qh.current=hF,f=w(E,R)}while(rl)}if(Qh.current=F1,m=Gr!==null&&Gr.next!==null,Na=0,Ur=Gr=wr=null,Gu=!1,m)throw Error(n(300));return f}function Ca(){var f=Ku!==0;return Ku=0,f}function qo(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?wr.memoizedState=Ur=f:Ur=Ur.next=f,Ur}function qs(){if(Gr===null){var f=wr.alternate;f=f!==null?f.memoizedState:null}else f=Gr.next;var m=Ur===null?wr.memoizedState:Ur.next;if(m!==null)Ur=m,Gr=f;else{if(f===null)throw Error(n(310));Gr=f,f={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},Ur===null?wr.memoizedState=Ur=f:Ur=Ur.next=f}return Ur}function Ef(f,m){return typeof m=="function"?m(f):m}function np(f){var m=qs(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=f;var E=Gr,R=E.baseQueue,q=w.pending;if(q!==null){if(R!==null){var ae=R.next;R.next=q.next,q.next=ae}E.baseQueue=R=q,w.pending=null}if(R!==null){q=R.next,E=E.baseState;var Se=ae=null,Ae=null,Je=q;do{var ht=Je.lane;if((Na&ht)===ht)Ae!==null&&(Ae=Ae.next={lane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),E=Je.hasEagerState?Je.eagerState:f(E,Je.action);else{var yt={lane:ht,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null};Ae===null?(Se=Ae=yt,ae=E):Ae=Ae.next=yt,wr.lanes|=ht,Tf|=ht}Je=Je.next}while(Je!==null&&Je!==q);Ae===null?ae=E:Ae.next=Se,Ki(E,m.memoizedState)||(yo=!0),m.memoizedState=E,m.baseState=ae,m.baseQueue=Ae,w.lastRenderedState=E}if(f=w.interleaved,f!==null){R=f;do q=R.lane,wr.lanes|=q,Tf|=q,R=R.next;while(R!==f)}else R===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function Hl(f){var m=qs(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=f;var E=w.dispatch,R=w.pending,q=m.memoizedState;if(R!==null){w.pending=null;var ae=R=R.next;do q=f(q,ae.action),ae=ae.next;while(ae!==R);Ki(q,m.memoizedState)||(yo=!0),m.memoizedState=q,m.baseQueue===null&&(m.baseState=q),w.lastRenderedState=q}return[q,E]}function L1(){}function tm(f,m){var w=wr,E=qs(),R=m(),q=!Ki(E.memoizedState,R);if(q&&(E.memoizedState=R,yo=!0),E=E.queue,sp(I1.bind(null,w,E,f),[f]),E.getSnapshot!==m||q||Ur!==null&&Ur.memoizedState.tag&1){if(w.flags|=2048,Gs(9,nm.bind(null,w,E,R,m),void 0,null),ji===null)throw Error(n(349));(Na&30)!==0||M1(w,m,R)}return R}function M1(f,m,w){f.flags|=16384,f={getSnapshot:m,value:w},m=wr.updateQueue,m===null?(m={lastEffect:null,stores:null},wr.updateQueue=m,m.stores=[f]):(w=m.stores,w===null?m.stores=[f]:w.push(f))}function nm(f,m,w,E){m.value=w,m.getSnapshot=E,Xu(m)&&rp(f)}function I1(f,m,w){return w(function(){Xu(m)&&rp(f)})}function Xu(f){var m=f.getSnapshot;f=f.value;try{var w=m();return!Ki(f,w)}catch{return!0}}function rp(f){var m=Kn(f,1);m!==null&&ll(m,f,1,-1)}function Af(f){var m=qo();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:f},m.queue=f,f=f.dispatch=uF.bind(null,wr,f),[m.memoizedState,f]}function Gs(f,m,w,E){return f={tag:f,create:m,destroy:w,deps:E,next:null},m=wr.updateQueue,m===null?(m={lastEffect:null,stores:null},wr.updateQueue=m,m.lastEffect=f.next=f):(w=m.lastEffect,w===null?m.lastEffect=f.next=f:(E=w.next,w.next=f,f.next=E,m.lastEffect=f)),f}function il(){return qs().memoizedState}function Go(f,m,w,E){var R=qo();wr.flags|=f,R.memoizedState=Gs(1|m,w,void 0,E===void 0?null:E)}function $c(f,m,w,E){var R=qs();E=E===void 0?null:E;var q=void 0;if(Gr!==null){var ae=Gr.memoizedState;if(q=ae.destroy,E!==null&&tp(E,ae.deps)){R.memoizedState=Gs(m,w,q,E);return}}wr.flags|=f,R.memoizedState=Gs(1|m,w,q,E)}function ip(f,m){return Go(8390656,8,f,m)}function sp(f,m){return $c(2048,8,f,m)}function R1(f,m){return $c(4,2,f,m)}function op(f,m){return $c(4,4,f,m)}function ap(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function Tk(f,m,w){return w=w!=null?w.concat([f]):null,$c(4,4,ap.bind(null,m,f),w)}function M2(){}function jk(f,m){var w=qs();m=m===void 0?null:m;var E=w.memoizedState;return E!==null&&m!==null&&tp(m,E[1])?E[0]:(w.memoizedState=[f,m],f)}function Pk(f,m){var w=qs();m=m===void 0?null:m;var E=w.memoizedState;return E!==null&&m!==null&&tp(m,E[1])?E[0]:(f=f(),w.memoizedState=[f,m],f)}function Dk(f,m,w){return(Na&21)===0?(f.baseState&&(f.baseState=!1,yo=!0),f.memoizedState=w):(Ki(w,m)||(w=sf(),wr.lanes|=w,Tf|=w,f.baseState=!0),m)}function lF(f,m){var w=Vn;Vn=w!==0&&4>w?w:4,f(!0);var E=ep.transition;ep.transition={};try{f(!1),m()}finally{Vn=w,ep.transition=E}}function Ok(){return qs().memoizedState}function cF(f,m,w){var E=Qu(f);if(w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},Lk(f))Mk(m,w);else if(w=el(f,m,w,E),w!==null){var R=Xs();ll(w,f,E,R),Ik(w,m,E)}}function uF(f,m,w){var E=Qu(f),R={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(Lk(f))Mk(m,R);else{var q=f.alternate;if(f.lanes===0&&(q===null||q.lanes===0)&&(q=m.lastRenderedReducer,q!==null))try{var ae=m.lastRenderedState,Se=q(ae,w);if(R.hasEagerState=!0,R.eagerState=Se,Ki(Se,ae)){var Ae=m.interleaved;Ae===null?(R.next=R,Wl(m)):(R.next=Ae.next,Ae.next=R),m.interleaved=R;return}}catch{}finally{}w=el(f,m,R,E),w!==null&&(R=Xs(),ll(w,f,E,R),Ik(w,m,E))}}function Lk(f){var m=f.alternate;return f===wr||m!==null&&m===wr}function Mk(f,m){rl=Gu=!0;var w=f.pending;w===null?m.next=m:(m.next=w.next,w.next=m),f.pending=m}function Ik(f,m,w){if((w&4194240)!==0){var E=m.lanes;E&=f.pendingLanes,w|=E,m.lanes=w,xu(f,w)}}var F1={readContext:qr,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},dF={readContext:qr,useCallback:function(f,m){return qo().memoizedState=[f,m===void 0?null:m],f},useContext:qr,useEffect:ip,useImperativeHandle:function(f,m,w){return w=w!=null?w.concat([f]):null,Go(4194308,4,ap.bind(null,m,f),w)},useLayoutEffect:function(f,m){return Go(4194308,4,f,m)},useInsertionEffect:function(f,m){return Go(4,2,f,m)},useMemo:function(f,m){var w=qo();return m=m===void 0?null:m,f=f(),w.memoizedState=[f,m],f},useReducer:function(f,m,w){var E=qo();return m=w!==void 0?w(m):m,E.memoizedState=E.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},E.queue=f,f=f.dispatch=cF.bind(null,wr,f),[E.memoizedState,f]},useRef:function(f){var m=qo();return f={current:f},m.memoizedState=f},useState:Af,useDebugValue:M2,useDeferredValue:function(f){return qo().memoizedState=f},useTransition:function(){var f=Af(!1),m=f[0];return f=lF.bind(null,f[1]),qo().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,w){var E=wr,R=qo();if(nt){if(w===void 0)throw Error(n(407));w=w()}else{if(w=m(),ji===null)throw Error(n(349));(Na&30)!==0||M1(E,m,w)}R.memoizedState=w;var q={value:w,getSnapshot:m};return R.queue=q,ip(I1.bind(null,E,q,f),[f]),E.flags|=2048,Gs(9,nm.bind(null,E,q,w,m),void 0,null),w},useId:function(){var f=qo(),m=ji.identifierPrefix;if(nt){var w=ze,E=Fe;w=(E&~(1<<32-Nr(E)-1)).toString(32)+w,m=":"+m+"R"+w,w=Ku++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=L2++,m=":"+m+"r"+w.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},fF={readContext:qr,useCallback:jk,useContext:qr,useEffect:sp,useImperativeHandle:Tk,useInsertionEffect:R1,useLayoutEffect:op,useMemo:Pk,useReducer:np,useRef:il,useState:function(){return np(Ef)},useDebugValue:M2,useDeferredValue:function(f){var m=qs();return Dk(m,Gr.memoizedState,f)},useTransition:function(){var f=np(Ef)[0],m=qs().memoizedState;return[f,m]},useMutableSource:L1,useSyncExternalStore:tm,useId:Ok,unstable_isNewReconciler:!1},hF={readContext:qr,useCallback:jk,useContext:qr,useEffect:sp,useImperativeHandle:Tk,useInsertionEffect:R1,useLayoutEffect:op,useMemo:Pk,useReducer:Hl,useRef:il,useState:function(){return Hl(Ef)},useDebugValue:M2,useDeferredValue:function(f){var m=qs();return Gr===null?m.memoizedState=f:Dk(m,Gr.memoizedState,f)},useTransition:function(){var f=Hl(Ef)[0],m=qs().memoizedState;return[f,m]},useMutableSource:L1,useSyncExternalStore:tm,useId:Ok,unstable_isNewReconciler:!1};function sl(f,m){if(f&&f.defaultProps){m=ee({},m),f=f.defaultProps;for(var w in f)m[w]===void 0&&(m[w]=f[w]);return m}return m}function I2(f,m,w,E){m=f.memoizedState,w=w(E,m),w=w==null?m:ee({},m,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var z1={isMounted:function(f){return(f=f._reactInternals)?be(f)===f:!1},enqueueSetState:function(f,m,w){f=f._reactInternals;var E=Xs(),R=Qu(f),q=po(E,R);q.payload=m,w!=null&&(q.callback=w),m=mo(f,q,R),m!==null&&(ll(m,f,R,E),Bc(m,f,R))},enqueueReplaceState:function(f,m,w){f=f._reactInternals;var E=Xs(),R=Qu(f),q=po(E,R);q.tag=1,q.payload=m,w!=null&&(q.callback=w),m=mo(f,q,R),m!==null&&(ll(m,f,R,E),Bc(m,f,R))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var w=Xs(),E=Qu(f),R=po(w,E);R.tag=2,m!=null&&(R.callback=m),m=mo(f,R,E),m!==null&&(ll(m,f,E,w),Bc(m,f,E))}};function Rk(f,m,w,E,R,q,ae){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,q,ae):m.prototype&&m.prototype.isPureReactComponent?!lo(w,E)||!lo(R,q):!0}function Fk(f,m,w){var E=!1,R=$l,q=m.contextType;return typeof q=="object"&&q!==null?q=qr(q):(R=ws(m)?Fc:bi.current,E=m.contextTypes,q=(E=E!=null)?Wu(f,R):$l),m=new m(w,q),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=z1,f.stateNode=m,m._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=R,f.__reactInternalMemoizedMaskedChildContext=q),m}function zk(f,m,w,E){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,E),m.state!==f&&z1.enqueueReplaceState(m,m.state,null)}function R2(f,m,w,E){var R=f.stateNode;R.props=w,R.state=f.memoizedState,R.refs={},Zh(f);var q=m.contextType;typeof q=="object"&&q!==null?R.context=qr(q):(q=ws(m)?Fc:bi.current,R.context=Wu(f,q)),R.state=f.memoizedState,q=m.getDerivedStateFromProps,typeof q=="function"&&(I2(f,m,q,w),R.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(m=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),m!==R.state&&z1.enqueueReplaceState(R,R.state,null),tl(f,w,R,E),R.state=f.memoizedState),typeof R.componentDidMount=="function"&&(f.flags|=4194308)}function lp(f,m){try{var w="",E=m;do w+=H(E),E=E.return;while(E);var R=w}catch(q){R=`
Error generating stack: `+q.message+`
`+q.stack}return{value:f,source:m,stack:R,digest:null}}function F2(f,m,w){return{value:f,source:null,stack:w??null,digest:m??null}}function z2(f,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var pF=typeof WeakMap=="function"?WeakMap:Map;function Bk(f,m,w){w=po(-1,w),w.tag=3,w.payload={element:null};var E=m.value;return w.callback=function(){q1||(q1=!0,ew=E),z2(f,m)},w}function Uk(f,m,w){w=po(-1,w),w.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var R=m.value;w.payload=function(){return E(R)},w.callback=function(){z2(f,m)}}var q=f.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(w.callback=function(){z2(f,m),typeof E!="function"&&(Ju===null?Ju=new Set([this]):Ju.add(this));var ae=m.stack;this.componentDidCatch(m.value,{componentStack:ae!==null?ae:""})}),w}function $k(f,m,w){var E=f.pingCache;if(E===null){E=f.pingCache=new pF;var R=new Set;E.set(m,R)}else R=E.get(m),R===void 0&&(R=new Set,E.set(m,R));R.has(w)||(R.add(w),f=AF.bind(null,f,m,w),m.then(f,f))}function Wk(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function Vk(f,m,w,E,R){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=po(-1,1),m.tag=2,mo(w,m,1))),w.lanes|=1),f):(f.flags|=65536,f.lanes=R,f)}var mF=T.ReactCurrentOwner,yo=!1;function Ks(f,m,w,E){m.child=f===null?Gn(m,null,w,E):ni(m,f.child,w,E)}function Hk(f,m,w,E,R){w=w.render;var q=m.ref;return jr(m,R),E=Cf(f,m,w,E,q,R),w=Ca(),f!==null&&!yo?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~R,Wc(f,m,R)):(nt&&w&&Ze(m),m.flags|=1,Ks(f,m,E,R),m.child)}function qk(f,m,w,E,R){if(f===null){var q=w.type;return typeof q=="function"&&!aw(q)&&q.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=q,Gk(f,m,q,E,R)):(f=Z1(w.type,null,E,m,m.mode,R),f.ref=m.ref,f.return=m,m.child=f)}if(q=f.child,(f.lanes&R)===0){var ae=q.memoizedProps;if(w=w.compare,w=w!==null?w:lo,w(ae,E)&&f.ref===m.ref)return Wc(f,m,R)}return m.flags|=1,f=td(q,E),f.ref=m.ref,f.return=m,m.child=f}function Gk(f,m,w,E,R){if(f!==null){var q=f.memoizedProps;if(lo(q,E)&&f.ref===m.ref)if(yo=!1,m.pendingProps=E=q,(f.lanes&R)!==0)(f.flags&131072)!==0&&(yo=!0);else return m.lanes=f.lanes,Wc(f,m,R)}return B2(f,m,w,E,R)}function Kk(f,m,w){var E=m.pendingProps,R=E.children,q=f!==null?f.memoizedState:null;if(E.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(up,Ko),Ko|=w;else{if((w&1073741824)===0)return f=q!==null?q.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,sr(up,Ko),Ko|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=q!==null?q.baseLanes:w,sr(up,Ko),Ko|=E}else q!==null?(E=q.baseLanes|w,m.memoizedState=null):E=w,sr(up,Ko),Ko|=E;return Ks(f,m,R,w),m.child}function Xk(f,m){var w=m.ref;(f===null&&w!==null||f!==null&&f.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function B2(f,m,w,E,R){var q=ws(w)?Fc:bi.current;return q=Wu(m,q),jr(m,R),w=Cf(f,m,w,E,q,R),E=Ca(),f!==null&&!yo?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~R,Wc(f,m,R)):(nt&&E&&Ze(m),m.flags|=1,Ks(f,m,w,R),m.child)}function Yk(f,m,w,E,R){if(ws(w)){var q=!0;zc(m)}else q=!1;if(jr(m,R),m.stateNode===null)U1(f,m),Fk(m,w,E),R2(m,w,E,R),E=!0;else if(f===null){var ae=m.stateNode,Se=m.memoizedProps;ae.props=Se;var Ae=ae.context,Je=w.contextType;typeof Je=="object"&&Je!==null?Je=qr(Je):(Je=ws(w)?Fc:bi.current,Je=Wu(m,Je));var ht=w.getDerivedStateFromProps,yt=typeof ht=="function"||typeof ae.getSnapshotBeforeUpdate=="function";yt||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Se!==E||Ae!==Je)&&zk(m,ae,E,Je),Sa=!1;var ft=m.memoizedState;ae.state=ft,tl(m,E,ae,R),Ae=m.memoizedState,Se!==E||ft!==Ae||vs.current||Sa?(typeof ht=="function"&&(I2(m,w,ht,E),Ae=m.memoizedState),(Se=Sa||Rk(m,w,Se,E,ft,Ae,Je))?(yt||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=Ae),ae.props=E,ae.state=Ae,ae.context=Je,E=Se):(typeof ae.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{ae=m.stateNode,J0(f,m),Se=m.memoizedProps,Je=m.type===m.elementType?Se:sl(m.type,Se),ae.props=Je,yt=m.pendingProps,ft=ae.context,Ae=w.contextType,typeof Ae=="object"&&Ae!==null?Ae=qr(Ae):(Ae=ws(w)?Fc:bi.current,Ae=Wu(m,Ae));var Ut=w.getDerivedStateFromProps;(ht=typeof Ut=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Se!==yt||ft!==Ae)&&zk(m,ae,E,Ae),Sa=!1,ft=m.memoizedState,ae.state=ft,tl(m,E,ae,R);var qt=m.memoizedState;Se!==yt||ft!==qt||vs.current||Sa?(typeof Ut=="function"&&(I2(m,w,Ut,E),qt=m.memoizedState),(Je=Sa||Rk(m,w,Je,E,ft,qt,Ae)||!1)?(ht||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(E,qt,Ae),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(E,qt,Ae)),typeof ae.componentDidUpdate=="function"&&(m.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ae.componentDidUpdate!="function"||Se===f.memoizedProps&&ft===f.memoizedState||(m.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Se===f.memoizedProps&&ft===f.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=qt),ae.props=E,ae.state=qt,ae.context=Ae,E=Je):(typeof ae.componentDidUpdate!="function"||Se===f.memoizedProps&&ft===f.memoizedState||(m.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Se===f.memoizedProps&&ft===f.memoizedState||(m.flags|=1024),E=!1)}return U2(f,m,w,E,q,R)}function U2(f,m,w,E,R,q){Xk(f,m);var ae=(m.flags&128)!==0;if(!E&&!ae)return R&&D1(m,w,!1),Wc(f,m,q);E=m.stateNode,mF.current=m;var Se=ae&&typeof w.getDerivedStateFromError!="function"?null:E.render();return m.flags|=1,f!==null&&ae?(m.child=ni(m,f.child,null,q),m.child=ni(m,null,Se,q)):Ks(f,m,Se,q),m.memoizedState=E.state,R&&D1(m,w,!0),m.child}function Jk(f){var m=f.stateNode;m.pendingContext?P1(f,m.pendingContext,m.pendingContext!==m.context):m.context&&P1(f,m.context,!1),qu(f,m.containerInfo)}function Zk(f,m,w,E,R){return _n(),er(R),m.flags|=256,Ks(f,m,w,E),m.child}var $2={dehydrated:null,treeContext:null,retryLane:0};function W2(f){return{baseLanes:f,cachePool:null,transitions:null}}function Qk(f,m,w){var E=m.pendingProps,R=gr.current,q=!1,ae=(m.flags&128)!==0,Se;if((Se=ae)||(Se=f!==null&&f.memoizedState===null?!1:(R&2)!==0),Se?(q=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(R|=1),sr(gr,R&1),f===null)return Tt(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(ae=E.children,f=E.fallback,q?(E=m.mode,q=m.child,ae={mode:"hidden",children:ae},(E&1)===0&&q!==null?(q.childLanes=0,q.pendingProps=ae):q=Q1(ae,E,0,null),f=Of(f,E,w,null),q.return=m,f.return=m,q.sibling=f,m.child=q,m.child.memoizedState=W2(w),m.memoizedState=$2,f):V2(m,ae));if(R=f.memoizedState,R!==null&&(Se=R.dehydrated,Se!==null))return gF(f,m,ae,E,Se,R,w);if(q){q=E.fallback,ae=m.mode,R=f.child,Se=R.sibling;var Ae={mode:"hidden",children:E.children};return(ae&1)===0&&m.child!==R?(E=m.child,E.childLanes=0,E.pendingProps=Ae,m.deletions=null):(E=td(R,Ae),E.subtreeFlags=R.subtreeFlags&14680064),Se!==null?q=td(Se,q):(q=Of(q,ae,w,null),q.flags|=2),q.return=m,E.return=m,E.sibling=q,m.child=E,E=q,q=m.child,ae=f.child.memoizedState,ae=ae===null?W2(w):{baseLanes:ae.baseLanes|w,cachePool:null,transitions:ae.transitions},q.memoizedState=ae,q.childLanes=f.childLanes&~w,m.memoizedState=$2,E}return q=f.child,f=q.sibling,E=td(q,{mode:"visible",children:E.children}),(m.mode&1)===0&&(E.lanes=w),E.return=m,E.sibling=null,f!==null&&(w=m.deletions,w===null?(m.deletions=[f],m.flags|=16):w.push(f)),m.child=E,m.memoizedState=null,E}function V2(f,m){return m=Q1({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function B1(f,m,w,E){return E!==null&&er(E),ni(m,f.child,null,w),f=V2(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function gF(f,m,w,E,R,q,ae){if(w)return m.flags&256?(m.flags&=-257,E=F2(Error(n(422))),B1(f,m,ae,E)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(q=E.fallback,R=m.mode,E=Q1({mode:"visible",children:E.children},R,0,null),q=Of(q,R,ae,null),q.flags|=2,E.return=m,q.return=m,E.sibling=q,m.child=E,(m.mode&1)!==0&&ni(m,f.child,null,ae),m.child.memoizedState=W2(ae),m.memoizedState=$2,q);if((m.mode&1)===0)return B1(f,m,ae,null);if(R.data==="$!"){if(E=R.nextSibling&&R.nextSibling.dataset,E)var Se=E.dgst;return E=Se,q=Error(n(419)),E=F2(q,E,void 0),B1(f,m,ae,E)}if(Se=(ae&f.childLanes)!==0,yo||Se){if(E=ji,E!==null){switch(ae&-ae){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(E.suspendedLanes|ae))!==0?0:R,R!==0&&R!==q.retryLane&&(q.retryLane=R,Kn(f,R),ll(E,f,R,-1))}return ow(),E=F2(Error(n(421))),B1(f,m,ae,E)}return R.data==="$?"?(m.flags|=128,m.child=f.child,m=TF.bind(null,f),R._reactRetry=m,null):(f=q.treeContext,rt=Yi(R.nextSibling),Pe=m,nt=!0,st=null,f!==null&&(ue[me++]=Fe,ue[me++]=ze,ue[me++]=Ee,Fe=f.id,ze=f.overflow,Ee=m),m=V2(m,E.children),m.flags|=4096,m)}function eN(f,m,w){f.lanes|=m;var E=f.alternate;E!==null&&(E.lanes|=m),ho(f.return,m,w)}function H2(f,m,w,E,R){var q=f.memoizedState;q===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:R}:(q.isBackwards=m,q.rendering=null,q.renderingStartTime=0,q.last=E,q.tail=w,q.tailMode=R)}function tN(f,m,w){var E=m.pendingProps,R=E.revealOrder,q=E.tail;if(Ks(f,m,E.children,w),E=gr.current,(E&2)!==0)E=E&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&eN(f,w,m);else if(f.tag===19)eN(f,w,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(sr(gr,E),(m.mode&1)===0)m.memoizedState=null;else switch(R){case"forwards":for(w=m.child,R=null;w!==null;)f=w.alternate,f!==null&&Ho(f)===null&&(R=w),w=w.sibling;w=R,w===null?(R=m.child,m.child=null):(R=w.sibling,w.sibling=null),H2(m,!1,R,w,q);break;case"backwards":for(w=null,R=m.child,m.child=null;R!==null;){if(f=R.alternate,f!==null&&Ho(f)===null){m.child=R;break}f=R.sibling,R.sibling=w,w=R,R=f}H2(m,!0,w,null,q);break;case"together":H2(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function U1(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function Wc(f,m,w){if(f!==null&&(m.dependencies=f.dependencies),Tf|=m.lanes,(w&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(n(153));if(m.child!==null){for(f=m.child,w=td(f,f.pendingProps),m.child=w,w.return=m;f.sibling!==null;)f=f.sibling,w=w.sibling=td(f,f.pendingProps),w.return=m;w.sibling=null}return m.child}function yF(f,m,w){switch(m.tag){case 3:Jk(m),_n();break;case 5:O1(m);break;case 1:ws(m.type)&&zc(m);break;case 4:qu(m,m.stateNode.containerInfo);break;case 10:var E=m.type._context,R=m.memoizedProps.value;sr(Ai,E._currentValue),E._currentValue=R;break;case 13:if(E=m.memoizedState,E!==null)return E.dehydrated!==null?(sr(gr,gr.current&1),m.flags|=128,null):(w&m.child.childLanes)!==0?Qk(f,m,w):(sr(gr,gr.current&1),f=Wc(f,m,w),f!==null?f.sibling:null);sr(gr,gr.current&1);break;case 19:if(E=(w&m.childLanes)!==0,(f.flags&128)!==0){if(E)return tN(f,m,w);m.flags|=128}if(R=m.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),sr(gr,gr.current),E)break;return null;case 22:case 23:return m.lanes=0,Kk(f,m,w)}return Wc(f,m,w)}var nN,q2,rN,iN;nN=function(f,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)f.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},q2=function(){},rN=function(f,m,w,E){var R=f.memoizedProps;if(R!==E){f=m.stateNode,nl(Hs.current);var q=null;switch(w){case"input":R=Be(f,R),E=Be(f,E),q=[];break;case"select":R=ee({},R,{value:void 0}),E=ee({},E,{value:void 0}),q=[];break;case"textarea":R=at(f,R),E=at(f,E),q=[];break;default:typeof R.onClick!="function"&&typeof E.onClick=="function"&&(f.onclick=Bu)}jn(w,E);var ae;w=null;for(Je in R)if(!E.hasOwnProperty(Je)&&R.hasOwnProperty(Je)&&R[Je]!=null)if(Je==="style"){var Se=R[Je];for(ae in Se)Se.hasOwnProperty(ae)&&(w||(w={}),w[ae]="")}else Je!=="dangerouslySetInnerHTML"&&Je!=="children"&&Je!=="suppressContentEditableWarning"&&Je!=="suppressHydrationWarning"&&Je!=="autoFocus"&&(i.hasOwnProperty(Je)?q||(q=[]):(q=q||[]).push(Je,null));for(Je in E){var Ae=E[Je];if(Se=R!=null?R[Je]:void 0,E.hasOwnProperty(Je)&&Ae!==Se&&(Ae!=null||Se!=null))if(Je==="style")if(Se){for(ae in Se)!Se.hasOwnProperty(ae)||Ae&&Ae.hasOwnProperty(ae)||(w||(w={}),w[ae]="");for(ae in Ae)Ae.hasOwnProperty(ae)&&Se[ae]!==Ae[ae]&&(w||(w={}),w[ae]=Ae[ae])}else w||(q||(q=[]),q.push(Je,w)),w=Ae;else Je==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,Se=Se?Se.__html:void 0,Ae!=null&&Se!==Ae&&(q=q||[]).push(Je,Ae)):Je==="children"?typeof Ae!="string"&&typeof Ae!="number"||(q=q||[]).push(Je,""+Ae):Je!=="suppressContentEditableWarning"&&Je!=="suppressHydrationWarning"&&(i.hasOwnProperty(Je)?(Ae!=null&&Je==="onScroll"&&cr("scroll",f),q||Se===Ae||(q=[])):(q=q||[]).push(Je,Ae))}w&&(q=q||[]).push("style",w);var Je=q;(m.updateQueue=Je)&&(m.flags|=4)}},iN=function(f,m,w,E){w!==E&&(m.flags|=4)};function rm(f,m){if(!nt)switch(f.tailMode){case"hidden":m=f.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function _s(f){var m=f.alternate!==null&&f.alternate.child===f.child,w=0,E=0;if(m)for(var R=f.child;R!==null;)w|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)w|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=E,f.childLanes=w,m}function xF(f,m,w){var E=m.pendingProps;switch(je(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(m),null;case 1:return ws(m.type)&&Jh(),_s(m),null;case 3:return E=m.stateNode,ka(),Qn(vs),Qn(bi),em(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Un(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,st!==null&&(rw(st),st=null))),q2(f,m),_s(m),null;case 5:Z0(m);var R=nl(Vl.current);if(w=m.type,f!==null&&m.stateNode!=null)rN(f,m,w,E,R),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!E){if(m.stateNode===null)throw Error(n(166));return _s(m),null}if(f=nl(Hs.current),Un(m)){E=m.stateNode,w=m.type;var q=m.memoizedProps;switch(E[_a]=m,E[Uu]=q,f=(m.mode&1)!==0,w){case"dialog":cr("cancel",E),cr("close",E);break;case"iframe":case"object":case"embed":cr("load",E);break;case"video":case"audio":for(R=0;R<Bl.length;R++)cr(Bl[R],E);break;case"source":cr("error",E);break;case"img":case"image":case"link":cr("error",E),cr("load",E);break;case"details":cr("toggle",E);break;case"input":Te(E,q),cr("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!q.multiple},cr("invalid",E);break;case"textarea":xt(E,q),cr("invalid",E)}jn(w,q),R=null;for(var ae in q)if(q.hasOwnProperty(ae)){var Se=q[ae];ae==="children"?typeof Se=="string"?E.textContent!==Se&&(q.suppressHydrationWarning!==!0&&Yh(E.textContent,Se,f),R=["children",Se]):typeof Se=="number"&&E.textContent!==""+Se&&(q.suppressHydrationWarning!==!0&&Yh(E.textContent,Se,f),R=["children",""+Se]):i.hasOwnProperty(ae)&&Se!=null&&ae==="onScroll"&&cr("scroll",E)}switch(w){case"input":He(E),et(E,q,!0);break;case"textarea":He(E),Pt(E);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(E.onclick=Bu)}E=R,m.updateQueue=E,E!==null&&(m.flags|=4)}else{ae=R.nodeType===9?R:R.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Vt(w)),f==="http://www.w3.org/1999/xhtml"?w==="script"?(f=ae.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof E.is=="string"?f=ae.createElement(w,{is:E.is}):(f=ae.createElement(w),w==="select"&&(ae=f,E.multiple?ae.multiple=!0:E.size&&(ae.size=E.size))):f=ae.createElementNS(f,w),f[_a]=m,f[Uu]=E,nN(f,m,!1,!1),m.stateNode=f;e:{switch(ae=Wr(w,E),w){case"dialog":cr("cancel",f),cr("close",f),R=E;break;case"iframe":case"object":case"embed":cr("load",f),R=E;break;case"video":case"audio":for(R=0;R<Bl.length;R++)cr(Bl[R],f);R=E;break;case"source":cr("error",f),R=E;break;case"img":case"image":case"link":cr("error",f),cr("load",f),R=E;break;case"details":cr("toggle",f),R=E;break;case"input":Te(f,E),R=Be(f,E),cr("invalid",f);break;case"option":R=E;break;case"select":f._wrapperState={wasMultiple:!!E.multiple},R=ee({},E,{value:void 0}),cr("invalid",f);break;case"textarea":xt(f,E),R=at(f,E),cr("invalid",f);break;default:R=E}jn(w,R),Se=R;for(q in Se)if(Se.hasOwnProperty(q)){var Ae=Se[q];q==="style"?Wn(f,Ae):q==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,Ae!=null&&It(f,Ae)):q==="children"?typeof Ae=="string"?(w!=="textarea"||Ae!=="")&&Ft(f,Ae):typeof Ae=="number"&&Ft(f,""+Ae):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?Ae!=null&&q==="onScroll"&&cr("scroll",f):Ae!=null&&k(f,q,Ae,ae))}switch(w){case"input":He(f),et(f,E,!1);break;case"textarea":He(f),Pt(f);break;case"option":E.value!=null&&f.setAttribute("value",""+xe(E.value));break;case"select":f.multiple=!!E.multiple,q=E.value,q!=null?We(f,!!E.multiple,q,!1):E.defaultValue!=null&&We(f,!!E.multiple,E.defaultValue,!0);break;default:typeof R.onClick=="function"&&(f.onclick=Bu)}switch(w){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return _s(m),null;case 6:if(f&&m.stateNode!=null)iN(f,m,f.memoizedProps,E);else{if(typeof E!="string"&&m.stateNode===null)throw Error(n(166));if(w=nl(Vl.current),nl(Hs.current),Un(m)){if(E=m.stateNode,w=m.memoizedProps,E[_a]=m,(q=E.nodeValue!==w)&&(f=Pe,f!==null))switch(f.tag){case 3:Yh(E.nodeValue,w,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Yh(E.nodeValue,w,(f.mode&1)!==0)}q&&(m.flags|=4)}else E=(w.nodeType===9?w:w.ownerDocument).createTextNode(E),E[_a]=m,m.stateNode=E}return _s(m),null;case 13:if(Qn(gr),E=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(nt&&rt!==null&&(m.mode&1)!==0&&(m.flags&128)===0)Mn(),_n(),m.flags|=98560,q=!1;else if(q=Un(m),E!==null&&E.dehydrated!==null){if(f===null){if(!q)throw Error(n(318));if(q=m.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(n(317));q[_a]=m}else _n(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;_s(m),q=!1}else st!==null&&(rw(st),st=null),q=!0;if(!q)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=w,m):(E=E!==null,E!==(f!==null&&f.memoizedState!==null)&&E&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(gr.current&1)!==0?Si===0&&(Si=3):ow())),m.updateQueue!==null&&(m.flags|=4),_s(m),null);case 4:return ka(),q2(f,m),f===null&&Lc(m.stateNode.containerInfo),_s(m),null;case 10:return bs(m.type._context),_s(m),null;case 17:return ws(m.type)&&Jh(),_s(m),null;case 19:if(Qn(gr),q=m.memoizedState,q===null)return _s(m),null;if(E=(m.flags&128)!==0,ae=q.rendering,ae===null)if(E)rm(q,!1);else{if(Si!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(ae=Ho(f),ae!==null){for(m.flags|=128,rm(q,!1),E=ae.updateQueue,E!==null&&(m.updateQueue=E,m.flags|=4),m.subtreeFlags=0,E=w,w=m.child;w!==null;)q=w,f=E,q.flags&=14680066,ae=q.alternate,ae===null?(q.childLanes=0,q.lanes=f,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=ae.childLanes,q.lanes=ae.lanes,q.child=ae.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=ae.memoizedProps,q.memoizedState=ae.memoizedState,q.updateQueue=ae.updateQueue,q.type=ae.type,f=ae.dependencies,q.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),w=w.sibling;return sr(gr,gr.current&1|2),m.child}f=f.sibling}q.tail!==null&&gt()>dp&&(m.flags|=128,E=!0,rm(q,!1),m.lanes=4194304)}else{if(!E)if(f=Ho(ae),f!==null){if(m.flags|=128,E=!0,w=f.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),rm(q,!0),q.tail===null&&q.tailMode==="hidden"&&!ae.alternate&&!nt)return _s(m),null}else 2*gt()-q.renderingStartTime>dp&&w!==1073741824&&(m.flags|=128,E=!0,rm(q,!1),m.lanes=4194304);q.isBackwards?(ae.sibling=m.child,m.child=ae):(w=q.last,w!==null?w.sibling=ae:m.child=ae,q.last=ae)}return q.tail!==null?(m=q.tail,q.rendering=m,q.tail=m.sibling,q.renderingStartTime=gt(),m.sibling=null,w=gr.current,sr(gr,E?w&1|2:w&1),m):(_s(m),null);case 22:case 23:return sw(),E=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(m.flags|=8192),E&&(m.mode&1)!==0?(Ko&1073741824)!==0&&(_s(m),m.subtreeFlags&6&&(m.flags|=8192)):_s(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function vF(f,m){switch(je(m),m.tag){case 1:return ws(m.type)&&Jh(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return ka(),Qn(vs),Qn(bi),em(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return Z0(m),null;case 13:if(Qn(gr),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(n(340));_n()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return Qn(gr),null;case 4:return ka(),null;case 10:return bs(m.type._context),null;case 22:case 23:return sw(),null;case 24:return null;default:return null}}var $1=!1,Ss=!1,wF=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function cp(f,m){var w=f.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){Kr(f,m,E)}else w.current=null}function G2(f,m,w){try{w()}catch(E){Kr(f,m,E)}}var sN=!1;function bF(f,m){if(Sf=Su,f=Pc(),Ja(f)){if("selectionStart"in f)var w={start:f.selectionStart,end:f.selectionEnd};else e:{w=(w=f.ownerDocument)&&w.defaultView||window;var E=w.getSelection&&w.getSelection();if(E&&E.rangeCount!==0){w=E.anchorNode;var R=E.anchorOffset,q=E.focusNode;E=E.focusOffset;try{w.nodeType,q.nodeType}catch{w=null;break e}var ae=0,Se=-1,Ae=-1,Je=0,ht=0,yt=f,ft=null;t:for(;;){for(var Ut;yt!==w||R!==0&&yt.nodeType!==3||(Se=ae+R),yt!==q||E!==0&&yt.nodeType!==3||(Ae=ae+E),yt.nodeType===3&&(ae+=yt.nodeValue.length),(Ut=yt.firstChild)!==null;)ft=yt,yt=Ut;for(;;){if(yt===f)break t;if(ft===w&&++Je===R&&(Se=ae),ft===q&&++ht===E&&(Ae=ae),(Ut=yt.nextSibling)!==null)break;yt=ft,ft=yt.parentNode}yt=Ut}w=Se===-1||Ae===-1?null:{start:Se,end:Ae}}else w=null}w=w||{start:0,end:0}}else w=null;for(Ic={focusedElem:f,selectionRange:w},Su=!1,Wt=m;Wt!==null;)if(m=Wt,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,Wt=f;else for(;Wt!==null;){m=Wt;try{var qt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(qt!==null){var Kt=qt.memoizedProps,si=qt.memoizedState,Ve=m.stateNode,De=Ve.getSnapshotBeforeUpdate(m.elementType===m.type?Kt:sl(m.type,Kt),si);Ve.__reactInternalSnapshotBeforeUpdate=De}break;case 3:var Xe=m.stateNode.containerInfo;Xe.nodeType===1?Xe.textContent="":Xe.nodeType===9&&Xe.documentElement&&Xe.removeChild(Xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(St){Kr(m,m.return,St)}if(f=m.sibling,f!==null){f.return=m.return,Wt=f;break}Wt=m.return}return qt=sN,sN=!1,qt}function im(f,m,w){var E=m.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&f)===f){var q=R.destroy;R.destroy=void 0,q!==void 0&&G2(m,w,q)}R=R.next}while(R!==E)}}function W1(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&f)===f){var E=w.create;w.destroy=E()}w=w.next}while(w!==m)}}function K2(f){var m=f.ref;if(m!==null){var w=f.stateNode;switch(f.tag){case 5:f=w;break;default:f=w}typeof m=="function"?m(f):m.current=f}}function oN(f){var m=f.alternate;m!==null&&(f.alternate=null,oN(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[_a],delete m[Uu],delete m[xs],delete m[D2],delete m[O2])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function aN(f){return f.tag===5||f.tag===3||f.tag===4}function lN(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||aN(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function X2(f,m,w){var E=f.tag;if(E===5||E===6)f=f.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(f,m):w.insertBefore(f,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(f,w)):(m=w,m.appendChild(f)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=Bu));else if(E!==4&&(f=f.child,f!==null))for(X2(f,m,w),f=f.sibling;f!==null;)X2(f,m,w),f=f.sibling}function Y2(f,m,w){var E=f.tag;if(E===5||E===6)f=f.stateNode,m?w.insertBefore(f,m):w.appendChild(f);else if(E!==4&&(f=f.child,f!==null))for(Y2(f,m,w),f=f.sibling;f!==null;)Y2(f,m,w),f=f.sibling}var Zi=null,ol=!1;function Yu(f,m,w){for(w=w.child;w!==null;)cN(f,m,w),w=w.sibling}function cN(f,m,w){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Bs,w)}catch{}switch(w.tag){case 5:Ss||cp(w,m);case 6:var E=Zi,R=ol;Zi=null,Yu(f,m,w),Zi=E,ol=R,Zi!==null&&(ol?(f=Zi,w=w.stateNode,f.nodeType===8?f.parentNode.removeChild(w):f.removeChild(w)):Zi.removeChild(w.stateNode));break;case 18:Zi!==null&&(ol?(f=Zi,w=w.stateNode,f.nodeType===8?K0(f.parentNode,w):f.nodeType===1&&K0(f,w),Mo(f)):K0(Zi,w.stateNode));break;case 4:E=Zi,R=ol,Zi=w.stateNode.containerInfo,ol=!0,Yu(f,m,w),Zi=E,ol=R;break;case 0:case 11:case 14:case 15:if(!Ss&&(E=w.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){R=E=E.next;do{var q=R,ae=q.destroy;q=q.tag,ae!==void 0&&((q&2)!==0||(q&4)!==0)&&G2(w,m,ae),R=R.next}while(R!==E)}Yu(f,m,w);break;case 1:if(!Ss&&(cp(w,m),E=w.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=w.memoizedProps,E.state=w.memoizedState,E.componentWillUnmount()}catch(Se){Kr(w,m,Se)}Yu(f,m,w);break;case 21:Yu(f,m,w);break;case 22:w.mode&1?(Ss=(E=Ss)||w.memoizedState!==null,Yu(f,m,w),Ss=E):Yu(f,m,w);break;default:Yu(f,m,w)}}function uN(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var w=f.stateNode;w===null&&(w=f.stateNode=new wF),m.forEach(function(E){var R=jF.bind(null,f,E);w.has(E)||(w.add(E),E.then(R,R))})}}function al(f,m){var w=m.deletions;if(w!==null)for(var E=0;E<w.length;E++){var R=w[E];try{var q=f,ae=m,Se=ae;e:for(;Se!==null;){switch(Se.tag){case 5:Zi=Se.stateNode,ol=!1;break e;case 3:Zi=Se.stateNode.containerInfo,ol=!0;break e;case 4:Zi=Se.stateNode.containerInfo,ol=!0;break e}Se=Se.return}if(Zi===null)throw Error(n(160));cN(q,ae,R),Zi=null,ol=!1;var Ae=R.alternate;Ae!==null&&(Ae.return=null),R.return=null}catch(Je){Kr(R,m,Je)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)dN(m,f),m=m.sibling}function dN(f,m){var w=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(al(m,f),ql(f),E&4){try{im(3,f,f.return),W1(3,f)}catch(Kt){Kr(f,f.return,Kt)}try{im(5,f,f.return)}catch(Kt){Kr(f,f.return,Kt)}}break;case 1:al(m,f),ql(f),E&512&&w!==null&&cp(w,w.return);break;case 5:if(al(m,f),ql(f),E&512&&w!==null&&cp(w,w.return),f.flags&32){var R=f.stateNode;try{Ft(R,"")}catch(Kt){Kr(f,f.return,Kt)}}if(E&4&&(R=f.stateNode,R!=null)){var q=f.memoizedProps,ae=w!==null?w.memoizedProps:q,Se=f.type,Ae=f.updateQueue;if(f.updateQueue=null,Ae!==null)try{Se==="input"&&q.type==="radio"&&q.name!=null&&fe(R,q),Wr(Se,ae);var Je=Wr(Se,q);for(ae=0;ae<Ae.length;ae+=2){var ht=Ae[ae],yt=Ae[ae+1];ht==="style"?Wn(R,yt):ht==="dangerouslySetInnerHTML"?It(R,yt):ht==="children"?Ft(R,yt):k(R,ht,yt,Je)}switch(Se){case"input":Ge(R,q);break;case"textarea":_t(R,q);break;case"select":var ft=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!q.multiple;var Ut=q.value;Ut!=null?We(R,!!q.multiple,Ut,!1):ft!==!!q.multiple&&(q.defaultValue!=null?We(R,!!q.multiple,q.defaultValue,!0):We(R,!!q.multiple,q.multiple?[]:"",!1))}R[Uu]=q}catch(Kt){Kr(f,f.return,Kt)}}break;case 6:if(al(m,f),ql(f),E&4){if(f.stateNode===null)throw Error(n(162));R=f.stateNode,q=f.memoizedProps;try{R.nodeValue=q}catch(Kt){Kr(f,f.return,Kt)}}break;case 3:if(al(m,f),ql(f),E&4&&w!==null&&w.memoizedState.isDehydrated)try{Mo(m.containerInfo)}catch(Kt){Kr(f,f.return,Kt)}break;case 4:al(m,f),ql(f);break;case 13:al(m,f),ql(f),R=f.child,R.flags&8192&&(q=R.memoizedState!==null,R.stateNode.isHidden=q,!q||R.alternate!==null&&R.alternate.memoizedState!==null||(Q2=gt())),E&4&&uN(f);break;case 22:if(ht=w!==null&&w.memoizedState!==null,f.mode&1?(Ss=(Je=Ss)||ht,al(m,f),Ss=Je):al(m,f),ql(f),E&8192){if(Je=f.memoizedState!==null,(f.stateNode.isHidden=Je)&&!ht&&(f.mode&1)!==0)for(Wt=f,ht=f.child;ht!==null;){for(yt=Wt=ht;Wt!==null;){switch(ft=Wt,Ut=ft.child,ft.tag){case 0:case 11:case 14:case 15:im(4,ft,ft.return);break;case 1:cp(ft,ft.return);var qt=ft.stateNode;if(typeof qt.componentWillUnmount=="function"){E=ft,w=ft.return;try{m=E,qt.props=m.memoizedProps,qt.state=m.memoizedState,qt.componentWillUnmount()}catch(Kt){Kr(E,w,Kt)}}break;case 5:cp(ft,ft.return);break;case 22:if(ft.memoizedState!==null){pN(yt);continue}}Ut!==null?(Ut.return=ft,Wt=Ut):pN(yt)}ht=ht.sibling}e:for(ht=null,yt=f;;){if(yt.tag===5){if(ht===null){ht=yt;try{R=yt.stateNode,Je?(q=R.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(Se=yt.stateNode,Ae=yt.memoizedProps.style,ae=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null,Se.style.display=sn("display",ae))}catch(Kt){Kr(f,f.return,Kt)}}}else if(yt.tag===6){if(ht===null)try{yt.stateNode.nodeValue=Je?"":yt.memoizedProps}catch(Kt){Kr(f,f.return,Kt)}}else if((yt.tag!==22&&yt.tag!==23||yt.memoizedState===null||yt===f)&&yt.child!==null){yt.child.return=yt,yt=yt.child;continue}if(yt===f)break e;for(;yt.sibling===null;){if(yt.return===null||yt.return===f)break e;ht===yt&&(ht=null),yt=yt.return}ht===yt&&(ht=null),yt.sibling.return=yt.return,yt=yt.sibling}}break;case 19:al(m,f),ql(f),E&4&&uN(f);break;case 21:break;default:al(m,f),ql(f)}}function ql(f){var m=f.flags;if(m&2){try{e:{for(var w=f.return;w!==null;){if(aN(w)){var E=w;break e}w=w.return}throw Error(n(160))}switch(E.tag){case 5:var R=E.stateNode;E.flags&32&&(Ft(R,""),E.flags&=-33);var q=lN(f);Y2(f,q,R);break;case 3:case 4:var ae=E.stateNode.containerInfo,Se=lN(f);X2(f,Se,ae);break;default:throw Error(n(161))}}catch(Ae){Kr(f,f.return,Ae)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function _F(f,m,w){Wt=f,fN(f)}function fN(f,m,w){for(var E=(f.mode&1)!==0;Wt!==null;){var R=Wt,q=R.child;if(R.tag===22&&E){var ae=R.memoizedState!==null||$1;if(!ae){var Se=R.alternate,Ae=Se!==null&&Se.memoizedState!==null||Ss;Se=$1;var Je=Ss;if($1=ae,(Ss=Ae)&&!Je)for(Wt=R;Wt!==null;)ae=Wt,Ae=ae.child,ae.tag===22&&ae.memoizedState!==null?mN(R):Ae!==null?(Ae.return=ae,Wt=Ae):mN(R);for(;q!==null;)Wt=q,fN(q),q=q.sibling;Wt=R,$1=Se,Ss=Je}hN(f)}else(R.subtreeFlags&8772)!==0&&q!==null?(q.return=R,Wt=q):hN(f)}}function hN(f){for(;Wt!==null;){var m=Wt;if((m.flags&8772)!==0){var w=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Ss||W1(5,m);break;case 1:var E=m.stateNode;if(m.flags&4&&!Ss)if(w===null)E.componentDidMount();else{var R=m.elementType===m.type?w.memoizedProps:sl(m.type,w.memoizedProps);E.componentDidUpdate(R,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var q=m.updateQueue;q!==null&&Uc(m,q,E);break;case 3:var ae=m.updateQueue;if(ae!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}Uc(m,ae,w)}break;case 5:var Se=m.stateNode;if(w===null&&m.flags&4){w=Se;var Ae=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ae.autoFocus&&w.focus();break;case"img":Ae.src&&(w.src=Ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Je=m.alternate;if(Je!==null){var ht=Je.memoizedState;if(ht!==null){var yt=ht.dehydrated;yt!==null&&Mo(yt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ss||m.flags&512&&K2(m)}catch(ft){Kr(m,m.return,ft)}}if(m===f){Wt=null;break}if(w=m.sibling,w!==null){w.return=m.return,Wt=w;break}Wt=m.return}}function pN(f){for(;Wt!==null;){var m=Wt;if(m===f){Wt=null;break}var w=m.sibling;if(w!==null){w.return=m.return,Wt=w;break}Wt=m.return}}function mN(f){for(;Wt!==null;){var m=Wt;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{W1(4,m)}catch(Ae){Kr(m,w,Ae)}break;case 1:var E=m.stateNode;if(typeof E.componentDidMount=="function"){var R=m.return;try{E.componentDidMount()}catch(Ae){Kr(m,R,Ae)}}var q=m.return;try{K2(m)}catch(Ae){Kr(m,q,Ae)}break;case 5:var ae=m.return;try{K2(m)}catch(Ae){Kr(m,ae,Ae)}}}catch(Ae){Kr(m,m.return,Ae)}if(m===f){Wt=null;break}var Se=m.sibling;if(Se!==null){Se.return=m.return,Wt=Se;break}Wt=m.return}}var SF=Math.ceil,V1=T.ReactCurrentDispatcher,J2=T.ReactCurrentOwner,Ea=T.ReactCurrentBatchConfig,Hn=0,ji=null,hi=null,Qi=0,Ko=0,up=Vo(0),Si=0,sm=null,Tf=0,H1=0,Z2=0,om=null,xo=null,Q2=0,dp=1/0,Vc=null,q1=!1,ew=null,Ju=null,G1=!1,Zu=null,K1=0,am=0,tw=null,X1=-1,Y1=0;function Xs(){return(Hn&6)!==0?gt():X1!==-1?X1:X1=gt()}function Qu(f){return(f.mode&1)===0?1:(Hn&2)!==0&&Qi!==0?Qi&-Qi:or.transition!==null?(Y1===0&&(Y1=sf()),Y1):(f=Vn,f!==0||(f=window.event,f=f===void 0?16:uf(f.type)),f)}function ll(f,m,w,E){if(50<am)throw am=0,tw=null,Error(n(185));Tl(f,w,E),((Hn&2)===0||f!==ji)&&(f===ji&&((Hn&2)===0&&(H1|=w),Si===4&&ed(f,Qi)),vo(f,E),w===1&&Hn===0&&(m.mode&1)===0&&(dp=gt()+500,Nf&&X()))}function vo(f,m){var w=f.callbackNode;hs(f,m);var E=fs(f,f===ji?Qi:0);if(E===0)w!==null&&wt(w),f.callbackNode=null,f.callbackPriority=0;else if(m=E&-E,f.callbackPriority!==m){if(w!=null&&wt(w),m===1)f.tag===0?B(yN.bind(null,f)):A(yN.bind(null,f)),j2(function(){(Hn&6)===0&&X()}),w=null;else{switch(vu(E)){case 1:w=zn;break;case 4:w=Zn;break;case 16:w=kr;break;case 536870912:w=ua;break;default:w=kr}w=NN(w,gN.bind(null,f))}f.callbackPriority=m,f.callbackNode=w}}function gN(f,m){if(X1=-1,Y1=0,(Hn&6)!==0)throw Error(n(327));var w=f.callbackNode;if(fp()&&f.callbackNode!==w)return null;var E=fs(f,f===ji?Qi:0);if(E===0)return null;if((E&30)!==0||(E&f.expiredLanes)!==0||m)m=J1(f,E);else{m=E;var R=Hn;Hn|=2;var q=vN();(ji!==f||Qi!==m)&&(Vc=null,dp=gt()+500,Pf(f,m));do try{CF();break}catch(Se){xN(f,Se)}while(!0);_i(),V1.current=q,Hn=R,hi!==null?m=0:(ji=null,Qi=0,m=Si)}if(m!==0){if(m===2&&(R=wc(f),R!==0&&(E=R,m=nw(f,R))),m===1)throw w=sm,Pf(f,0),ed(f,E),vo(f,gt()),w;if(m===6)ed(f,E);else{if(R=f.current.alternate,(E&30)===0&&!kF(R)&&(m=J1(f,E),m===2&&(q=wc(f),q!==0&&(E=q,m=nw(f,q))),m===1))throw w=sm,Pf(f,0),ed(f,E),vo(f,gt()),w;switch(f.finishedWork=R,f.finishedLanes=E,m){case 0:case 1:throw Error(n(345));case 2:Df(f,xo,Vc);break;case 3:if(ed(f,E),(E&130023424)===E&&(m=Q2+500-gt(),10<m)){if(fs(f,0)!==0)break;if(R=f.suspendedLanes,(R&E)!==E){Xs(),f.pingedLanes|=f.suspendedLanes&R;break}f.timeoutHandle=G0(Df.bind(null,f,xo,Vc),m);break}Df(f,xo,Vc);break;case 4:if(ed(f,E),(E&4194240)===E)break;for(m=f.eventTimes,R=-1;0<E;){var ae=31-Nr(E);q=1<<ae,ae=m[ae],ae>R&&(R=ae),E&=~q}if(E=R,E=gt()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*SF(E/1960))-E,10<E){f.timeoutHandle=G0(Df.bind(null,f,xo,Vc),E);break}Df(f,xo,Vc);break;case 5:Df(f,xo,Vc);break;default:throw Error(n(329))}}}return vo(f,gt()),f.callbackNode===w?gN.bind(null,f):null}function nw(f,m){var w=om;return f.current.memoizedState.isDehydrated&&(Pf(f,m).flags|=256),f=J1(f,m),f!==2&&(m=xo,xo=w,m!==null&&rw(m)),f}function rw(f){xo===null?xo=f:xo.push.apply(xo,f)}function kF(f){for(var m=f;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var R=w[E],q=R.getSnapshot;R=R.value;try{if(!Ki(q(),R))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function ed(f,m){for(m&=~Z2,m&=~H1,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var w=31-Nr(m),E=1<<w;f[w]=-1,m&=~E}}function yN(f){if((Hn&6)!==0)throw Error(n(327));fp();var m=fs(f,0);if((m&1)===0)return vo(f,gt()),null;var w=J1(f,m);if(f.tag!==0&&w===2){var E=wc(f);E!==0&&(m=E,w=nw(f,E))}if(w===1)throw w=sm,Pf(f,0),ed(f,m),vo(f,gt()),w;if(w===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Df(f,xo,Vc),vo(f,gt()),null}function iw(f,m){var w=Hn;Hn|=1;try{return f(m)}finally{Hn=w,Hn===0&&(dp=gt()+500,Nf&&X())}}function jf(f){Zu!==null&&Zu.tag===0&&(Hn&6)===0&&fp();var m=Hn;Hn|=1;var w=Ea.transition,E=Vn;try{if(Ea.transition=null,Vn=1,f)return f()}finally{Vn=E,Ea.transition=w,Hn=m,(Hn&6)===0&&X()}}function sw(){Ko=up.current,Qn(up)}function Pf(f,m){f.finishedWork=null,f.finishedLanes=0;var w=f.timeoutHandle;if(w!==-1&&(f.timeoutHandle=-1,T1(w)),hi!==null)for(w=hi.return;w!==null;){var E=w;switch(je(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Jh();break;case 3:ka(),Qn(vs),Qn(bi),em();break;case 5:Z0(E);break;case 4:ka();break;case 13:Qn(gr);break;case 19:Qn(gr);break;case 10:bs(E.type._context);break;case 22:case 23:sw()}w=w.return}if(ji=f,hi=f=td(f.current,null),Qi=Ko=m,Si=0,sm=null,Z2=H1=Tf=0,xo=om=null,Vs!==null){for(m=0;m<Vs.length;m++)if(w=Vs[m],E=w.interleaved,E!==null){w.interleaved=null;var R=E.next,q=w.pending;if(q!==null){var ae=q.next;q.next=R,E.next=ae}w.pending=E}Vs=null}return f}function xN(f,m){do{var w=hi;try{if(_i(),Qh.current=F1,Gu){for(var E=wr.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}Gu=!1}if(Na=0,Ur=Gr=wr=null,rl=!1,Ku=0,J2.current=null,w===null||w.return===null){Si=1,sm=m,hi=null;break}e:{var q=f,ae=w.return,Se=w,Ae=m;if(m=Qi,Se.flags|=32768,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Je=Ae,ht=Se,yt=ht.tag;if((ht.mode&1)===0&&(yt===0||yt===11||yt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Ut=Wk(ae);if(Ut!==null){Ut.flags&=-257,Vk(Ut,ae,Se,q,m),Ut.mode&1&&$k(q,Je,m),m=Ut,Ae=Je;var qt=m.updateQueue;if(qt===null){var Kt=new Set;Kt.add(Ae),m.updateQueue=Kt}else qt.add(Ae);break e}else{if((m&1)===0){$k(q,Je,m),ow();break e}Ae=Error(n(426))}}else if(nt&&Se.mode&1){var si=Wk(ae);if(si!==null){(si.flags&65536)===0&&(si.flags|=256),Vk(si,ae,Se,q,m),er(lp(Ae,Se));break e}}q=Ae=lp(Ae,Se),Si!==4&&(Si=2),om===null?om=[q]:om.push(q),q=ae;do{switch(q.tag){case 3:q.flags|=65536,m&=-m,q.lanes|=m;var Ve=Bk(q,Ae,m);go(q,Ve);break e;case 1:Se=Ae;var De=q.type,Xe=q.stateNode;if((q.flags&128)===0&&(typeof De.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(Ju===null||!Ju.has(Xe)))){q.flags|=65536,m&=-m,q.lanes|=m;var St=Uk(q,Se,m);go(q,St);break e}}q=q.return}while(q!==null)}bN(w)}catch(Yt){m=Yt,hi===w&&w!==null&&(hi=w=w.return);continue}break}while(!0)}function vN(){var f=V1.current;return V1.current=F1,f===null?F1:f}function ow(){(Si===0||Si===3||Si===2)&&(Si=4),ji===null||(Tf&268435455)===0&&(H1&268435455)===0||ed(ji,Qi)}function J1(f,m){var w=Hn;Hn|=2;var E=vN();(ji!==f||Qi!==m)&&(Vc=null,Pf(f,m));do try{NF();break}catch(R){xN(f,R)}while(!0);if(_i(),Hn=w,V1.current=E,hi!==null)throw Error(n(261));return ji=null,Qi=0,Si}function NF(){for(;hi!==null;)wN(hi)}function CF(){for(;hi!==null&&!Dt();)wN(hi)}function wN(f){var m=kN(f.alternate,f,Ko);f.memoizedProps=f.pendingProps,m===null?bN(f):hi=m,J2.current=null}function bN(f){var m=f;do{var w=m.alternate;if(f=m.return,(m.flags&32768)===0){if(w=xF(w,m,Ko),w!==null){hi=w;return}}else{if(w=vF(w,m),w!==null){w.flags&=32767,hi=w;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Si=6,hi=null;return}}if(m=m.sibling,m!==null){hi=m;return}hi=m=f}while(m!==null);Si===0&&(Si=5)}function Df(f,m,w){var E=Vn,R=Ea.transition;try{Ea.transition=null,Vn=1,EF(f,m,w,E)}finally{Ea.transition=R,Vn=E}return null}function EF(f,m,w,E){do fp();while(Zu!==null);if((Hn&6)!==0)throw Error(n(327));w=f.finishedWork;var R=f.finishedLanes;if(w===null)return null;if(f.finishedWork=null,f.finishedLanes=0,w===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var q=w.lanes|w.childLanes;if(R0(f,q),f===ji&&(hi=ji=null,Qi=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||G1||(G1=!0,NN(kr,function(){return fp(),null})),q=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||q){q=Ea.transition,Ea.transition=null;var ae=Vn;Vn=1;var Se=Hn;Hn|=4,J2.current=null,bF(f,w),dN(w,f),zl(Ic),Su=!!Sf,Ic=Sf=null,f.current=w,_F(w),bt(),Hn=Se,Vn=ae,Ea.transition=q}else f.current=w;if(G1&&(G1=!1,Zu=f,K1=R),q=f.pendingLanes,q===0&&(Ju=null),da(w.stateNode),vo(f,gt()),m!==null)for(E=f.onRecoverableError,w=0;w<m.length;w++)R=m[w],E(R.value,{componentStack:R.stack,digest:R.digest});if(q1)throw q1=!1,f=ew,ew=null,f;return(K1&1)!==0&&f.tag!==0&&fp(),q=f.pendingLanes,(q&1)!==0?f===tw?am++:(am=0,tw=f):am=0,X(),null}function fp(){if(Zu!==null){var f=vu(K1),m=Ea.transition,w=Vn;try{if(Ea.transition=null,Vn=16>f?16:f,Zu===null)var E=!1;else{if(f=Zu,Zu=null,K1=0,(Hn&6)!==0)throw Error(n(331));var R=Hn;for(Hn|=4,Wt=f.current;Wt!==null;){var q=Wt,ae=q.child;if((Wt.flags&16)!==0){var Se=q.deletions;if(Se!==null){for(var Ae=0;Ae<Se.length;Ae++){var Je=Se[Ae];for(Wt=Je;Wt!==null;){var ht=Wt;switch(ht.tag){case 0:case 11:case 15:im(8,ht,q)}var yt=ht.child;if(yt!==null)yt.return=ht,Wt=yt;else for(;Wt!==null;){ht=Wt;var ft=ht.sibling,Ut=ht.return;if(oN(ht),ht===Je){Wt=null;break}if(ft!==null){ft.return=Ut,Wt=ft;break}Wt=Ut}}}var qt=q.alternate;if(qt!==null){var Kt=qt.child;if(Kt!==null){qt.child=null;do{var si=Kt.sibling;Kt.sibling=null,Kt=si}while(Kt!==null)}}Wt=q}}if((q.subtreeFlags&2064)!==0&&ae!==null)ae.return=q,Wt=ae;else e:for(;Wt!==null;){if(q=Wt,(q.flags&2048)!==0)switch(q.tag){case 0:case 11:case 15:im(9,q,q.return)}var Ve=q.sibling;if(Ve!==null){Ve.return=q.return,Wt=Ve;break e}Wt=q.return}}var De=f.current;for(Wt=De;Wt!==null;){ae=Wt;var Xe=ae.child;if((ae.subtreeFlags&2064)!==0&&Xe!==null)Xe.return=ae,Wt=Xe;else e:for(ae=De;Wt!==null;){if(Se=Wt,(Se.flags&2048)!==0)try{switch(Se.tag){case 0:case 11:case 15:W1(9,Se)}}catch(Yt){Kr(Se,Se.return,Yt)}if(Se===ae){Wt=null;break e}var St=Se.sibling;if(St!==null){St.return=Se.return,Wt=St;break e}Wt=Se.return}}if(Hn=R,X(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Bs,f)}catch{}E=!0}return E}finally{Vn=w,Ea.transition=m}}return!1}function _N(f,m,w){m=lp(w,m),m=Bk(f,m,1),f=mo(f,m,1),m=Xs(),f!==null&&(Tl(f,1,m),vo(f,m))}function Kr(f,m,w){if(f.tag===3)_N(f,f,w);else for(;m!==null;){if(m.tag===3){_N(m,f,w);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ju===null||!Ju.has(E))){f=lp(w,f),f=Uk(m,f,1),m=mo(m,f,1),f=Xs(),m!==null&&(Tl(m,1,f),vo(m,f));break}}m=m.return}}function AF(f,m,w){var E=f.pingCache;E!==null&&E.delete(m),m=Xs(),f.pingedLanes|=f.suspendedLanes&w,ji===f&&(Qi&w)===w&&(Si===4||Si===3&&(Qi&130023424)===Qi&&500>gt()-Q2?Pf(f,0):Z2|=w),vo(f,m)}function SN(f,m){m===0&&((f.mode&1)===0?m=1:(m=Al,Al<<=1,(Al&130023424)===0&&(Al=4194304)));var w=Xs();f=Kn(f,m),f!==null&&(Tl(f,m,w),vo(f,w))}function TF(f){var m=f.memoizedState,w=0;m!==null&&(w=m.retryLane),SN(f,w)}function jF(f,m){var w=0;switch(f.tag){case 13:var E=f.stateNode,R=f.memoizedState;R!==null&&(w=R.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(n(314))}E!==null&&E.delete(m),SN(f,w)}var kN;kN=function(f,m,w){if(f!==null)if(f.memoizedProps!==m.pendingProps||vs.current)yo=!0;else{if((f.lanes&w)===0&&(m.flags&128)===0)return yo=!1,yF(f,m,w);yo=(f.flags&131072)!==0}else yo=!1,nt&&(m.flags&1048576)!==0&&ot(m,ce,m.index);switch(m.lanes=0,m.tag){case 2:var E=m.type;U1(f,m),f=m.pendingProps;var R=Wu(m,bi.current);jr(m,w),R=Cf(null,m,E,f,R,w);var q=Ca();return m.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ws(E)?(q=!0,zc(m)):q=!1,m.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Zh(m),R.updater=z1,m.stateNode=R,R._reactInternals=m,R2(m,E,f,w),m=U2(null,m,E,!0,q,w)):(m.tag=0,nt&&q&&Ze(m),Ks(null,m,R,w),m=m.child),m;case 16:E=m.elementType;e:{switch(U1(f,m),f=m.pendingProps,R=E._init,E=R(E._payload),m.type=E,R=m.tag=DF(E),f=sl(E,f),R){case 0:m=B2(null,m,E,f,w);break e;case 1:m=Yk(null,m,E,f,w);break e;case 11:m=Hk(null,m,E,f,w);break e;case 14:m=qk(null,m,E,sl(E.type,f),w);break e}throw Error(n(306,E,""))}return m;case 0:return E=m.type,R=m.pendingProps,R=m.elementType===E?R:sl(E,R),B2(f,m,E,R,w);case 1:return E=m.type,R=m.pendingProps,R=m.elementType===E?R:sl(E,R),Yk(f,m,E,R,w);case 3:e:{if(Jk(m),f===null)throw Error(n(387));E=m.pendingProps,q=m.memoizedState,R=q.element,J0(f,m),tl(m,E,null,w);var ae=m.memoizedState;if(E=ae.element,q.isDehydrated)if(q={element:E,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},m.updateQueue.baseState=q,m.memoizedState=q,m.flags&256){R=lp(Error(n(423)),m),m=Zk(f,m,E,w,R);break e}else if(E!==R){R=lp(Error(n(424)),m),m=Zk(f,m,E,w,R);break e}else for(rt=Yi(m.stateNode.containerInfo.firstChild),Pe=m,nt=!0,st=null,w=Gn(m,null,E,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(_n(),E===R){m=Wc(f,m,w);break e}Ks(f,m,E,w)}m=m.child}return m;case 5:return O1(m),f===null&&Tt(m),E=m.type,R=m.pendingProps,q=f!==null?f.memoizedProps:null,ae=R.children,q0(E,R)?ae=null:q!==null&&q0(E,q)&&(m.flags|=32),Xk(f,m),Ks(f,m,ae,w),m.child;case 6:return f===null&&Tt(m),null;case 13:return Qk(f,m,w);case 4:return qu(m,m.stateNode.containerInfo),E=m.pendingProps,f===null?m.child=ni(m,null,E,w):Ks(f,m,E,w),m.child;case 11:return E=m.type,R=m.pendingProps,R=m.elementType===E?R:sl(E,R),Hk(f,m,E,R,w);case 7:return Ks(f,m,m.pendingProps,w),m.child;case 8:return Ks(f,m,m.pendingProps.children,w),m.child;case 12:return Ks(f,m,m.pendingProps.children,w),m.child;case 10:e:{if(E=m.type._context,R=m.pendingProps,q=m.memoizedProps,ae=R.value,sr(Ai,E._currentValue),E._currentValue=ae,q!==null)if(Ki(q.value,ae)){if(q.children===R.children&&!vs.current){m=Wc(f,m,w);break e}}else for(q=m.child,q!==null&&(q.return=m);q!==null;){var Se=q.dependencies;if(Se!==null){ae=q.child;for(var Ae=Se.firstContext;Ae!==null;){if(Ae.context===E){if(q.tag===1){Ae=po(-1,w&-w),Ae.tag=2;var Je=q.updateQueue;if(Je!==null){Je=Je.shared;var ht=Je.pending;ht===null?Ae.next=Ae:(Ae.next=ht.next,ht.next=Ae),Je.pending=Ae}}q.lanes|=w,Ae=q.alternate,Ae!==null&&(Ae.lanes|=w),ho(q.return,w,m),Se.lanes|=w;break}Ae=Ae.next}}else if(q.tag===10)ae=q.type===m.type?null:q.child;else if(q.tag===18){if(ae=q.return,ae===null)throw Error(n(341));ae.lanes|=w,Se=ae.alternate,Se!==null&&(Se.lanes|=w),ho(ae,w,m),ae=q.sibling}else ae=q.child;if(ae!==null)ae.return=q;else for(ae=q;ae!==null;){if(ae===m){ae=null;break}if(q=ae.sibling,q!==null){q.return=ae.return,ae=q;break}ae=ae.return}q=ae}Ks(f,m,R.children,w),m=m.child}return m;case 9:return R=m.type,E=m.pendingProps.children,jr(m,w),R=qr(R),E=E(R),m.flags|=1,Ks(f,m,E,w),m.child;case 14:return E=m.type,R=sl(E,m.pendingProps),R=sl(E.type,R),qk(f,m,E,R,w);case 15:return Gk(f,m,m.type,m.pendingProps,w);case 17:return E=m.type,R=m.pendingProps,R=m.elementType===E?R:sl(E,R),U1(f,m),m.tag=1,ws(E)?(f=!0,zc(m)):f=!1,jr(m,w),Fk(m,E,R),R2(m,E,R,w),U2(null,m,E,!0,f,w);case 19:return tN(f,m,w);case 22:return Kk(f,m,w)}throw Error(n(156,m.tag))};function NN(f,m){return ut(f,m)}function PF(f,m,w,E){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(f,m,w,E){return new PF(f,m,w,E)}function aw(f){return f=f.prototype,!(!f||!f.isReactComponent)}function DF(f){if(typeof f=="function")return aw(f)?1:0;if(f!=null){if(f=f.$$typeof,f===M)return 11;if(f===Z)return 14}return 2}function td(f,m){var w=f.alternate;return w===null?(w=Aa(f.tag,m,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=m,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&14680064,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,m=f.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function Z1(f,m,w,E,R,q){var ae=2;if(E=f,typeof f=="function")aw(f)&&(ae=1);else if(typeof f=="string")ae=5;else e:switch(f){case C:return Of(w.children,R,q,m);case N:ae=8,R|=8;break;case O:return f=Aa(12,w,m,R|2),f.elementType=O,f.lanes=q,f;case K:return f=Aa(13,w,m,R),f.elementType=K,f.lanes=q,f;case W:return f=Aa(19,w,m,R),f.elementType=W,f.lanes=q,f;case F:return Q1(w,R,q,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case z:ae=10;break e;case L:ae=9;break e;case M:ae=11;break e;case Z:ae=14;break e;case U:ae=16,E=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return m=Aa(ae,w,m,R),m.elementType=f,m.type=E,m.lanes=q,m}function Of(f,m,w,E){return f=Aa(7,f,E,m),f.lanes=w,f}function Q1(f,m,w,E){return f=Aa(22,f,E,m),f.elementType=F,f.lanes=w,f.stateNode={isHidden:!1},f}function lw(f,m,w){return f=Aa(6,f,null,m),f.lanes=w,f}function cw(f,m,w){return m=Aa(4,f.children!==null?f.children:[],f.key,m),m.lanes=w,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function OF(f,m,w,E,R){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=of(0),this.expirationTimes=of(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=of(0),this.identifierPrefix=E,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function uw(f,m,w,E,R,q,ae,Se,Ae){return f=new OF(f,m,w,Se,Ae),m===1?(m=1,q===!0&&(m|=8)):m=0,q=Aa(3,null,null,m),f.current=q,q.stateNode=f,q.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zh(q),f}function LF(f,m,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:E==null?null:""+E,children:f,containerInfo:m,implementation:w}}function CN(f){if(!f)return $l;f=f._reactInternals;e:{if(be(f)!==f||f.tag!==1)throw Error(n(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ws(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(f.tag===1){var w=f.type;if(ws(w))return Y0(f,w,m)}return m}function EN(f,m,w,E,R,q,ae,Se,Ae){return f=uw(w,E,!0,f,R,q,ae,Se,Ae),f.context=CN(null),w=f.current,E=Xs(),R=Qu(w),q=po(E,R),q.callback=m??null,mo(w,q,R),f.current.lanes=R,Tl(f,R,E),vo(f,E),f}function ey(f,m,w,E){var R=m.current,q=Xs(),ae=Qu(R);return w=CN(w),m.context===null?m.context=w:m.pendingContext=w,m=po(q,ae),m.payload={element:f},E=E===void 0?null:E,E!==null&&(m.callback=E),f=mo(R,m,ae),f!==null&&(ll(f,R,ae,q),Bc(f,R,ae)),ae}function ty(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function AN(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<m?w:m}}function dw(f,m){AN(f,m),(f=f.alternate)&&AN(f,m)}function MF(){return null}var TN=typeof reportError=="function"?reportError:function(f){console.error(f)};function fw(f){this._internalRoot=f}ny.prototype.render=fw.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(n(409));ey(f,m,null,null)},ny.prototype.unmount=fw.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;jf(function(){ey(null,f,null,null)}),m[Ei]=null}};function ny(f){this._internalRoot=f}ny.prototype.unstable_scheduleHydration=function(f){if(f){var m=fa();f={blockedOn:null,target:f,priority:m};for(var w=0;w<pa.length&&m!==0&&m<pa[w].priority;w++);pa.splice(w,0,f),w===0&&bu(f)}};function hw(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function ry(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function jN(){}function IF(f,m,w,E,R){if(R){if(typeof E=="function"){var q=E;E=function(){var Je=ty(ae);q.call(Je)}}var ae=EN(m,E,f,0,null,!1,!1,"",jN);return f._reactRootContainer=ae,f[Ei]=ae.current,Lc(f.nodeType===8?f.parentNode:f),jf(),ae}for(;R=f.lastChild;)f.removeChild(R);if(typeof E=="function"){var Se=E;E=function(){var Je=ty(Ae);Se.call(Je)}}var Ae=uw(f,0,!1,null,null,!1,!1,"",jN);return f._reactRootContainer=Ae,f[Ei]=Ae.current,Lc(f.nodeType===8?f.parentNode:f),jf(function(){ey(m,Ae,w,E)}),Ae}function iy(f,m,w,E,R){var q=w._reactRootContainer;if(q){var ae=q;if(typeof R=="function"){var Se=R;R=function(){var Ae=ty(ae);Se.call(Ae)}}ey(m,ae,f,R)}else ae=IF(w,m,f,R,E);return ty(ae)}Bh=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var w=vc(m.pendingLanes);w!==0&&(xu(m,w|1),vo(m,gt()),(Hn&6)===0&&(dp=gt()+500,X()))}break;case 13:jf(function(){var E=Kn(f,1);if(E!==null){var R=Xs();ll(E,f,1,R)}}),dw(f,1)}},af=function(f){if(f.tag===13){var m=Kn(f,134217728);if(m!==null){var w=Xs();ll(m,f,134217728,w)}dw(f,134217728)}},Uh=function(f){if(f.tag===13){var m=Qu(f),w=Kn(f,m);if(w!==null){var E=Xs();ll(w,f,m,E)}dw(f,m)}},fa=function(){return Vn},bc=function(f,m){var w=Vn;try{return Vn=f,m()}finally{Vn=w}},Nn=function(f,m,w){switch(m){case"input":if(Ge(f,w),m=w.name,w.type==="radio"&&m!=null){for(w=f;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var E=w[m];if(E!==f&&E.form===f.form){var R=kf(E);if(!R)throw Error(n(90));Ke(E),Ge(E,R)}}}break;case"textarea":_t(f,w);break;case"select":m=w.value,m!=null&&We(f,!!w.multiple,m,!1)}},rr=iw,xn=jf;var RF={usingClientEntryPoint:!1,Events:[$u,Rc,kf,Rt,nn,iw]},lm={findFiberByHostInstance:Ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FF={bundleType:lm.bundleType,version:lm.version,rendererPackageName:lm.rendererPackageName,rendererConfig:lm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Ie(f),f===null?null:f.stateNode},findFiberByHostInstance:lm.findFiberByHostInstance||MF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sy.isDisabled&&sy.supportsFiber)try{Bs=sy.inject(FF),Vr=sy}catch{}}return wo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RF,wo.createPortal=function(f,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hw(m))throw Error(n(200));return LF(f,m,null,w)},wo.createRoot=function(f,m){if(!hw(f))throw Error(n(299));var w=!1,E="",R=TN;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onRecoverableError!==void 0&&(R=m.onRecoverableError)),m=uw(f,1,!1,null,null,w,!1,E,R),f[Ei]=m.current,Lc(f.nodeType===8?f.parentNode:f),new fw(m)},wo.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=Ie(m),f=f===null?null:f.stateNode,f},wo.flushSync=function(f){return jf(f)},wo.hydrate=function(f,m,w){if(!ry(m))throw Error(n(200));return iy(null,f,m,!0,w)},wo.hydrateRoot=function(f,m,w){if(!hw(f))throw Error(n(405));var E=w!=null&&w.hydratedSources||null,R=!1,q="",ae=TN;if(w!=null&&(w.unstable_strictMode===!0&&(R=!0),w.identifierPrefix!==void 0&&(q=w.identifierPrefix),w.onRecoverableError!==void 0&&(ae=w.onRecoverableError)),m=EN(m,null,f,1,w??null,R,!1,q,ae),f[Ei]=m.current,Lc(f),E)for(f=0;f<E.length;f++)w=E[f],R=w._getVersion,R=R(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,R]:m.mutableSourceEagerHydrationData.push(w,R);return new ny(m)},wo.render=function(f,m,w){if(!ry(m))throw Error(n(200));return iy(null,f,m,!1,w)},wo.unmountComponentAtNode=function(f){if(!ry(f))throw Error(n(40));return f._reactRootContainer?(jf(function(){iy(null,null,f,!1,function(){f._reactRootContainer=null,f[Ei]=null})}),!0):!1},wo.unstable_batchedUpdates=iw,wo.unstable_renderSubtreeIntoContainer=function(f,m,w,E){if(!ry(w))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return iy(f,m,w,!1,E)},wo.version="18.3.1-next-f1338f8080-20240426",wo}var FN;function TP(){if(FN)return gw.exports;FN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gw.exports=YF(),gw.exports}var zN;function JF(){if(zN)return oy;zN=1;var t=TP();return oy.createRoot=t.createRoot,oy.hydrateRoot=t.hydrateRoot,oy}var ZF=JF(),eu=TP();const jP=Pv(eu);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gg(){return gg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gg.apply(this,arguments)}var vd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vd||(vd={}));const BN="popstate";function QF(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return a5("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vx(i)}return t7(e,n,null,t)}function di(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function e7(){return Math.random().toString(36).substr(2,8)}function UN(t,e){return{usr:t.state,key:t.key,idx:e}}function a5(t,e,n,r){return n===void 0&&(n=null),gg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?v0(e):e,{state:n,key:e&&e.key||r||e7()})}function vx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function v0(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function t7(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=vd.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(gg({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=vd.Pop;let v=u(),b=v==null?null:v-c;c=v,l&&l({action:a,location:x.location,delta:b})}function h(v,b){a=vd.Push;let S=a5(x.location,v,b);c=u()+1;let k=UN(S,c),T=x.createHref(S);try{o.pushState(k,"",T)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(T)}s&&l&&l({action:a,location:x.location,delta:1})}function p(v,b){a=vd.Replace;let S=a5(x.location,v,b);c=u();let k=UN(S,c),T=x.createHref(S);o.replaceState(k,"",T),s&&l&&l({action:a,location:x.location,delta:0})}function y(v){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof v=="string"?v:vx(v);return S=S.replace(/ $/,"%20"),di(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let x={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(BN,d),l=v,()=>{i.removeEventListener(BN,d),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(v){return o.go(v)}};return x}var $N;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($N||($N={}));function n7(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?v0(e):e,i=$_(r.pathname||"/",n);if(i==null)return null;let s=DP(t);r7(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=m7(i);o=f7(s[a],l)}return o}function DP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(di(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ad([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(di(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),DP(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:u7(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of OP(s.path))i(s,o,l)}),e}function OP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=OP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function r7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const i7=/^:[\w-]+$/,s7=3,o7=2,a7=1,l7=10,c7=-2,WN=t=>t==="*";function u7(t,e){let n=t.split("/"),r=n.length;return n.some(WN)&&(r+=c7),e&&(r+=o7),n.filter(i=>!WN(i)).reduce((i,s)=>i+(i7.test(s)?s7:s===""?a7:l7),r)}function d7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function f7(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=h7({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Ad([i,u.pathname]),pathnameBase:v7(Ad([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Ad([i,u.pathnameBase]))}return s}function h7(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=p7(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[d];return p&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function p7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),PP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function m7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return PP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function g7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?v0(t):t;return{pathname:n?n.startsWith("/")?n:y7(n,e):e,search:w7(r),hash:b7(i)}}function y7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function W_(t,e){let n=x7(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function V_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=v0(t):(i=gg({},t),di(!i.pathname||!i.pathname.includes("?"),vw("?","pathname","search",i)),di(!i.pathname||!i.pathname.includes("#"),vw("#","pathname","hash",i)),di(!i.search||!i.search.includes("#"),vw("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=g7(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ad=t=>t.join("/").replace(/\/\/+/g,"/"),v7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),w7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,b7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const LP=["post","put","patch","delete"];new Set(LP);const S7=["get",...LP];new Set(S7);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yg(){return yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yg.apply(this,arguments)}const H_=Y.createContext(null),k7=Y.createContext(null),Zd=Y.createContext(null),Dv=Y.createContext(null),gc=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),MP=Y.createContext(null);function N7(t,e){let{relative:n}=e===void 0?{}:e;w0()||di(!1);let{basename:r,navigator:i}=Y.useContext(Zd),{hash:s,pathname:o,search:a}=RP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ad([r,o])),i.createHref({pathname:l,search:a,hash:s})}function w0(){return Y.useContext(Dv)!=null}function mu(){return w0()||di(!1),Y.useContext(Dv).location}function IP(t){Y.useContext(Zd).static||Y.useLayoutEffect(t)}function kl(){let{isDataRoute:t}=Y.useContext(gc);return t?B7():C7()}function C7(){w0()||di(!1);let t=Y.useContext(H_),{basename:e,future:n,navigator:r}=Y.useContext(Zd),{matches:i}=Y.useContext(gc),{pathname:s}=mu(),o=JSON.stringify(W_(i,n.v7_relativeSplatPath)),a=Y.useRef(!1);return IP(()=>{a.current=!0}),Y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=V_(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ad([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const E7=Y.createContext(null);function A7(t){let e=Y.useContext(gc).outlet;return e&&Y.createElement(E7.Provider,{value:t},e)}function q_(){let{matches:t}=Y.useContext(gc),e=t[t.length-1];return e?e.params:{}}function RP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Y.useContext(Zd),{matches:i}=Y.useContext(gc),{pathname:s}=mu(),o=JSON.stringify(W_(i,r.v7_relativeSplatPath));return Y.useMemo(()=>V_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function T7(t,e){return j7(t,e)}function j7(t,e,n,r){w0()||di(!1);let{navigator:i}=Y.useContext(Zd),{matches:s}=Y.useContext(gc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=mu(),u;if(e){var d;let v=typeof e=="string"?v0(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||di(!1),u=v}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=n7(t,{pathname:p}),x=M7(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Ad([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Ad([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&x?Y.createElement(Dv.Provider,{value:{location:yg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:vd.Pop}},x):x}function P7(){let t=z7(),e=_7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:i},n):null,null)}const D7=Y.createElement(P7,null);class O7 extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(gc.Provider,{value:this.props.routeContext},Y.createElement(MP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L7(t){let{routeContext:e,match:n,children:r}=t,i=Y.useContext(H_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(gc.Provider,{value:e},r)}function M7(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||di(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,y=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let p,y=!1,x=null,v=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||D7,l&&(c<0&&h===0?(U7("route-fallback"),y=!0,v=null):c===h&&(y=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,h+1)),S=()=>{let k;return p?k=x:y?k=v:d.route.Component?k=Y.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=u,Y.createElement(L7,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?Y.createElement(O7,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var FP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FP||{}),zP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zP||{});function I7(t){let e=Y.useContext(H_);return e||di(!1),e}function R7(t){let e=Y.useContext(k7);return e||di(!1),e}function F7(t){let e=Y.useContext(gc);return e||di(!1),e}function BP(t){let e=F7(),n=e.matches[e.matches.length-1];return n.route.id||di(!1),n.route.id}function z7(){var t;let e=Y.useContext(MP),n=R7(),r=BP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function B7(){let{router:t}=I7(FP.UseNavigateStable),e=BP(zP.UseNavigateStable),n=Y.useRef(!1);return IP(()=>{n.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,yg({fromRouteId:e},s)))},[t,e])}const VN={};function U7(t,e,n){VN[t]||(VN[t]=!0)}function $7(t){let{to:e,replace:n,state:r,relative:i}=t;w0()||di(!1);let{future:s,static:o}=Y.useContext(Zd),{matches:a}=Y.useContext(gc),{pathname:l}=mu(),c=kl(),u=V_(e,W_(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return Y.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function W7(t){return A7(t.context)}function mi(t){di(!1)}function V7(t){let{basename:e="/",children:n=null,location:r,navigationType:i=vd.Pop,navigator:s,static:o=!1,future:a}=t;w0()&&di(!1);let l=e.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:yg({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=v0(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:y="default"}=r,x=Y.useMemo(()=>{let v=$_(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:y},navigationType:i}},[l,u,d,h,p,y,i]);return x==null?null:Y.createElement(Zd.Provider,{value:c},Y.createElement(Dv.Provider,{children:n,value:x}))}function H7(t){let{children:e,location:n}=t;return T7(l5(e),n)}new Promise(()=>{});function l5(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){n.push.apply(n,l5(r.props.children,s));return}r.type!==mi&&di(!1),!r.props.index||!r.props.children||di(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=l5(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c5(){return c5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c5.apply(this,arguments)}function q7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function G7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function K7(t,e){return t.button===0&&(!e||e==="_self")&&!G7(t)}const X7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Y7="6";try{window.__reactRouterVersion=Y7}catch{}const J7="startTransition",HN=GF[J7];function Z7(t){let{basename:e,children:n,future:r,window:i}=t,s=Y.useRef();s.current==null&&(s.current=QF({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=Y.useCallback(d=>{c&&HN?HN(()=>l(d)):l(d)},[l,c]);return Y.useLayoutEffect(()=>o.listen(u),[o,u]),Y.createElement(V7,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Q7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ez=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UP=Y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,h=q7(e,X7),{basename:p}=Y.useContext(Zd),y,x=!1;if(typeof c=="string"&&ez.test(c)&&(y=c,Q7))try{let k=new URL(window.location.href),T=c.startsWith("//")?new URL(k.protocol+c):new URL(c),j=$_(T.pathname,p);T.origin===k.origin&&j!=null?c=j+T.search+T.hash:x=!0}catch{}let v=N7(c,{relative:i}),b=tz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function S(k){r&&r(k),k.defaultPrevented||b(k)}return Y.createElement("a",c5({},h,{href:y||v,onClick:x||s?r:S,ref:n,target:l}))});var qN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qN||(qN={}));var GN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(GN||(GN={}));function tz(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=kl(),c=mu(),u=RP(t,{relative:o});return Y.useCallback(d=>{if(K7(d,n)){d.preventDefault();let h=r!==void 0?r:vx(c)===vx(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Jt=(t,e)=>{const n=Y.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>Y.createElement("svg",{ref:u,...nz,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${rz(t)}`,a].join(" "),...c},[...e.map(([d,h])=>Y.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=Jt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Jt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=Jt("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=Jt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=Jt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=Jt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=Jt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=Jt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=Jt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Jt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Jt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=Jt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=Jt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=Jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Jt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=Jt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=Jt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Jt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=Jt("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=Jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=Jt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=Jt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=Jt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=Jt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=Jt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=Jt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=Jt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=Jt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=Jt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=Jt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Jt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=Jt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Jt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=Jt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=Jt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Jt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Jt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Jt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Jt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=Jt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Jt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=Jt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Jt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=Jt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=Jt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=Jt("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Jt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=Jt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=Jt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=Jt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=Jt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Jt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=Jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=Jt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=Jt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ez="modulepreload",Az=function(t){return"/"+t},YN={},uu=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Az(l),l in YN)return;YN[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ez,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Tz=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>uu(async()=>{const{default:r}=await Promise.resolve().then(()=>S0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Q_ extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jz extends Q_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pz extends Q_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dz extends Q_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var p5;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(p5||(p5={}));var Oz=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class Lz{constructor(e,{headers:n={},customFetch:r,region:i=p5.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Tz(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Oz(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new jz(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Pz(u);if(!u.ok)throw new Dz(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Di={},hp={},pp={},mp={},gp={},yp={},Mz=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},t0=Mz();const Iz=t0.fetch,qP=t0.fetch.bind(t0),GP=t0.Headers,Rz=t0.Request,Fz=t0.Response,S0=Object.freeze(Object.defineProperty({__proto__:null,Headers:GP,Request:Rz,Response:Fz,default:qP,fetch:Iz},Symbol.toStringTag,{value:"Module"})),zz=AP(S0);var ay={},JN;function KP(){if(JN)return ay;JN=1,Object.defineProperty(ay,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return ay.default=t,ay}var ZN;function XP(){if(ZN)return yp;ZN=1;var t=yp&&yp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yp,"__esModule",{value:!0});const e=t(zz),n=t(KP());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let p=null,y=null,x=null,v=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=j:y=JSON.parse(j))}const k=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),T=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");k&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,x=null,v=406,b="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await c.text();try{p=JSON.parse(k),Array.isArray(p)&&c.status===404&&(y=[],p=null,v=200,b="OK")}catch{c.status===404&&k===""?(v=204,b="No Content"):p={message:k}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,v=200,b="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:y,count:x,status:v,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return yp.default=r,yp}var QN;function YP(){if(QN)return gp;QN=1;var t=gp&&gp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gp,"__esModule",{value:!0});const e=t(XP());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return gp.default=n,gp}var e3;function eS(){if(e3)return mp;e3=1;var t=mp&&mp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mp,"__esModule",{value:!0});const e=t(YP());class n extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return mp.default=n,mp}var t3;function JP(){if(t3)return pp;t3=1;var t=pp&&pp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pp,"__esModule",{value:!0});const e=t(eS());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return pp.default=n,pp}var um={},dm={},n3;function Bz(){return n3||(n3=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.version=void 0,dm.version="0.0.0-automated"),dm}var r3;function Uz(){if(r3)return um;r3=1,Object.defineProperty(um,"__esModule",{value:!0}),um.DEFAULT_HEADERS=void 0;const t=Bz();return um.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},um}var i3;function $z(){if(i3)return hp;i3=1;var t=hp&&hp.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hp,"__esModule",{value:!0});const e=t(JP()),n=t(eS()),r=Uz();class i{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let p;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{h.searchParams.append(x,v)})):(d="POST",p=a);const y=Object.assign({},this.headers);return u&&(y.Prefer=`count=${u}`),new n.default({method:d,url:h,headers:y,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return hp.default=i,hp}var s3;function Wz(){if(s3)return Di;s3=1;var t=Di&&Di.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Di,"__esModule",{value:!0}),Di.PostgrestError=Di.PostgrestBuilder=Di.PostgrestTransformBuilder=Di.PostgrestFilterBuilder=Di.PostgrestQueryBuilder=Di.PostgrestClient=void 0;const e=t($z());Di.PostgrestClient=e.default;const n=t(JP());Di.PostgrestQueryBuilder=n.default;const r=t(eS());Di.PostgrestFilterBuilder=r.default;const i=t(YP());Di.PostgrestTransformBuilder=i.default;const s=t(XP());Di.PostgrestBuilder=s.default;const o=t(KP());return Di.PostgrestError=o.default,Di.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Di}var Vz=Wz();const Hz=Pv(Vz),{PostgrestClient:qz,PostgrestQueryBuilder:v1e,PostgrestFilterBuilder:w1e,PostgrestTransformBuilder:b1e,PostgrestBuilder:_1e,PostgrestError:S1e}=Hz,Gz="2.11.2",Kz={"X-Client-Info":`realtime-js/${Gz}`},Xz="1.0.0",ZP=1e4,Yz=1e3;var qp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(qp||(qp={}));var Xo;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xo||(Xo={}));var ml;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ml||(ml={}));var m5;(function(t){t.websocket="websocket"})(m5||(m5={}));var Gf;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Gf||(Gf={}));class Jz{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class QP{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var br;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(br||(br={}));const o3=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Zz(o,t,e,i),s),{})},Zz=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?e6(s,o):g5(o)},e6=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return nB(e,n)}switch(t){case br.bool:return Qz(e);case br.float4:case br.float8:case br.int2:case br.int4:case br.int8:case br.numeric:case br.oid:return eB(e);case br.json:case br.jsonb:return tB(e);case br.timestamp:return rB(e);case br.abstime:case br.date:case br.daterange:case br.int4range:case br.int8range:case br.money:case br.reltime:case br.text:case br.time:case br.timestamptz:case br.timetz:case br.tsrange:case br.tstzrange:return g5(e);default:return g5(e)}},g5=t=>t,Qz=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},eB=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},tB=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},nB=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>e6(e,a))}return t},rB=t=>typeof t=="string"?t.replace(" ","T"):t,t6=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class bw{constructor(e,n,r={},i=ZP){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var a3;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(a3||(a3={}));class zm{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zm.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=zm.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zm.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const h=u.map(v=>v.presence_ref),p=d.map(v=>v.presence_ref),y=u.filter(v=>p.indexOf(v.presence_ref)<0),x=d.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(a[c]=y),x.length>0&&(l[c]=x)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var l3;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(l3||(l3={}));var c3;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(c3||(c3={}));var Yc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yc||(Yc={}));class tS{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Xo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bw(this,ml.join,this.params,this.timeout),this.rejoinTimer=new QP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xo.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Xo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ml.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new zm(this),this.broadcastEndpointURL=t6(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Yc.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Yc.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Yc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,y=[];for(let x=0;x<p;x++){const v=h[x],{filter:{event:b,schema:S,table:k,filter:T}}=v,j=u&&u[x];if(j&&j.event===b&&j.schema===S&&j.table===k&&j.filter===T)y.push(Object.assign(Object.assign({},v),{id:j.id}));else{this.unsubscribe(),e==null||e(Yc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Yc.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Yc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xo.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ml.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new bw(this,ml.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new bw(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ml;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var y,x,v;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(x=p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var y,x,v,b,S,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const T=p.id,j=(y=p.filter)===null||y===void 0?void 0:y.event;return T&&((x=n.ids)===null||x===void 0?void 0:x.includes(T))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const T=(S=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:x,table:v,commit_timestamp:b,type:S,errors:k}=y;h=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:b,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(y))}p.callback(h,r)})}_isClosed(){return this.state===Xo.closed}_isJoined(){return this.state===Xo.joined}_isJoining(){return this.state===Xo.joining}_isLeaving(){return this.state===Xo.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&tS.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ml.close,{},e)}_onError(e){this._on(ml.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xo.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=o3(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=o3(e.columns,e.old_record)),n}}const iB=()=>{},sB=typeof WebSocket<"u",oB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aB{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Kz,this.params={},this.timeout=ZP,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=iB,this.conn=null,this.sendBuffer=[],this.serializer=new Jz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>uu(async()=>{const{default:l}=await Promise.resolve().then(()=>S0);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${m5.websocket}`,this.httpEndpoint=t6(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new QP(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(sB){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new lB(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),uu(async()=>{const{default:e}=await import("./browser-BA00O43P.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xz}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qp.connecting:return Gf.Connecting;case qp.open:return Gf.Open;case qp.closing:return Gf.Closing;default:return Gf.Closed}}isConnected(){return this.connectionState()===Gf.Open}channel(e,n={config:{}}){const r=new tS(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(ml.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Yz,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ml.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oB],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class lB{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=qp.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class nS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oi(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cB extends nS{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class y5 extends nS{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var uB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const n6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>uu(async()=>{const{default:r}=await Promise.resolve().then(()=>S0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},dB=()=>uB(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield uu(()=>Promise.resolve().then(()=>S0),void 0)).Response:Response}),x5=t=>{if(Array.isArray(t))return t.map(n=>x5(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=x5(r)}),e};var Ch=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const _w=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fB=(t,e,n)=>Ch(void 0,void 0,void 0,function*(){const r=yield dB();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new cB(_w(i),t.status||500))}).catch(i=>{e(new y5(_w(i),i))}):e(new y5(_w(t),t))}),hB=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function o1(t,e,n,r,i,s){return Ch(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,hB(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>fB(l,a,r))})})}function _x(t,e,n,r){return Ch(this,void 0,void 0,function*(){return o1(t,"GET",e,n,r)})}function fd(t,e,n,r,i){return Ch(this,void 0,void 0,function*(){return o1(t,"POST",e,r,i,n)})}function pB(t,e,n,r,i){return Ch(this,void 0,void 0,function*(){return o1(t,"PUT",e,r,i,n)})}function mB(t,e,n,r){return Ch(this,void 0,void 0,function*(){return o1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function r6(t,e,n,r,i){return Ch(this,void 0,void 0,function*(){return o1(t,"DELETE",e,r,i,n)})}var bo=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const gB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},u3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yB{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=n6(i)}uploadOrUpdate(e,n,r,i){return bo(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},u3),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(Oi(s))return{data:null,error:s};throw s}})}upload(e,n,r){return bo(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return bo(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:u3.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Oi(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return bo(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield fd(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new nS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}update(e,n,r){return bo(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return bo(this,void 0,void 0,function*(){try{return{data:yield fd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}copy(e,n,r){return bo(this,void 0,void 0,function*(){try{return{data:{path:(yield fd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return bo(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield fd(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return bo(this,void 0,void 0,function*(){try{const i=yield fd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}download(e,n){return bo(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield _x(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Oi(a))return{data:null,error:a};throw a}})}info(e){return bo(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield _x(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:x5(r),error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}exists(e){return bo(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield mB(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Oi(r)&&r instanceof y5){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return bo(this,void 0,void 0,function*(){try{return{data:yield r6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}list(e,n,r){return bo(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},gB),n),{prefix:e||""});return{data:yield fd(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const xB="2.7.1",vB={"X-Client-Info":`storage-js/${xB}`};var xp=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class wB{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},vB),n),this.fetch=n6(r)}listBuckets(){return xp(this,void 0,void 0,function*(){try{return{data:yield _x(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Oi(e))return{data:null,error:e};throw e}})}getBucket(e){return xp(this,void 0,void 0,function*(){try{return{data:yield _x(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return xp(this,void 0,void 0,function*(){try{return{data:yield fd(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return xp(this,void 0,void 0,function*(){try{return{data:yield pB(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xp(this,void 0,void 0,function*(){try{return{data:yield fd(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return xp(this,void 0,void 0,function*(){try{return{data:yield r6(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}}class bB extends wB{constructor(e,n={},r){super(e,n,r)}from(e){return new yB(this.url,this.headers,e,this.fetch)}}const _B="2.49.1";let Cm="";typeof Deno<"u"?Cm="deno":typeof document<"u"?Cm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cm="react-native":Cm="node";const SB={"X-Client-Info":`supabase-js-${Cm}/${_B}`},kB={headers:SB},NB={schema:"public"},CB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},EB={};var AB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const TB=t=>{let e;return t?e=t:typeof fetch>"u"?e=qP:e=fetch,(...n)=>e(...n)},jB=()=>typeof Headers>"u"?GP:Headers,PB=(t,e,n)=>{const r=TB(n),i=jB();return(s,o)=>AB(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var DB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function OB(t){return t.replace(/\/$/,"")}function LB(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>DB(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const i6="2.68.0",Pp=30*1e3,v5=3,Sw=v5*Pp,MB="http://localhost:9999",IB="supabase.auth.token",RB={"X-Client-Info":`gotrue-js/${i6}`},w5="X-Supabase-Api-Version",s6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function FB(t){return Math.round(Date.now()/1e3)+t}function zB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Kl=()=>typeof window<"u"&&typeof document<"u",Lf={tested:!1,writable:!1},Bm=()=>{if(!Kl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lf.tested)return Lf.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Lf.tested=!0,Lf.writable=!0}catch{Lf.tested=!0,Lf.writable=!1}return Lf.writable};function BB(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const o6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>uu(async()=>{const{default:r}=await Promise.resolve().then(()=>S0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},UB=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",a6=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ly=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},cy=async(t,e)=>{await t.removeItem(e)};function $B(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,o,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Mv{constructor(){this.promise=new Mv.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Mv.promiseConstructor=Promise;function d3(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse($B(r))}async function WB(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function VB(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function HB(t){return("0"+t.toString(16)).substr(-2)}function qB(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,HB).join("")}async function GB(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function KB(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function XB(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await GB(t);return KB(n)}async function vp(t,e,n=!1){const r=qB();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await a6(t,`${e}-code-verifier`,i);const s=await XB(r);return[s,r===s?"plain":"s256"]}const YB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JB(t){const e=t.headers.get(w5);if(!e||!e.match(YB))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class rS extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function En(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ZB extends rS{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function QB(t){return En(t)&&t.name==="AuthApiError"}class l6 extends rS{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Eh extends rS{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class ad extends Eh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e9(t){return En(t)&&t.name==="AuthSessionMissingError"}class kw extends Eh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uy extends Eh{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dy extends Eh{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t9(t){return En(t)&&t.name==="AuthImplicitGrantRedirectError"}class f3 extends Eh{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class b5 extends Eh{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Nw(t){return En(t)&&t.name==="AuthRetryableFetchError"}class h3 extends Eh{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var n9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Bf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),r9=[502,503,504];async function p3(t){var e;if(!UB(t))throw new b5(Bf(t),0);if(r9.includes(t.status))throw new b5(Bf(t),t.status);let n;try{n=await t.json()}catch(s){throw new l6(Bf(s),s)}let r;const i=JB(t);if(i&&i.getTime()>=s6["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new h3(Bf(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ad}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new h3(Bf(n),t.status,n.weak_password.reasons);throw new ZB(Bf(n),t.status||500,r)}const i9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function In(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[w5]||(s[w5]=s6["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await s9(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function s9(t,e,n,r,i,s){const o=i9(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new b5(Bf(l),0)}if(a.ok||await p3(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await p3(l)}}function ld(t){var e;let n=null;c9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=FB(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function m3(t){const e=ld(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gd(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function o9(t){return{data:t,error:null}}function a9(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=n9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function l9(t){return t}function c9(t){return t.access_token&&t.refresh_token&&t.expires_in}var u9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class d9{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=o6(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await In(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(En(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await In(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gd})}catch(r){if(En(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=u9(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await In(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:a9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(En(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await In(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gd})}catch(n){if(En(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await In(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:l9});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=x}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(En(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await In(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gd})}catch(n){if(En(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await In(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:gd})}catch(r){if(En(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await In(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:gd})}catch(r){if(En(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await In(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(En(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await In(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(En(n))return{data:null,error:n};throw n}}}const f9={getItem:t=>Bm()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Bm()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Bm()&&globalThis.localStorage.removeItem(t)}};function g3(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function h9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wp={debug:!!(globalThis&&Bm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class c6 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class p9 extends c6{}async function m9(t,e,n){wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),wp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new p9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wp.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}h9();const g9={url:MB,storageKey:IB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function y3(t,e,n){return await n()}class xg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xg.nextInstanceID,xg.nextInstanceID+=1,this.instanceID>0&&Kl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},g9),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new d9({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=o6(i.fetch),this.lock=i.lock||y3,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Kl()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=m9:this.lock=y3,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Bm()?this.storage=f9:(this.memoryStorage={},this.storage=g3(this.memoryStorage)):(this.memoryStorage={},this.storage=g3(this.memoryStorage)),Kl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${i6}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=BB(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Kl()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),t9(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return En(n)?{error:n}:{error:new l6("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await In(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ld}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(En(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await vp(this.storage,this.storageKey)),s=await In(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:y},xform:ld})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await In(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ld})}else throw new uy("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(En(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await In(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:m3})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await In(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:m3})}else throw new uy("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new kw}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(En(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await ly(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await In(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ld});if(await cy(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new kw}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(En(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await In(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ld}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new kw}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(En(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vp(this.storage,this.storageKey));const{error:d}=await In(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await In(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new uy("You must provide either an email or phone number.")}catch(a){if(En(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await In(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ld});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(En(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await vp(this.storage,this.storageKey)),await In(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:o9})}catch(s){if(En(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ad;const{error:i}=await In(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(En(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await In(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await In(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new uy("You must provide either an email or phone number and a type")}catch(n){if(En(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ly(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Sw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await In(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gd}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ad}:await In(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:gd})})}catch(n){if(En(n))return e9(n)&&(await this._removeSession(),await cy(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ad;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vp(this.storage,this.storageKey));const{data:c,error:u}=await In(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:gd});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(En(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return d3(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ad;const n=Date.now()/1e3;let r=n,i=!0,s=null;const o=d3(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(En(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ad;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(En(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Kl())throw new dy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new f3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new f3("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new dy("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=Pp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const y=h-d;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:x,error:v}=await this._getUser(s);if(v)throw v;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(En(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ly(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(QB(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await cy(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=zB(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await vp(this.storage,this.storageKey,!0));try{return await In(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(En(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(En(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await In(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Kl()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(En(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await In(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(En(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await VB(async i=>(i>0&&await WB(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await In(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ld})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Nw(s)&&Date.now()+o-r<Pp})}catch(r){if(this._debug(n,"error",r),En(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Kl()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ly(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Sw;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Sw}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Nw(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ad;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Mv;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ad;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),En(s)){const o={session:null,error:s};return Nw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await a6(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await cy(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Pp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Pp}ms, refresh threshold is ${v5} ticks`),i<=v5&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof c6)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await vp(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await In(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(En(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await In(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(En(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await In(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(En(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await In(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(En(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}xg.nextInstanceID=0;const y9=xg;class x9 extends y9{constructor(e){super(e)}}var v9=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class w9{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=OB(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:NB,realtime:EB,auth:Object.assign(Object.assign({},CB),{storageKey:l}),global:kB},u=LB(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=PB(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new qz(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Lz(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new bB(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return v9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x9({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new aB(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const b9=(t,e,n)=>new w9(t,e,n),_9="https://klumxecllfauamqnrckf.supabase.co",S9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtsdW14ZWNsbGZhdWFtcW5yY2tmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE2NDcyNzUsImV4cCI6MjA1NzIyMzI3NX0.S20v_K_5pDY0oA-4ztB1mlRWRF4vyt-NETZkvyx0PjE",lt=b9(_9,S9,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"x-application-name":"rezerwacje-v4"},fetch:(t,e={})=>{const n=new AbortController,r=setTimeout(()=>n.abort(),3e4);return fetch(t,{...e,signal:n.signal}).finally(()=>{clearTimeout(r)})}},realtime:{timeout:6e4,params:{eventsPerSecond:10}},db:{schema:"public"}});let Cw=!1;const k9=async()=>{var t;try{const e=await lt.auth.getUser();if(e.error)return console.error("Błąd pobierania użytkownika:",e.error),!1;const n=e.data.user;if(!n)return!1;const r=await lt.from("profiles").select("is_admin").eq("id",n.id).single();return r.error?(console.error("Błąd pobierania profilu:",r.error),!1):((t=r.data)==null?void 0:t.is_admin)||!1}catch(e){return console.error("Błąd podczas sprawdzania uprawnień administratora:",e),!1}},N9=async()=>{try{const t=new AbortController,e=setTimeout(()=>t.abort(),5e3),n=await lt.from("profiles").select("id").limit(1).abortSignal(t.signal);return clearTimeout(e),n.error?(console.error("Błąd połączenia z Supabase:",n.error),n.error.message.includes("querying schema")?console.error("Problem z dostępem do schematu bazy danych"):n.error.message.includes("network error")&&console.error("Problem z siecią - brak połączenia internetowego"),Cw=!1,!1):(Cw=!0,!0)}catch(t){return console.error("Wyjątek podczas sprawdzania połączenia z Supabase:",t),t instanceof DOMException&&t.name==="AbortError"&&console.error("Przekroczono limit czasu oczekiwania na odpowiedź serwera"),Cw=!1,!1}},C9=(t,e=12)=>{const n=t.getDay(),r=t.getHours();return n===6&&r>=e},Sx=(t,e,n=null,r=null)=>{if(!t||!e)return 0;const i=new Date(t),s=new Date(e);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const o=Math.abs(s.getTime()-i.getTime());return Math.ceil(o/(1e3*60*60*24))+1},E9=t=>t.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}),x3=async(t,e,n,r=!1)=>!0,Ew=async(t,e)=>{const n=new Date(e);return n.setDate(n.getDate()+1),n},A9=async(t,e,n)=>{try{const{data:r,error:i}=await lt.from("reservations").select(`
        id,
        start_date,
        end_date,
        start_time,
        end_time,
        status,
        reservation_items!inner (
          equipment_id,
          equipment:equipment (
            name,
            description
          )
        )
      `).gte("start_date",e.toISOString()).lte("end_date",n.toISOString()).neq("status","cancelled");if(i)return console.error("Błąd podczas pobierania rezerwacji:",i),new Map;const s=new Map;return t.forEach(o=>{s.set(o,[])}),r&&r.forEach(o=>{o.reservation_items.forEach(a=>{var c;const l=a.equipment_id;if(t.includes(l)){const u={...o,equipment_name:((c=a.equipment)==null?void 0:c.name)||"Nieznany sprzęt"},d=s.get(l)||[];d.push(u),s.set(l,d)}})}),s}catch(r){return console.error("Wystąpił błąd podczas pobierania rezerwacji:",r),new Map}},fy=t=>`${E9(t)}, ${t.getHours().toString().padStart(2,"0")}:00`,iS=Y.createContext({});function sS(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Iv=Y.createContext(null),oS=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class T9 extends Y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function j9({children:t,isPresent:e}){const n=Y.useId(),r=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Y.useContext(oS);return Y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),g.jsx(T9,{isPresent:e,childRef:r,sizeRef:i,children:Y.cloneElement(t,{ref:r})})}const P9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=sS(D9),l=Y.useId(),c=Y.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),u=Y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return Y.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),Y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=g.jsx(j9,{isPresent:n,children:t})),g.jsx(Iv.Provider,{value:u,children:t})};function D9(){return new Map}function u6(t=!0){const e=Y.useContext(Iv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=Y.useId();Y.useEffect(()=>{t&&i(s)},[t]);const o=Y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const hy=t=>t.key||"";function v3(t){const e=[];return Y.Children.forEach(t,n=>{Y.isValidElement(n)&&e.push(n)}),e}const aS=typeof window<"u",d6=aS?Y.useLayoutEffect:Y.useEffect,fc=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=u6(o),c=Y.useMemo(()=>v3(t),[t]),u=o&&!a?[]:c.map(hy),d=Y.useRef(!0),h=Y.useRef(c),p=sS(()=>new Map),[y,x]=Y.useState(c),[v,b]=Y.useState(c);d6(()=>{d.current=!1,h.current=c;for(let T=0;T<v.length;T++){const j=hy(v[T]);u.includes(j)?p.delete(j):p.get(j)!==!0&&p.set(j,!1)}},[v,u.length,u.join("-")]);const S=[];if(c!==y){let T=[...c];for(let j=0;j<v.length;j++){const P=v[j],C=hy(P);u.includes(C)||(T.splice(j,0,P),S.push(P))}s==="wait"&&S.length&&(T=S),b(v3(T)),x(c);return}const{forceRender:k}=Y.useContext(iS);return g.jsx(g.Fragment,{children:v.map(T=>{const j=hy(T),P=o&&!a?!1:c===v||u.includes(j),C=()=>{if(p.has(j))p.set(j,!0);else return;let N=!0;p.forEach(O=>{O||(N=!1)}),N&&(k==null||k(),b(h.current),o&&(l==null||l()),r&&r())};return g.jsx(P9,{isPresent:P,initial:!d.current||n?void 0:!1,custom:P?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:P?void 0:C,children:T},j)})})},ia=t=>t;let f6=ia;function lS(t){let e;return()=>(e===void 0&&(e=t()),e)}const n0=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},nu=t=>t*1e3,ru=t=>t/1e3,O9={useManualTiming:!1};function L9(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const p=d&&r?e:n;return u&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const py=["read","resolveKeyframes","update","preRender","render","postRender"],M9=40;function h6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=py.reduce((b,S)=>(b[S]=L9(s),b),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,p=()=>{const b=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,M9),1),i.timestamp=b,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:py.reduce((b,S)=>{const k=o[S];return b[S]=(T,j=!1,P=!1)=>(n||y(),k.schedule(T,j,P)),b},{}),cancel:b=>{for(let S=0;S<py.length;S++)o[py[S]].cancel(b)},state:i,steps:o}}const{schedule:Or,cancel:Ud,state:ns,steps:Aw}=h6(typeof requestAnimationFrame<"u"?requestAnimationFrame:ia,!0),p6=Y.createContext({strict:!1}),w3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},r0={};for(const t in w3)r0[t]={isEnabled:e=>w3[t].some(n=>!!e[n])};function I9(t){for(const e in t)r0[e]={...r0[e],...t[e]}}const R9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||R9.has(t)}let m6=t=>!kx(t);function F9(t){t&&(m6=e=>e.startsWith("on")?!kx(e):t(e))}try{F9(require("@emotion/is-prop-valid").default)}catch{}function z9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(m6(i)||n===!0&&kx(i)||!e&&!kx(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function B9(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Rv=Y.createContext({});function vg(t){return typeof t=="string"||Array.isArray(t)}function Fv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const cS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uS=["initial",...cS];function zv(t){return Fv(t.animate)||uS.some(e=>vg(t[e]))}function g6(t){return!!(zv(t)||t.variants)}function U9(t,e){if(zv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||vg(n)?n:void 0,animate:vg(r)?r:void 0}}return t.inherit!==!1?e:{}}function $9(t){const{initial:e,animate:n}=U9(t,Y.useContext(Rv));return Y.useMemo(()=>({initial:e,animate:n}),[b3(e),b3(n)])}function b3(t){return Array.isArray(t)?t.join(" "):t}const W9=Symbol.for("motionComponentSymbol");function Rp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function V9(t,e,n){return Y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Rp(n)&&(n.current=r))},[e])}const dS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H9="framerAppearId",y6="data-"+dS(H9),{schedule:fS}=h6(queueMicrotask,!1),x6=Y.createContext({});function q9(t,e,n,r,i){var s,o;const{visualElement:a}=Y.useContext(Rv),l=Y.useContext(p6),c=Y.useContext(Iv),u=Y.useContext(oS).reducedMotion,d=Y.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=Y.useContext(x6);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&G9(d.current,n,i,p);const y=Y.useRef(!1);Y.useInsertionEffect(()=>{h&&y.current&&h.update(n,c)});const x=n[y6],v=Y.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return d6(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),fS.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),Y.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,x)}),v.current=!1))}),h}function G9(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:v6(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Rp(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function v6(t){if(t)return t.options.allowProjection!==!1?t.projection:v6(t.parent)}function K9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&I9(t);function a(c,u){let d;const h={...Y.useContext(oS),...c,layoutId:X9(c)},{isStatic:p}=h,y=$9(c),x=r(c,p);if(!p&&aS){Y9();const v=J9(h);d=v.MeasureLayout,y.visualElement=q9(i,x,h,e,v.ProjectionNode)}return g.jsxs(Rv.Provider,{value:y,children:[d&&y.visualElement?g.jsx(d,{visualElement:y.visualElement,...h}):null,n(i,c,V9(x,y.visualElement,u),x,p,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=Y.forwardRef(a);return l[W9]=i,l}function X9({layoutId:t}){const e=Y.useContext(iS).id;return e&&t!==void 0?e+"-"+t:t}function Y9(t,e){Y.useContext(p6).strict}function J9(t){const{drag:e,layout:n}=r0;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Z9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hS(t){return typeof t!="string"||t.includes("-")?!1:!!(Z9.indexOf(t)>-1||/[A-Z]/u.test(t))}function _3(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function pS(t,e,n,r){if(typeof e=="function"){const[i,s]=_3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=_3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const _5=t=>Array.isArray(t),Q9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),eU=t=>_5(t)?t[t.length-1]||0:t,Os=t=>!!(t&&t.getVelocity);function rx(t){const e=Os(t)?t.get():t;return Q9(e)?e.toValue():e}function tU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:nU(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const w6=t=>(e,n)=>{const r=Y.useContext(Rv),i=Y.useContext(Iv),s=()=>tU(t,e,r,i);return n?s():sS(s)};function nU(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=rx(s[h]);let{initial:o,animate:a}=t;const l=zv(t),c=g6(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Fv(d)){const h=Array.isArray(d)?d:[d];for(let p=0;p<h.length;p++){const y=pS(t,h[p]);if(y){const{transitionEnd:x,transition:v,...b}=y;for(const S in b){let k=b[S];if(Array.isArray(k)){const T=u?k.length-1:0;k=k[T]}k!==null&&(i[S]=k)}for(const S in x)i[S]=x[S]}}}return i}const k0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ah=new Set(k0),b6=t=>e=>typeof e=="string"&&e.startsWith(t),_6=b6("--"),rU=b6("var(--"),mS=t=>rU(t)?iU.test(t.split("/*")[0].trim()):!1,iU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,S6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,du=(t,e,n)=>n>e?e:n<t?t:n,N0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wg={...N0,transform:t=>du(0,1,t)},my={...N0,default:1},a1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),cd=a1("deg"),oc=a1("%"),un=a1("px"),sU=a1("vh"),oU=a1("vw"),S3={...oc,parse:t=>oc.parse(t)/100,transform:t=>oc.transform(t*100)},aU={borderWidth:un,borderTopWidth:un,borderRightWidth:un,borderBottomWidth:un,borderLeftWidth:un,borderRadius:un,radius:un,borderTopLeftRadius:un,borderTopRightRadius:un,borderBottomRightRadius:un,borderBottomLeftRadius:un,width:un,maxWidth:un,height:un,maxHeight:un,top:un,right:un,bottom:un,left:un,padding:un,paddingTop:un,paddingRight:un,paddingBottom:un,paddingLeft:un,margin:un,marginTop:un,marginRight:un,marginBottom:un,marginLeft:un,backgroundPositionX:un,backgroundPositionY:un},lU={rotate:cd,rotateX:cd,rotateY:cd,rotateZ:cd,scale:my,scaleX:my,scaleY:my,scaleZ:my,skew:cd,skewX:cd,skewY:cd,distance:un,translateX:un,translateY:un,translateZ:un,x:un,y:un,z:un,perspective:un,transformPerspective:un,opacity:wg,originX:S3,originY:S3,originZ:un},k3={...N0,transform:Math.round},gS={...aU,...lU,zIndex:k3,size:un,fillOpacity:wg,strokeOpacity:wg,numOctaves:k3},cU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uU=k0.length;function dU(t,e,n){let r="",i=!0;for(let s=0;s<uU;s++){const o=k0[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=S6(a,gS[o]);if(!l){i=!1;const u=cU[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function yS(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ah.has(l)){o=!0;continue}else if(_6(l)){i[l]=c;continue}else{const u=S6(c,gS[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=dU(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const fU={offset:"stroke-dashoffset",array:"stroke-dasharray"},hU={offset:"strokeDashoffset",array:"strokeDasharray"};function pU(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?fU:hU;t[s.offset]=un.transform(-r);const o=un.transform(e),a=un.transform(n);t[s.array]=`${o} ${a}`}function N3(t,e,n){return typeof t=="string"?t:un.transform(e+n*t)}function mU(t,e,n){const r=N3(e,t.x,t.width),i=N3(n,t.y,t.height);return`${r} ${i}`}function xS(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(yS(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:y}=t;h.transform&&(y&&(p.transform=h.transform),delete h.transform),y&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=mU(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&pU(h,o,a,l,!1)}const vS=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),k6=()=>({...vS(),attrs:{}}),wS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function N6(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const C6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function E6(t,e,n,r){N6(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(C6.has(i)?i:dS(i),e.attrs[i])}const Nx={};function gU(t){Object.assign(Nx,t)}function A6(t,{layout:e,layoutId:n}){return Ah.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Nx[t]||t==="opacity")}function bS(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Os(i[o])||e.style&&Os(e.style[o])||A6(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function T6(t,e,n){const r=bS(t,e,n);for(const i in t)if(Os(t[i])||Os(e[i])){const s=k0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function yU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const C3=["x","y","width","height","cx","cy","r"],xU={useVisualState:w6({scrapeMotionValuesFromProps:T6,createRenderState:k6,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Ah.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<C3.length;a++){const l=C3[a];t[l]!==e[l]&&(o=!0)}o&&Or.read(()=>{yU(n,r),Or.render(()=>{xS(r,i,wS(n.tagName),t.transformTemplate),E6(n,r)})})}})},vU={useVisualState:w6({scrapeMotionValuesFromProps:bS,createRenderState:vS})};function j6(t,e,n){for(const r in e)!Os(e[r])&&!A6(r,n)&&(t[r]=e[r])}function wU({transformTemplate:t},e){return Y.useMemo(()=>{const n=vS();return yS(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bU(t,e){const n=t.style||{},r={};return j6(r,n,t),Object.assign(r,wU(t,e)),r}function _U(t,e){const n={},r=bU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function SU(t,e,n,r){const i=Y.useMemo(()=>{const s=k6();return xS(s,e,wS(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};j6(s,t.style,t),i.style={...s,...i.style}}return i}function kU(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(hS(n)?SU:_U)(r,s,o,n),c=z9(r,typeof n=="string",t),u=n!==Y.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=Y.useMemo(()=>Os(d)?d.get():d,[d]);return Y.createElement(n,{...u,children:h})}}function NU(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...hS(r)?xU:vU,preloadedFeatures:t,useRender:kU(i),createVisualElement:e,Component:r};return K9(o)}}function P6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Bv(t,e,n){const r=t.getProps();return pS(r,e,n!==void 0?n:r.custom,t)}const CU=lS(()=>window.ScrollTimeline!==void 0);class EU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(CU()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class AU extends EU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function _S(t,e){return t?t[e]||t.default||t:void 0}const S5=2e4;function D6(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<S5;)e+=n,r=t.next(e);return e>=S5?1/0:e}function SS(t){return typeof t=="function"}function E3(t,e){t.timeline=e,t.onfinish=null}const kS=t=>Array.isArray(t)&&typeof t[0]=="number",TU={linearEasing:void 0};function jU(t,e){const n=lS(t);return()=>{var r;return(r=TU[e])!==null&&r!==void 0?r:n()}}const Cx=jU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),O6=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(n0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function L6(t){return!!(typeof t=="function"&&Cx()||!t||typeof t=="string"&&(t in k5||Cx())||kS(t)||Array.isArray(t)&&t.every(L6))}const Em=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,k5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Em([0,.65,.55,1]),circOut:Em([.55,0,1,.45]),backIn:Em([.31,.01,.66,-.59]),backOut:Em([.33,1.53,.69,.99])};function M6(t,e){if(t)return typeof t=="function"&&Cx()?O6(t,e):kS(t)?Em(t):Array.isArray(t)?t.map(n=>M6(n,e)||k5.easeOut):k5[t]}const pl={x:!1,y:!1};function I6(){return pl.x||pl.y}function PU(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function R6(t,e){const n=PU(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function A3(t){return e=>{e.pointerType==="touch"||I6()||t(e)}}function DU(t,e,n={}){const[r,i,s]=R6(t,n),o=A3(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=A3(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const F6=(t,e)=>e?t===e?!0:F6(t,e.parentElement):!1,NS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,OU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function LU(t){return OU.has(t.tagName)||t.tabIndex!==-1}const Am=new WeakSet;function T3(t){return e=>{e.key==="Enter"&&t(e)}}function Tw(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=T3(()=>{if(Am.has(n))return;Tw(n,"down");const i=T3(()=>{Tw(n,"up")}),s=()=>Tw(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function j3(t){return NS(t)&&!I6()}function IU(t,e,n={}){const[r,i,s]=R6(t,n),o=a=>{const l=a.currentTarget;if(!j3(a)||Am.has(l))return;Am.add(l);const c=e(a),u=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!j3(p)||!Am.has(l))&&(Am.delete(l),typeof c=="function"&&c(p,{success:y}))},d=p=>{u(p,n.useGlobalTarget||F6(l,p.target))},h=p=>{u(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!LU(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>MU(c,i),i)}),s}function RU(t){return t==="x"||t==="y"?pl[t]?null:(pl[t]=!0,()=>{pl[t]=!1}):pl.x||pl.y?null:(pl.x=pl.y=!0,()=>{pl.x=pl.y=!1})}const z6=new Set(["width","height","top","left","right","bottom",...k0]);let ix;function FU(){ix=void 0}const ac={now:()=>(ix===void 0&&ac.set(ns.isProcessing||O9.useManualTiming?ns.timestamp:performance.now()),ix),set:t=>{ix=t,queueMicrotask(FU)}};function CS(t,e){t.indexOf(e)===-1&&t.push(e)}function ES(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class AS{constructor(){this.subscriptions=[]}add(e){return CS(this.subscriptions,e),()=>ES(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function B6(t,e){return e?t*(1e3/e):0}const P3=30,zU=t=>!isNaN(parseFloat(t));class BU{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ac.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ac.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=zU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new AS);const r=this.events[e].add(n);return e==="change"?()=>{r(),Or.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ac.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>P3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,P3);return B6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bg(t,e){return new BU(t,e)}function UU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bg(n))}function $U(t,e){const n=Bv(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=eU(s[o]);UU(t,o,a)}}function WU(t){return!!(Os(t)&&t.add)}function N5(t,e){const n=t.getValue("willChange");if(WU(n))return n.add(e)}function U6(t){return t.props[y6]}const $6=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,VU=1e-7,HU=12;function qU(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=$6(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>VU&&++a<HU);return o}function l1(t,e,n,r){if(t===e&&n===r)return ia;const i=s=>qU(s,0,1,t,n);return s=>s===0||s===1?s:$6(i(s),e,r)}const W6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,V6=t=>e=>1-t(1-e),H6=l1(.33,1.53,.69,.99),TS=V6(H6),q6=W6(TS),G6=t=>(t*=2)<1?.5*TS(t):.5*(2-Math.pow(2,-10*(t-1))),jS=t=>1-Math.sin(Math.acos(t)),K6=V6(jS),X6=W6(jS),Y6=t=>/^0[^.\s]+$/u.test(t);function GU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Y6(t):!0}const Um=t=>Math.round(t*1e5)/1e5,PS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KU(t){return t==null}const XU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,DS=(t,e)=>n=>!!(typeof n=="string"&&XU.test(n)&&n.startsWith(t)||e&&!KU(n)&&Object.prototype.hasOwnProperty.call(n,e)),J6=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(PS);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},YU=t=>du(0,255,t),jw={...N0,transform:t=>Math.round(YU(t))},Jf={test:DS("rgb","red"),parse:J6("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+jw.transform(t)+", "+jw.transform(e)+", "+jw.transform(n)+", "+Um(wg.transform(r))+")"};function JU(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const C5={test:DS("#"),parse:JU,transform:Jf.transform},Fp={test:DS("hsl","hue"),parse:J6("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+oc.transform(Um(e))+", "+oc.transform(Um(n))+", "+Um(wg.transform(r))+")"},js={test:t=>Jf.test(t)||C5.test(t)||Fp.test(t),parse:t=>Jf.test(t)?Jf.parse(t):Fp.test(t)?Fp.parse(t):C5.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Jf.transform(t):Fp.transform(t)},ZU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QU(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(PS))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ZU))===null||n===void 0?void 0:n.length)||0)>0}const Z6="number",Q6="color",e$="var",t$="var(",D3="${}",n$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _g(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(n$,l=>(js.test(l)?(r.color.push(s),i.push(Q6),n.push(js.parse(l))):l.startsWith(t$)?(r.var.push(s),i.push(e$),n.push(l)):(r.number.push(s),i.push(Z6),n.push(parseFloat(l))),++s,D3)).split(D3);return{values:n,split:a,indexes:r,types:i}}function eD(t){return _g(t).values}function tD(t){const{split:e,types:n}=_g(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Z6?s+=Um(i[o]):a===Q6?s+=js.transform(i[o]):s+=i[o]}return s}}const r$=t=>typeof t=="number"?0:t;function i$(t){const e=eD(t);return tD(t)(e.map(r$))}const $d={test:QU,parse:eD,createTransformer:tD,getAnimatableNone:i$},s$=new Set(["brightness","contrast","saturate","opacity"]);function o$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(PS)||[];if(!r)return t;const i=n.replace(r,"");let s=s$.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const a$=/\b([a-z-]*)\(.*?\)/gu,E5={...$d,getAnimatableNone:t=>{const e=t.match(a$);return e?e.map(o$).join(" "):t}},l$={...gS,color:js,backgroundColor:js,outlineColor:js,fill:js,stroke:js,borderColor:js,borderTopColor:js,borderRightColor:js,borderBottomColor:js,borderLeftColor:js,filter:E5,WebkitFilter:E5},OS=t=>l$[t];function nD(t,e){let n=OS(t);return n!==E5&&(n=$d),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const c$=new Set(["auto","none","0"]);function u$(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!c$.has(s)&&_g(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=nD(n,i)}const O3=t=>t===N0||t===un,L3=(t,e)=>parseFloat(t.split(", ")[e]),M3=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return L3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?L3(s[1],t):0}},d$=new Set(["x","y","z"]),f$=k0.filter(t=>!d$.has(t));function h$(t){const e=[];return f$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const i0={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:M3(4,13),y:M3(5,14)};i0.translateX=i0.x;i0.translateY=i0.y;const sh=new Set;let A5=!1,T5=!1;function rD(){if(T5){const t=Array.from(sh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=h$(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}T5=!1,A5=!1,sh.forEach(t=>t.complete()),sh.clear()}function iD(){sh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(T5=!0)})}function p$(){iD(),rD()}class LS{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(sh.add(this),A5||(A5=!0,Or.read(iD),Or.resolveKeyframes(rD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),sh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,sh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),m$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g$(t){const e=m$.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function oD(t,e,n=1){const[r,i]=g$(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return sD(o)?parseFloat(o):o}return mS(i)?oD(i,e,n+1):i}const aD=t=>e=>e.test(t),y$={test:t=>t==="auto",parse:t=>t},lD=[N0,un,oc,cd,oU,sU,y$],I3=t=>lD.find(aD(t));class cD extends LS{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),mS(c))){const u=oD(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!z6.has(r)||e.length!==2)return;const[i,s]=e,o=I3(i),a=I3(s);if(o!==a)if(O3(o)&&O3(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)GU(e[i])&&r.push(i);r.length&&u$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=i0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=i0[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const R3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($d.test(t)||t==="0")&&!t.startsWith("url("));function x$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function v$(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=R3(i,e),a=R3(s,e);return!o||!a?!1:x$(t)||(n==="spring"||SS(n))&&r}const w$=t=>t!==null;function Uv(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(w$),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const b$=40;class uD{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ac.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>b$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&p$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ac.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!v$(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Uv(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const $r=(t,e,n)=>t+(e-t)*n;function Pw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Pw(l,a,t+1/3),s=Pw(l,a,t),o=Pw(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Ex(t,e){return n=>n>0?e:t}const Dw=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},S$=[C5,Jf,Fp],k$=t=>S$.find(e=>e.test(t));function F3(t){const e=k$(t);if(!e)return!1;let n=e.parse(t);return e===Fp&&(n=_$(n)),n}const z3=(t,e)=>{const n=F3(t),r=F3(e);if(!n||!r)return Ex(t,e);const i={...n};return s=>(i.red=Dw(n.red,r.red,s),i.green=Dw(n.green,r.green,s),i.blue=Dw(n.blue,r.blue,s),i.alpha=$r(n.alpha,r.alpha,s),Jf.transform(i))},N$=(t,e)=>n=>e(t(n)),c1=(...t)=>t.reduce(N$),j5=new Set(["none","hidden"]);function C$(t,e){return j5.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function E$(t,e){return n=>$r(t,e,n)}function MS(t){return typeof t=="number"?E$:typeof t=="string"?mS(t)?Ex:js.test(t)?z3:j$:Array.isArray(t)?dD:typeof t=="object"?js.test(t)?z3:A$:Ex}function dD(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>MS(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function A$(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=MS(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function T$(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const j$=(t,e)=>{const n=$d.createTransformer(e),r=_g(t),i=_g(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?j5.has(t)&&!i.values.length||j5.has(e)&&!r.values.length?C$(t,e):c1(dD(T$(r,i),i.values),n):Ex(t,e)};function fD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$r(t,e,n):MS(t)(t,e)}const P$=5;function hD(t,e,n){const r=Math.max(e-P$,0);return B6(n-t(r),e-r)}const Yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},B3=.001;function D$({duration:t=Yr.duration,bounce:e=Yr.bounce,velocity:n=Yr.velocity,mass:r=Yr.mass}){let i,s,o=1-e;o=du(Yr.minDamping,Yr.maxDamping,o),t=du(Yr.minDuration,Yr.maxDuration,ru(t)),o<1?(i=c=>{const u=c*o,d=u*t,h=u-n,p=P5(c,o),y=Math.exp(-d);return B3-h/p*y},s=c=>{const d=c*o*t,h=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),x=P5(Math.pow(c,2),o);return(-i(c)+B3>0?-1:1)*((h-p)*y)/x}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-.001+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=L$(i,s,a);if(t=nu(t),isNaN(l))return{stiffness:Yr.stiffness,damping:Yr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const O$=12;function L$(t,e,n){let r=n;for(let i=1;i<O$;i++)r=r-t(r)/e(r);return r}function P5(t,e){return t*Math.sqrt(1-e*e)}const M$=["duration","bounce"],I$=["stiffness","damping","mass"];function U3(t,e){return e.some(n=>t[n]!==void 0)}function R$(t){let e={velocity:Yr.velocity,stiffness:Yr.stiffness,damping:Yr.damping,mass:Yr.mass,isResolvedFromDuration:!1,...t};if(!U3(t,I$)&&U3(t,M$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*du(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Yr.mass,stiffness:i,damping:s}}else{const n=D$(t);e={...e,...n,mass:Yr.mass},e.isResolvedFromDuration=!0}return e}function pD(t=Yr.visualDuration,e=Yr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=R$({...n,velocity:-ru(n.velocity||0)}),y=h||0,x=c/(2*Math.sqrt(l*u)),v=o-s,b=ru(Math.sqrt(l/u)),S=Math.abs(v)<5;r||(r=S?Yr.restSpeed.granular:Yr.restSpeed.default),i||(i=S?Yr.restDelta.granular:Yr.restDelta.default);let k;if(x<1){const j=P5(b,x);k=P=>{const C=Math.exp(-x*b*P);return o-C*((y+x*b*v)/j*Math.sin(j*P)+v*Math.cos(j*P))}}else if(x===1)k=j=>o-Math.exp(-b*j)*(v+(y+b*v)*j);else{const j=b*Math.sqrt(x*x-1);k=P=>{const C=Math.exp(-x*b*P),N=Math.min(j*P,300);return o-C*((y+x*b*v)*Math.sinh(N)+j*v*Math.cosh(N))/j}}const T={calculatedDuration:p&&d||null,next:j=>{const P=k(j);if(p)a.done=j>=d;else{let C=0;x<1&&(C=j===0?nu(y):hD(k,j,P));const N=Math.abs(C)<=r,O=Math.abs(o-P)<=i;a.done=N&&O}return a.value=a.done?o:P,a},toString:()=>{const j=Math.min(D6(T),S5),P=O6(C=>T.next(j*C).value,j,30);return j+"ms "+P}};return T}function $3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},p=N=>a!==void 0&&N<a||l!==void 0&&N>l,y=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let x=n*e;const v=d+x,b=o===void 0?v:o(v);b!==v&&(x=b-d);const S=N=>-x*Math.exp(-N/r),k=N=>b+S(N),T=N=>{const O=S(N),z=k(N);h.done=Math.abs(O)<=c,h.value=h.done?b:z};let j,P;const C=N=>{p(h.value)&&(j=N,P=pD({keyframes:[h.value,y(h.value)],velocity:hD(k,N,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:N=>{let O=!1;return!P&&j===void 0&&(O=!0,T(N),C(N)),j!==void 0&&N>=j?P.next(N-j):(!O&&T(N),h)}}}const F$=l1(.42,0,1,1),z$=l1(0,0,.58,1),mD=l1(.42,0,.58,1),B$=t=>Array.isArray(t)&&typeof t[0]!="number",U$={linear:ia,easeIn:F$,easeInOut:mD,easeOut:z$,circIn:jS,circInOut:X6,circOut:K6,backIn:TS,backInOut:q6,backOut:H6,anticipate:G6},W3=t=>{if(kS(t)){f6(t.length===4);const[e,n,r,i]=t;return l1(e,n,r,i)}else if(typeof t=="string")return U$[t];return t};function $$(t,e,n){const r=[],i=n||fD,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ia:e;a=c1(l,a)}r.push(a)}return r}function W$(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(f6(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=$$(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=n0(t[d],t[d+1],u);return a[d](h)};return n?u=>c(du(t[0],t[s-1],u)):c}function V$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=n0(0,e,r);t.push($r(n,1,i))}}function H$(t){const e=[0];return V$(e,t.length-1),e}function q$(t,e){return t.map(n=>n*e)}function G$(t,e){return t.map(()=>e||mD).splice(0,t.length-1)}function Ax({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=B$(r)?r.map(W3):W3(r),s={done:!1,value:e[0]},o=q$(n&&n.length===e.length?n:H$(e),t),a=W$(o,e,{ease:Array.isArray(i)?i:G$(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const K$=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Or.update(e,!0),stop:()=>Ud(e),now:()=>ns.isProcessing?ns.timestamp:ac.now()}},X$={decay:$3,inertia:$3,tween:Ax,keyframes:Ax,spring:pD},Y$=t=>t/100;class IS extends uD{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||LS,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=SS(n)?n:X$[n]||Ax;let l,c;a!==Ax&&typeof e[0]!="number"&&(l=c1(Y$,fD(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=D6(u));const{calculatedDuration:d}=u,h=d+i,p=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:y,repeatDelay:x,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),S=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let k=this.currentTime,T=s;if(p){const N=Math.min(this.currentTime,u)/d;let O=Math.floor(N),z=N%1;!z&&N>=1&&(z=1),z===1&&O--,O=Math.min(O,p+1),!!(O%2)&&(y==="reverse"?(z=1-z,x&&(z-=x/d)):y==="mirror"&&(T=o)),k=du(0,1,z)*d}const j=S?{done:!1,value:l[0]}:T.next(k);a&&(j.value=a(j.value));let{done:P}=j;!S&&c!==null&&(P=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return C&&i!==void 0&&(j.value=Uv(l,this.options,i)),v&&v(j.value),C&&this.finish(),j}get duration(){const{resolved:e}=this;return e?ru(e.calculatedDuration):0}get time(){return ru(this.currentTime)}set time(e){e=nu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ru(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=K$,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const J$=new Set(["opacity","clipPath","filter","transform"]);function Z$(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=M6(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Q$=lS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Tx=10,eW=2e4;function tW(t){return SS(t.type)||t.type==="spring"||!L6(t.ease)}function nW(t,e){const n=new IS({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<eW;)r=n.sample(s),i.push(r.value),s+=Tx;return{times:void 0,keyframes:i,duration:s-Tx,ease:"linear"}}const gD={anticipate:G6,backInOut:q6,circInOut:X6};function rW(t){return t in gD}class V3 extends uD{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new cD(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Cx()&&rW(s)&&(s=gD[s]),tW(this.options)){const{onComplete:d,onUpdate:h,motionValue:p,element:y,...x}=this.options,v=nW(e,x);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,s=v.ease,o="keyframes"}const u=Z$(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(E3(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Uv(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ru(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ru(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=nu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ia;const{animation:r}=n;E3(r,e)}return ia}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...p}=this.options,y=new IS({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),x=nu(this.time);c.setWithVelocity(y.sample(x-Tx).value,y.sample(x).value,Tx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Q$()&&r&&J$.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const iW={type:"spring",stiffness:500,damping:25,restSpeed:10},sW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oW={type:"keyframes",duration:.8},aW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lW=(t,{keyframes:e})=>e.length>2?oW:Ah.has(t)?t.startsWith("scale")?sW(e[1]):iW:aW;function cW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const RS=(t,e,n,r={},i,s)=>o=>{const a=_S(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-nu(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};cW(a)||(u={...u,...lW(t,u)}),u.duration&&(u.duration=nu(u.duration)),u.repeatDelay&&(u.repeatDelay=nu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=Uv(u.keyframes,a);if(h!==void 0)return Or.update(()=>{u.onUpdate(h),u.onComplete()}),new AU([])}return!s&&V3.supports(u)?new V3(u):new IS(u)};function uW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function yD(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||u&&uW(u,d))continue;const y={delay:n,..._S(o||{},d)};let x=!1;if(window.MotionHandoffAnimation){const b=U6(t);if(b){const S=window.MotionHandoffAnimation(b,d,Or);S!==null&&(y.startTime=S,x=!0)}}N5(t,d),h.start(RS(d,h,p,t.shouldReduceMotion&&z6.has(d)?{type:!1}:y,t,x));const v=h.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{Or.update(()=>{a&&$U(t,a)})}),c}function D5(t,e,n={}){var r;const i=Bv(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(yD(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return dW(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function dW(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(fW).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(D5(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function fW(t,e){return t.sortNodePosition(e)}function hW(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>D5(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=D5(t,e,n);else{const i=typeof e=="function"?Bv(t,e,n.custom):e;r=Promise.all(yD(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const pW=uS.length;function xD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?xD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<pW;n++){const r=uS[n],i=t.props[r];(vg(i)||i===!1)&&(e[r]=i)}return e}const mW=[...cS].reverse(),gW=cS.length;function yW(t){return e=>Promise.all(e.map(({animation:n,options:r})=>hW(t,n,r)))}function xW(t){let e=yW(t),n=H3(),r=!0;const i=l=>(c,u)=>{var d;const h=Bv(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:p,transitionEnd:y,...x}=h;c={...c,...x,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=xD(t.parent)||{},d=[],h=new Set;let p={},y=1/0;for(let v=0;v<gW;v++){const b=mW[v],S=n[b],k=c[b]!==void 0?c[b]:u[b],T=vg(k),j=b===l?S.isActive:null;j===!1&&(y=v);let P=k===u[b]&&k!==c[b]&&T;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),S.protectedKeys={...p},!S.isActive&&j===null||!k&&!S.prevProp||Fv(k)||typeof k=="boolean")continue;const C=vW(S.prevProp,k);let N=C||b===l&&S.isActive&&!P&&T||v>y&&T,O=!1;const z=Array.isArray(k)?k:[k];let L=z.reduce(i(b),{});j===!1&&(L={});const{prevResolvedValues:M={}}=S,K={...M,...L},W=F=>{N=!0,h.has(F)&&(O=!0,h.delete(F)),S.needsAnimating[F]=!0;const J=t.getValue(F);J&&(J.liveStyle=!1)};for(const F in K){const J=L[F],Q=M[F];if(p.hasOwnProperty(F))continue;let ee=!1;_5(J)&&_5(Q)?ee=!P6(J,Q):ee=J!==Q,ee?J!=null?W(F):h.add(F):J!==void 0&&h.has(F)?W(F):S.protectedKeys[F]=!0}S.prevProp=k,S.prevResolvedValues=L,S.isActive&&(p={...p,...L}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(P&&C)||O)&&d.push(...z.map(F=>({animation:F,options:{type:b}})))}if(h.size){const v={};h.forEach(b=>{const S=t.getBaseTarget(b),k=t.getValue(b);k&&(k.liveStyle=!0),v[b]=S??null}),d.push({animation:v})}let x=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=H3(),r=!0}}}function vW(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!P6(e,t):!1}function Mf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H3(){return{animate:Mf(!0),whileInView:Mf(),whileHover:Mf(),whileTap:Mf(),whileDrag:Mf(),whileFocus:Mf(),exit:Mf()}}class Qd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wW extends Qd{constructor(e){super(e),e.animationState||(e.animationState=xW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bW=0;class _W extends Qd{constructor(){super(...arguments),this.id=bW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const SW={animation:{Feature:wW},exit:{Feature:_W}};function Sg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function u1(t){return{point:{x:t.pageX,y:t.pageY}}}const kW=t=>e=>NS(e)&&t(e,u1(e));function $m(t,e,n,r){return Sg(t,e,kW(n),r)}const q3=(t,e)=>Math.abs(t-e);function NW(t,e){const n=q3(t.x,e.x),r=q3(t.y,e.y);return Math.sqrt(n**2+r**2)}class vD{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Lw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=NW(d.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:y}=d,{timestamp:x}=ns;this.history.push({...y,timestamp:x});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ow(h,this.transformPagePoint),Or.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Lw(d.type==="pointercancel"?this.lastMoveEventInfo:Ow(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),y&&y(d,v)},!NS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=u1(e),a=Ow(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ns;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Lw(a,this.history)),this.removeListeners=c1($m(this.contextWindow,"pointermove",this.handlePointerMove),$m(this.contextWindow,"pointerup",this.handlePointerUp),$m(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ud(this.updatePoint)}}function Ow(t,e){return e?{point:e(t.point)}:t}function G3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Lw({point:t},e){return{point:t,delta:G3(t,wD(e)),offset:G3(t,CW(e)),velocity:EW(e,.1)}}function CW(t){return t[0]}function wD(t){return t[t.length-1]}function EW(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=wD(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>nu(e)));)n--;if(!r)return{x:0,y:0};const s=ru(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const bD=1e-4,AW=1-bD,TW=1+bD,_D=.01,jW=0-_D,PW=0+_D;function la(t){return t.max-t.min}function DW(t,e,n){return Math.abs(t-e)<=n}function K3(t,e,n,r=.5){t.origin=r,t.originPoint=$r(e.min,e.max,t.origin),t.scale=la(n)/la(e),t.translate=$r(n.min,n.max,t.origin)-t.originPoint,(t.scale>=AW&&t.scale<=TW||isNaN(t.scale))&&(t.scale=1),(t.translate>=jW&&t.translate<=PW||isNaN(t.translate))&&(t.translate=0)}function Wm(t,e,n,r){K3(t.x,e.x,n.x,r?r.originX:void 0),K3(t.y,e.y,n.y,r?r.originY:void 0)}function X3(t,e,n){t.min=n.min+e.min,t.max=t.min+la(e)}function OW(t,e,n){X3(t.x,e.x,n.x),X3(t.y,e.y,n.y)}function Y3(t,e,n){t.min=e.min-n.min,t.max=t.min+la(e)}function Vm(t,e,n){Y3(t.x,e.x,n.x),Y3(t.y,e.y,n.y)}function LW(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$r(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$r(n,t,r.max):Math.min(t,n)),t}function J3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function MW(t,{top:e,left:n,bottom:r,right:i}){return{x:J3(t.x,n,i),y:J3(t.y,e,r)}}function Z3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function IW(t,e){return{x:Z3(t.x,e.x),y:Z3(t.y,e.y)}}function RW(t,e){let n=.5;const r=la(t),i=la(e);return i>r?n=n0(e.min,e.max-r,t.min):r>i&&(n=n0(t.min,t.max-i,e.min)),du(0,1,n)}function FW(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const O5=.35;function zW(t=O5){return t===!1?t=0:t===!0&&(t=O5),{x:Q3(t,"left","right"),y:Q3(t,"top","bottom")}}function Q3(t,e,n){return{min:eC(t,e),max:eC(t,n)}}function eC(t,e){return typeof t=="number"?t:t[e]||0}const tC=()=>({translate:0,scale:1,origin:0,originPoint:0}),zp=()=>({x:tC(),y:tC()}),nC=()=>({min:0,max:0}),oi=()=>({x:nC(),y:nC()});function Oa(t){return[t("x"),t("y")]}function SD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function BW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function UW(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Mw(t){return t===void 0||t===1}function L5({scale:t,scaleX:e,scaleY:n}){return!Mw(t)||!Mw(e)||!Mw(n)}function Uf(t){return L5(t)||kD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function kD(t){return rC(t.x)||rC(t.y)}function rC(t){return t&&t!=="0%"}function jx(t,e,n){const r=t-n,i=e*r;return n+i}function iC(t,e,n,r,i){return i!==void 0&&(t=jx(t,i,r)),jx(t,n,r)+e}function M5(t,e=0,n=1,r,i){t.min=iC(t.min,e,n,r,i),t.max=iC(t.max,e,n,r,i)}function ND(t,{x:e,y:n}){M5(t.x,e.translate,e.scale,e.originPoint),M5(t.y,n.translate,n.scale,n.originPoint)}const sC=.999999999999,oC=1.0000000000001;function $W(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Up(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ND(t,o)),r&&Uf(s.latestValues)&&Up(t,s.latestValues))}e.x<oC&&e.x>sC&&(e.x=1),e.y<oC&&e.y>sC&&(e.y=1)}function Bp(t,e){t.min=t.min+e,t.max=t.max+e}function aC(t,e,n,r,i=.5){const s=$r(t.min,t.max,i);M5(t,e,n,s,r)}function Up(t,e){aC(t.x,e.x,e.scaleX,e.scale,e.originX),aC(t.y,e.y,e.scaleY,e.scale,e.originY)}function CD(t,e){return SD(UW(t.getBoundingClientRect(),e))}function WW(t,e,n){const r=CD(t,n),{scroll:i}=e;return i&&(Bp(r.x,i.offset.x),Bp(r.y,i.offset.y)),r}const ED=({current:t})=>t?t.ownerDocument.defaultView:null,VW=new WeakMap;class HW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=oi(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(u1(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:p,onDragStart:y}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RU(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Oa(v=>{let b=this.getAxisMotionValue(v).get()||0;if(oc.test(b)){const{projection:S}=this.visualElement;if(S&&S.layout){const k=S.layout.layoutBox[v];k&&(b=la(k)*(parseFloat(b)/100))}}this.originPoint[v]=b}),y&&Or.postRender(()=>y(u,d)),N5(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:y,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=qW(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),x&&x(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Oa(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new vD(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ED(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Or.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!gy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=LW(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Rp(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=MW(i.layoutBox,n):this.constraints=!1,this.elastic=zW(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Oa(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=FW(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Rp(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=WW(r,i.root,this.visualElement.getTransformPagePoint());let o=IW(i.layout.layoutBox,s);if(n){const a=n(BW(o));this.hasMutatedConstraints=!!a,a&&(o=SD(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Oa(u=>{if(!gy(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return N5(this.visualElement,e),r.start(RS(e,r,0,n,this.visualElement,!1))}stopAnimation(){Oa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Oa(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Oa(n=>{const{drag:r}=this.getProps();if(!gy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-$r(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Rp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Oa(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=RW({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Oa(o=>{if(!gy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($r(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;VW.set(this.visualElement,this);const e=this.visualElement.current,n=$m(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Rp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Or.read(r);const o=Sg(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Oa(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=O5,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function gy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qW(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class GW extends Qd{constructor(e){super(e),this.removeGroupControls=ia,this.removeListeners=ia,this.controls=new HW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ia}unmount(){this.removeGroupControls(),this.removeListeners()}}const lC=t=>(e,n)=>{t&&Or.postRender(()=>t(e,n))};class KW extends Qd{constructor(){super(...arguments),this.removePointerDownListener=ia}onPointerDown(e){this.session=new vD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ED(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:lC(e),onStart:lC(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Or.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=$m(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const fm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(un.test(t))t=parseFloat(t);else return t;const n=cC(t,e.target.x),r=cC(t,e.target.y);return`${n}% ${r}%`}},XW={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=$d.parse(t);if(i.length>5)return r;const s=$d.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=$r(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class YW extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;gU(JW),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Or.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AD(t){const[e,n]=u6(),r=Y.useContext(iS);return g.jsx(YW,{...t,layoutGroup:r,switchLayoutGroup:Y.useContext(x6),isPresent:e,safeToRemove:n})}const JW={borderRadius:{...fm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fm,borderTopRightRadius:fm,borderBottomLeftRadius:fm,borderBottomRightRadius:fm,boxShadow:XW};function ZW(t,e,n){const r=Os(t)?t:bg(t);return r.start(RS("",r,e,n)),r.animation}function QW(t){return t instanceof SVGElement&&t.tagName!=="svg"}const eV=(t,e)=>t.depth-e.depth;class tV{constructor(){this.children=[],this.isDirty=!1}add(e){CS(this.children,e),this.isDirty=!0}remove(e){ES(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eV),this.isDirty=!1,this.children.forEach(e)}}function nV(t,e){const n=ac.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ud(r),t(s-e))};return Or.read(r,!0),()=>Ud(r)}const TD=["TopLeft","TopRight","BottomLeft","BottomRight"],rV=TD.length,uC=t=>typeof t=="string"?parseFloat(t):t,dC=t=>typeof t=="number"||un.test(t);function iV(t,e,n,r,i,s){i?(t.opacity=$r(0,n.opacity!==void 0?n.opacity:1,sV(r)),t.opacityExit=$r(e.opacity!==void 0?e.opacity:1,0,oV(r))):s&&(t.opacity=$r(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<rV;o++){const a=`border${TD[o]}Radius`;let l=fC(e,a),c=fC(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||dC(l)===dC(c)?(t[a]=Math.max($r(uC(l),uC(c),r),0),(oc.test(c)||oc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$r(e.rotate||0,n.rotate||0,r))}function fC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sV=jD(0,.5,K6),oV=jD(.5,.95,ia);function jD(t,e,n){return r=>r<t?0:r>e?1:n(n0(t,e,r))}function hC(t,e){t.min=e.min,t.max=e.max}function Ta(t,e){hC(t.x,e.x),hC(t.y,e.y)}function pC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mC(t,e,n,r,i){return t-=e,t=jx(t,1/n,r),i!==void 0&&(t=jx(t,1/i,r)),t}function aV(t,e=0,n=1,r=.5,i,s=t,o=t){if(oc.test(e)&&(e=parseFloat(e),e=$r(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$r(s.min,s.max,r);t===s&&(a-=e),t.min=mC(t.min,e,n,a,i),t.max=mC(t.max,e,n,a,i)}function gC(t,e,[n,r,i],s,o){aV(t,e[n],e[r],e[i],e.scale,s,o)}const lV=["x","scaleX","originX"],cV=["y","scaleY","originY"];function yC(t,e,n,r){gC(t.x,e,lV,n?n.x:void 0,r?r.x:void 0),gC(t.y,e,cV,n?n.y:void 0,r?r.y:void 0)}function xC(t){return t.translate===0&&t.scale===1}function PD(t){return xC(t.x)&&xC(t.y)}function vC(t,e){return t.min===e.min&&t.max===e.max}function uV(t,e){return vC(t.x,e.x)&&vC(t.y,e.y)}function wC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function DD(t,e){return wC(t.x,e.x)&&wC(t.y,e.y)}function bC(t){return la(t.x)/la(t.y)}function _C(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dV{constructor(){this.members=[]}add(e){CS(this.members,e),e.scheduleRender()}remove(e){if(ES(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fV(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const $f={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Tm=typeof window<"u"&&window.MotionDebug!==void 0,Iw=["","X","Y","Z"],hV={visibility:"hidden"},SC=1e3;let pV=0;function Rw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function OD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=U6(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Or,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&OD(r)}function LD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=pV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Tm&&($f.totalNodes=$f.resolvedTargetDeltas=$f.recalculatedProjection=0),this.nodes.forEach(yV),this.nodes.forEach(_V),this.nodes.forEach(SV),this.nodes.forEach(xV),Tm&&window.MotionDebug.record($f)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new tV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new AS),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QW(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=nV(h,250),sx.hasAnimatedSinceResize&&(sx.hasAnimatedSinceResize=!1,this.nodes.forEach(NC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||AV,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),S=!this.targetLayout||!DD(this.targetLayout,y)||p,k=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,k);const T={..._S(x,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||NC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ud(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kC);return}this.isUpdating||this.nodes.forEach(wV),this.isUpdating=!1,this.nodes.forEach(bV),this.nodes.forEach(mV),this.nodes.forEach(gV),this.clearAllSnapshots();const a=ac.now();ns.delta=du(0,1e3/60,a-ns.timestamp),ns.timestamp=a,ns.isProcessing=!0,Aw.update.process(ns),Aw.preRender.process(ns),Aw.render.process(ns),ns.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vV),this.sharedNodes.forEach(NV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Or.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Or.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=oi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!PD(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Uf(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),TV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return oi();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(jV))){const{scroll:u}=this.root;u&&(Bp(l.x,u.offset.x),Bp(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=oi();if(Ta(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Ta(l,o),Bp(l.x,d.offset.x),Bp(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=oi();Ta(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Up(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Uf(u.latestValues)&&Up(l,u.latestValues)}return Uf(this.latestValues)&&Up(l,this.latestValues),l}removeTransform(o){const a=oi();Ta(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Uf(c.latestValues))continue;L5(c.latestValues)&&c.updateSnapshot();const u=oi(),d=c.measurePageBox();Ta(u,d),yC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Uf(this.latestValues)&&yC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ns.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ns.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=oi(),this.relativeTargetOrigin=oi(),Vm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ta(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=oi(),this.targetWithTransforms=oi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ta(this.target,this.layout.layoutBox),ND(this.target,this.targetDelta)):Ta(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=oi(),this.relativeTargetOrigin=oi(),Vm(this.relativeTargetOrigin,this.target,p.target),Ta(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Tm&&$f.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||L5(this.parent.latestValues)||kD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ns.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ta(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;$W(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=oi());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pC(this.prevProjectionDelta.x,this.projectionDelta.x),pC(this.prevProjectionDelta.y,this.projectionDelta.y)),Wm(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!_C(this.projectionDelta.x,this.prevProjectionDelta.x)||!_C(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Tm&&$f.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zp(),this.projectionDelta=zp(),this.projectionDeltaWithTransform=zp()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=zp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=oi(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=p!==y,v=this.getStack(),b=!v||v.members.length<=1,S=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(EV));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const j=T/1e3;CC(d.x,o.x,j),CC(d.y,o.y,j),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CV(this.relativeTarget,this.relativeTargetOrigin,h,j),k&&uV(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=oi()),Ta(k,this.relativeTarget)),x&&(this.animationValues=u,iV(u,c,this.latestValues,j,S,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ud(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Or.update(()=>{sx.hasAnimatedSinceResize=!0,this.currentAnimation=ZW(0,SC,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&MD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||oi();const d=la(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=la(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}Ta(a,l),Up(a,u),Wm(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new dV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Rw("z",o,c,this.animationValues);for(let u=0;u<Iw.length;u++)Rw(`rotate${Iw[u]}`,o,c,this.animationValues),Rw(`skew${Iw[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hV;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=rx(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=rx(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Uf(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=fV(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Nx){if(h[x]===void 0)continue;const{correct:v,applyTo:b}=Nx[x],S=c.transform==="none"?h[x]:v(h[x],d);if(b){const k=b.length;for(let T=0;T<k;T++)c[b[T]]=S}else c[x]=S}return this.options.layoutId&&(c.pointerEvents=d===this?rx(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(kC),this.root.sharedNodes.clear()}}}function mV(t){t.updateLayout()}function gV(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Oa(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],p=la(h);h.min=r[d].min,h.max=h.min+p}):MD(s,n.layoutBox,r)&&Oa(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],p=la(r[d]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=zp();Wm(a,r,n.layoutBox);const l=zp();o?Wm(l,t.applyTransform(i,!0),n.measuredBox):Wm(l,r,n.layoutBox);const c=!PD(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const y=oi();Vm(y,n.layoutBox,h.layoutBox);const x=oi();Vm(x,r,p.layoutBox),DD(y,x)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function yV(t){Tm&&$f.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function vV(t){t.clearSnapshot()}function kC(t){t.clearMeasurements()}function wV(t){t.isLayoutDirty=!1}function bV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function _V(t){t.resolveTargetDelta()}function SV(t){t.calcProjection()}function kV(t){t.resetSkewAndRotation()}function NV(t){t.removeLeadSnapshot()}function CC(t,e,n){t.translate=$r(e.translate,0,n),t.scale=$r(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function EC(t,e,n,r){t.min=$r(e.min,n.min,r),t.max=$r(e.max,n.max,r)}function CV(t,e,n,r){EC(t.x,e.x,n.x,r),EC(t.y,e.y,n.y,r)}function EV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const AV={duration:.45,ease:[.4,0,.1,1]},AC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),TC=AC("applewebkit/")&&!AC("chrome/")?Math.round:ia;function jC(t){t.min=TC(t.min),t.max=TC(t.max)}function TV(t){jC(t.x),jC(t.y)}function MD(t,e,n){return t==="position"||t==="preserve-aspect"&&!DW(bC(e),bC(n),.2)}function jV(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const PV=LD({attachResizeListener:(t,e)=>Sg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fw={current:void 0},ID=LD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fw.current){const t=new PV({});t.mount(window),t.setOptions({layoutScroll:!0}),Fw.current=t}return Fw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),DV={pan:{Feature:KW},drag:{Feature:GW,ProjectionNode:ID,MeasureLayout:AD}};function PC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Or.postRender(()=>s(e,u1(e)))}class OV extends Qd{mount(){const{current:e}=this.node;e&&(this.unmount=DU(e,n=>(PC(this.node,n,"Start"),r=>PC(this.node,r,"End"))))}unmount(){}}class LV extends Qd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=c1(Sg(this.node.current,"focus",()=>this.onFocus()),Sg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function DC(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Or.postRender(()=>s(e,u1(e)))}class MV extends Qd{mount(){const{current:e}=this.node;e&&(this.unmount=IU(e,n=>(DC(this.node,n,"Start"),(r,{success:i})=>DC(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const I5=new WeakMap,zw=new WeakMap,IV=t=>{const e=I5.get(t.target);e&&e(t)},RV=t=>{t.forEach(IV)};function FV({root:t,...e}){const n=t||document;zw.has(n)||zw.set(n,{});const r=zw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(RV,{root:t,...e})),r[i]}function zV(t,e,n){const r=FV(e);return I5.set(t,n),r.observe(t),()=>{I5.delete(t),r.unobserve(t)}}const BV={some:0,all:1};class UV extends Qd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:BV[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return zV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($V(e,n))&&this.startObserver()}unmount(){}}function $V({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const WV={inView:{Feature:UV},tap:{Feature:MV},focus:{Feature:LV},hover:{Feature:OV}},VV={layout:{ProjectionNode:ID,MeasureLayout:AD}},R5={current:null},RD={current:!1};function HV(){if(RD.current=!0,!!aS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>R5.current=t.matches;t.addListener(e),e()}else R5.current=!1}const qV=[...lD,js,$d],GV=t=>qV.find(aD(t)),OC=new WeakMap;function KV(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Os(i))t.addValue(r,i);else if(Os(s))t.addValue(r,bg(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,bg(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const LC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=LS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ac.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Or.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=zv(n),this.isVariantNode=g6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];l[p]!==void 0&&Os(y)&&y.set(l[p],!1)}}mount(e){this.current=e,OC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),RD.current||HV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:R5.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){OC.delete(this.current),this.projection&&this.projection.unmount(),Ud(this.notifyUpdate),Ud(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ah.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Or.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in r0){const n=r0[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):oi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<LC.length;r++){const i=LC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=KV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=bg(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(sD(i)||Y6(i))?i=parseFloat(i):!GV(i)&&$d.test(n)&&(i=nD(e,n)),this.setBaseTarget(e,Os(i)?i.get():i)),Os(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=pS(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Os(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new AS),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class FD extends XV{constructor(){super(...arguments),this.KeyframeResolver=cD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Os(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function YV(t){return window.getComputedStyle(t)}class JV extends FD{constructor(){super(...arguments),this.type="html",this.renderInstance=N6}readValueFromInstance(e,n){if(Ah.has(n)){const r=OS(n);return r&&r.default||0}else{const r=YV(e),i=(_6(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CD(e,n)}build(e,n,r){yS(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return bS(e,n,r)}}class ZV extends FD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=oi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ah.has(n)){const r=OS(n);return r&&r.default||0}return n=C6.has(n)?n:dS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return T6(e,n,r)}build(e,n,r){xS(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){E6(e,n,r,i)}mount(e){this.isSVGTag=wS(e.tagName),super.mount(e)}}const QV=(t,e)=>hS(t)?new ZV(e):new JV(e,{allowProjection:t!==Y.Fragment}),eH=NU({...SW,...WV,...DV,...VV},QV),Ii=B9(eH),tH=["Pon","Wt","Śr","Czw","Pt","Sob","Nie"],nH=["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],rH=({startDate:t,endDate:e,startTime:n,endTime:r,onChange:i,selectedEquipment:s})=>{const[o,a]=Y.useState(new Date),[l,c]=Y.useState(1),[u,d]=Y.useState(!1),[h,p]=Y.useState(new Map),[y,x]=Y.useState(!1),[v,b]=Y.useState([]),[S,k]=Y.useState(null),[T,j]=Y.useState(""),[P,C]=Y.useState(!1),[N,O]=Y.useState(new Map),[z,L]=Y.useState(!1),M=new Date;M.setHours(0,0,0,0);const K=()=>{i(null,null,null,null),c(1),k(null),j(""),d(!1)},W=qe=>{const Be=[];return s.forEach(Te=>{(N.get(Te.id)||[]).filter(et=>{const Le=new Date(et.start_date),ke=new Date(et.end_date);Le.setHours(0,0,0,0),ke.setHours(23,59,59,999);const We=new Date(qe);return We.setHours(0,0,0,0),We>=Le&&We<=ke}).forEach(et=>{const Le=new Date(et.end_date);Be.push(`${et.equipment_name||Te.name} - zarezerwowany do: ${fy(Le)}`)})}),Be.join(`
`)};Y.useEffect(()=>{(async()=>{if(s.length===0){p(new Map);return}x(!0);const Be=new Date(o.getFullYear(),o.getMonth(),1),Te=new Date(o.getFullYear(),o.getMonth()+1,0);try{const fe=s.map(Le=>Le.id),Ge=await A9(fe,Be,Te),et=new Map;for(let Le=new Date(Be);Le<=Te;Le.setDate(Le.getDate()+1)){const ke=Le.toISOString().split("T")[0],We=new Date(Le);We.setHours(0,0,0,0);for(const at of s){const xt=Ge.get(at.id)||[];if(xt.some(Pt=>{const Vt=new Date(Pt.start_date),Xt=new Date(Pt.end_date);return Vt.setHours(0,0,0,0),Xt.setHours(23,59,59,999),We>=Vt&&We<=Xt})){const Pt=await Ew(at.id,We),Vt=xt.find(Bt=>{const It=new Date(Bt.start_date),Ft=new Date(Bt.end_date);return It.setHours(0,0,0,0),Ft.setHours(23,59,59,999),We>=It&&We<=Ft}),Xt=(Vt==null?void 0:Vt.equipment_name)||at.name;et.set(ke,`${Xt} jest zarezerwowany do: ${fy(Pt)}`);break}}}p(et),O(Ge)}catch(fe){console.error("Error checking month availability:",fe),j("Wystąpił błąd podczas sprawdzania dostępności. Spróbuj ponownie później.")}finally{x(!1)}})()},[o,s]);const Z=()=>{if(l===1){const qe=Array.from({length:9},(Be,Te)=>`${(Te+8).toString().padStart(2,"0")}:00`);return S&&S.getDay()===6?qe.filter(Be=>parseInt(Be.split(":")[0],10)<=13):qe}return v},U=qe=>{const Be=Array.from({length:9},(et,Le)=>`${(Le+8).toString().padStart(2,"0")}:00`);if(!t||!n)return[];const Te=qe.toDateString()===t.toDateString(),fe=qe.getDay()===6,Ge=parseInt(n.split(":")[0],10);return Be.filter(et=>{const Le=parseInt(et.split(":")[0],10);return!(fe&&Le>13||Te&&Le<=Ge)})},F=qe=>l===1?!1:!v.includes(qe),J=qe=>{if(!t||!e)return!1;const Be=new Date(qe);Be.setHours(0,0,0,0);const Te=new Date(t);Te.setHours(0,0,0,0);const fe=new Date(e);return fe.setHours(23,59,59,999),Be>=Te&&Be<=fe},Q=(qe,Be,Te,fe)=>{const[Ge]=Te.split(":").map(Number),[et]=fe.split(":").map(Number),Le=new Date(qe),ke=new Date(Be);return Le.setHours(Ge,0,0,0),ke.setHours(et,0,0,0),ke<=Le?(j("Data zakończenia musi być późniejsza niż data rozpoczęcia."),!1):Ge<8||Ge>16||et<8||et>16?(j("Rezerwacje są możliwe tylko w godzinach 8:00-16:00."),!1):!0},ee=async qe=>{if(!(!qe||ge(qe))){if(l===2){const Be=U(qe);if(Be.length===0){j("Brak dostępnych godzin zakończenia dla wybranej daty");return}b(Be)}if(k(qe),d(!0),j(""),l===1){i(null,null,null,null),x(!0);try{for(const Be of s){const Te=new Date(qe);if(!await x3(Be.id,Te,Te,!1)){const Ge=await Ew(Be.id,Te);j(`${Be.name} jest zarezerwowany do: ${fy(Ge)}`),k(null),d(!1);return}}}catch(Be){console.error("Error checking availability:",Be),j("Wystąpił błąd podczas sprawdzania dostępności."),k(null),d(!1)}finally{x(!1)}}else if(l===2){x(!0);try{if(t){const Be=new Date(t);Be.setHours(0,0,0,0);const Te=new Date(qe);Te.setHours(23,59,59,999);for(const fe of s)if(!await x3(fe.id,Be,Te,!0)){const et=await Ew(fe.id,Be);j(`${fe.name} jest niedostępny w wybranym okresie. Następna dostępność od: ${fy(et)}`),k(null),d(!1);return}}}catch(Be){console.error("Error checking range availability:",Be),j("Wystąpił błąd podczas sprawdzania dostępności."),k(null),d(!1)}finally{x(!1)}}}},ne=qe=>{if(l===1)i(S,null,qe,null),b([]),c(2);else if(l===2&&t&&n){if(!Q(t,S,n,qe))return;i(t,S,n,qe),c(1)}d(!1)},[D,G]=Y.useState(null),[V,H]=Y.useState(!1),te=({content:qe})=>g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${qe.type==="error"?"text-red-600":qe.type==="success"?"text-green-600":"text-blue-600"}`,children:qe.title}),g.jsx("p",{className:"text-gray-700 mb-6",children:qe.message}),g.jsx("button",{onClick:()=>H(!1),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"OK"})]})}),ge=qe=>{if(!qe)return!0;const Be=new Date(qe);if(Be.setHours(0,0,0,0),Be<M||qe.getDay()===0||C9(qe))return!0;if(l===2&&t){const fe=new Date(t);if(fe.setHours(0,0,0,0),Be<fe)return!0}const Te=Be.toISOString().split("T")[0];return h.has(Te)},xe=qe=>qe?qe.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}):"",ve=()=>{switch(l){case 1:return"Wybierz datę rozpoczęcia wypożyczenia";case 2:return"Wybierz datę zakończenia wypożyczenia";default:return""}},Ne=()=>g.jsx("div",{className:"flex items-center justify-center mb-4",children:[1,2].map(qe=>g.jsx("div",{className:`w-3 h-3 rounded-full mx-1 ${qe===l?"bg-solrent-orange":"bg-gray-300"}`},qe))}),He=()=>{const qe=o.getFullYear(),Be=o.getMonth(),Te=new Date(qe,Be,1).getDay(),fe=new Date(qe,Be+1,0).getDate(),Ge=Te===0?6:Te-1,et=[];for(let Le=0;Le<Ge;Le++)et.push(null);for(let Le=1;Le<=fe;Le++)et.push(new Date(qe,Be,Le));return g.jsxs("div",{className:"relative",children:[g.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[tH.map(Le=>g.jsx("div",{className:"text-center py-2 text-sm font-medium text-gray-700",children:Le},Le)),et.map((Le,ke)=>{if(!Le)return g.jsx("div",{className:"p-2 text-center text-gray-400"},ke);const We=ge(Le)||y,at=Le&&(t&&Le.toDateString()===t.toDateString()||e&&Le.toDateString()===e.toDateString()),xt=Le&&J(Le),_t=Le.toDateString()===M.toDateString(),Pt=W(Le);return g.jsxs("div",{className:`
                  relative p-2 text-center cursor-pointer transition-all duration-200 group
                  ${We?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-orange-50"}
                  ${at?"bg-solrent-orange text-white":""}
                  ${xt?"bg-orange-100":""}
                  ${_t?"border-2 border-solrent-orange":""}
                  ${Le.getDay()===0?"bg-gray-200":""} // Sunday styling
                `,onClick:()=>!y&&ee(Le),children:[g.jsx("span",{className:at?"text-white":"",children:Le.getDate()}),We&&!y&&g.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-gray-400 rounded-full"}),Pt&&g.jsx("div",{className:"absolute z-50 invisible group-hover:visible bg-gray-800 text-white text-xs rounded py-2 px-3 left-1/2 transform -translate-x-1/2 bottom-full mb-2 min-w-[200px] max-w-[300px] whitespace-pre-line break-words shadow-lg",children:g.jsxs("div",{className:"relative",children:[Pt,g.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full w-2 h-2 bg-gray-800 rotate-45"})]})})]},ke)})]}),g.jsx(fc,{children:y&&g.jsx(Ii.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 z-10",children:g.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[g.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"}),g.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sprawdzanie dostępności..."})]})})})]})},Ke=()=>{if(!u)return null;const qe=Z();return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs(Ii.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[g.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Wybierz godzinę ",l===1?"rozpoczęcia":"zakończenia"]}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:qe.map(Be=>{const Te=F(Be);return g.jsx("button",{onClick:()=>!Te&&ne(Be),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${Te?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-orange-50 focus:outline-none focus:ring-2 focus:ring-orange-500"}`,disabled:Te,children:Be},Be)})}),g.jsx("button",{onClick:()=>d(!1),className:"mt-4 w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Anuluj"})]})})};return g.jsxs("div",{className:"space-y-6",children:[Ne(),g.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:ve()}),(t||e)&&g.jsxs("button",{onClick:K,className:"flex items-center px-3 py-1.5 text-sm font-medium text-white bg-red-500 rounded-lg",children:[g.jsx(bz,{className:"w-4 h-4 mr-1.5"}),"Resetuj datę"]})]}),g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:()=>a(new Date(o.setMonth(o.getMonth()-1))),className:"p-2 rounded-full hover:bg-gray-100",disabled:o.getMonth()===M.getMonth()&&o.getFullYear()===M.getFullYear(),children:g.jsx(Ov,{className:"w-5 h-5"})}),g.jsxs("button",{onClick:()=>C(!P),className:"text-lg font-medium",children:[nH[o.getMonth()]," ",o.getFullYear()]}),g.jsx("button",{onClick:()=>a(new Date(o.setMonth(o.getMonth()+1))),className:"p-2 rounded-full hover:bg-gray-100",children:g.jsx(K_,{className:"w-5 h-5"})})]}),He(),T&&g.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg flex items-start",children:[g.jsx($P,{className:"w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0"}),g.jsx("p",{className:"text-red-700 text-sm",children:T})]}),V&&D&&g.jsx(te,{content:D}),(t||e)&&g.jsxs("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg",children:[g.jsx("h3",{className:"font-medium text-solrent-dark mb-2",children:"Wybrane terminy:"}),t&&g.jsxs("p",{className:"text-sm",children:["Rozpoczęcie: ",xe(t)," ",n]}),e&&g.jsxs("p",{className:"text-sm",children:["Zakończenie: ",xe(e)," ",r," ",t&&e&&g.jsxs("span",{className:`font-medium ${Sx(t,e,n,r)>=7?"text-green-600":"text-gray-900"}`,children:["(",Sx(t,e,n,r)," dni)"]})]})]})]}),g.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx(gz,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-blue-700",children:g.jsx("strong",{children:"Godziny otwarcia:"})}),g.jsxs("ul",{className:"text-sm text-blue-600 mt-1",children:[g.jsx("li",{children:"Poniedziałek - Piątek: 8:00 - 16:00"}),g.jsx("li",{children:"Sobota: 8:00 - 13:00"}),g.jsx("li",{children:"Niedziela: nieczynne"})]})]})]})}),g.jsx(fc,{children:Ke()})]})},iH=t=>new Promise(e=>setTimeout(e,t));let bp=null;const MC=3,sH=1e3,zD=async(t=0)=>{console.log("Wywołanie funkcji getEquipment");try{const{data:e,error:n}=await lt.from("equipment").select("*, specifications(*), features(*), variants(*)").order("name");if(n)throw console.error("Błąd pobierania sprzętu z Supabase:",n),n;return console.log("Pobrano sprzęt z Supabase:",e),e||[]}catch(e){if(console.error(`Próba ${t+1}/${MC} nie powiodła się:`,e),t<MC)return await iH(sH*(t+1)),zD(t+1);throw new Error("Nie udało się pobrać danych po kilku próbach. Sprawdź połączenie z internetem.")}},oH=async t=>{var i;const{data:e}=await lt.auth.getUser(),{data:n,error:r}=await lt.from("equipment").insert({...t,last_modified_by:(i=e.user)==null?void 0:i.id,updated_at:new Date().toISOString()}).select().single();if(r)throw r;return n},aH=async t=>{const{error:e}=await lt.from("equipment").delete().eq("id",t);if(e)throw e},lH=t=>(bp&&bp.unsubscribe(),bp=lt.channel("equipment_changes").on("postgres_changes",{event:"*",schema:"public",table:"equipment"},e=>{t(e.new)}).subscribe(),()=>{bp&&(bp.unsubscribe(),bp=null)}),cH=({equipment:t,onClose:e,onAddToCart:n,isInCart:r,onRemoveFromCart:i})=>{const s=Y.useRef(null),o=Y.useRef(null);return Y.useEffect(()=>{const a=c=>{c.key==="Escape"&&e()},l=c=>{s.current&&!s.current.contains(c.target)&&e()};return document.addEventListener("keydown",a),document.addEventListener("mousedown",l),()=>{document.removeEventListener("keydown",a),document.removeEventListener("mousedown",l)}},[e]),Y.useEffect(()=>{if(s.current&&o.current){const a=()=>{var d;const l=window.innerHeight,c=((d=s.current)==null?void 0:d.getBoundingClientRect().top)||0,u=l-c-40;o.current.style.maxHeight=`${u}px`};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}},[]),t?g.jsx("div",{className:"fixed inset-0 modal-overlay flex items-center justify-center bg-black bg-opacity-75",children:g.jsx(fc,{children:g.jsxs(Ii.div,{ref:s,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"bg-white w-[90%] max-h-[90vh] md:w-full md:h-auto rounded-lg shadow-xl md:max-w-5xl overflow-hidden relative mx-auto my-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[g.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 md:px-6 py-3 md:py-4 border-b bg-white",children:[g.jsx("h2",{id:"modal-title",className:"text-xl md:text-2xl font-semibold text-gray-900",children:t.name}),g.jsx("button",{onClick:e,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full transition-colors active:bg-gray-200","aria-label":"Zamknij",children:g.jsx(cu,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-500"})})]}),g.jsx("div",{ref:o,className:"overflow-y-auto max-h-[calc(90vh-4rem)] md:h-auto",style:{scrollbarGutter:"stable"},children:g.jsxs("div",{className:"flex flex-col md:flex-row md:divide-x divide-gray-200",children:[g.jsx("div",{className:"md:w-1/2 p-3 md:p-6",children:g.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden flex items-center justify-center h-[200px] md:h-[300px]",children:g.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-contain",loading:"lazy"})})}),g.jsx("div",{className:"md:w-1/2 p-3 md:p-6",children:g.jsxs("div",{className:"space-y-8",children:[g.jsx("div",{className:"bg-gray-50 p-4 md:p-6 rounded-lg",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-xl md:text-2xl font-semibold text-solrent-orange",children:[t.price," zł/dzień",t.promotional_price&&g.jsxs("div",{className:"text-sm text-green-600 font-medium mt-1",children:["od 7 dni: ",t.promotional_price," zł/dzień"]})]}),t.deposit>0&&g.jsxs("p",{className:"text-sm text-orange-600 mt-2",children:["Kaucja: ",t.deposit," zł"]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dostępność:"}),g.jsxs("p",{className:"font-medium text-green-600 text-lg",children:[t.quantity," szt."]})]})]})}),g.jsx("button",{onClick:()=>{r&&t?i(t.id):t&&n({...t,quantity:1}),e()},className:`sticky bottom-0 left-0 right-0 w-full py-4 md:py-3 px-4 transition-colors flex items-center justify-center gap-2 md:rounded-lg shadow-lg md:shadow-none ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-solrent-orange hover:bg-orange-700 text-white"}`,children:r?g.jsxs(g.Fragment,{children:[g.jsx(sc,{className:"w-5 h-5"}),"Usuń z koszyka"]}):g.jsxs(g.Fragment,{children:[g.jsx(_z,{className:"w-5 h-5"}),"Dodaj do koszyka"]})}),g.jsxs("div",{className:"text-sm md:text-base",children:[g.jsx("h3",{className:"text-lg md:text-xl font-medium text-gray-900 mb-3 md:mb-4",children:"Opis"}),g.jsx("div",{className:"prose prose-sm max-w-none text-gray-600 leading-relaxed",children:t.description.split(`
`).map((a,l)=>g.jsx("p",{className:"mb-4",children:a},l))})]}),g.jsxs("div",{className:"text-sm md:text-base",children:[g.jsx("h3",{className:"text-lg md:text-xl font-medium text-gray-900 mb-3 md:mb-4",children:"Kategorie"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:t.categories.map((a,l)=>g.jsx("span",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:a==="budowlany"?"Sprzęt budowlany":"Sprzęt ogrodniczy"},l))})]})]})})]})})]})})}):null},uH=({selectedEquipment:t,onChange:e,onNext:n})=>{const[r,i]=Y.useState("wszystkie"),[s,o]=Y.useState(""),[a,l]=Y.useState([]),[c,u]=Y.useState(!1),[d,h]=Y.useState(null),[p,y]=Y.useState(!1),[x,v]=Y.useState(!0),[b,S]=Y.useState(null),[k,T]=Y.useState(null),[j,P]=Y.useState({name:"",description:"",price:"",deposit:"",image:"",categories:["budowlany"]});Y.useEffect(()=>{(async()=>{const F=await k9();y(F)})()},[]),Y.useEffect(()=>{(async()=>{try{v(!0);const J=await zD();J.length>0?(l(J),S(null)):S("Brak dostępnego sprzętu.")}catch(J){console.error("Error loading equipment:",J),S(J instanceof Error?J.message:"Nie udało się załadować sprzętu. Spróbuj odświeżyć stronę.")}finally{v(!1)}})();const F=lH(J=>{l(Q=>Q.map(ee=>ee.id===J.id?J:ee))});return()=>{F()}},[]);const C=[{id:"wszystkie",name:"Wszystkie"},{id:"budowlany",name:"Sprzęt budowlany"},{id:"ogrodniczy",name:"Sprzęt ogrodniczy"}],N=a.filter(U=>{const F=r==="wszystkie"||U.categories.includes(r),J=U.name.toLowerCase().includes(s.toLowerCase())||U.description.toLowerCase().includes(s.toLowerCase());return F&&J}),O=U=>{const F=t.find(J=>J.id===U);return F?F.quantity:0},z=async(U,F)=>{if(F<0||F>U.quantity)return;t.find(Q=>Q.id===U.id)?e(F===0?t.filter(Q=>Q.id!==U.id):t.map(Q=>Q.id===U.id?{...Q,quantity:F}:Q)):F>0&&e([...t,{...U,quantity:F}])},L=U=>{const{name:F,value:J}=U.target;if(F==="categories")P({...j,categories:[J]});else if(F==="price"||F==="deposit"){const Q=J.replace(/[^0-9]/g,"");P({...j,[F]:Q})}else P({...j,[F]:J})},M=async()=>{if(!j.name||!j.description||!j.price||!j.image){alert("Proszę wypełnić wszystkie pola");return}try{const U={...j,price:parseInt(j.price,10),deposit:parseInt(j.deposit,10)||0},F=await oH(U);l([...a,F]),P({name:"",description:"",price:"",deposit:"",image:"",categories:["budowlany"]})}catch(U){console.error("Error adding equipment:",U),alert("Nie udało się dodać sprzętu. Spróbuj ponownie.")}},K=U=>{h({...U,price:U.price.toString(),deposit:(U.deposit||"").toString()})},W=async U=>{if(window.confirm("Czy na pewno chcesz usunąć ten przedmiot?"))try{await aH(U),l(a.filter(F=>F.id!==U)),e(t.filter(F=>F.id!==U))}catch(F){console.error("Error deleting equipment:",F),alert("Nie udało się usunąć sprzętu. Spróbuj ponownie.")}};if(x)return g.jsx("div",{className:"flex justify-center items-center py-12",children:g.jsx("div",{className:"text-gray-600",children:"Ładowanie sprzętu..."})});if(b)return g.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:b});const Z=U=>t.some(F=>F.id===U);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Wybierz sprzęt"}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(ta,{className:"w-5 h-5 text-solrent-orange"}),g.jsxs("span",{className:"text-sm text-gray-600",children:["Wybrano: ",t.reduce((U,F)=>U+F.quantity,0)," szt."]})]}),p&&g.jsx("button",{onClick:()=>u(!c),className:"px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded-lg",children:c?"Ukryj panel":"Zarządzaj sprzętem"})]})]}),p&&c&&g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Panel zarządzania sprzętem"}),g.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border border-gray-200",children:[g.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Dodaj nowy sprzęt"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa"}),g.jsx("input",{type:"text",name:"name",value:j.name,onChange:L,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nazwa sprzętu"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategoria"}),g.jsxs("select",{name:"categories",value:j.categories[0],onChange:L,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.jsx("option",{value:"budowlany",children:"Sprzęt budowlany"}),g.jsx("option",{value:"ogrodniczy",children:"Sprzęt ogrodniczy"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cena (zł/dzień)"}),g.jsx("input",{type:"text",name:"price",value:j.price,onChange:L,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cena za dzień"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kaucja (zł)"}),g.jsx("input",{type:"text",name:"deposit",value:j.deposit,onChange:L,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Kwota kaucji"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL obrazu"}),g.jsx("input",{type:"text",name:"image",value:j.image,onChange:L,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opis"}),g.jsx("textarea",{name:"description",value:j.description,onChange:L,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Opis sprzętu",rows:2})]})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Dodaj sprzęt"})})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Edytuj istniejący sprzęt"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-100",children:[g.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Nazwa"}),g.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Kategoria"}),g.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Cena/dzień"}),g.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Kaucja"}),g.jsx("th",{className:"py-2 px-4 border-b text-right",children:"Akcje"})]})}),g.jsx("tbody",{children:a.map(U=>g.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[g.jsx("td",{className:"py-2 px-4",children:U.name}),g.jsx("td",{className:"py-2 px-4",children:U.categories[0]==="budowlany"?"Sprzęt budowlany":"Sprzęt ogrodniczy"}),g.jsxs("td",{className:"py-2 px-4",children:[U.price," zł/dzień"]}),g.jsxs("td",{className:"py-2 px-4",children:[U.deposit||0," zł"]}),g.jsxs("td",{className:"py-2 px-4 text-right",children:[g.jsx("button",{onClick:()=>K(U),className:"p-1 text-blue-600 hover:text-blue-800 mr-2",children:g.jsx(_0,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>W(U.id),className:"p-1 text-red-600 hover:text-red-800",children:g.jsx(sc,{className:"w-4 h-4"})})]})]},U.id))})]})})]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[g.jsx("div",{className:"flex-1",children:g.jsx("input",{type:"text",placeholder:"Szukaj sprzętu...",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:s,onChange:U=>o(U.target.value)})}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(U=>g.jsx("button",{className:`px-2 py-2 rounded-lg text-center text-sm ${r===U.id?"bg-solrent-orange text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>i(U.id),children:U.name},U.id))})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map((U,F)=>{const J=O(U.id)>0,Q=O(U.id);return g.jsxs("div",{className:`border rounded-lg overflow-hidden flex min-h-[12rem] transition-all duration-200 cursor-pointer w-full ${J?"bg-[#e6f3ff] border-[#0066cc] border-2":"bg-white"}`,onClick:()=>T(U),children:[g.jsx("div",{className:"w-1/3 min-w-[80px] relative p-3",children:g.jsx("img",{src:U.image,alt:U.name,className:"w-full h-full object-contain"})}),g.jsxs("div",{className:"w-2/3 p-3 flex flex-col justify-between",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:U.name}),g.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:U.description}),g.jsxs("div",{children:[U.deposit>0&&g.jsxs("p",{className:"text-sm text-orange-600",children:["Kaucja: ",U.deposit," zł"]}),g.jsxs("button",{onClick:ee=>{ee.stopPropagation(),T(U)},className:"mt-1 px-2 py-1 bg-solrent-orange text-white text-sm rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-1","aria-label":`Zobacz szczegóły ${U.name}`,children:[g.jsx(ta,{className:"w-4 h-4"}),"Szczegóły sprzętu"]})]})]}),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("span",{className:"font-bold text-solrent-orange",children:[g.jsxs("span",{children:[U.price," zł/dzień"]}),U.promotional_price&&g.jsxs("span",{className:"block text-sm text-green-600",children:["od 7 dni: ",U.promotional_price," zł/dzień"]})]}),g.jsxs("div",{className:"flex items-center space-x-2",onClick:ee=>ee.stopPropagation(),children:[Q>0&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>z(U,Q-1),className:"p-1 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-all",children:g.jsx(f5,{className:"w-4 h-4"})}),g.jsx("span",{className:"w-6 text-center font-medium",children:Q})]}),g.jsx("button",{onClick:()=>z(U,Q+1),disabled:Q>=U.quantity,className:`p-1 rounded-full transition-all ${Q>=U.quantity?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-orange-100 text-solrent-orange hover:bg-orange-200"}`,title:U.quantity>1?`Dostępne: ${U.quantity} szt.`:"",children:g.jsx(ic,{className:"w-4 h-4"})})]})]})]})]},U.id)})}),N.length===0&&g.jsx("div",{className:"text-center py-8",children:g.jsx("p",{className:"text-gray-500",children:"Nie znaleziono sprzętu spełniającego kryteria wyszukiwania."})}),g.jsx(cH,{equipment:k,onClose:()=>T(null),onAddToCart:U=>z(U,1),isInCart:k?Z(k.id):!1,onRemoveFromCart:U=>z({id:U,quantity:1},0)})]})},dH=({personalInfo:t,onChange:e,onValidityChange:n})=>{const[r,i]=Y.useState(!1),[s,o]=Mt.useState([]),[a,l]=Mt.useState({}),[c,u]=Mt.useState(new Set),[d,h]=Y.useState(!1),p=(k,T)=>{switch(k){case"firstName":return T.length>50?"Imię nie może być dłuższe niż 50 znaków":T.trim()?/^[A-Za-zĄąĆćĘęŁłŃńÓóŚśŹźŻż\s-]+$/.test(T)?null:"Dozwolone są tylko litery, spacje i myślniki":`Pole ${k==="firstName"?"Imię":"Nazwisko"} jest wymagane`;case"lastName":return T.length>50?"Nazwisko nie może być dłuższe niż 50 znaków":T.trim()?/^[A-Za-zĄąĆćĘęŁłŃńÓóŚśŹźŻż\s-]+$/.test(T)?null:"Dozwolone są tylko litery, spacje i myślniki":`Pole ${k==="firstName"?"Imię":"Nazwisko"} jest wymagane`;case"email":return T.trim()?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(T)?null:"Proszę wprowadzić poprawny adres email (np. jan.kowalski@example.com)":"Adres email jest wymagany";case"phone":return T.trim()?/^\d{3}\s?\d{3}\s?\d{3}$/.test(T.replace(/\s/g,""))?null:"Proszę wprowadzić poprawny 9-cyfrowy numer telefonu (np. 123 456 789)":"Numer telefonu jest wymagany";case"companyNip":return T&&!/^\d{3}-\d{3}-\d{2}-\d{2}$/.test(T.replace(/[^0-9-]/g,""))?"Nieprawidłowy format NIP (XXX-XXX-XX-XX)":null;case"companyPostalCode":return T&&!/^\d{2}-\d{3}$/.test(T.replace(/[^0-9-]/g,""))?"Nieprawidłowy format kodu pocztowego (XX-XXX)":null;case"comment":return T.length>500?"Komentarz nie może przekraczać 500 znaków":null;default:return null}},y=k=>{const{name:T,value:j}=k.target;let P=j;T==="firstName"||T==="lastName"?P=j.replace(/[0-9]/g,""):T==="email"?P=j:T==="phone"?P=j.replace(/[^0-9]/g,"").slice(0,9).replace(/(\d{3})(?=\d)/g,"$1 "):T==="companyNip"?P=j.replace(/[^0-9]/g,"").slice(0,10).replace(/(\d{3})(\d{3})(\d{2})(\d{2})/,"$1-$2-$3-$4"):T==="companyPostalCode"?P=j.replace(/[^0-9]/g,"").slice(0,5).replace(/(\d{2})(\d{3})/,"$1-$2"):P=j;const C={...t,[T]:P};e(C);const N=p(T,P);o(O=>{const z=O.filter(L=>L.field!==T);return N&&z.push({field:T,message:N}),z}),n(S(C))},x=k=>{const{name:T}=k.target;u(j=>new Set(j).add(T))},v=k=>{const{name:T,checked:j}=k.target;l(O=>{const z={...O};return delete z[T],z});const P={...t,[T]:j};e(P);const N=["dataProcessingAccepted","terms1Accepted","terms2Accepted"].filter(O=>!P[O]);N.length>0?(l(O=>({...O,...N.reduce((z,L)=>({...z,[L]:"To pole jest wymagane"}),{})})),n(!1)):(l({}),n(S(P)))},b=k=>{if(!c.has(k))return null;const T=s.find(j=>j.field===k);return T?T.message:null},S=k=>{var T,j,P,C,N;return((T=k.firstName)==null?void 0:T.trim())!==""&&((j=k.lastName)==null?void 0:j.trim())!==""&&((P=k.email)==null?void 0:P.trim())!==""&&((C=k.email)==null?void 0:C.includes("@"))&&((N=k.phone)==null?void 0:N.trim())!==""&&k.dataProcessingAccepted===!0&&k.terms1Accepted===!0&&k.terms2Accepted===!0};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Dane osobowe"}),g.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Wprowadź swoje dane kontaktowe potrzebne do rezerwacji"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imię"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(bx,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:y,onBlur:x,pattern:"[A-Za-zĄąĆćĘęŁłŃńÓóŚśŹźŻż\\s-]+",className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("firstName")?"border-red-500":""}`,placeholder:"Jan",required:!0})]}),b("firstName")&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("firstName")})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwisko"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(bx,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:y,onBlur:x,pattern:"[A-Za-zĄąĆćĘęŁłŃńÓóŚśŹźŻż\\s-]+",className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("lastName")?"border-red-500":""}`,placeholder:"Kowalski",required:!0})]}),b("lastName")&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("lastName")})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Bd,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{type:"email",id:"email",name:"email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",value:t.email,onChange:y,onBlur:x,className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("email")?"border-red-500":""}`,placeholder:"jan.kowalski@example.com",required:!0})]})]}),b("email")&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("email")}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(wd,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{9}",maxLength:11,inputMode:"numeric",value:t.phone,onBlur:x,onChange:y,className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("phone")?"border-red-500":""}`,placeholder:"123 456 789",required:!0})]}),b("phone")&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("phone")})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opcjonalny komentarz"}),g.jsx("textarea",{id:"comment",name:"comment",maxLength:500,value:t.comment||"",onChange:y,rows:3,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Dodatkowe informacje lub uwagi do rezerwacji (max 500 znaków)..."})]}),g.jsxs("div",{className:"mt-8",children:[g.jsxs("button",{type:"button",onClick:()=>h(!d),className:"w-full flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx("span",{className:"font-medium text-gray-700",children:"Dane firmy (opcjonalne)"}),g.jsx(Zc,{className:`w-5 h-5 text-gray-500 transition-transform ${d?"rotate-180":""}`})]}),g.jsx(fc,{children:d&&g.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:g.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pełna nazwa firmy"}),g.jsx("input",{type:"text",name:"companyName",value:t.companyName||"",onChange:y,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nazwa firmy"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIP"}),g.jsx("input",{type:"text",name:"companyNip",value:t.companyNip||"",onChange:y,onBlur:x,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("companyNip")?"border-red-500":""}`,placeholder:"XXX-XXX-XX-XX"}),b("companyNip")&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("companyNip")})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ulica i numer"}),g.jsx("input",{type:"text",name:"companyStreet",value:t.companyStreet||"",onChange:y,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ulica i numer"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy"}),g.jsx("input",{type:"text",name:"companyPostalCode",value:t.companyPostalCode||"",onChange:y,onBlur:x,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("companyPostalCode")?"border-red-500":""}`,placeholder:"XX-XXX"}),b("companyPostalCode")&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("companyPostalCode")})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto"}),g.jsx("input",{type:"text",name:"companyCity",value:t.companyCity||"",onChange:y,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Miasto"})]})]})]})})})]}),g.jsx("div",{className:"bg-blue-50 p-6 rounded-lg space-y-4",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Informacje o przetwarzaniu danych"}),g.jsx("p",{className:"text-sm text-blue-700",children:"Administratorem Pani/Pana danych osobowych jest SOLRENT z siedzibą w Knurowie 44-190 ul. Jęczmienna 4. Dane będą przetwarzane w celu realizacji usługi wynajmu sprzętu. Podanie danych jest dobrowolne, ale niezbędne do świadczenia usługi."})]}),g.jsxs("button",{onClick:()=>i(!r),className:"text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r?"Zwiń szczegóły":"Rozwiń pełną informację",g.jsx(Zc,{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`})]}),g.jsx(fc,{children:r&&g.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:g.jsxs("div",{className:"space-y-4 pt-2",children:[g.jsx("div",{children:g.jsx("p",{className:"text-sm text-blue-700",children:"Podstawą prawną przetwarzania podanych przez Panią/Pana danych osobowych jest art. 6 ust. 1 lit. a ROZPORZĄDZENIA PARLAMENTU EUROPEJSKIEGO I RADY (UE) 2016/679 z dnia 27 kwietnia 2016 r. w sprawie ochrony osób fizycznych w związku z przetwarzaniem danych osobowych i w sprawie swobodnego przepływu takich danych oraz uchylenia dyrektywy 95/46/WE (RODO)."})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-blue-700",children:"Podane przez Panią/Pana dane osobowe będą przetwarzane do czasu wycofania zgody. Przysługuje Pani/Panu:"}),g.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm text-blue-700",children:[g.jsx("li",{children:"prawo dostępu do treści podanych danych osobowych"}),g.jsx("li",{children:"prawo do ich sprostowania, usunięcia lub ograniczenia przetwarzania"}),g.jsx("li",{children:"prawo do przenoszenia danych"}),g.jsx("li",{children:"prawo do cofnięcia zgody w dowolnym momencie bez wpływu na zgodność z prawem przetwarzania dokonanego przed jej cofnięciem"}),g.jsx("li",{children:"prawo do wniesienia skargi do organu nadzorczego w zakresie ochrony danych osobowych"})]})]}),g.jsx("div",{children:g.jsx("p",{className:"text-sm text-blue-700",children:"Pani/Pana dane osobowe nie będą przekazywane do państw trzecich, nie będą przetwarzane w sposób zautomatyzowany i nie będą profilowane."})})]})})})]})}),g.jsxs("div",{className:"flex items-start space-x-2",children:[g.jsx("input",{id:"dataProcessing",name:"dataProcessingAccepted",type:"checkbox",checked:t.dataProcessingAccepted||!1,onChange:v,className:"h-4 w-4 mt-1 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),g.jsx("label",{htmlFor:"dataProcessing",className:"text-sm text-gray-700",children:g.jsx("span",{className:a.dataProcessingAccepted?"text-red-600":"",children:"Oświadczam, że zapoznałem/-am się z powyższymi informacjami i wyrażam zgodę na przetwarzanie podanych przeze mnie danych osobowych we wskazanych powyżej celach i zakresie."})})]}),a.dataProcessingAccepted&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.dataProcessingAccepted}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("p",{className:"font-medium text-gray-700",children:"Oświadczam, że:"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx("input",{id:"terms1",name:"terms1Accepted",type:"checkbox",checked:t.terms1Accepted||!1,onChange:v,className:`h-4 w-4 mt-1 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a.terms1Accepted?"border-red-500":""}`}),g.jsxs("label",{htmlFor:"terms1",className:"ml-2 block text-sm text-gray-700",children:[g.jsxs("span",{className:a.terms1Accepted?"text-red-600":"",children:["Zapoznałem/am się z pełną treścią ",g.jsx("a",{href:"https://solrent.pl/zasady-wynajmu/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Warunków Umowy Najmu"})," i akceptuję wszystkie jej postanowienia, w szczególności:"]}),g.jsxs("ul",{className:"list-disc pl-4 mt-1",children:[g.jsx("li",{children:"Zasady korzystania ze sprzętu"}),g.jsx("li",{children:"Warunki płatności i rozliczeń"}),g.jsx("li",{children:"Możliwość potrącenia z wpłaconej kaucji w przypadkach określonych w Umowie"}),g.jsx("li",{children:"Odpowiedzialność za powierzony sprzęt"})]})]})]}),a.terms1Accepted&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.terms1Accepted}),g.jsxs("div",{className:"flex items-start",children:[g.jsx("input",{id:"terms2",name:"terms2Accepted",type:"checkbox",checked:t.terms2Accepted||!1,onChange:v,className:`h-4 w-4 mt-1 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a.terms2Accepted?"border-red-500":""}`}),g.jsxs("label",{htmlFor:"terms2",className:"ml-2 block text-sm text-gray-700",children:[g.jsx("span",{className:a.terms2Accepted?"text-red-600":"",children:"Przyjmuję do wiadomości i akceptuję zasady funkcjonowania wypożyczalni:"}),g.jsxs("div",{className:"mt-1 pl-4",children:[g.jsx("p",{className:"font-medium",children:"Godziny otwarcia (tylko w tych godzinach możliwy jest odbiór i zwrot sprzętu):"}),g.jsxs("ul",{className:"list-none mt-1",children:[g.jsx("li",{children:"Poniedziałek - Piątek: 8:00 - 16:00"}),g.jsx("li",{children:"Sobota: 8:00 - 13:00"}),g.jsx("li",{children:"Niedziela: nieczynne"})]})]}),g.jsxs("div",{className:"mt-2 pl-4",children:[g.jsx("p",{className:"font-medium",children:"Wypożyczalnia zastrzega sobie prawo do:"}),g.jsxs("ul",{className:"list-disc mt-1",children:[g.jsx("li",{children:"Odwołania rezerwacji z powodu usterek technicznych"}),g.jsx("li",{children:"Odwołania rezerwacji w przypadku zdarzeń losowych"}),g.jsx("li",{children:"Odmowy wydania sprzętu osobom, które nie spełniają warunków określonych w regulaminie"})]})]})]})]}),a.terms2Accepted&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.terms2Accepted})]})]})]})]})};var IC={};async function RC({recipientEmail:t,subject:e,htmlContent:n,templateData:r}){try{const i=await fetch(`${IC.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/send-email-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${IC.NEXT_PUBLIC_SUPABASE_ANON_KEY}`},body:JSON.stringify({recipientEmail:t,subject:e,htmlContent:n,templateData:r})});if(!i.ok){const o=await i.json();throw console.error("Błąd wysyłania emaila:",o),new Error(`Błąd wysyłania emaila: ${o.error||i.statusText}`)}return await i.json()}catch(i){throw console.error("Błąd wysyłania emaila:",i),i}}const Bw={newReservation:{subject:"Potwierdzenie rezerwacji sprzętu",htmlContent:`<h1>Potwierdzenie rezerwacji</h1>
      <p>Szanowny/a {{first_name}} {{last_name}},</p>
      <p>Dziękujemy za dokonanie rezerwacji w SOLRENT. Poniżej znajdują się szczegóły Twojej rezerwacji:</p>
      <p>Data rozpoczęcia: {{start_date}} {{start_time}}<br>
      Data zakończenia: {{end_date}} {{end_time}}<br>
      Liczba dni: {{days}}</p>
      <p>Wybrany sprzęt:<br>{{equipment}}</p>
      <p>Całkowity koszt wypożyczenia: {{total_price}} zł<br>
      Wymagana kaucja: {{deposit}} zł</p>
      <p>Prosimy o przygotowanie:<br>
      - Dokumentu tożsamości<br>
      - Kaucji w wysokości {{deposit}} zł</p>
      <p>Przypominamy o godzinach otwarcia:<br>
      Poniedziałek - Piątek: 8:00 - 16:00<br>
      Sobota: 8:00 - 13:00<br>
      Niedziela: nieczynne</p>
      <p>W razie pytań prosimy o kontakt:<br>
      Tel: 694 171 171<br>
      Email: biuro@solrent.pl</p>
      <p>Pozdrawiamy,<br>
      Zespół SOLRENT</p>`},statusUpdate:{subject:"Aktualizacja statusu rezerwacji",htmlContent:`<h1>Aktualizacja statusu rezerwacji</h1>
      <p>Szanowny/a {{first_name}} {{last_name}},</p>
      <p>Informujemy, że status Twojej rezerwacji został zmieniony na: <strong>{{status}}</strong></p>
      <p>Szczegóły rezerwacji:</p>
      <p>Data rozpoczęcia: {{start_date}} {{start_time}}<br>
      Data zakończenia: {{end_date}} {{end_time}}<br>
      Liczba dni: {{days}}</p>
      <p>Wybrany sprzęt:<br>{{equipment}}</p>
      <p>W razie pytań prosimy o kontakt:<br>
      Tel: 694 171 171<br>
      Email: biuro@solrent.pl</p>
      <p>Pozdrawiamy,<br>
      Zespół SOLRENT</p>`},cancelReservation:{subject:"Anulowanie rezerwacji",htmlContent:`<h1>Anulowanie rezerwacji</h1>
      <p>Szanowny/a {{first_name}} {{last_name}},</p>
      <p>Informujemy, że Twoja rezerwacja została anulowana.</p>
      <p>Szczegóły anulowanej rezerwacji:</p>
      <p>Data rozpoczęcia: {{start_date}} {{start_time}}<br>
      Data zakończenia: {{end_date}} {{end_time}}<br>
      Liczba dni: {{days}}</p>
      <p>Wybrany sprzęt:<br>{{equipment}}</p>
      <p>Jeśli masz jakiekolwiek pytania, prosimy o kontakt:<br>
      Tel: 694 171 171<br>
      Email: biuro@solrent.pl</p>
      <p>Pozdrawiamy,<br>
      Zespół SOLRENT</p>`}},BD=({isOpen:t,onClose:e,title:n,className:r="",children:i})=>t?g.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ${r}`,children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative",children:[g.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:g.jsx(cu,{className:"w-5 h-5"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:n}),i]})]})}):null,UD=Y.forwardRef(({reservation:t,onSubmit:e},n)=>{const{startDate:r,endDate:i,equipment:s,personalInfo:o}=t,[a,l]=Y.useState(!1),[c,u]=Y.useState(""),[d,h]=Y.useState(!1),[p,y]=Y.useState(!1),[x,v]=Y.useState({title:"",message:"",isError:!1}),b=()=>{if(!r||!i||!t.startTime||!t.endTime)return 0;const C=new Date(r),N=new Date(i),O=t.startTime||"00:00",z=t.endTime||"00:00";return Sx(C,N,O,z)},S=()=>{const C=b();return s.reduce((N,O)=>{const z=C>=7&&O.promotional_price?O.promotional_price:O.price;return N+z*O.quantity*C},0)},k=()=>s.reduce((C,N)=>C+(N.deposit||0)*N.quantity,0),T=C=>C?C.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}):"",j=async()=>{if(!(a||d)){if(!o.email||!o.firstName||!o.lastName){u("Proszę wypełnić wszystkie wymagane pola");return}l(!0),u("");try{const C=r?new Date(r):new Date,N=i?new Date(i):new Date,[O]=t.startTime?t.startTime.split(":").map(Number):[0],[z]=t.endTime?t.endTime.split(":").map(Number):[0];C.setHours(O,0,0,0),N.setHours(z,0,0,0);const L=s.map(ee=>`${ee.name} (${ee.quantity}x)`).join(", "),{data:M,error:K}=await lt.from("customers").select("id").eq("email",o.email).maybeSingle();if(K)throw K;let W;const Z=M;if(Z){const{data:ee,error:ne}=await lt.from("customers").update({first_name:o.firstName,last_name:o.lastName,phone:o.phone,company_name:o.companyName||null,company_nip:o.companyNip||null,company_street:o.companyStreet||null,company_postal_code:o.companyPostalCode||null,company_city:o.companyCity||null,product_name:L,rental_start_date:C.toISOString(),rental_end_date:N.toISOString(),rental_days:b(),total_amount:S(),deposit_amount:k(),comment:o.comment||null,updated_at:new Date().toISOString()}).eq("id",Z.id).select().single();if(ne)throw ne;W=Z.id}else{const{data:ee,error:ne}=await lt.from("customers").insert({first_name:o.firstName,last_name:o.lastName,email:o.email,phone:o.phone,company_name:o.companyName||null,company_nip:o.companyNip||null,company_street:o.companyStreet||null,company_postal_code:o.companyPostalCode||null,company_city:o.companyCity||null,product_name:L,rental_start_date:C.toISOString(),rental_end_date:N.toISOString(),rental_days:b(),total_amount:S(),deposit_amount:k(),comment:o.comment||null}).select().single();if(ne)throw ne;W=ee.id}const{data:U,error:F}=await lt.from("reservations").insert({customer_id:W,start_date:C.toISOString(),end_date:N.toISOString(),start_time:t.startTime,end_time:t.endTime,total_price:S(),status:"pending",comment:o.comment||null}).select().single();if(F)throw F;const J=s.map(ee=>({reservation_id:U.id,equipment_id:ee.id,quantity:ee.quantity,price_per_day:ee.price,deposit:ee.deposit||0})),{error:Q}=await lt.from("reservation_items").insert(J);if(Q)throw Q;try{const ee=s.map(D=>`${D.name} (${D.quantity} szt.) - ${D.price} zł/dzień`).join(`
`),ne={first_name:o.firstName,last_name:o.lastName,start_date:T(r),start_time:t.startTime||"08:00",end_date:T(i),end_time:t.endTime||"16:00",days:b().toString(),equipment:ee,total_price:S().toString(),deposit:k().toString()};await RC({recipientEmail:o.email,subject:Bw.newReservation.subject,htmlContent:Bw.newReservation.htmlContent,templateData:ne}),await RC({recipientEmail:"biuro@solrent.pl",subject:`Nowa rezerwacja: ${o.firstName} ${o.lastName}`,htmlContent:Bw.newReservation.htmlContent,templateData:ne}),console.log("Emaile z potwierdzeniem rezerwacji wysłane pomyślnie"),await lt.from("email_notifications").insert([{reservation_id:U.id,recipient:o.email,type:"customer",status:"sent"},{reservation_id:U.id,recipient:"biuro@solrent.pl",type:"admin",status:"sent"}])}catch(ee){console.error("Błąd podczas wysyłania emaila z potwierdzeniem rezerwacji:",ee)}h(!0),v({title:"Rezerwacja potwierdzona",message:"Rezerwacja została pomyślnie utworzona. Na podany adres email zostało wysłane potwierdzenie. Dziękujemy!",isError:!1}),y(!0),e&&e()}catch(C){console.error("Error submitting reservation:",C),u("Wystąpił błąd podczas zapisywania rezerwacji."),v({title:"Błąd rezerwacji",message:"Przepraszamy, wystąpił błąd podczas tworzenia rezerwacji. Spróbuj ponownie.",isError:!0}),y(!0)}finally{l(!1)}}},P=()=>{y(!1),x.isError||(window.location.href="/")};return Y.useImperativeHandle(n,()=>({handleSubmitReservation:j})),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Podsumowanie rezerwacji"}),g.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sprawdź szczegóły swojej rezerwacji przed potwierdzeniem"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx(dc,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-900",children:"Termin rezerwacji"}),g.jsxs("p",{className:"text-gray-700 mt-1",children:["Od: ",g.jsx("span",{className:"font-medium",children:T(r)}),t.startTime&&g.jsxs("span",{className:"font-medium",children:[" ",t.startTime]})]}),g.jsxs("p",{className:"text-gray-700",children:["Do: ",g.jsx("span",{className:"font-medium",children:T(i)}),t.endTime&&g.jsxs("span",{className:"font-medium",children:[" ",t.endTime]})]}),g.jsxs("p",{className:"text-gray-700 mt-1",children:["Liczba dni: ",g.jsx("span",{className:"font-medium",children:b()})]})]})]})}),g.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx(ta,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),g.jsxs("div",{className:"w-full",children:[g.jsx("h3",{className:"font-medium text-gray-900",children:"Wybrany sprzęt"}),g.jsx("div",{className:"mt-2 space-y-2",children:s.map(C=>g.jsxs("div",{className:"flex justify-between text-gray-700",children:[g.jsxs("div",{children:[g.jsxs("span",{children:[C.name," x",C.quantity]}),C.promotional_price&&b()>=7&&g.jsx("span",{className:"ml-2 text-sm text-green-600 font-medium",children:"(Cena promocyjna dla wynajmu 7+ dni)"})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{children:C.promotional_price&&b()>=7?g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"font-medium text-green-600",children:[(C.promotional_price*C.quantity).toFixed(2)," zł/dzień"]}),g.jsxs("span",{className:"ml-2 text-sm line-through text-gray-500",children:[(C.price*C.quantity).toFixed(2)," zł"]})]}):g.jsxs("span",{className:"font-medium",children:[(C.price*C.quantity).toFixed(2)," zł/dzień"]})}),C.deposit>0&&g.jsxs("div",{className:"text-sm text-orange-600",children:["Kaucja: ",C.deposit*C.quantity," zł"]})]})]},C.id))})]})]})}),g.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx(bx,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-900",children:"Dane osobowe"}),g.jsxs("p",{className:"text-gray-700 mt-1",children:["Imię i nazwisko: ",g.jsxs("span",{className:"font-medium",children:[o.firstName," ",o.lastName]})]}),g.jsxs("p",{className:"text-gray-700",children:["Email: ",g.jsx("span",{className:"font-medium",children:o.email})]}),g.jsxs("p",{className:"text-gray-700",children:["Telefon: ",g.jsx("span",{className:"font-medium",children:o.phone})]}),o.companyName&&g.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[g.jsx("h4",{className:"font-medium text-gray-900",children:"Dane firmy"}),g.jsxs("p",{className:"text-gray-700 mt-1",children:["Nazwa: ",g.jsx("span",{className:"font-medium",children:o.companyName})]}),g.jsxs("p",{className:"text-gray-700",children:["NIP: ",g.jsx("span",{className:"font-medium",children:o.companyNip})]}),g.jsxs("p",{className:"text-gray-700",children:["Adres: ",g.jsxs("span",{className:"font-medium",children:[o.companyStreet,", ",o.companyPostalCode," ",o.companyCity]})]})]}),o.comment&&g.jsxs("p",{className:"text-gray-700 mt-2",children:["Komentarz: ",g.jsx("span",{className:"italic",children:o.comment})]})]})]})}),g.jsx("div",{className:"bg-orange-50 p-4 rounded-lg mb-4",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx(zd,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-solrent-dark",children:"Podsumowanie kosztów"}),g.jsxs("div",{className:"mt-2 space-y-1",children:[g.jsxs("div",{className:"flex justify-between text-solrent-gray",children:[g.jsx("span",{children:"Koszt dzienny:"}),g.jsx("div",{className:"text-right",children:b()>=7&&s.some(C=>C.promotional_price)?g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"font-medium text-green-600",children:[s.reduce((C,N)=>C+(N.promotional_price||N.price)*N.quantity,0).toFixed(2)," zł"]}),g.jsxs("span",{className:"ml-2 text-sm line-through",children:[s.reduce((C,N)=>C+N.price*N.quantity,0).toFixed(2)," zł"]})]}):g.jsxs("span",{className:"font-medium",children:[s.reduce((C,N)=>C+N.price*N.quantity,0).toFixed(2)," zł"]})})]}),g.jsxs("div",{className:"flex justify-between text-solrent-gray",children:[g.jsx("span",{children:"Liczba dni:"}),g.jsx("span",{className:`font-medium ${b()>=7?"text-green-600":"text-gray-900"}`,children:b()})]}),b()>=7&&s.some(C=>C.promotional_price)&&g.jsxs("div",{className:"flex justify-between text-green-600 font-medium pt-2 border-t border-green-200",children:[g.jsx("span",{children:"Oszczędzasz:"}),g.jsxs("span",{children:[((s.reduce((C,N)=>C+N.price*N.quantity,0)-s.reduce((C,N)=>C+(N.promotional_price||N.price)*N.quantity,0))*b()).toFixed(2)," zł"]})]}),g.jsxs("div",{className:"flex justify-between text-solrent-gray pt-2 border-t border-orange-200",children:[g.jsx("span",{children:"Całkowity koszt wypożyczenia:"}),g.jsxs("span",{className:"font-medium",children:[S().toFixed(2)," zł"]})]}),g.jsxs("div",{className:"flex justify-between text-solrent-gray pt-2 border-t border-orange-200",children:[g.jsx("span",{children:"Kaucja (zwrotna):"}),g.jsxs("span",{className:"font-medium",children:[k().toFixed(2)," zł"]})]})]})]})]})})]}),g.jsx("div",{className:"bg-green-50 p-4 rounded-lg text-green-700",children:g.jsxs("p",{className:"text-sm",children:[g.jsx("strong",{children:"Informacja:"}),' Po kliknięciu przycisku "Zarezerwuj" Twoja rezerwacja zostanie zapisana w systemie.',b()>=7&&s.some(C=>C.promotional_price)?g.jsxs("span",{className:"block mt-2",children:[g.jsx("strong",{children:"Promocja aktywna!"})," Wybrałeś rezerwację na 7 lub więcej dni - otrzymujesz specjalną zniżkę na wybrane produkty!"]}):b()<7&&s.some(C=>C.promotional_price)?g.jsxs("span",{className:"block mt-2",children:[g.jsx("strong",{children:"Wskazówka:"})," Zarezerwuj na 7 lub więcej dni, aby otrzymać specjalną zniżkę na wybrane produkty!"]}):null]})}),g.jsx("div",{className:"bg-orange-50 p-4 rounded-lg text-orange-700",children:g.jsxs("p",{className:"text-sm",children:[g.jsx("strong",{children:"Kaucja:"})," Kaucja jest pobierana przed rozpoczęciem usługi jako zabezpieczenie przed ewentualnymi uszkodzeniami. Kaucja zostanie zwrócona w pełnej wysokości po zakończeniu usługi i stwierdzeniu braku uszkodzeń. W przypadku stwierdzenia uszkodzeń, koszty naprawy zostaną potrącone z kaucji."]})}),g.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c&&g.jsx("div",{className:"w-full bg-red-50 p-4 rounded-lg text-red-700",children:c}),d&&g.jsxs("div",{className:"w-full bg-green-50 p-4 rounded-lg text-green-700",children:[g.jsx("p",{className:"font-medium",children:"Rezerwacja została pomyślnie złożona!"}),g.jsx("p",{className:"mt-2",children:"Za chwilę nastąpi przekierowanie na stronę główną..."})]})]}),g.jsx(BD,{isOpen:p,onClose:P,title:x.title,children:g.jsxs("div",{className:`text-center ${x.isError?"text-red-600":"text-green-600"}`,children:[g.jsx("p",{className:"mb-4",children:x.message}),g.jsx("button",{onClick:P,className:`px-4 py-2 rounded-lg text-white ${x.isError?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:"OK"})]})})]})});UD.displayName="Summary";const fH=({reservation:t,onRemoveItem:e,onRemoveAll:n,currentStep:r,onNext:i,onPrev:s})=>{const[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),u=Y.useRef(null),{startDate:d,endDate:h}=t,[p,y]=Y.useState(!1),x=Y.useRef(t.equipment.length),v=P=>{const C=localStorage.getItem(`summaryCollapsed_${P}`);return C?JSON.parse(C):P>0};Y.useEffect(()=>{p||a(r!==0),x.current=t.equipment.length},[r]),Y.useEffect(()=>{if(!p){const P=v(r);a(P)}},[]),Y.useEffect(()=>{p&&x.current!==t.equipment.length&&(x.current=t.equipment.length)},[t.equipment.length]);const b=()=>{const P=!o;a(P),y(!0),r!==0&&localStorage.setItem(`summaryCollapsed_${r}`,JSON.stringify(P))},S=()=>{c(!0)},k=()=>{n(),c(!1)},T=()=>{const P=j();return t.equipment.reduce((C,N)=>{const O=P>=7&&N.promotional_price?N.promotional_price:N.price;return C+O*N.quantity},0)},j=()=>!d||!h||!t.startTime||!t.endTime?0:Sx(d,h,t.startTime,t.endTime);return r===3||t.equipment.length===0?null:g.jsxs(g.Fragment,{children:[g.jsx("div",{onClick:P=>{P.target.closest("button")||b()},ref:u,className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg fixed-summary transition-all duration-300",children:g.jsxs("div",{className:"max-w-4xl mx-auto relative",children:[g.jsx("div",{onClick:b,className:"absolute -top-8 right-4 bg-white rounded-t-lg border border-b-0 px-3 py-1 shadow-sm hover:bg-gray-50 transition-colors",children:g.jsx(Ii.div,{animate:{rotate:o?0:180},transition:{duration:.3},children:g.jsx(Nm,{className:"w-5 h-5 text-gray-600"})})}),g.jsx("div",{className:"px-4 py-2 flex items-center justify-between border-b",children:g.jsxs("div",{className:"flex items-center justify-between flex-1",children:[g.jsx("div",{className:"flex items-center gap-2 md:gap-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-sm text-gray-600",children:["Wybrane: ",t.equipment.length]}),g.jsxs("button",{onClick:P=>{P.stopPropagation(),S()},className:"flex items-center gap-1 text-red-600 hover:text-red-700 text-xs md:text-sm py-1 px-1.5 md:px-2 rounded transition-colors",children:[g.jsx(sc,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden md:inline",children:"Usuń wszystkie"}),g.jsx("span",{className:"md:hidden",children:"Usuń"})]})]})}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"text-right",children:[g.jsx("span",{className:"text-sm text-gray-600",children:"Suma:"}),g.jsx("div",{className:"font-bold text-solrent-orange",children:j()>=7&&t.equipment.some(P=>P.promotional_price)?g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"text-sm line-through text-gray-500",children:[t.equipment.reduce((P,C)=>P+C.price*C.quantity,0)," zł/dzień"]}),g.jsxs("span",{className:"block font-bold text-green-600",children:[T()," zł/dzień"]})]}):g.jsxs("span",{children:[T()," zł/dzień"]})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&g.jsxs("button",{onClick:s,className:"md:px-4 md:py-2 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-1 md:gap-2 text-sm md:text-base",children:[g.jsx(u5,{className:"w-4 h-4 md:w-5 md:h-5"}),g.jsx("span",{className:"hidden md:inline",children:"Wstecz"})]}),g.jsxs("button",{onClick:i,className:"md:px-4 md:py-2 px-3 py-1.5 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-1 md:gap-2 text-sm md:text-base",children:[g.jsx("span",{className:"hidden md:inline",children:"Dalej"}),g.jsx(sz,{className:"w-4 h-4 md:w-5 md:h-5"})]})]})]})]})}),g.jsx(fc,{children:!o&&g.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:g.jsx("div",{className:"p-4 space-y-4",children:g.jsx("div",{className:"grid grid-cols-2 md:flex md:flex-wrap gap-2",children:t.equipment.map(P=>g.jsxs("div",{className:"flex items-center bg-orange-50 text-solrent-orange px-2 md:px-3 py-1.5 rounded-lg md:rounded-full text-xs md:text-sm",children:[g.jsxs("span",{className:"flex-1 truncate",children:[P.name.includes("/")?g.jsxs("span",{className:"inline-flex flex-col",children:[g.jsx("span",{className:"truncate",children:P.name.split("/")[0].trim()}),g.jsx("span",{className:"truncate",children:P.name.split("/")[1].trim()})]}):P.name,g.jsxs("span",{className:"ml-1 font-medium",children:["x",P.quantity]})]}),g.jsx("button",{onClick:()=>e(P.id),className:"ml-1 md:ml-2 p-1 rounded-full hover:bg-orange-100 transition-colors flex-shrink-0",children:g.jsx(cu,{className:"w-4 h-4"})})]},P.id))})})})})]})}),g.jsx(BD,{isOpen:l,onClose:()=>c(!1),title:"Potwierdzenie usunięcia",className:"modal-overlay",children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"mb-6 text-gray-700",children:"Czy na pewno chcesz usunąć wszystkie produkty?"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",children:"Anuluj"}),g.jsx("button",{onClick:k,className:"px-4 py-2 bg-[#FF0000] text-white rounded hover:bg-[#CC0000] transition-colors",children:"Usuń wszystko"})]})]})})]})},_p=[{id:"equipment",label:"Wybierz sprzęt",icon:ta},{id:"dates",label:"Wybierz datę",icon:dc},{id:"personal",label:"Dane osobowe",icon:HP},{id:"summary",label:"Podsumowanie",icon:zd}],hH=()=>{const[t,e]=Y.useState(0),[n,r]=Y.useState(0),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),l=Y.useRef(null),[c,u]=Y.useState({startDate:null,endDate:null,startTime:null,endTime:null,equipment:[],personalInfo:{firstName:"",lastName:"",email:"",phone:"",comment:"",termsAccepted:!1}}),d=(C,N)=>{u(O=>({...O,[C]:N}))},h=C=>{d("equipment",c.equipment.filter(N=>N.id!==C))},p=()=>{d("equipment",[])},y=C=>{switch(C){case 0:return c.equipment.length>0;case 1:return c.startDate&&c.endDate&&c.startTime&&c.endTime;case 2:return i;case 3:return!0;default:return!1}},x=C=>C<=n?Array.from({length:C},(N,O)=>O).every(N=>y(N)):!1,v=()=>{if(t<_p.length-1&&y(t)){const C=t+1;e(C),r(Math.max(n,C))}},b=()=>{t>0&&e(t-1)},S=C=>{x(C)&&e(C)},k=()=>{a(!1)},T=()=>{switch(t){case 0:return g.jsx(uH,{selectedEquipment:c.equipment,onChange:C=>d("equipment",C),onNext:v});case 1:return g.jsx(rH,{startDate:c.startDate,endDate:c.endDate,startTime:c.startTime,endTime:c.endTime,selectedEquipment:c.equipment,onChange:(C,N,O,z)=>{d("startDate",C),d("endDate",N),d("startTime",O),d("endTime",z)}});case 2:return g.jsx(dH,{personalInfo:c.personalInfo,onValidityChange:s,onChange:C=>d("personalInfo",C)});case 3:return g.jsx(UD,{ref:l,reservation:c,onSubmit:k});default:return null}},j=()=>{l.current&&l.current.handleSubmitReservation&&(a(!0),l.current.handleSubmitReservation())},P=()=>t===_p.length-1?Array.from({length:_p.length-1},(C,N)=>N).every(C=>y(C)):y(t);return g.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[g.jsx("div",{className:"flex border-b",children:_p.map((C,N)=>{const O=C.icon,z=N===t,L=N<t&&y(N),M=x(N),K=!M;return g.jsx("button",{className:`
                flex-1 py-4 px-2 text-center border-r last:border-r-0 transition-colors
                ${K?"cursor-not-allowed opacity-50":"cursor-pointer"}
                ${z?"bg-orange-50 text-solrent-orange":""}
                ${L?"bg-green-50 text-green-600":""}
                ${!z&&!L?"text-gray-400":""}
                ${M&&!z?"hover:bg-gray-50":""}
              `,onClick:()=>S(N),disabled:K,children:g.jsxs("div",{className:"flex flex-col items-center justify-center",children:[g.jsx(O,{className:`w-6 h-6 mb-1 ${L?"text-green-600":""}`}),g.jsx("span",{className:"text-sm font-medium hidden sm:block",children:C.label})]})},C.id)})}),g.jsx("div",{className:`p-6 ${t!==3?"pb-32 md:pb-40":""}`,children:T()}),g.jsx(fH,{reservation:c,onRemoveItem:h,onRemoveAll:p,currentStep:t,onNext:v,onPrev:b}),g.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between",children:[g.jsx("button",{onClick:b,disabled:t===0,className:`px-4 py-2 rounded ${t===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-solrent-gray hover:bg-gray-300"}`,children:"Wstecz"}),g.jsx("button",{onClick:t===_p.length-1?j:v,disabled:!P()||o,className:`px-4 py-2 rounded ${!P()||o?"bg-orange-300 text-white cursor-not-allowed":"bg-solrent-orange text-white hover:bg-orange-700"}`,children:t===_p.length-1?"Potwierdź rezerwację":"Dalej"})]})]})},pH=async()=>{const{data:t,error:e}=await lt.from("contact_info").select("*").order("updated_at",{ascending:!1}).limit(1).single();return e?(console.error("Error fetching contact info:",e),{id:"1",phone_number:"694 171 171",email:"kontakt@solrent.pl",updated_at:new Date().toISOString()}):t},mH=()=>{const[t,e]=Y.useState(0);return Y.useEffect(()=>{const n=()=>{e(window.scrollY)};return window.addEventListener("scroll",n,{passive:!0}),()=>{window.removeEventListener("scroll",n)}},[]),t},gH=()=>{const[t,e]=Y.useState(!1),[n,r]=Y.useState(null),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,d]=Y.useState(!1),h=Y.useRef(null),p=Y.useRef(!1),y=mH();Y.useEffect(()=>{o&&c(y>100)},[y,o]),Y.useEffect(()=>{(async()=>{const j=await pH();r(j)})();const k=()=>{a(window.innerWidth<=767)},T=j=>{h.current&&!h.current.contains(j.target)&&e(!1)};return k(),window.addEventListener("resize",k),document.addEventListener("mousedown",T),()=>{window.removeEventListener("resize",k),document.removeEventListener("mousedown",T)}},[]);const x=()=>{n&&(window.location.href=`tel:${n.phone_number.replace(/\s/g,"")}`)},v=()=>{n&&(window.location.href=`mailto:${n.email}`)},b=()=>document.querySelector('[role="dialog"]')!==null;return Y.useEffect(()=>{const S=()=>{const T=b();p.current!==T&&(p.current=T,s(T))};S();const k=new MutationObserver(S);return k.observe(document.body,{childList:!0,subtree:!0}),()=>k.disconnect()},[]),g.jsxs(g.Fragment,{children:[o&&!b()&&!i&&g.jsxs("div",{className:`fixed z-50 transition-all duration-300 ${l?"top-0 right-0 p-2 bg-white/70 backdrop-blur-md shadow-md w-full flex justify-end":"top-4 right-4"}`,children:[g.jsxs(Ii.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"relative",children:[g.jsxs(Ii.button,{whileHover:l?{scale:1.05}:{scale:1.1},whileTap:{scale:.95},onClick:()=>e(!t),className:`flex items-center justify-center transition-all ${l?"bg-solrent-orange/90 hover:bg-solrent-orange px-4 py-2 rounded-lg text-white":"w-[44px] h-[44px] bg-solrent-orange rounded-full shadow-lg"}`,"aria-label":`Zadzwoń do nas: ${n==null?void 0:n.phone_number}`,role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[g.jsx(wd,{className:`${l?"w-4 h-4":"w-5 h-5"} text-white`}),l&&g.jsx("span",{className:"ml-2 text-sm font-medium",children:"Kontakt"})]}),g.jsx(fc,{children:t&&g.jsx(Ii.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute right-0 mt-2 bg-white rounded-lg shadow-lg p-4 ${l?"top-full":"top-[120%]"}`,children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("button",{onClick:x,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors",children:[g.jsx(wd,{className:"w-5 h-5 text-solrent-orange"}),g.jsx("span",{className:"text-gray-700 font-medium whitespace-nowrap",children:n==null?void 0:n.phone_number})]}),g.jsxs("button",{onClick:v,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors",children:[g.jsx(Bd,{className:"w-5 h-5 text-solrent-orange"}),g.jsx("span",{className:"text-gray-700 font-medium",children:n==null?void 0:n.email})]})]})})})]}),t&&g.jsx("div",{className:"fixed inset-0 -z-10",onClick:()=>e(!1)})]}),!o&&!i&&g.jsx("div",{className:"fixed bottom-20 right-5 z-50",children:g.jsx(fc,{children:t?g.jsxs(Ii.div,{ref:h,initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.3,ease:"easeInOut"},className:"bg-white rounded-lg shadow-lg p-4 pr-16",children:[g.jsx("button",{onClick:()=>e(!1),className:"absolute top-2 right-2 p-1 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Zamknij panel kontaktowy",children:g.jsx(cu,{className:"w-4 h-4 text-gray-500"})}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("button",{onClick:x,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors","aria-label":`Zadzwoń do nas: ${n==null?void 0:n.phone_number}`,children:[g.jsx(wd,{className:"w-5 h-5 text-solrent-orange"}),g.jsx("span",{className:"text-gray-700 font-medium",children:n==null?void 0:n.phone_number})]}),g.jsxs("button",{onClick:v,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors","aria-label":`Wyślij email: ${n==null?void 0:n.email}`,children:[g.jsx(Bd,{className:"w-5 h-5 text-solrent-orange"}),g.jsx("span",{className:"text-gray-700 font-medium",children:n==null?void 0:n.email})]})]})]}):g.jsx(Ii.button,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>e(!0),className:"w-[60px] h-[60px] bg-solrent-orange rounded-full shadow-lg flex items-center justify-center","aria-label":"Otwórz panel kontaktowy",role:"button",tabIndex:0,children:g.jsx(wd,{className:"w-6 h-6 text-white"})})})})]})},yH=async()=>{var t;try{const e=await lt.auth.getUser();if(e.error)return console.error("Błąd pobierania użytkownika:",e.error),!1;const n=e.data.user;if(!n)return!1;const r=await lt.from("profiles").select("is_admin").eq("id",n.id).single();return r.error?(console.error("Błąd pobierania profilu:",r.error),!1):((t=r.data)==null?void 0:t.is_admin)||!1}catch(e){return console.error("Błąd podczas sprawdzania uprawnień administratora:",e),!1}},xH=async t=>{console.log("Wysyłanie żądania resetowania hasła dla:",t);try{(t==="kubens11r@gmail.com"||t==="biuro@solrent.pl"||t.includes("test")||t.includes("demo"))&&console.log("Wykryto specjalny adres email. Dodatkowe logowanie dla celów diagnostycznych.");const e=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";let n;e?n="http://localhost:5173/admin/reset-password":window.location.hostname==="rezerwacje.solrent.pl"?n="https://rezerwacje.solrent.pl/admin/reset-password":n=`${window.location.origin}/admin/reset-password`,console.log("Używany adres przekierowania:",n);const{error:r}=await lt.auth.resetPasswordForEmail(t,{redirectTo:n});if(r){if(console.error("Błąd resetowania hasła:",r),console.error("Kod błędu:",r.code),console.error("Wiadomość błędu:",r.message),console.error("Szczegóły błędu:",r.status),r.message.includes("redirect")||r.message.includes("URL")){console.log("Próba resetowania hasła bez określania adresu przekierowania...");const{error:i}=await lt.auth.resetPasswordForEmail(t);if(i)throw console.error("Błąd podczas próby alternatywnej:",i),i;console.log("Alternatywna metoda resetowania hasła zakończona sukcesem");return}if(t==="kubens11r@gmail.com"||t==="biuro@solrent.pl"){console.log("Próba specjalnej metody resetowania hasła dla:",t);const i=e?"http://localhost:5173/admin/reset-password":"https://rezerwacje.solrent.pl/admin/reset-password",{error:s}=await lt.auth.resetPasswordForEmail(t,{redirectTo:i});if(s)console.error("Błąd podczas specjalnej próby:",s);else{console.log("Specjalna metoda resetowania hasła zakończona sukcesem");return}}throw r}console.log("Żądanie resetowania hasła wysłane pomyślnie")}catch(e){throw console.error("Wyjątek podczas resetowania hasła:",e),e instanceof Error&&(console.error("Nazwa błędu:",e.name),console.error("Wiadomość błędu:",e.message),console.error("Stack trace:",e.stack)),e}},vH=async t=>{console.log("Próba aktualizacji hasła...");try{const{data:{session:e}}=await lt.auth.getSession();if(!e)throw console.error("Brak aktywnej sesji podczas próby aktualizacji hasła"),new Error("Brak aktywnej sesji. Spróbuj ponownie zresetować hasło.");console.log("Sesja użytkownika istnieje, aktualizacja hasła..."),console.log("ID użytkownika:",e.user.id),console.log("Email użytkownika:",e.user.email);const{error:n}=await lt.auth.updateUser({password:t});if(n)throw console.error("Błąd podczas aktualizacji hasła:",n),console.error("Kod błędu:",n.code),console.error("Wiadomość błędu:",n.message),console.error("Status błędu:",n.status),n;console.log("Hasło zostało pomyślnie zaktualizowane")}catch(e){throw console.error("Wyjątek podczas aktualizacji hasła:",e),e instanceof Error&&(console.error("Nazwa błędu:",e.name),console.error("Wiadomość błędu:",e.message),console.error("Stack trace:",e.stack)),e}},wH=t=>{const e=[];return t.length<8&&e.push("Hasło musi mieć co najmniej 8 znaków"),/[A-Z]/.test(t)||e.push("Hasło musi zawierać co najmniej jedną wielką literę"),/[0-9]/.test(t)||e.push("Hasło musi zawierać co najmniej jedną cyfrę"),e},bH=({onSubmit:t,error:e,isLoading:n,isLocked:r})=>{const[i,s]=Y.useState(""),[o,a]=Y.useState(""),l=async c=>{c.preventDefault(),await t(i,o)};return g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:l,children:[g.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[g.jsxs("div",{className:"relative",children:[g.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),g.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:c=>s(c.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Adres email",disabled:n||r})]}),g.jsxs("div",{className:"relative",children:[g.jsx("label",{htmlFor:"password",className:"sr-only",children:"Hasło"}),g.jsx(d5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o,onChange:c=>a(c.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Hasło",disabled:n||r})]})]}),e&&g.jsx("div",{className:"rounded-md bg-red-50 p-4",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx(uc,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Błąd logowania"}),g.jsx("div",{className:"mt-2 text-sm text-red-700",children:g.jsx("p",{children:e})})]})]})}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:n||r,className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n||r?"bg-gray-400 cursor-not-allowed":"bg-solrent-orange hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-solrent-orange"}`,children:n?g.jsxs("span",{className:"flex items-center",children:[g.jsx(b0,{className:"w-5 h-5 mr-2 animate-spin"}),"Logowanie..."]}):r?"Konto tymczasowo zablokowane":"Zaloguj się"})}),g.jsx("div",{className:"flex items-center justify-center",children:g.jsx("div",{className:"text-sm",children:g.jsx(UP,{to:"/admin/forgot-password",className:"font-medium text-solrent-orange hover:text-orange-700",children:"Zapomniałeś hasła?"})})})]})},_H=5,SH=15*60*1e3,kH=({onLogin:t})=>{const[e,n]=Y.useState(""),[r,i]=Y.useState(!1),[s,o]=Y.useState(0),[a,l]=Y.useState(null),[c,u]=Y.useState("checking");Y.useEffect(()=>{d();const y=localStorage.getItem("adminLoginLockout");if(y){const x=parseInt(y);x>Date.now()?l(x):(localStorage.removeItem("adminLoginLockout"),o(0))}},[]);const d=async()=>{u("checking");const y=await N9();u(y?"connected":"disconnected")},h=()=>{const y=s+1;if(o(y),y>=_H){const x=Date.now()+SH;l(x),localStorage.setItem("adminLoginLockout",x.toString())}},p=async(y,x)=>{var v,b,S,k,T;if(n(""),c==="disconnected"&&(await d(),c==="disconnected")){n("Brak połączenia z serwerem. Sprawdź połączenie internetowe i spróbuj ponownie.");return}if(a&&a>Date.now()){const j=Math.ceil((a-Date.now())/6e4);n(`Zbyt wiele nieudanych prób. Spróbuj ponownie za ${j} minut.`);return}i(!0);try{let j;try{j=await lt.auth.signInWithPassword({email:y,password:x})}catch(O){throw console.error("Błąd logowania:",O),(v=O.message)!=null&&v.includes("Database error: querying schema")?new Error("Błąd bazy danych. Problem z uprawnieniami lub połączeniem do bazy."):O}const{data:P,error:C}=j;if(C)throw(b=C.message)!=null&&b.includes("Database error: querying schema")?new Error("Błąd bazy danych. Problem z uprawnieniami lub połączeniem do bazy."):(S=C.message)!=null&&S.includes("Invalid login credentials")?new Error("Nieprawidłowy email lub hasło. Sprawdź dane i spróbuj ponownie."):C;if(!P.user)throw new Error("Nie znaleziono użytkownika");try{if(!await yH())throw await lt.auth.signOut(),new Error("Brak uprawnień administratora. Skontaktuj się z administratorem systemu.")}catch(O){throw console.error("Błąd sprawdzania uprawnień administratora:",O),await lt.auth.signOut(),(k=O.message)!=null&&k.includes("Database error")||(T=O.message)!=null&&T.includes("querying schema")?new Error("Błąd bazy danych podczas weryfikacji uprawnień. Spróbuj ponownie później."):new Error("Problem z weryfikacją uprawnień. Spróbuj ponownie później.")}o(0),t()}catch(j){console.error("Błąd podczas logowania:",j);let P=j.message||"Wystąpił błąd podczas logowania. Spróbuj ponownie.";(P.includes("Database error")||P.includes("querying schema"))&&(P="Błąd bazy danych. Spróbuj ponownie później."),h(),n(P)}finally{i(!1)}};return g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Panel Administracyjny"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Zaloguj się aby zarządzać systemem"}),c==="disconnected"&&g.jsxs("div",{className:"mt-2 bg-yellow-50 p-2 rounded text-sm text-yellow-700 text-center",children:["Problem z połączeniem z serwerem.",g.jsx("button",{className:"ml-2 underline",onClick:d,children:"Sprawdź ponownie"})]})]}),g.jsx(bH,{onSubmit:p,error:e,isLoading:r||c==="checking",isLocked:!!a&&a>Date.now(),connectionStatus:c})]})})},NH=({onSubmit:t,error:e,isLoading:n,success:r})=>{const[i,s]=Y.useState(""),o=async a=>{a.preventDefault(),await t(i)};return r?g.jsxs("div",{className:"rounded-md bg-green-50 p-6 text-center",children:[g.jsx(zd,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),g.jsx("h3",{className:"text-lg font-medium text-green-800 mb-2",children:"Link do resetowania hasła został wysłany"}),g.jsx("p",{className:"text-green-700",children:"Sprawdź swoją skrzynkę email i postępuj zgodnie z instrukcjami, aby zresetować hasło."})]}):g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:o,children:[g.jsx("div",{className:"rounded-md shadow-sm",children:g.jsxs("div",{className:"relative",children:[g.jsx("label",{htmlFor:"email",className:"sr-only",children:"Adres email"}),g.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:a=>s(a.target.value),className:"appearance-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Adres email",disabled:n})]})}),e&&g.jsx("div",{className:"rounded-md bg-red-50 p-4",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx(uc,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Błąd resetowania hasła"}),g.jsx("div",{className:"mt-2 text-sm text-red-700",children:g.jsx("p",{children:e})})]})]})}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:n,className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n?"bg-gray-400 cursor-not-allowed":"bg-solrent-orange hover:bg-orange-700"}`,children:n?"Wysyłanie...":"Wyślij link resetujący"})}),g.jsx("div",{className:"text-center mt-4",children:g.jsx(UP,{to:"/admin",className:"text-sm text-solrent-orange hover:text-orange-700",children:"Powrót do strony logowania"})})]})},CH=()=>{const[t,e]=Y.useState(null),[n,r]=Y.useState(!1),[i,s]=Y.useState(!1),o=async a=>{e(null),r(!0);try{await xH(a),s(!0)}catch(l){console.error("Błąd resetowania hasła:",l),l instanceof Error?e(`Nie udało się wysłać linku resetującego: ${l.message}`):e("Nie udało się wysłać linku resetującego. Spróbuj ponownie.")}finally{r(!1)}};return g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Resetowanie hasła"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Podaj swój adres email, aby otrzymać link do resetowania hasła"})]}),g.jsx(NH,{onSubmit:o,error:t,isLoading:n,success:i})]})})},EH=({onSubmit:t,error:e,isLoading:n,success:r,successMessage:i="Hasło zostało zmienione"})=>{const[s,o]=Y.useState(""),[a,l]=Y.useState(""),[c,u]=Y.useState(null),d=async h=>{if(h.preventDefault(),u(null),s!==a){u("Hasła nie są identyczne");return}const p=wH(s);if(p.length>0){u(p.join(`
`));return}await t(s)};return r?g.jsxs("div",{className:"rounded-md bg-green-50 p-6 text-center",children:[g.jsx(zd,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),g.jsx("h3",{className:"text-lg font-medium text-green-800 mb-2",children:i}),g.jsx("p",{className:"text-green-700",children:"Za chwilę zostaniesz przekierowany do strony logowania."})]}):g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[g.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[g.jsxs("div",{className:"relative",children:[g.jsx("label",{htmlFor:"new-password",className:"sr-only",children:"Nowe hasło"}),g.jsx(d5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),g.jsx("input",{id:"new-password",name:"new-password",type:"password",required:!0,value:s,onChange:h=>o(h.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Nowe hasło"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Potwierdź hasło"}),g.jsx(d5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),g.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:a,onChange:h=>l(h.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Potwierdź hasło"})]})]}),(e||c)&&g.jsx("div",{className:"rounded-md bg-red-50 p-4",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx(uc,{className:"h-5 w-5 text-red-400"})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Błąd zmiany hasła"}),g.jsx("div",{className:"mt-2 text-sm text-red-700",children:g.jsx("p",{children:e||c})})]})]})}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:n,className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n?"bg-gray-400 cursor-not-allowed":"bg-solrent-orange hover:bg-orange-700"}`,children:n?"Zapisywanie...":"Zmień hasło"})}),g.jsx("div",{className:"text-center mt-4",children:g.jsx("a",{href:"/admin",className:"text-sm text-solrent-orange hover:text-orange-700",children:"Powrót do strony logowania"})})]})},AH=()=>{const[t,e]=Y.useState(null),[n,r]=Y.useState(!1),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),[l,c]=Y.useState(null),u=kl(),d=mu();Y.useEffect(()=>{(async()=>{try{console.log("Rozpoczynam sprawdzanie sesji..."),console.log("URL:",window.location.href),console.log("Hash:",d.hash),console.log("Search params:",d.search);const y=d.hash,x=new URLSearchParams(d.search);if(y){console.log("Znaleziono hash w URL");const T=new URLSearchParams(y.substring(1)),j=T.get("access_token"),P=T.get("refresh_token"),C=T.get("type");if(console.log("Parametry z hash:",{accessToken:j?"istnieje":"brak",refreshToken:P?"istnieje":"brak",type:C}),j&&P&&C==="recovery"){console.log("Ustawianie sesji na podstawie tokenów z hash...");try{const{error:N}=await lt.auth.setSession({access_token:j,refresh_token:P});N?(console.error("Błąd podczas ustawiania sesji z hash:",N),c(`Błąd sesji (hash): ${N.message}`)):console.log("Sesja ustawiona pomyślnie z hash")}catch(N){console.error("Wyjątek podczas ustawiania sesji z hash:",N),c(`Wyjątek sesji (hash): ${N instanceof Error?N.message:String(N)}`)}}}const v=x.get("token"),b=x.get("type");if(v){console.log("Znaleziono token w query string:",b);try{const{error:T}=await lt.auth.verifyOtp({token_hash:v,type:b||"recovery"});T?(console.error("Błąd podczas weryfikacji tokena z URL:",T),c(`Błąd weryfikacji tokena: ${T.message}`)):console.log("Token z URL zweryfikowany pomyślnie")}catch(T){console.error("Wyjątek podczas weryfikacji tokena z URL:",T),c(`Wyjątek weryfikacji tokena: ${T instanceof Error?T.message:String(T)}`)}}const{data:{session:S},error:k}=await lt.auth.getSession();k&&(console.error("Błąd podczas pobierania sesji:",k),c(`Błąd pobierania sesji: ${k.message}`)),console.log("Sesja użytkownika:",S?"Istnieje":"Brak"),S&&(console.log("ID użytkownika:",S.user.id),console.log("Email użytkownika:",S.user.email)),S||e("Brak aktywnej sesji. Link do resetowania hasła mógł wygasnąć. Spróbuj ponownie zresetować hasło."),a(!0)}catch(y){console.error("Błąd podczas sprawdzania sesji:",y),e("Wystąpił błąd podczas weryfikacji sesji. Spróbuj ponownie zresetować hasło."),c(`Wyjątek główny: ${y instanceof Error?y.message:String(y)}`),a(!0)}})()},[d]);const h=async p=>{r(!0);try{console.log("Rozpoczynam aktualizację hasła..."),await vH(p),console.log("Hasło zaktualizowane pomyślnie"),s(!0),setTimeout(()=>{u("/admin")},3e3)}catch(y){console.error("Błąd podczas zmiany hasła:",y),y instanceof Error?e(`Nie udało się zmienić hasła: ${y.message}`):e("Nie udało się zmienić hasła. Spróbuj ponownie.")}finally{r(!1)}};return o?g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Zmiana hasła"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Wprowadź nowe hasło"})]}),g.jsx(EH,{onSubmit:h,error:t,isLoading:n,success:i}),l&&g.jsxs("div",{className:"rounded-md bg-blue-50 p-4 text-xs",children:[g.jsx("p",{className:"text-blue-800",children:"Informacje diagnostyczne:"}),g.jsx("p",{className:"text-blue-700 break-all",children:l})]})]})}):g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:g.jsx("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-600",children:"Weryfikacja sesji..."})]})})})},TH=({onLogout:t})=>{const[e,n]=Y.useState(!1),[r,i]=Y.useState(window.innerWidth<768),[s,o]=Y.useState(0),[a,l]=Y.useState(!1),c=mu(),u=kl();Y.useEffect(()=>{const p=()=>{const y=window.innerWidth<768;i(y),y||l(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),Y.useEffect(()=>{d();const p=lt.channel("reservation_changes").on("postgres_changes",{event:"*",schema:"public",table:"reservations",filter:"status=eq.pending"},()=>d()).subscribe();return()=>{p.unsubscribe()}},[]);const d=async()=>{try{const{count:p,error:y}=await lt.from("reservations").select("*",{count:"exact",head:!0}).eq("status","pending");if(y)throw y;o(p||0)}catch(p){console.error("Error loading pending count:",p)}},h=[{path:"dashboard",icon:ta,title:"Dashboard"},{path:"reservations",icon:dc,title:"Rezerwacje",badge:s>0?s:void 0},{path:"crm",icon:Z_,title:"CRM"},{path:"customers",icon:HP,title:"Klienci"},{path:"equipment",icon:ta,title:"Produkty"},{path:"equipment-stats",icon:J_,title:"Statystyki sprzętu"},{path:"calendar",icon:dc,title:"Kalendarz"},{path:"statistics",icon:WP,title:"Statystyki wypożyczeń"},{path:"advertisements",icon:Lv,title:"Reklamy"}];return g.jsxs("div",{className:"min-h-screen bg-gray-100",children:[g.jsx("header",{className:`bg-white shadow fixed top-0 right-0 left-0 z-30 transition-all duration-300 ${!r&&!e?"ml-64":"ml-0"}`,children:g.jsxs("div",{className:"flex justify-between items-center h-[73px] px-4",children:[r&&g.jsx("button",{onClick:()=>l(!a),className:"p-2 rounded-lg hover:bg-gray-100",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),g.jsx("div",{className:"flex justify-between items-center",children:g.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 ml-2",children:"Panel Administracyjny"})}),g.jsx("div",{children:g.jsx("button",{onClick:t,className:"px-3 py-1.5 md:px-4 md:py-2 bg-red-600 text-white text-sm md:text-base rounded hover:bg-red-700",children:"Wyloguj"})})]})}),g.jsxs("div",{className:"flex h-screen pt-[73px]",children:[g.jsxs("nav",{className:`fixed left-0 top-0 h-full bg-white shadow-lg transition-all duration-300 ease-in-out z-40
          ${r?`w-64 ${a?"translate-x-0":"-translate-x-full"}`:`${e?"w-16":"w-64"}`}`,children:[g.jsx("div",{className:"h-[73px] flex items-center justify-center border-b",children:g.jsx("img",{src:"/assets/solrent-logo.png",alt:"SOLRENT Logo",className:`h-12 object-contain transition-all duration-300 ${!r&&e?"scale-75":""}`})}),!r&&g.jsx("button",{onClick:()=>n(!e),className:"absolute -right-3 top-20 bg-white rounded-full p-1.5 shadow-lg border","aria-label":e?"Rozwiń menu":"Zwiń menu",children:g.jsx(Ov,{className:`w-4 h-4 text-gray-600 transition-transform duration-300 ${e?"rotate-180":""}`})}),g.jsx("div",{className:"space-y-1 p-4",children:h.map(p=>g.jsx(jH,{icon:p.icon,title:p.title,active:c.pathname.includes(`/admin/panel/${p.path}`),onClick:()=>{u(`/admin/panel/${p.path}`),r&&l(!1)},collapsed:!r&&e,badge:p.badge},p.path))})]}),r&&a&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>l(!1)}),g.jsx("main",{className:`flex-1 bg-white rounded-lg shadow-lg p-4 md:p-6 lg:p-8 transition-all duration-300 overflow-auto mt-4
          ${r?"ml-0":e?"ml-16":"ml-64"}`,children:g.jsx(W7,{})})]})]})},jH=({icon:t,title:e,active:n,onClick:r,collapsed:i=!1,badge:s})=>g.jsxs("button",{onClick:r,className:`w-full flex items-center ${i?"justify-center":"justify-start px-3"} py-3 md:py-2 rounded-lg transition-all duration-300 ${n?"bg-solrent-orange text-white":"text-gray-600 hover:bg-gray-100"}`,title:i?e:void 0,children:[g.jsxs("div",{className:"relative flex-shrink-0",children:[g.jsx(t,{className:"w-5 h-5"}),s!==void 0&&g.jsx("span",{className:`absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 ${i?"scale-90":""}`,children:s})]}),!i&&g.jsx("span",{className:"ml-3 whitespace-nowrap text-sm md:text-base",children:e})]}),yy=({icon:t,title:e,value:n,description:r,trend:i,percentage:s})=>g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(t,{className:"w-6 h-6 text-gray-500 mr-3"}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:e}),g.jsx("div",{className:"text-2xl font-semibold",children:n})]})]}),i&&g.jsxs("div",{className:`flex items-center ${i==="up"?"text-green-500":"text-red-500"}`,children:[i==="up"?g.jsx(wx,{className:"w-4 h-4"}):g.jsx(iz,{className:"w-4 h-4"}),g.jsxs("span",{className:"text-sm ml-1",children:[s,"%"]})]})]}),g.jsx("p",{className:"mt-2 text-sm text-gray-500",children:r})]}),PH=()=>{var o;const t=kl(),[e,n]=Y.useState({totalEquipment:0,activeReservations:0,pendingReservations:0,totalCustomers:0,maintenanceNeeded:0,totalRevenue:0,returningCustomers:0,averageRental:0,popularEquipment:[],recentReservations:[]}),[r,i]=Y.useState(null);Y.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:a}=await lt.from("reservations").select(`
          id,
          end_date,
          customers (
            first_name,
            last_name
          ),
          reservation_items (
            equipment (
              name
            )
          )
        `).in("status",["confirmed","picked_up"]).gte("end_date",new Date().toISOString()).lte("end_date",new Date(Date.now()+6048e5).toISOString()).order("end_date",{ascending:!0}),l=a==null?void 0:a.map(x=>{var b;const v=Math.ceil((new Date(x.end_date).getTime()-Date.now())/864e5);return{id:x.id,reservation_id:x.id,customer_name:`${x.customers.first_name} ${x.customers.last_name}`,equipment_name:(b=x.reservation_items[0])==null?void 0:b.equipment.name,days_left:v}}),{data:c}=await lt.from("equipment").select("id"),{data:u}=await lt.from("reservations").select("id").in("status",["confirmed"]),{data:d}=await lt.from("reservations").select(`
          id,
          created_at,
          start_date,
          end_date,
          total_price,
          status,
          customer:customers (
            first_name,
            last_name
          ),
          items:reservation_items (
            equipment:equipment (
              name
            ),
            quantity
          ),
          total_price
        `).eq("status","pending").is("is_reversed",!1).order("created_at",{ascending:!1}).limit(10),{data:h}=await lt.from("customers").select("id"),{data:p}=await lt.from("maintenance_logs").select("id").eq("status","planned"),{data:y}=await lt.from("financial_transactions").select("amount").eq("status","completed").eq("transaction_type","payment");n(x=>({...x,totalEquipment:(c==null?void 0:c.length)||0,activeReservations:(u==null?void 0:u.length)||0,pendingReservations:(d==null?void 0:d.length)||0,recentReservations:d||[],totalCustomers:(h==null?void 0:h.length)||0,maintenanceNeeded:(p==null?void 0:p.length)||0,totalRevenue:(y==null?void 0:y.reduce((v,b)=>v+(b.amount||0),0))||0,upcomingReturns:l||[]}))}catch(a){console.error("Error loading stats:",a),i("Nie udało się załadować statystyk")}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[g.jsx(yy,{icon:ta,title:"Aktywne rezerwacje",value:e.activeReservations,description:"Obecnie wypożyczony sprzęt",trend:"up",percentage:8}),g.jsx(yy,{icon:VP,title:"Przychód miesięczny",value:`${e.totalRevenue.toFixed(2)} zł`,description:"Wzrost o 20% m/m",trend:"up",percentage:20}),g.jsx(yy,{icon:Nz,title:"Stali klienci",value:`${e.returningCustomers}`,description:`${e.totalCustomers>0?(e.returningCustomers/e.totalCustomers*100).toFixed(1):"0"}% wszystkich klientów`,trend:"up",percentage:15}),g.jsx(yy,{icon:vz,title:"Sprzęt do przeglądu",value:e.maintenanceNeeded,description:"Zaplanowane przeglądy",trend:"down",percentage:5})]}),g.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rezerwacje w czasie"}),g.jsxs("select",{className:"px-3 py-1 border rounded-lg text-sm",children:[g.jsx("option",{value:"7days",children:"Ostatnie 7 dni"}),g.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),g.jsx("option",{value:"90days",children:"Ostatnie 90 dni"})]})]}),g.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Tutaj będzie wykres"})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Najpopularniejszy sprzęt"}),g.jsx(J_,{className:"w-5 h-5 text-green-500"})]}),g.jsx("div",{className:"space-y-4",children:e.popularEquipment.map((a,l)=>{var c,u;return g.jsxs("div",{className:"flex items-center",children:[g.jsxs("div",{className:"w-8 text-sm text-gray-500",children:[l+1,"."]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:((c=a.equipment)==null?void 0:c.name)||a.name}),g.jsxs("div",{className:"text-sm text-gray-500",children:[a.count," wypożyczeń"]})]}),g.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:`${(u=e.popularEquipment[0])!=null&&u.count?a.count/e.popularEquipment[0].count*100:0}%`}})})]},a.id)})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Statystyki klientów"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-gray-500",children:"Nowi klienci (30 dni)"}),g.jsx("span",{className:"text-lg font-medium text-gray-900",children:"24"})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-gray-500",children:"Średni czas wynajmu"}),g.jsxs("span",{className:"text-lg font-medium text-gray-900",children:[e.averageRental.toFixed(1)," dni"]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-gray-500",children:"Wskaźnik powrotów"}),g.jsx("span",{className:"text-lg font-medium text-gray-900",children:"68%"})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Zbliżające się zwroty"}),g.jsxs("div",{className:"space-y-3",children:[(o=e.upcomingReturns)==null?void 0:o.map(a=>g.jsxs("div",{className:"flex items-center justify-between hover:bg-gray-50 p-2 rounded-lg cursor-pointer",onClick:()=>t(`/admin/panel/reservations/${a.reservation_id}`),children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.customer_name}),g.jsx("div",{className:"text-sm text-gray-500",children:a.equipment_name})]}),g.jsx("div",{className:`text-sm ${a.days_left<=1?"text-red-600":a.days_left<=3?"text-orange-600":"text-green-600"}`,children:a.days_left===0?"Dzisiaj":a.days_left===1?"Jutro":`Za ${a.days_left} dni`})]},a.id)),(!e.upcomingReturns||e.upcomingReturns.length===0)&&g.jsx("p",{className:"text-center text-gray-500",children:"Brak zbliżających się zwrotów"})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Ostatnie aktywności",e.recentReservations.length>0&&g.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",e.recentReservations.length,")"]})]}),g.jsxs("div",{className:"space-y-4",children:[e.recentReservations.map(a=>g.jsx("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>t(`/admin/panel/reservations/${a.id}`,{state:{from:"/admin/panel/dashboard"}}),children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-medium text-gray-900",children:[a.customer.first_name," ",a.customer.last_name]}),g.jsx("div",{className:"text-sm text-gray-600",children:a.items.map(l=>`${l.equipment.name} (${l.quantity}x)`).join(", ")}),g.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(a.created_at).toLocaleString("pl-PL")})]}),g.jsx("div",{className:"text-right",children:g.jsxs("div",{className:"font-medium text-solrent-orange",children:[a.total_price," zł"]})})]})},a.id)),e.recentReservations.length===0&&g.jsx("p",{className:"text-center text-gray-500",children:"Brak nowych rezerwacji"})]})]})]})]})},$v=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function C0(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function FS(t){return"nodeType"in t}function so(t){var e,n;return t?C0(t)?t:FS(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function zS(t){const{Document:e}=so(t);return t instanceof e}function d1(t){return C0(t)?!1:t instanceof so(t).HTMLElement}function $D(t){return t instanceof so(t).SVGElement}function E0(t){return t?C0(t)?t.document:FS(t)?zS(t)?t:d1(t)||$D(t)?t.ownerDocument:document:document:document}const fu=$v?Y.useLayoutEffect:Y.useEffect;function Wv(t){const e=Y.useRef(t);return fu(()=>{e.current=t}),Y.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function DH(){const t=Y.useRef(null),e=Y.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=Y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function WD(t,e){e===void 0&&(e=[t]);const n=Y.useRef(t);return fu(()=>{n.current!==t&&(n.current=t)},e),n}function f1(t,e){const n=Y.useRef();return Y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function OH(t){const e=Wv(t),n=Y.useRef(null),r=Y.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Px(t){const e=Y.useRef();return Y.useEffect(()=>{e.current=t},[t]),e.current}let Uw={};function BS(t,e){return Y.useMemo(()=>{if(e)return e;const n=Uw[t]==null?0:Uw[t]+1;return Uw[t]=n,t+"-"+n},[t,e])}function VD(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+t*c)}return s},{...e})}}const Gp=VD(1),kg=VD(-1);function LH(t){return"clientX"in t&&"clientY"in t}function US(t){if(!t)return!1;const{KeyboardEvent:e}=so(t.target);return e&&t instanceof e}function MH(t){if(!t)return!1;const{TouchEvent:e}=so(t.target);return e&&t instanceof e}function Dx(t){if(MH(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return LH(t)?{x:t.clientX,y:t.clientY}:null}const Ng=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ng.Translate.toString(t),Ng.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),FC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function IH(t){return t.matches(FC)?t:t.querySelector(FC)}const RH={display:"none"};function FH(t){let{id:e,value:n}=t;return Mt.createElement("div",{id:e,style:RH},n)}function zH(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Mt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function BH(){const[t,e]=Y.useState("");return{announce:Y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const HD=Y.createContext(null);function UH(t){const e=Y.useContext(HD);Y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function $H(){const[t]=Y.useState(()=>new Set),e=Y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[Y.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const WH={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},VH={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function HH(t){let{announcements:e=VH,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=WH}=t;const{announce:s,announcement:o}=BH(),a=BS("DndLiveRegion"),[l,c]=Y.useState(!1);if(Y.useEffect(()=>{c(!0)},[]),UH(Y.useMemo(()=>({onDragStart(d){let{active:h}=d;s(e.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;e.onDragMove&&s(e.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;s(e.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;s(e.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;s(e.onDragCancel({active:h,over:p}))}}),[s,e])),!l)return null;const u=Mt.createElement(Mt.Fragment,null,Mt.createElement(FH,{id:r,value:i.draggable}),Mt.createElement(zH,{id:a,announcement:o}));return n?eu.createPortal(u,n):u}var Ds;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ds||(Ds={}));function Ox(){}function zC(t,e){return Y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function qH(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const _l=Object.freeze({x:0,y:0});function GH(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function KH(t,e){const n=Dx(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function XH(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function YH(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function BC(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function qD(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const GD=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=BC(e),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=BC(l),u=i.reduce((h,p,y)=>h+GH(c[y],p),0),d=Number((u/4).toFixed(4));s.push({id:a,data:{droppableContainer:o,value:d}})}}return s.sort(XH)};function JH(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const ZH=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=JH(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(YH)};function QH(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function KD(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:_l}function eq(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const tq=eq(1);function XD(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function nq(t,e,n){const r=XD(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const rq={ignoreTransform:!1};function h1(t,e){e===void 0&&(e=rq);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=so(t).getComputedStyle(t);c&&(n=nq(n,c,u))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function UC(t){return h1(t,{ignoreTransform:!0})}function iq(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function sq(t,e){return e===void 0&&(e=so(t).getComputedStyle(t)),e.position==="fixed"}function oq(t,e){e===void 0&&(e=so(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Vv(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(zS(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!d1(i)||$D(i)||n.includes(i))return n;const s=so(t).getComputedStyle(i);return i!==t&&oq(i,s)&&n.push(i),sq(i,s)?n:r(i.parentNode)}return t?r(t):n}function YD(t){const[e]=Vv(t,1);return e??null}function $w(t){return!$v||!t?null:C0(t)?t:FS(t)?zS(t)||t===E0(t).scrollingElement?window:d1(t)?t:null:null}function JD(t){return C0(t)?t.scrollX:t.scrollLeft}function ZD(t){return C0(t)?t.scrollY:t.scrollTop}function F5(t){return{x:JD(t),y:ZD(t)}}var Li;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Li||(Li={}));function QD(t){return!$v||!t?!1:t===document.scrollingElement}function eO(t){const e={x:0,y:0},n=QD(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const aq={x:.2,y:.2};function lq(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=aq);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=eO(t),p={x:0,y:0},y={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+x.height?(p.y=Li.Backward,y.y=r*Math.abs((e.top+x.height-s)/x.height)):!u&&l>=e.bottom-x.height&&(p.y=Li.Forward,y.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!h&&a>=e.right-x.width?(p.x=Li.Forward,y.x=r*Math.abs((e.right-x.width-a)/x.width)):!d&&o<=e.left+x.width&&(p.x=Li.Backward,y.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:p,speed:y}}function cq(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function tO(t){return t.reduce((e,n)=>Gp(e,F5(n)),_l)}function uq(t){return t.reduce((e,n)=>e+JD(n),0)}function dq(t){return t.reduce((e,n)=>e+ZD(n),0)}function nO(t,e){if(e===void 0&&(e=h1),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);YD(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const fq=[["x",["left","right"],uq],["y",["top","bottom"],dq]];class $S{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Vv(n),i=tO(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of fq)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function hq(t){const{EventTarget:e}=so(t);return t instanceof e?t:E0(t)}function Ww(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ma;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ma||(Ma={}));function $C(t){t.preventDefault()}function pq(t){t.stopPropagation()}var Rn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Rn||(Rn={}));const rO={start:[Rn.Space,Rn.Enter],cancel:[Rn.Esc],end:[Rn.Space,Rn.Enter,Rn.Tab]},mq=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Rn.Right:return{...n,x:n.x+25};case Rn.Left:return{...n,x:n.x-25};case Rn.Down:return{...n,y:n.y+25};case Rn.Up:return{...n,y:n.y-25}}};class WS{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Hm(E0(n)),this.windowListeners=new Hm(so(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ma.Resize,this.handleCancel),this.windowListeners.add(Ma.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ma.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&nO(r),n(_l)}handleKeyDown(e){if(US(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=rO,coordinateGetter:o=mq,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:_l;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const h=kg(d,u),p={x:0,y:0},{scrollableAncestors:y}=r.current;for(const x of y){const v=e.code,{isTop:b,isRight:S,isLeft:k,isBottom:T,maxScroll:j,minScroll:P}=eO(x),C=cq(x),N={x:Math.min(v===Rn.Right?C.right-C.width/2:C.right,Math.max(v===Rn.Right?C.left:C.left+C.width/2,d.x)),y:Math.min(v===Rn.Down?C.bottom-C.height/2:C.bottom,Math.max(v===Rn.Down?C.top:C.top+C.height/2,d.y))},O=v===Rn.Right&&!S||v===Rn.Left&&!k,z=v===Rn.Down&&!T||v===Rn.Up&&!b;if(O&&N.x!==d.x){const L=x.scrollLeft+h.x,M=v===Rn.Right&&L<=j.x||v===Rn.Left&&L>=P.x;if(M&&!h.y){x.scrollTo({left:L,behavior:a});return}M?p.x=x.scrollLeft-L:p.x=v===Rn.Right?x.scrollLeft-j.x:x.scrollLeft-P.x,p.x&&x.scrollBy({left:-p.x,behavior:a});break}else if(z&&N.y!==d.y){const L=x.scrollTop+h.y,M=v===Rn.Down&&L<=j.y||v===Rn.Up&&L>=P.y;if(M&&!h.x){x.scrollTo({top:L,behavior:a});return}M?p.y=x.scrollTop-L:p.y=v===Rn.Down?x.scrollTop-j.y:x.scrollTop-P.y,p.y&&x.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,Gp(kg(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}WS.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=rO,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function WC(t){return!!(t&&"distance"in t)}function VC(t){return!!(t&&"delay"in t)}class VS{constructor(e,n,r){var i;r===void 0&&(r=hq(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=E0(o),this.documentListeners=new Hm(this.document),this.listeners=new Hm(r),this.windowListeners=new Hm(so(o)),this.initialCoordinates=(i=Dx(s))!=null?i:_l,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ma.Resize,this.handleCancel),this.windowListeners.add(Ma.DragStart,$C),this.windowListeners.add(Ma.VisibilityChange,this.handleCancel),this.windowListeners.add(Ma.ContextMenu,$C),this.documentListeners.add(Ma.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(VC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(WC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ma.Click,pq,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ma.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=Dx(e))!=null?n:_l,c=kg(i,l);if(!r&&a){if(WC(a)){if(a.tolerance!=null&&Ww(c,a.tolerance))return this.handleCancel();if(Ww(c,a.distance))return this.handleStart()}if(VC(a)&&Ww(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Rn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const gq={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class HS extends VS{constructor(e){const{event:n}=e,r=E0(n.target);super(e,gq,r)}}HS.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const yq={move:{name:"mousemove"},end:{name:"mouseup"}};var z5;(function(t){t[t.RightClick=2]="RightClick"})(z5||(z5={}));class xq extends VS{constructor(e){super(e,yq,E0(e.event.target))}}xq.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===z5.RightClick?!1:(r==null||r({event:n}),!0)}}];const Vw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class vq extends VS{constructor(e){super(e,Vw)}static setup(){return window.addEventListener(Vw.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Vw.move.name,e)};function e(){}}}vq.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var qm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(qm||(qm={}));var Lx;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lx||(Lx={}));function wq(t){let{acceleration:e,activator:n=qm.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=Lx.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=t;const p=_q({delta:d,disabled:!s}),[y,x]=DH(),v=Y.useRef({x:0,y:0}),b=Y.useRef({x:0,y:0}),S=Y.useMemo(()=>{switch(n){case qm.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case qm.DraggableRect:return i}},[n,i,l]),k=Y.useRef(null),T=Y.useCallback(()=>{const P=k.current;if(!P)return;const C=v.current.x*b.current.x,N=v.current.y*b.current.y;P.scrollBy(C,N)},[]),j=Y.useMemo(()=>a===Lx.TreeOrder?[...c].reverse():c,[a,c]);Y.useEffect(()=>{if(!s||!c.length||!S){x();return}for(const P of j){if((r==null?void 0:r(P))===!1)continue;const C=c.indexOf(P),N=u[C];if(!N)continue;const{direction:O,speed:z}=lq(P,N,S,e,h);for(const L of["x","y"])p[L][O[L]]||(z[L]=0,O[L]=0);if(z.x>0||z.y>0){x(),k.current=P,y(T,o),v.current=z,b.current=O;return}}v.current={x:0,y:0},b.current={x:0,y:0},x()},[e,T,r,x,s,o,JSON.stringify(S),JSON.stringify(p),y,c,j,u,JSON.stringify(h)])}const bq={x:{[Li.Backward]:!1,[Li.Forward]:!1},y:{[Li.Backward]:!1,[Li.Forward]:!1}};function _q(t){let{delta:e,disabled:n}=t;const r=Px(e);return f1(i=>{if(n||!r||!i)return bq;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Li.Backward]:i.x[Li.Backward]||s.x===-1,[Li.Forward]:i.x[Li.Forward]||s.x===1},y:{[Li.Backward]:i.y[Li.Backward]||s.y===-1,[Li.Forward]:i.y[Li.Forward]||s.y===1}}},[n,e,r])}function Sq(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return f1(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function kq(t,e){return Y.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Cg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Cg||(Cg={}));var B5;(function(t){t.Optimized="optimized"})(B5||(B5={}));const HC=new Map;function Nq(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=Y.useState(null),{frequency:a,measure:l,strategy:c}=i,u=Y.useRef(t),d=v(),h=WD(d),p=Y.useCallback(function(b){b===void 0&&(b=[]),!h.current&&o(S=>S===null?b:S.concat(b.filter(k=>!S.includes(k))))},[h]),y=Y.useRef(null),x=f1(b=>{if(d&&!n)return HC;if(!b||b===HC||u.current!==t||s!=null){const S=new Map;for(let k of t){if(!k)continue;if(s&&s.length>0&&!s.includes(k.id)&&k.rect.current){S.set(k.id,k.rect.current);continue}const T=k.node.current,j=T?new $S(l(T),T):null;k.rect.current=j,j&&S.set(k.id,j)}return S}return b},[t,s,n,d,l]);return Y.useEffect(()=>{u.current=t},[t]),Y.useEffect(()=>{d||p()},[n,d]),Y.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),Y.useEffect(()=>{d||typeof a!="number"||y.current!==null||(y.current=setTimeout(()=>{p(),y.current=null},a))},[a,d,p,...r]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:s!=null};function v(){switch(c){case Cg.Always:return!1;case Cg.BeforeDragging:return n;default:return!n}}}function qS(t,e){return f1(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Cq(t,e){return qS(t,e)}function Eq(t){let{callback:e,disabled:n}=t;const r=Wv(e),i=Y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return Y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function GS(t){let{callback:e,disabled:n}=t;const r=Wv(e),i=Y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return Y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Aq(t){return new $S(h1(t),t)}function qC(t,e,n){e===void 0&&(e=Aq);const[r,i]=Y.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=Eq({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=GS({callback:s});return fu(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function Tq(t){const e=qS(t);return KD(t,e)}const GC=[];function jq(t){const e=Y.useRef(t),n=f1(r=>t?r&&r!==GC&&t&&e.current&&t.parentNode===e.current.parentNode?r:Vv(t):GC,[t]);return Y.useEffect(()=>{e.current=t},[t]),n}function Pq(t){const[e,n]=Y.useState(null),r=Y.useRef(t),i=Y.useCallback(s=>{const o=$w(s.target);o&&n(a=>a?(a.set(o,F5(o)),new Map(a)):null)},[]);return Y.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=$w(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,F5(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=$w(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),Y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Gp(s,o),_l):tO(t):_l,[t,e])}function KC(t,e){e===void 0&&(e=[]);const n=Y.useRef(null);return Y.useEffect(()=>{n.current=null},e),Y.useEffect(()=>{const r=t!==_l;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?kg(t,n.current):_l}function Dq(t){Y.useEffect(()=>{if(!$v)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function iO(t){return Y.useMemo(()=>t?iq(t):null,[t])}const XC=[];function Oq(t,e){e===void 0&&(e=h1);const[n]=t,r=iO(n?so(n):null),[i,s]=Y.useState(XC);function o(){s(()=>t.length?t.map(l=>QD(l)?r:new $S(e(l),l)):XC)}const a=GS({callback:o});return fu(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function sO(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return d1(e)?e:t}function Lq(t){let{measure:e}=t;const[n,r]=Y.useState(null),i=Y.useCallback(c=>{for(const{target:u}of c)if(d1(u)){r(d=>{const h=e(u);return d?{...d,width:h.width,height:h.height}:h});break}},[e]),s=GS({callback:i}),o=Y.useCallback(c=>{const u=sO(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?e(u):null)},[e,s]),[a,l]=OH(o);return Y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Mq=[{sensor:HS,options:{}},{sensor:WS,options:{}}],Iq={current:{}},ox={draggable:{measure:UC},droppable:{measure:UC,strategy:Cg.WhileDragging,frequency:B5.Optimized},dragOverlay:{measure:h1}};class Gm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Rq={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Gm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ox},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ox,measureDroppableContainers:Ox,windowRect:null,measuringScheduled:!1},oO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ox,draggableNodes:new Map,over:null,measureDroppableContainers:Ox},KS=Y.createContext(oO),aO=Y.createContext(Rq);function Fq(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Gm}}}function zq(t,e){switch(e.type){case Ds.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ds.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ds.DragEnd:case Ds.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ds.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Gm(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Ds.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Gm(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Ds.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Gm(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Bq(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=Y.useContext(KS),s=Px(r),o=Px(n==null?void 0:n.id);return Y.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!US(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=IH(u);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function lO(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function Uq(t){return Y.useMemo(()=>({draggable:{...ox.draggable,...t==null?void 0:t.draggable},droppable:{...ox.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ox.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function $q(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=Y.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;fu(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=KD(u,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=YD(c);h&&h.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const XS=Y.createContext({..._l,scaleX:1,scaleY:1});var hd;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(hd||(hd={}));const Wq=Y.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=Mq,collisionDetection:d=ZH,measuring:h,modifiers:p,...y}=e;const x=Y.useReducer(zq,void 0,Fq),[v,b]=x,[S,k]=$H(),[T,j]=Y.useState(hd.Uninitialized),P=T===hd.Initialized,{draggable:{active:C,nodes:N,translate:O},droppable:{containers:z}}=v,L=C!=null?N.get(C):null,M=Y.useRef({initial:null,translated:null}),K=Y.useMemo(()=>{var pn;return C!=null?{id:C,data:(pn=L==null?void 0:L.data)!=null?pn:Iq,rect:M}:null},[C,L]),W=Y.useRef(null),[Z,U]=Y.useState(null),[F,J]=Y.useState(null),Q=WD(y,Object.values(y)),ee=BS("DndDescribedBy",o),ne=Y.useMemo(()=>z.getEnabled(),[z]),D=Uq(h),{droppableRects:G,measureDroppableContainers:V,measuringScheduled:H}=Nq(ne,{dragging:P,dependencies:[O.x,O.y],config:D.droppable}),te=Sq(N,C),ge=Y.useMemo(()=>F?Dx(F):null,[F]),xe=vr(),ve=Cq(te,D.draggable.measure);$q({activeNode:C!=null?N.get(C):null,config:xe.layoutShiftCompensation,initialRect:ve,measure:D.draggable.measure});const Ne=qC(te,D.draggable.measure,ve),He=qC(te?te.parentElement:null),Ke=Y.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qe=z.getNodeFor((n=Ke.current.over)==null?void 0:n.id),Be=Lq({measure:D.dragOverlay.measure}),Te=(r=Be.nodeRef.current)!=null?r:te,fe=P?(i=Be.rect)!=null?i:Ne:null,Ge=!!(Be.nodeRef.current&&Be.rect),et=Tq(Ge?null:Ne),Le=iO(Te?so(Te):null),ke=jq(P?qe??te:null),We=Oq(ke),at=lO(p,{transform:{x:O.x-et.x,y:O.y-et.y,scaleX:1,scaleY:1},activatorEvent:F,active:K,activeNodeRect:Ne,containerNodeRect:He,draggingNodeRect:fe,over:Ke.current.over,overlayNodeRect:Be.rect,scrollableAncestors:ke,scrollableAncestorRects:We,windowRect:Le}),xt=ge?Gp(ge,O):null,_t=Pq(ke),Pt=KC(_t),Vt=KC(_t,[Ne]),Xt=Gp(at,Pt),Bt=fe?tq(fe,at):null,It=K&&Bt?d({active:K,collisionRect:Bt,droppableRects:G,droppableContainers:ne,pointerCoordinates:xt}):null,Ft=qD(It,"id"),[dt,Tn]=Y.useState(null),sn=Ge?at:Gp(at,Vt),Wn=QH(sn,(s=dt==null?void 0:dt.rect)!=null?s:null,Ne),hn=Y.useRef(null),jn=Y.useCallback((pn,tn)=>{let{sensor:Rt,options:nn}=tn;if(W.current==null)return;const rr=N.get(W.current);if(!rr)return;const xn=pn.nativeEvent,On=new Rt({active:W.current,activeNode:rr,event:xn,options:nn,context:Ke,onAbort(jt){if(!N.get(jt))return;const{onDragAbort:Qe}=Q.current,vt={id:jt};Qe==null||Qe(vt),S({type:"onDragAbort",event:vt})},onPending(jt,pe,Qe,vt){if(!N.get(jt))return;const{onDragPending:Et}=Q.current,re={id:jt,constraint:pe,initialCoordinates:Qe,offset:vt};Et==null||Et(re),S({type:"onDragPending",event:re})},onStart(jt){const pe=W.current;if(pe==null)return;const Qe=N.get(pe);if(!Qe)return;const{onDragStart:vt}=Q.current,$t={activatorEvent:xn,active:{id:pe,data:Qe.data,rect:M}};eu.unstable_batchedUpdates(()=>{vt==null||vt($t),j(hd.Initializing),b({type:Ds.DragStart,initialCoordinates:jt,active:pe}),S({type:"onDragStart",event:$t}),U(hn.current),J(xn)})},onMove(jt){b({type:Ds.DragMove,coordinates:jt})},onEnd:Sr(Ds.DragEnd),onCancel:Sr(Ds.DragCancel)});hn.current=On;function Sr(jt){return async function(){const{active:Qe,collisions:vt,over:$t,scrollAdjustedTranslate:Et}=Ke.current;let re=null;if(Qe&&Et){const{cancelDrop:ye}=Q.current;re={activatorEvent:xn,active:Qe,collisions:vt,delta:Et,over:$t},jt===Ds.DragEnd&&typeof ye=="function"&&await Promise.resolve(ye(re))&&(jt=Ds.DragCancel)}W.current=null,eu.unstable_batchedUpdates(()=>{b({type:jt}),j(hd.Uninitialized),Tn(null),U(null),J(null),hn.current=null;const ye=jt===Ds.DragEnd?"onDragEnd":"onDragCancel";if(re){const de=Q.current[ye];de==null||de(re),S({type:ye,event:re})}})}}},[N]),Wr=Y.useCallback((pn,tn)=>(Rt,nn)=>{const rr=Rt.nativeEvent,xn=N.get(nn);if(W.current!==null||!xn||rr.dndKit||rr.defaultPrevented)return;const On={active:xn};pn(Rt,tn.options,On)===!0&&(rr.dndKit={capturedBy:tn.sensor},W.current=nn,jn(Rt,tn))},[N,jn]),yn=kq(u,Wr);Dq(u),fu(()=>{Ne&&T===hd.Initializing&&j(hd.Initialized)},[Ne,T]),Y.useEffect(()=>{const{onDragMove:pn}=Q.current,{active:tn,activatorEvent:Rt,collisions:nn,over:rr}=Ke.current;if(!tn||!Rt)return;const xn={active:tn,activatorEvent:Rt,collisions:nn,delta:{x:Xt.x,y:Xt.y},over:rr};eu.unstable_batchedUpdates(()=>{pn==null||pn(xn),S({type:"onDragMove",event:xn})})},[Xt.x,Xt.y]),Y.useEffect(()=>{const{active:pn,activatorEvent:tn,collisions:Rt,droppableContainers:nn,scrollAdjustedTranslate:rr}=Ke.current;if(!pn||W.current==null||!tn||!rr)return;const{onDragOver:xn}=Q.current,On=nn.get(Ft),Sr=On&&On.rect.current?{id:On.id,rect:On.rect.current,data:On.data,disabled:On.disabled}:null,jt={active:pn,activatorEvent:tn,collisions:Rt,delta:{x:rr.x,y:rr.y},over:Sr};eu.unstable_batchedUpdates(()=>{Tn(Sr),xn==null||xn(jt),S({type:"onDragOver",event:jt})})},[Ft]),fu(()=>{Ke.current={activatorEvent:F,active:K,activeNode:te,collisionRect:Bt,collisions:It,droppableRects:G,draggableNodes:N,draggingNode:Te,draggingNodeRect:fe,droppableContainers:z,over:dt,scrollableAncestors:ke,scrollAdjustedTranslate:Xt},M.current={initial:fe,translated:Bt}},[K,te,It,Bt,N,Te,fe,G,z,dt,ke,Xt]),wq({...xe,delta:O,draggingRect:Bt,pointerCoordinates:xt,scrollableAncestors:ke,scrollableAncestorRects:We});const Fr=Y.useMemo(()=>({active:K,activeNode:te,activeNodeRect:Ne,activatorEvent:F,collisions:It,containerNodeRect:He,dragOverlay:Be,draggableNodes:N,droppableContainers:z,droppableRects:G,over:dt,measureDroppableContainers:V,scrollableAncestors:ke,scrollableAncestorRects:We,measuringConfiguration:D,measuringScheduled:H,windowRect:Le}),[K,te,Ne,F,It,He,Be,N,z,G,dt,V,ke,We,D,H,Le]),Nn=Y.useMemo(()=>({activatorEvent:F,activators:yn,active:K,activeNodeRect:Ne,ariaDescribedById:{draggable:ee},dispatch:b,draggableNodes:N,over:dt,measureDroppableContainers:V}),[F,yn,K,Ne,b,ee,N,dt,V]);return Mt.createElement(HD.Provider,{value:k},Mt.createElement(KS.Provider,{value:Nn},Mt.createElement(aO.Provider,{value:Fr},Mt.createElement(XS.Provider,{value:Wn},c)),Mt.createElement(Bq,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Mt.createElement(HH,{...a,hiddenTextDescribedById:ee}));function vr(){const pn=(Z==null?void 0:Z.autoScrollEnabled)===!1,tn=typeof l=="object"?l.enabled===!1:l===!1,Rt=P&&!pn&&!tn;return typeof l=="object"?{...l,enabled:Rt}:{enabled:Rt}}});function cO(){return Y.useContext(aO)}function Vq(t){let{animation:e,children:n}=t;const[r,i]=Y.useState(null),[s,o]=Y.useState(null),a=Px(n);return!n&&!r&&a&&i(a),fu(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,s)).then(()=>{i(null)})},[e,r,s]),Mt.createElement(Mt.Fragment,null,n,r?Y.cloneElement(r,{ref:o}):null)}const Hq={x:0,y:0,scaleX:1,scaleY:1};function qq(t){let{children:e}=t;return Mt.createElement(KS.Provider,{value:oO},Mt.createElement(XS.Provider,{value:Hq},e))}const Gq={position:"fixed",touchAction:"none"},Kq=t=>US(t)?"transform 250ms ease":void 0,Xq=Y.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:c,transition:u=Kq}=t;if(!a)return null;const d=i?c:{...c,scaleX:1,scaleY:1},h={...Gq,width:a.width,height:a.height,top:a.top,left:a.left,transform:Ng.Transform.toString(d),transformOrigin:i&&r?KH(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return Mt.createElement(n,{className:o,style:h,ref:e},s)}),Yq=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,c]of Object.entries(i))n.node.style.setProperty(l,c);o!=null&&o.active&&n.node.classList.remove(o.active)}},Jq=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ng.Transform.toString(e)},{transform:Ng.Transform.toString(n)}]},Zq={duration:250,easing:"ease",keyframes:Jq,sideEffects:Yq({styles:{active:{opacity:"0"}}})};function Qq(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Wv((s,o)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=sO(o);if(!c)return;const{transform:u}=so(o).getComputedStyle(o),d=XD(u);if(!d)return;const h=typeof e=="function"?e:eG(e);return nO(l,i.draggable.measure),h({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function eG(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...Zq,...t};return s=>{let{active:o,dragOverlay:a,transform:l,...c}=s;if(!e)return;const u={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-u.x,y:l.y-u.y,...d},p=i({...c,active:o,dragOverlay:a,transform:{initial:l,final:h}}),[y]=p,x=p[p.length-1];if(JSON.stringify(y)===JSON.stringify(x))return;const v=r==null?void 0:r({active:o,dragOverlay:a,...c}),b=a.node.animate(p,{duration:e,easing:n,fill:"forwards"});return new Promise(S=>{b.onfinish=()=>{v==null||v(),S()}})}}let YC=0;function tG(t){return Y.useMemo(()=>{if(t!=null)return YC++,YC},[t])}const nG=Mt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:p,draggableNodes:y,droppableContainers:x,dragOverlay:v,over:b,measuringConfiguration:S,scrollableAncestors:k,scrollableAncestorRects:T,windowRect:j}=cO(),P=Y.useContext(XS),C=tG(d==null?void 0:d.id),N=lO(o,{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:k,scrollableAncestorRects:T,transform:P,windowRect:j}),O=qS(h),z=Qq({config:r,draggableNodes:y,droppableContainers:x,measuringConfiguration:S}),L=O?v.setRef:void 0;return Mt.createElement(qq,null,Mt.createElement(Vq,{animation:z},d&&C?Mt.createElement(Xq,{key:C,id:d.id,ref:L,as:a,activatorEvent:u,adjustScale:e,className:l,transition:s,rect:O,style:{zIndex:c,...i},transform:N},n):null))});function rG(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function iG(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function sG(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function oG(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const uO=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=rG(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},xy={scaleX:1,scaleY:1},aG=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const c=s[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...xy}:null}const l=lG(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...xy}:i<n&&i>=o?{x:0,y:a.height+l,...xy}:{x:0,y:0,...xy}};function lG(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const dO="Sortable",cG=Mt.createContext({activeIndex:-1,containerId:dO,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:uO,disabled:{draggable:!1,droppable:!1}});function uG(t){let{children:e,id:n,items:r,strategy:i=uO,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=cO(),d=BS(dO,n),h=a.rect!==null,p=Y.useMemo(()=>r.map(P=>typeof P=="object"&&"id"in P?P.id:P),[r]),y=o!=null,x=o?p.indexOf(o.id):-1,v=c?p.indexOf(c.id):-1,b=Y.useRef(p),S=!sG(p,b.current),k=v!==-1&&x===-1||S,T=oG(s);fu(()=>{S&&y&&u(p)},[S,p,y,u]),Y.useEffect(()=>{b.current=p},[p]);const j=Y.useMemo(()=>({activeIndex:x,containerId:d,disabled:T,disableTransforms:k,items:p,overIndex:v,useDragOverlay:h,sortedRects:iG(p,l),strategy:i}),[x,d,T.draggable,T.droppable,k,p,v,l,h,i]);return Mt.createElement(cG.Provider,{value:j},e)}function Mx(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const dG=[Rn.Down,Rn.Right,Rn.Up,Rn.Left],fG=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=e;if(dG.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=i.get(d.id);if(h)switch(t.code){case Rn.Down:r.top<h.top&&l.push(d);break;case Rn.Up:r.top>h.top&&l.push(d);break;case Rn.Left:r.left>h.left&&l.push(d);break;case Rn.Right:r.left<h.left&&l.push(d);break}});const c=GD({collisionRect:r,droppableRects:i,droppableContainers:l});let u=qD(c,"id");if(u===(o==null?void 0:o.id)&&c.length>1&&(u=c[1].id),u!=null){const d=s.get(n.id),h=s.get(u),p=h?i.get(h.id):null,y=h==null?void 0:h.node.current;if(y&&p&&d&&h){const v=Vv(y).some((P,C)=>a[C]!==P),b=fO(d,h),S=hG(d,h),k=v||!b?{x:0,y:0}:{x:S?r.width-p.width:0,y:S?r.height-p.height:0},T={x:p.left,y:p.top};return k.x&&k.y?T:kg(T,k)}}}};function fO(t,e){return!Mx(t)||!Mx(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function hG(t,e){return!Mx(t)||!Mx(e)||!fO(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const pG=()=>{const t=kl(),e=mu(),[n,r]=Y.useState([]),[i,s]=Y.useState(!0),[o,a]=Y.useState(null),[l,c]=Y.useState(null),[u,d]=Y.useState(null),h=qH(zC(HS),zC(WS,{coordinateGetter:fG}));Y.useEffect(()=>{p(),y()},[]);const p=async()=>{try{s(!0);const k=[{id:"pending",title:"Oczekujące",reservations:[]},{id:"confirmed",title:"Potwierdzone",reservations:[]},{id:"in_progress",title:"W trakcie",reservations:[]},{id:"completed",title:"Zakończone",reservations:[]},{id:"cancelled",title:"Anulowane",reservations:[]}];try{const{data:P,error:C}=await lt.rpc("get_admin_pipeline_data",{p_date_range:"30days",p_status:["pending","confirmed","completed","in_progress","cancelled"]});if(!C&&P&&P.columns){r(P.columns),s(!1);return}}catch(P){console.error("RPC Error:",P)}const{data:T,error:j}=await lt.from("reservations").select(`
          id,
          status,
          start_date,
          end_date,
          start_time,
          end_time,
          total_price,
          customers (
            id,
            first_name,
            last_name,
            email,
            phone,
            company_name,
            company_nip
          ),
          reservation_items (
            id,
            equipment_id,
            equipment:equipment (
              name
            ),
            quantity
          )
        `);if(j)throw j;if(T){const P=[...k];T.forEach(C=>{var z,L,M,K,W,Z,U;const N=C.status||"pending",O=P.findIndex(F=>F.id===N);if(O>=0){const F={id:C.id,customer:{id:((z=C.customers)==null?void 0:z.id)||"",first_name:((L=C.customers)==null?void 0:L.first_name)||"",last_name:((M=C.customers)==null?void 0:M.last_name)||"",email:((K=C.customers)==null?void 0:K.email)||"",phone:((W=C.customers)==null?void 0:W.phone)||"",company_name:(Z=C.customers)==null?void 0:Z.company_name,company_nip:(U=C.customers)==null?void 0:U.company_nip},dates:{start:C.start_date||new Date().toISOString(),end:C.end_date||new Date().toISOString()},total_price:C.total_price||0,items:Array.isArray(C.reservation_items)?C.reservation_items.map(J=>{var Q;return{id:J.id||`temp-${Math.random().toString(36).substring(2,9)}`,equipment_name:((Q=J.equipment)==null?void 0:Q.name)||"Nieznany sprzęt",quantity:J.quantity||1}}):[]};P[O].reservations.push(F)}}),r(P)}else r(k)}catch(k){console.error("Error loading pipeline data:",k),a("Nie udało się załadować danych"),r([{id:"pending",title:"Oczekujące",reservations:[]},{id:"confirmed",title:"Potwierdzone",reservations:[]},{id:"in_progress",title:"W trakcie",reservations:[]},{id:"completed",title:"Zakończone",reservations:[]},{id:"cancelled",title:"Anulowane",reservations:[]}])}finally{s(!1)}},y=()=>{const k=lt.channel("pipeline_updates").on("postgres_changes",{event:"*",schema:"public",table:"reservations"},()=>p()).subscribe();return()=>{k.unsubscribe()}},x=k=>{c(k.active.id)},v=async k=>{const{active:T,over:j}=k;if(!j)return;const P=b(T.id),C=j.id;if(P&&P.id!==C)try{await lt.rpc("update_reservation_pipeline_status",{p_reservation_id:P.id,p_new_status:C}),await p()}catch(N){console.error("Error updating reservation status:",N),a("Nie udało się zaktualizować statusu")}c(null)},b=k=>{var T;for(const j of n){const P=(T=j.reservations)==null?void 0:T.find(C=>C.id===k);if(P)return P}return null},S=async(k,T)=>{try{await lt.rpc("update_reservation_pipeline_status",{p_reservation_id:k,p_new_status:T}),await p()}catch(j){console.error("Error updating status:",j),a("Nie udało się zaktualizować statusu")}};return i?g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):o?g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 flex items-center",children:[g.jsx(uc,{className:"w-6 h-6 mr-2"}),g.jsx("p",{children:o})]}):g.jsx("div",{className:"h-[calc(100vh-12rem)]",children:g.jsxs(Wq,{sensors:h,collisionDetection:GD,onDragStart:x,onDragEnd:v,children:[g.jsx("div",{className:"flex gap-6 pb-6 h-full overflow-x-auto whitespace-nowrap",style:{minWidth:"max-content"},children:n.map(k=>{var T,j;return g.jsxs("div",{className:"inline-block w-[360px] bg-gray-50 rounded-lg p-4 h-fit align-top",children:[g.jsx("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:g.jsxs("h3",{className:"font-medium text-gray-900 flex items-center",children:[k.title,g.jsx("span",{className:"ml-2 bg-white text-gray-600 px-2 py-0.5 rounded-full text-sm border",children:((T=k.reservations)==null?void 0:T.length)||0})]})}),g.jsx(uG,{items:((j=k.reservations)==null?void 0:j.map(P=>P.id))||[],strategy:aG,children:g.jsx("div",{className:"space-y-3",children:k.reservations&&k.reservations.length>0?k.reservations.map(P=>{var C,N,O,z,L,M,K;return g.jsxs(Ii.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-white rounded-lg shadow p-4 cursor-pointer hover:shadow-md hover:bg-gray-50 transition-all ${l===P.id?"ring-2 ring-solrent-orange":""}`,onClick:()=>{t(`/admin/panel/reservations/${P.id}`,{state:{from:e.pathname+e.search}})},children:[g.jsx("div",{className:"flex justify-between items-start mb-2",children:g.jsxs("div",{children:[g.jsxs("h4",{className:"font-medium text-gray-900 text-sm",children:[((C=P.customer)==null?void 0:C.first_name)||""," ",((N=P.customer)==null?void 0:N.last_name)||""]}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[g.jsx(Bd,{className:"w-4 h-4 mr-1"}),((O=P.customer)==null?void 0:O.email)||""]}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[g.jsx(wd,{className:"w-4 h-4 mr-1"}),((z=P.customer)==null?void 0:z.phone)||""]}),((L=P.customer)==null?void 0:L.company_name)&&g.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[g.jsx(G_,{className:"w-4 h-4 mr-1"}),P.customer.company_name]})]})}),g.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2 bg-gray-50 p-2 rounded",children:[g.jsx(dc,{className:"w-4 h-4 mr-1"}),g.jsxs("span",{children:[(M=P.dates)!=null&&M.start?new Date(P.dates.start).toLocaleDateString():""," -",(K=P.dates)!=null&&K.end?new Date(P.dates.end).toLocaleDateString():""]})]}),g.jsx("div",{className:"space-y-1.5 mb-3",children:Array.isArray(P.items)&&P.items.map((W,Z)=>g.jsxs("div",{className:"flex items-center text-xs bg-gray-50 p-1.5 rounded",children:[g.jsx(ta,{className:"w-4 h-4 mr-1 text-gray-400"}),g.jsxs("span",{children:[W.equipment_name||"Nieznany sprzęt"," (x",W.quantity||1,")"]})]},Z))}),g.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[g.jsxs("span",{className:"font-medium text-solrent-orange text-sm",children:[typeof P.total_price=="number"?P.total_price.toFixed(2):"0.00"," zł"]}),g.jsxs("div",{className:"flex space-x-2",children:[k.id==="pending"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"confirmed")},className:"p-1.5 text-green-600 hover:bg-green-50 rounded-full",children:g.jsx(zd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"cancelled")},className:"p-1.5 text-red-600 hover:bg-red-50 rounded-full",children:g.jsx(h5,{className:"w-4 h-4"})})]}),k.id==="confirmed"&&g.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"completed")},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-full",children:g.jsx(zd,{className:"w-4 h-4"})})]})]})]},P.id)}):null})})]},k.id)})}),g.jsx(nG,{children:l?g.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 opacity-90",children:(()=>{var T,j,P;const k=b(l);return k?g.jsxs("div",{children:[g.jsxs("h4",{className:"font-medium text-gray-900",children:[((T=k.customer)==null?void 0:T.first_name)||""," ",((j=k.customer)==null?void 0:j.last_name)||""]}),g.jsx("p",{className:"text-sm text-gray-500",children:(P=k.dates)!=null&&P.start?new Date(k.dates.start).toLocaleDateString():""})]}):null})()}):null})]})})},mG=()=>{const t=kl(),[e,n]=Y.useState([]),[r,i]=Y.useState(!0),[s,o]=Y.useState(null),[a,l]=Y.useState(1),[c,u]=Y.useState(1),[d,h]=Y.useState("created_at"),[p,y]=Y.useState("desc"),[x,v]=Y.useState(!1),[b,S]=Y.useState({status:[],dateRange:"30days",minValue:"",search:""}),k=10;Y.useEffect(()=>{T()},[a,d,p,b]);const T=async()=>{try{i(!0);let C=lt.from("customers").select(`
          *,
          customer_profiles!left (
            lead_status,
            lead_source,
            lifetime_value,
            avg_rental_duration,
            total_rentals,
            last_contact_date
          ),
          customer_activities!left (
            activity_type,
            created_at
          )
        `,{count:"exact"});switch(b.search&&(C=C.or(`
          first_name.ilike.%${b.search}%,
          last_name.ilike.%${b.search}%,
          email.ilike.%${b.search}%,
          phone.ilike.%${b.search}%,
          company_name.ilike.%${b.search}%,
          company_nip.ilike.%${b.search}%
        `)),b.status.length>0&&(C=C.in("customer_profiles.lead_status",b.status)),b.minValue&&(C=C.gte("customer_profiles.lifetime_value",parseFloat(b.minValue))),b.dateRange){case"7days":C=C.gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString());break;case"30days":C=C.gte("created_at",new Date(Date.now()-30*24*60*60*1e3).toISOString());break;case"90days":C=C.gte("created_at",new Date(Date.now()-90*24*60*60*1e3).toISOString());break}C=C.order(d,{ascending:p==="asc"}).range((a-1)*k,a*k-1);const{data:N,count:O,error:z}=await C;if(z)throw z;n(N||[]),u(Math.ceil((O||0)/k)),o(null)}catch(C){console.error("Error loading customers:",C),o("Nie udało się załadować listy klientów")}finally{i(!1)}},j=C=>{C===d?y(p==="asc"?"desc":"asc"):(h(C),y("asc"))},P=()=>{const N=[["ID","Imię","Nazwisko","Email","Telefon","Firma","NIP","Data utworzenia","Status","Liczba wypożyczeń","Wartość wypożyczeń"].join(","),...e.map(L=>{var M,K,W,Z,U,F;return[L.id,L.first_name,L.last_name,L.email,L.phone,L.company_name||"",L.company_nip||"",new Date(L.created_at).toLocaleDateString(),((K=(M=L.customer_profiles)==null?void 0:M[0])==null?void 0:K.status)||"",((Z=(W=L.customer_profiles)==null?void 0:W[0])==null?void 0:Z.total_rentals)||0,((F=(U=L.customer_profiles)==null?void 0:U[0])==null?void 0:F.lifetime_value)||0].join(",")})].join(`
`),O=new Blob([N],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a");z.href=URL.createObjectURL(O),z.download=`klienci_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(z),z.click(),document.body.removeChild(z)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center",children:[g.jsx("div",{className:"flex-1 w-full md:w-auto",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",placeholder:"Szukaj klientów...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",value:b.search,onChange:C=>S({...b,search:C.target.value})}),g.jsx(Y_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("button",{onClick:()=>v(!x),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[g.jsx(fz,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden md:inline",children:"Filtry"})]}),g.jsxs("button",{onClick:P,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[g.jsx(Nh,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden md:inline",children:"Eksportuj"})]}),g.jsxs("button",{onClick:()=>t("new"),className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[g.jsx(ic,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden md:inline",children:"Dodaj klienta"})]})]})]}),g.jsx(fc,{children:x&&g.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden bg-white rounded-lg shadow p-4",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),g.jsxs("select",{multiple:!0,value:b.status,onChange:C=>{const N=Array.from(C.target.selectedOptions,O=>O.value);S({...b,status:N})},className:"w-full p-2 border rounded-lg",children:[g.jsx("option",{value:"lead",children:"Lead"}),g.jsx("option",{value:"customer",children:"Klient"}),g.jsx("option",{value:"inactive",children:"Nieaktywny"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Okres"}),g.jsxs("select",{value:b.dateRange,onChange:C=>S({...b,dateRange:C.target.value}),className:"w-full p-2 border rounded-lg",children:[g.jsx("option",{value:"7days",children:"Ostatnie 7 dni"}),g.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),g.jsx("option",{value:"90days",children:"Ostatnie 90 dni"}),g.jsx("option",{value:"all",children:"Wszystkie"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min. wartość wypożyczeń"}),g.jsx("input",{type:"number",value:b.minValue,onChange:C=>S({...b,minValue:C.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"np. 1000"})]}),g.jsx("div",{className:"flex items-end",children:g.jsx("button",{onClick:()=>S({status:[],dateRange:"30days",minValue:"",search:""}),className:"w-full p-2 border rounded-lg text-gray-600 hover:bg-gray-50",children:"Resetuj filtry"})})]})})}),g.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("last_name"),children:g.jsxs("div",{className:"flex items-center gap-2",children:["Klient",d==="last_name"&&(p==="asc"?g.jsx(Nm,{className:"w-4 h-4"}):g.jsx(Zc,{className:"w-4 h-4"}))]})}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontakt"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Firma"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("customer_profiles.status"),children:g.jsxs("div",{className:"flex items-center gap-2",children:["Status",d==="customer_profiles.status"&&(p==="asc"?g.jsx(Nm,{className:"w-4 h-4"}):g.jsx(Zc,{className:"w-4 h-4"}))]})}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("customer_profiles.total_rentals"),children:g.jsxs("div",{className:"flex items-center gap-2",children:["Wypożyczenia",d==="customer_profiles.total_rentals"&&(p==="asc"?g.jsx(Nm,{className:"w-4 h-4"}):g.jsx(Zc,{className:"w-4 h-4"}))]})}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("customer_profiles.lifetime_value"),children:g.jsxs("div",{className:"flex items-center gap-2",children:["Wartość",d==="customer_profiles.lifetime_value"&&(p==="asc"?g.jsx(Nm,{className:"w-4 h-4"}):g.jsx(Zc,{className:"w-4 h-4"}))]})}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?g.jsx("tr",{children:g.jsx("td",{colSpan:7,className:"px-6 py-4 text-center",children:g.jsx("div",{className:"flex justify-center",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solrent-orange"})})})}):e.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Nie znaleziono klientów spełniających kryteria"})}):e.map(C=>{var N,O,z,L,M,K,W,Z,U;return g.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`${C.id}`),children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"flex items-center",children:g.jsxs("div",{children:[g.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[C.first_name," ",C.last_name]}),g.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",C.id.split("-")[0]]})]})})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"text-sm text-gray-900 flex flex-col gap-1",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(Bd,{className:"w-4 h-4 text-gray-400"}),C.email]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(wd,{className:"w-4 h-4 text-gray-400"}),C.phone]})]})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.company_name&&g.jsxs("div",{className:"text-sm text-gray-900",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(G_,{className:"w-4 h-4 text-gray-400"}),C.company_name]}),g.jsxs("div",{className:"text-sm text-gray-500",children:["NIP: ",C.company_nip]})]})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${((N=C.customer_profiles)==null?void 0:N.lead_status)==="hot"?"bg-red-100 text-red-800":((O=C.customer_profiles)==null?void 0:O.lead_status)==="warm"?"bg-yellow-100 text-yellow-800":((z=C.customer_profiles)==null?void 0:z.lead_status)==="converted"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:((L=C.customer_profiles)==null?void 0:L.lead_status)==="hot"?"Gorący lead":((M=C.customer_profiles)==null?void 0:M.lead_status)==="warm"?"Zainteresowany":((K=C.customer_profiles)==null?void 0:K.lead_status)==="converted"?"Klient":((W=C.customer_profiles)==null?void 0:W.lead_status)==="cold"?"Zimny lead":"Nowy"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((Z=C.customer_profiles)==null?void 0:Z.total_rentals)||0}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(((U=C.customer_profiles)==null?void 0:U.lifetime_value)||0).toFixed(2)," zł"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:g.jsxs("div",{className:"flex justify-end space-x-2",onClick:F=>F.stopPropagation(),children:[g.jsx("button",{onClick:()=>t(`${C.id}/edit`),className:"text-indigo-600 hover:text-indigo-900",children:g.jsx(_0,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>{},className:"text-red-600 hover:text-red-900",children:g.jsx(sc,{className:"w-5 h-5"})})]})})]},C.id)})})]})}),g.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[g.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[g.jsx("button",{onClick:()=>l(C=>Math.max(1,C-1)),disabled:a===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Poprzednia"}),g.jsx("button",{onClick:()=>l(C=>Math.min(c,C+1)),disabled:a===c,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Następna"})]}),g.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[g.jsx("div",{children:g.jsxs("p",{className:"text-sm text-gray-700",children:["Wyświetlanie"," ",g.jsx("span",{className:"font-medium",children:(a-1)*k+1})," ","-"," ",g.jsx("span",{className:"font-medium",children:Math.min(a*k,e.length)})," ","z"," ",g.jsx("span",{className:"font-medium",children:e.length})," ","wyników"]})}),g.jsx("div",{children:g.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[g.jsxs("button",{onClick:()=>l(1),disabled:a===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"sr-only",children:"Pierwsza"}),g.jsx(Zc,{className:"h-5 w-5 rotate-90"})]}),g.jsxs("button",{onClick:()=>l(C=>Math.max(1,C-1)),disabled:a===1,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"sr-only",children:"Poprzednia"}),g.jsx(Ov,{className:"h-5 w-5"})]}),Array.from({length:c},(C,N)=>N+1).filter(C=>Math.abs(C-a)<2||C===1||C===c).map((C,N,O)=>N>0&&O[N-1]!==C-1?[g.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},`ellipsis-${C}`),g.jsx("button",{onClick:()=>l(C),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${C===a?"z-10 bg-solrent-orange border-solrent-orange text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:C},C)]:g.jsx("button",{onClick:()=>l(C),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${C===a?"z-10 bg-solrent-orange border-solrent-orange text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:C},C)),g.jsxs("button",{onClick:()=>l(C=>Math.min(c,C+1)),disabled:a===c,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"sr-only",children:"Następna"}),g.jsx(K_,{className:"h-5 w-5"})]}),g.jsxs("button",{onClick:()=>l(c),disabled:a===c,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"sr-only",children:"Ostatnia"}),g.jsx(Zc,{className:"h-5 w-5 -rotate-90"})]})]})})]})]})]}),s&&g.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center",children:[g.jsx(uc,{className:"w-5 h-5 mr-2"}),g.jsx("span",{children:s}),g.jsx("button",{onClick:()=>o(null),className:"ml-4 text-red-500 hover:text-red-600",children:g.jsx(cu,{className:"w-4 h-4"})})]})]})},gG=()=>{const[t,e]=Y.useState([]),[n,r]=Y.useState([]),[i,s]=Y.useState(null),[o,a]=Y.useState(!0),[l,c]=Y.useState(null),[u,d]=Y.useState({status:"all",source:"all",assignedTo:"all"});Y.useEffect(()=>{h()},[u]);const h=async()=>{try{a(!0);const{data:b,error:S}=await lt.from("crm_contacts").select(`
          *,
          customer:customers (
            first_name,
            last_name,
            email,
            phone
          )
        `).order("lead_score",{ascending:!1});if(S)throw S;const{data:k,error:T}=await lt.from("crm_tasks").select("*").order("due_date",{ascending:!0});if(T)throw T;e(b||[]),r(k||[])}catch(b){console.error("Error loading CRM data:",b),c("Nie udało się załadować danych CRM")}finally{a(!1)}},p=async(b,S)=>{try{const{error:k}=await lt.from("crm_tasks").update({status:S}).eq("id",b);if(k)throw k;await h()}catch(k){console.error("Error updating task status:",k),c("Nie udało się zaktualizować statusu zadania")}},y=()=>{const b=t.filter(k=>k.status==="customer").length,S=t.length;return S>0?(b/S*100).toFixed(1):"0.0"},x=()=>{const b=t.reduce((S,k)=>S+(k.lead_score||0),0);return t.length>0?Math.round(b/t.length):0},v=b=>{};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CRM"}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("select",{value:u.status,onChange:b=>d({...u,status:b.target.value}),className:"px-4 py-2 border rounded-lg",children:[g.jsx("option",{value:"all",children:"Wszystkie statusy"}),g.jsx("option",{value:"lead",children:"Leady"}),g.jsx("option",{value:"customer",children:"Klienci"}),g.jsx("option",{value:"inactive",children:"Nieaktywni"})]}),g.jsx("button",{onClick:()=>v(),className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:g.jsx(Nh,{className:"w-5 h-5"})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Aktywne leady"}),g.jsx("p",{className:"text-2xl font-bold",children:t.filter(b=>b.status==="lead").length})]}),g.jsx(Z_,{className:"w-8 h-8 text-blue-500"})]})}),g.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Zadania na dziś"}),g.jsx("p",{className:"text-2xl font-bold",children:n.filter(b=>new Date(b.due_date).toDateString()===new Date().toDateString()).length})]}),g.jsx(dc,{className:"w-8 h-8 text-green-500"})]})}),g.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Konwersja"}),g.jsx("p",{className:"text-2xl font-bold",children:y()+"%"})]}),g.jsx(wx,{className:"w-8 h-8 text-green-500"})]})}),g.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Średni Lead Score"}),g.jsx("p",{className:"text-2xl font-bold",children:x().toString()})]}),g.jsx(Lv,{className:"w-8 h-8 text-orange-500"})]})})]}),g.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontakt"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Score"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ostatni kontakt"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Następny kontakt"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"flex items-center",children:g.jsxs("div",{children:[g.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[b.customer.first_name," ",b.customer.last_name]}),g.jsx("div",{className:"text-sm text-gray-500",children:b.customer.email})]})})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.status==="lead"?"bg-yellow-100 text-yellow-800":b.status==="customer"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b.status==="lead"?"Lead":b.status==="customer"?"Klient":"Nieaktywny"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm text-gray-900",children:b.lead_score})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.last_contact_date?new Date(b.last_contact_date).toLocaleDateString():"Brak"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.next_contact_date?new Date(b.next_contact_date).toLocaleDateString():"Brak"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:g.jsx("button",{onClick:()=>s(b),className:"text-indigo-600 hover:text-indigo-900",children:g.jsx(_0,{className:"w-5 h-5"})})})]},b.id))})]})}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-medium",children:"Zadania"}),g.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:g.jsx(ic,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"space-y-4",children:n.map(b=>g.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium",children:b.title}),g.jsx("p",{className:"text-sm text-gray-500",children:b.description}),g.jsxs("p",{className:"text-xs text-gray-400",children:["Due: ",new Date(b.due_date).toLocaleDateString()]})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.priority==="high"?"bg-red-100 text-red-800":b.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:b.priority}),g.jsx("button",{onClick:()=>p(b.id,"completed"),className:"text-green-600 hover:text-green-700",children:g.jsx(lz,{className:"w-5 h-5"})})]})]},b.id))})]}),l&&g.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[g.jsx(uc,{className:"w-5 h-5"}),g.jsx("span",{children:l}),g.jsx("button",{onClick:()=>c(null),className:"ml-2 text-red-500 hover:text-red-600",children:g.jsx(cu,{className:"w-4 h-4"})})]})]})};function ts(t){this.content=t}ts.prototype={constructor:ts,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new ts(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ts(n)},addToStart:function(t,e){return new ts([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ts(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new ts(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ts.from(t),t.size?new ts(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ts.from(t),t.size?new ts(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ts.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ts.from=function(t){if(t instanceof ts)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ts(e)};function hO(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=hO(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function pO(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=pO(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class pt{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new pt(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new pt(r,i)}cutByIndex(e,n){return e==n?pt.empty:e==0&&n==this.content.length?this:new pt(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new pt(i,s)}addToStart(e){return new pt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new pt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return hO(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return pO(this,e,n,r)}findIndex(e,n=-1){if(e==0)return vy(0,e);if(e==this.size)return vy(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?vy(r+1,o):vy(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return pt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pt(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return pt.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new pt(n||e,r)}static from(e){if(!e)return pt.empty;if(e instanceof pt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new pt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pt.empty=new pt([],0);const Hw={index:0,offset:0};function vy(t,e){return Hw.index=t,Hw.offset=e,Hw}function Ix(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ix(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ix(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let xr=class U5{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ix(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return U5.none;if(e instanceof U5)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};xr.none=[];class Rx extends Error{}class zt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=gO(this.content,e+this.openStart,n);return r&&new zt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new zt(mO(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return zt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new zt(pt.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new zt(e,r,i)}}zt.empty=new zt(pt.empty,0,0);function mO(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(mO(s.content,e-i-1,n-i-1)))}function gO(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=gO(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function yG(t,e,n){if(n.openStart>t.depth)throw new Rx("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Rx("Inconsistent open depths");return yO(t,e,n,0)}function yO(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=yO(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return ah(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=xG(n,t);return ah(s,vO(t,o,a,e,r))}else return ah(s,Fx(t,e,r))}function xO(t,e){if(!e.type.compatibleContent(t.type))throw new Rx("Cannot join "+e.type.name+" onto "+t.type.name)}function $5(t,e,n){let r=t.node(n);return xO(r,e.node(n)),r}function oh(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Km(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(oh(t.nodeAfter,r),s++));for(let a=s;a<o;a++)oh(i.child(a),r);e&&e.depth==n&&e.textOffset&&oh(e.nodeBefore,r)}function ah(t,e){return t.type.checkContent(e),t.copy(e)}function vO(t,e,n,r,i){let s=t.depth>i&&$5(t,e,i+1),o=r.depth>i&&$5(n,r,i+1),a=[];return Km(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(xO(s,o),oh(ah(s,vO(t,e,n,r,i+1)),a)):(s&&oh(ah(s,Fx(t,e,i+1)),a),Km(e,n,i,a),o&&oh(ah(o,Fx(n,r,i+1)),a)),Km(r,null,i,a),new pt(a)}function Fx(t,e,n){let r=[];if(Km(null,t,n,r),t.depth>n){let i=$5(t,e,n+1);oh(ah(i,Fx(t,e,n+1)),r)}return Km(e,null,n,r),new pt(r)}function xG(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(pt.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Eg{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return xr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new zx(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Eg(n,r,s)}static resolveCached(e,n){let r=JC.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else JC.set(e,r=new vG);let i=r.elts[r.i]=Eg.resolve(e,n);return r.i=(r.i+1)%wG,i}}class vG{constructor(){this.elts=[],this.i=0}}const wG=12,JC=new WeakMap;class zx{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const bG=Object.create(null);let Td=class W5{constructor(e,n,r,i=xr.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||pt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ix(this.attrs,n||e.defaultAttrs||bG)&&xr.sameSet(this.marks,r||xr.none)}copy(e=null){return e==this.content?this:new W5(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new W5(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return zt.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new zt(c,i.depth-o,s.depth-o)}replace(e,n,r){return yG(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Eg.resolveCached(this,e)}resolveNoCache(e){return Eg.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wO(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=pt.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=xr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!xr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=pt.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Td.prototype.text=void 0;class Bx extends Td{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wO(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Bx(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Bx(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wO(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class yh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new _G(e,n);if(r.next==null)return yh.empty;let i=bO(r);r.next&&r.err("Unexpected trailing text");let s=TG(AG(i));return jG(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return pt.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}yh.empty=new yh(!0);class _G{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function bO(t){let e=[];do e.push(SG(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function SG(t){let e=[];do e.push(kG(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function kG(t){let e=EG(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=NG(t,e);else break;return e}function ZC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function NG(t,e){let n=ZC(t),r=n;return t.eat(",")&&(t.next!="}"?r=ZC(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function CG(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function EG(t){if(t.eat("(")){let e=bO(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=CG(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function AG(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function _O(t,e){return e-t}function QC(t,e){let n=[];return r(e),n.sort(_O);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function TG(t){let e=Object.create(null);return n(QC(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);QC(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new yh(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(_O);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function jG(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function SO(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function kO(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function NO(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function CO(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new DG(t,r,e[r]);return n}let eE=class EO{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=CO(e,r.attrs),this.defaultAttrs=SO(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==yh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:kO(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Td(this,this.computeAttrs(e),pt.from(n),xr.setFrom(r))}createChecked(e=null,n,r){return n=pt.from(n),this.checkContent(n),new Td(this,this.computeAttrs(e),n,xr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=pt.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(pt.empty,!0);return s?new Td(this,e,n.append(s),xr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){NO(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:xr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new EO(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function PG(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class DG{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?PG(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Hv{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=CO(e,i.attrs),this.excluded=null;let s=SO(this.attrs);this.instance=s?new xr(this,s):null}create(e=null){return!e&&this.instance?this.instance:new xr(this,kO(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Hv(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){NO(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class AO{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ts.from(e.nodes),n.marks=ts.from(e.marks||{}),this.nodes=eE.compile(this.spec.nodes,this),this.marks=Hv.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=yh.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?tE(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:tE(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof eE){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Bx(r,r.defaultAttrs,e,xr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Td.fromJSON(this,e)}markFromJSON(e){return xr.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function tE(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function OG(t){return t.tag!=null}function LG(t){return t.style!=null}class jd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(OG(i))this.tags.push(i);else if(LG(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new rE(this,n,!1);return r.addAll(e,xr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new rE(this,n,!0);return r.addAll(e,xr.none,n.from,n.to),zt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(RG(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=iE(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=iE(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new jd(e,jd.schemaRules(e)))}}const TO={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},MG={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},jO={ol:!0,ul:!0},Ag=1,V5=2,ax=4;function nE(t,e,n){return e!=null?(e?Ag:0)|(e==="full"?V5:0):t&&t.whitespace=="pre"?Ag|V5:n&-5}class wy{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=xr.none,this.match=s||(o&ax?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pt.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ag)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=pt.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(pt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!TO.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class rE{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=nE(null,n.preserveWhitespace,0)|(r?ax:0);i?s=new wy(i.type,i.attrs,xr.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new wy(null,null,xr.none,!0,null,o):s=new wy(e.schema.topNodeType,null,xr.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&V5?"full":this.localPreserveWS||(i.options&Ag)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;jO.hasOwnProperty(o)&&this.parser.normalizeLists&&IG(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:MG.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(TO.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=o,!a.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=xr.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):sE(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=nE(e,s,o.options);o.options&ax&&o.content.length==0&&(a|=ax);let l=xr.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):sE(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new wy(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ag)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function IG(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&jO.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function RG(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function iE(t){let e={};for(let n in t)e[n]=t[n];return e}function sE(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Th{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=qw(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=lx(qw(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&lx(qw(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return lx(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Th(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=oE(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return oE(e.marks)}}function oE(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function qw(t){return t.document||window.document}const aE=new WeakMap;function FG(t){let e=aE.get(t);return e===void 0&&aE.set(t,e=zG(t)),e}function zG(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function lx(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=FG(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:y}=lx(t,h,n,r);if(l.appendChild(p),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const PO=65535,DO=Math.pow(2,16);function BG(t,e){return t+e*DO}function lE(t){return t&PO}function UG(t){return(t-(t&PO))/DO}const OO=1,LO=2,cx=4,MO=8;class H5{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&MO)>0}get deletedBefore(){return(this.delInfo&(OO|cx))>0}get deletedAfter(){return(this.delInfo&(LO|cx))>0}get deletedAcross(){return(this.delInfo&cx)>0}}class ea{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ea.empty)return ea.empty}recover(e){let n=0,r=lE(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+UG(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,p=l+i+(h<0?0:u);if(r)return p;let y=e==(n<0?l:d)?null:BG(a/3,e-l),x=e==l?LO:e==d?OO:cx;return(n<0?e!=l:e!=d)&&(x|=MO),new H5(p,x,y)}i+=u-c}return r?e+i:new H5(e+i,0,null)}touches(e,n){let r=0,i=lE(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new ea(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ea.empty:new ea(e<0?[0,-e,0]:[0,0,e])}}ea.empty=new ea([]);class Tg{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Tg(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Tg;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new H5(e,i,null)}}const Gw=Object.create(null);class zs{getMap(){return ea.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Gw[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Gw)throw new RangeError("Duplicate use of step JSON ID "+e);return Gw[e]=n,n.prototype.jsonID=e,n}}class yi{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new yi(e,null)}static fail(e){return new yi(null,e)}static fromReplace(e,n,r,i){try{return yi.ok(e.replace(n,r,i))}catch(s){if(s instanceof Rx)return yi.fail(s.message);throw s}}}function YS(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(YS(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return pt.fromArray(r)}class bd extends zs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new zt(YS(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return yi.fromReplace(e,this.from,this.to,s)}invert(){return new nc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new bd(n.pos,r.pos,this.mark)}merge(e){return e instanceof bd&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new bd(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new bd(n.from,n.to,e.markFromJSON(n.mark))}}zs.jsonID("addMark",bd);class nc extends zs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new zt(YS(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return yi.fromReplace(e,this.from,this.to,r)}invert(){return new bd(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new nc(n.pos,r.pos,this.mark)}merge(e){return e instanceof nc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new nc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new nc(n.from,n.to,e.markFromJSON(n.mark))}}zs.jsonID("removeMark",nc);class _d extends zs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return yi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return yi.fromReplace(e,this.pos,this.pos+1,new zt(pt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new _d(this.pos,n.marks[i]);return new _d(this.pos,this.mark)}}return new s0(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _d(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _d(n.pos,e.markFromJSON(n.mark))}}zs.jsonID("addNodeMark",_d);class s0 extends zs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return yi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return yi.fromReplace(e,this.pos,this.pos+1,new zt(pt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new _d(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new s0(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new s0(n.pos,e.markFromJSON(n.mark))}}zs.jsonID("removeNodeMark",s0);class Mi extends zs{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&q5(e,this.from,this.to)?yi.fail("Structure replace would overwrite content"):yi.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ea([this.from,this.to-this.from,this.slice.size])}invert(e){return new Mi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Mi(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Mi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?zt.empty:new zt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Mi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?zt.empty:new zt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Mi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Mi(n.from,n.to,zt.fromJSON(e,n.slice),!!n.structure)}}zs.jsonID("replace",Mi);class Ui extends zs{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(q5(e,this.from,this.gapFrom)||q5(e,this.gapTo,this.to)))return yi.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return yi.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?yi.fromReplace(e,this.from,this.to,r):yi.fail("Content does not fit in gap")}getMap(){return new ea([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ui(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ui(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ui(n.from,n.to,n.gapFrom,n.gapTo,zt.fromJSON(e,n.slice),n.insert,!!n.structure)}}zs.jsonID("replaceAround",Ui);function q5(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function $G(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),y=r.addToSet(d);for(let x=0;x<d.length;x++)d[x].isInSet(y)||(o&&o.to==h&&o.mark.eq(d[x])?o.to=p:i.push(o=new nc(h,p,d[x])));a&&a.to==h?a.to=p:s.push(a=new bd(h,p,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function WG(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Hv){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<i.length;p++){let y=i[p];y.step==s-1&&d.eq(i[p].style)&&(h=y)}h?(h.to=c,h.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new nc(o.from,o.to,o.style)))}function JS(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Mi(a,u,zt.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new nc(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,y;for(;h=p.exec(c.text);)y||(y=new zt(pt.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Mi(a+h.index,a+h.index+h[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(pt.empty,!0);t.replace(a,a,new zt(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function VG(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function A0(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!VG(i,s,o))break}return null}function HG(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=pt.empty,d=0;for(let y=s,x=!1;y>n;y--)x||r.index(y)>0?(x=!0,u=pt.from(r.node(y).copy(u)),d++):l--;let h=pt.empty,p=0;for(let y=s,x=!1;y>n;y--)x||i.after(y+1)<i.end(y)?(x=!0,h=pt.from(i.node(y).copy(h)),p++):c++;t.step(new Ui(l,c,o,a,new zt(u.append(h),d,p),u.size-d,!0))}function ZS(t,e,n=null,r=t){let i=qG(t,e),s=i&&GG(r,e);return s?i.map(cE).concat({type:e,attrs:n}).concat(s.map(cE)):null}function cE(t){return{type:t,attrs:null}}function qG(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function GG(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function KG(t,e,n){let r=pt.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pt.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Ui(i,s,i,s,new zt(r,0,0),n.length,!0))}function XG(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&YG(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!y?c=!1:!p&&y&&(c=!0)}c===!1&&RO(t,o,a,s),JS(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new Ui(d,h,d+1,h-1,new zt(pt.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&IO(t,o,a,s),!1}})}function IO(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function RO(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function YG(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function JG(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ui(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new zt(pt.from(o),0,0),1,!0))}function iu(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),y=r&&r[u+1];y&&(p=p.replaceChild(0,y.type.create(y.attrs)));let x=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!x.type.validContent(p))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function ZG(t,e,n=1,r){let i=t.doc.resolve(e),s=pt.empty,o=pt.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=pt.from(i.node(a).copy(s));let u=r&&r[c];o=pt.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Mi(e,e,new zt(s.append(o),n,n),!0))}function ef(t,e){let n=t.resolve(e),r=n.index();return FO(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function QG(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function FO(t,e){return!!(t&&e&&!t.isLeaf&&QG(t,e))}function qv(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&FO(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function eK(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);RO(t,u.node(),u.before(),a)}o.inlineContent&&JS(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Mi(c,l.map(e+n,-1),zt.empty,!0)),r===!0){let u=t.doc.resolve(c);IO(t,u.node(),u.before(),t.steps.length)}return t}function tK(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function zO(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Gv(t,e,n=e,r=zt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return BO(i,s,r)?new Mi(e,n,r):new nK(i,s,r).fit()}function BO(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class nK{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pt.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=pt.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new zt(s,o,a);return e>-1?new Ui(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Mi(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Kw(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(pt.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Kw(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new zt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Kw(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new zt(jm(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new zt(jm(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let x=0;x<s.length;x++)this.openFrontierNode(s[x]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let x=0;x<i.childCount;x++)u.push(i.child(x));d=d.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let x=a.child(c),v=d.matchType(x.type);if(!v)break;c++,(c>1||l==0||x.content.size)&&(d=v,u.push(UO(x.mark(h.allowedMarks(x.marks)),c==1?l:0,c==a.childCount?p:-1)))}let y=c==a.childCount;y||(p=-1),this.placed=Pm(this.placed,n,pt.from(u)),this.frontier[n].match=d,y&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,v=a;x<p;x++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=y?e==0?zt.empty:new zt(jm(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new zt(jm(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Xw(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Xw(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Xw(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Pm(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Pm(this.placed,this.depth,pt.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pt.empty,!0);n.childCount&&(this.placed=Pm(this.placed,this.frontier.length,n))}}function jm(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(jm(t.firstChild.content,e-1,n)))}function Pm(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Pm(t.lastChild.content,e-1,n)))}function Kw(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function UO(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,UO(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(pt.empty,!0)))),t.copy(r)}function Xw(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!rK(n,s.content,o)?a:null}function rK(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function iK(t){return t.spec.defining||t.spec.definingForContent}function sK(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(BO(i,s,r))return t.step(new Mi(e,n,r));let o=WO(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let y=i.node(h).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let y=h.firstChild;if(c.push(y),p==r.openStart)break;h=y.content}for(let h=u-1;h>=0;h--){let p=c[h],y=iK(p.type);if(y&&!p.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(y||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),y=c[p];if(y)for(let x=0;x<o.length;x++){let v=o[(x+l)%o.length],b=!0;v<0&&(b=!1,v=-v);let S=i.node(v-1),k=i.index(v-1);if(S.canReplaceWith(k,k,y.type,y.marks))return t.replace(i.before(v),b?s.after(v):n,new zt($O(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let p=o[h];p<0||(e=i.before(p),n=s.after(p))}}function $O(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy($O(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(pt.empty,!0))}return t}function oK(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=tK(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new zt(pt.from(r),0,0))}function aK(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=WO(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function WO(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Kp extends zs{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return yi.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return yi.fromReplace(e,this.pos,this.pos+1,new zt(pt.from(i),0,n.isLeaf?0:1))}getMap(){return ea.empty}invert(e){return new Kp(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Kp(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Kp(n.pos,n.attr,n.value)}}zs.jsonID("attr",Kp);class jg extends zs{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return yi.ok(r)}getMap(){return ea.empty}invert(e){return new jg(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new jg(n.attr,n.value)}}zs.jsonID("docAttr",jg);let o0=class extends Error{};o0=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};o0.prototype=Object.create(Error.prototype);o0.prototype.constructor=o0;o0.prototype.name="TransformError";class lK{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Tg}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new o0(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=zt.empty){let i=Gv(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new zt(pt.from(r),0,0))}delete(e,n){return this.replace(e,n,zt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return sK(this,e,n,r),this}replaceRangeWith(e,n,r){return oK(this,e,n,r),this}deleteRange(e,n){return aK(this,e,n),this}lift(e,n){return HG(this,e,n),this}join(e,n=1){return eK(this,e,n),this}wrap(e,n){return KG(this,e,n),this}setBlockType(e,n=e,r,i=null){return XG(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return JG(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Kp(e,n,r)),this}setDocAttribute(e,n){return this.step(new jg(e,n)),this}addNodeMark(e,n){return this.step(new _d(e,n)),this}removeNodeMark(e,n){if(!(n instanceof xr)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new s0(e,n)),this}split(e,n=1,r){return ZG(this,e,n,r),this}addMark(e,n,r){return $G(this,e,n,r),this}removeMark(e,n,r){return WG(this,e,n,r),this}clearIncompatible(e,n,r){return JS(this,e,n,r),this}}const Yw=Object.create(null);class kn{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new cK(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=zt.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?zt.empty:n),a==0&&fE(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),fE(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new wn(e):Dp(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Dp(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Dp(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new sa(e.node(0))}static atStart(e){return Dp(e,e,0,0,1)||new sa(e)}static atEnd(e){return Dp(e,e,e.content.size,e.childCount,-1)||new sa(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Yw[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Yw)throw new RangeError("Duplicate use of selection JSON ID "+e);return Yw[e]=n,n.prototype.jsonID=e,n}getBookmark(){return wn.between(this.$anchor,this.$head).getBookmark()}}kn.prototype.visible=!0;class cK{constructor(e,n){this.$from=e,this.$to=n}}let uE=!1;function dE(t){!uE&&!t.parent.inlineContent&&(uE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class wn extends kn{constructor(e,n=e){dE(e),dE(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return kn.near(r);let i=e.resolve(n.map(this.anchor));return new wn(i.parent.inlineContent?i:r,r)}replace(e,n=zt.empty){if(super.replace(e,n),n==zt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof wn&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Kv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new wn(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=kn.findFrom(n,r,!0)||kn.findFrom(n,-r,!0);if(s)n=s.$head;else return kn.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(kn.findFrom(e,-r,!0)||kn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new wn(e,n)}}kn.jsonID("text",wn);class Kv{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Kv(e.map(this.anchor),e.map(this.head))}resolve(e){return wn.between(e.resolve(this.anchor),e.resolve(this.head))}}class rn extends kn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?kn.near(s):new rn(s)}content(){return new zt(pt.from(this.node),0,0)}eq(e){return e instanceof rn&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new QS(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new rn(e.resolve(n.anchor))}static create(e,n){return new rn(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}rn.prototype.visible=!1;kn.jsonID("node",rn);class QS{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Kv(r,r):new QS(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&rn.isSelectable(r)?new rn(n):kn.near(n)}}class sa extends kn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=zt.empty){if(n==zt.empty){e.delete(0,e.doc.content.size);let r=kn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new sa(e)}map(e){return new sa(e)}eq(e){return e instanceof sa}getBookmark(){return uK}}kn.jsonID("all",sa);const uK={map(){return this},resolve(t){return new sa(t)}};function Dp(t,e,n,r,i,s=!1){if(e.inlineContent)return wn.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&rn.isSelectable(a))return rn.create(t,n-(i<0?a.nodeSize:0))}else{let l=Dp(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function fE(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Mi||i instanceof Ui))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(kn.near(t.doc.resolve(o),n))}const hE=1,pE=2,mE=4;class dK extends lK{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|hE)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&hE)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=pE,this}ensureMarks(e){return xr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&pE)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||xr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(kn.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=mE,this}get scrolledIntoView(){return(this.updated&mE)>0}}function gE(t,e){return!e||!t?t:t.bind(e)}class Dm{constructor(e,n,r){this.name=e,this.init=gE(n.init,r),this.apply=gE(n.apply,r)}}const fK=[new Dm("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Dm("selection",{init(t,e){return t.selection||kn.atStart(e.doc)},apply(t){return t.selection}}),new Dm("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Dm("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Jw{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=fK.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Dm(r.key,r.spec.state,r))})}}class $p{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $p(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new dK(this)}static create(e){let n=new Jw(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $p(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Jw(this.schema,e.plugins),r=n.fields,i=new $p(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Jw(e.schema,e.plugins),s=new $p(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Td.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=kn.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function VO(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=VO(i,e,{})),n[r]=i}return n}class oo{constructor(e){this.spec=e,this.props={},e.props&&VO(e.props,this,this.props),this.key=e.key?e.key.key:HO("plugin")}getState(e){return e[this.key]}}const Zw=Object.create(null);function HO(t){return t in Zw?t+"$"+ ++Zw[t]:(Zw[t]=0,t+"$")}class Nl{constructor(e="key"){this.key=HO(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const is=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},a0=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let G5=null;const Jc=function(t,e,n){let r=G5||(G5=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},hK=function(){G5=null},xh=function(t,e,n,r){return n&&(yE(t,e,n,r,-1)||yE(t,e,n,r,1))},pK=/^(img|br|input|textarea|hr)$/i;function yE(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ra(t))){let s=t.parentNode;if(!s||s.nodeType!=1||p1(t)||pK.test(t.nodeName)||t.contentEditable=="false")return!1;e=is(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Ra(t):0}else return!1}}function Ra(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function mK(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ra(t)}else if(t.parentNode&&!p1(t))e=is(t),t=t.parentNode;else return null}}function gK(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!p1(t))e=is(t)+1,t=t.parentNode;else return null}}function yK(t,e,n){for(let r=e==0,i=e==Ra(t);r||i;){if(t==n)return!0;let s=is(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Ra(t)}}function p1(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Xv=function(t){return t.focusNode&&xh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Kf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function xK(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function vK(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ra(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ra(r.startContainer),r.startOffset)}}}const hc=typeof navigator<"u"?navigator:null,xE=typeof document<"u"?document:null,tf=hc&&hc.userAgent||"",K5=/Edge\/(\d+)/.exec(tf),qO=/MSIE \d/.exec(tf),X5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tf),Eo=!!(qO||X5||K5),Pd=qO?document.documentMode:X5?+X5[1]:K5?+K5[1]:0,Sl=!Eo&&/gecko\/(\d+)/i.test(tf);Sl&&+(/Firefox\/(\d+)/.exec(tf)||[0,0])[1];const Y5=!Eo&&/Chrome\/(\d+)/.exec(tf),Ls=!!Y5,GO=Y5?+Y5[1]:0,to=!Eo&&!!hc&&/Apple Computer/.test(hc.vendor),l0=to&&(/Mobile\/\w+/.test(tf)||!!hc&&hc.maxTouchPoints>2),Ia=l0||(hc?/Mac/.test(hc.platform):!1),wK=hc?/Win/.test(hc.platform):!1,tu=/Android \d/.test(tf),m1=!!xE&&"webkitFontSmoothing"in xE.documentElement.style,bK=m1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function _K(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Hc(t,e){return typeof t=="number"?t:t[e]}function SK(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function vE(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=a0(o);continue}let a=o,l=a==s.body,c=l?_K(s):SK(a),u=0,d=0;if(e.top<c.top+Hc(r,"top")?d=-(c.top-e.top+Hc(i,"top")):e.bottom>c.bottom-Hc(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Hc(i,"top")-c.top:e.bottom-c.bottom+Hc(i,"bottom")),e.left<c.left+Hc(r,"left")?u=-(c.left-e.left+Hc(i,"left")):e.right>c.right-Hc(r,"right")&&(u=e.right-c.right+Hc(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,y=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let x=a.scrollLeft-p,v=a.scrollTop-y;e={left:e.left-x,top:e.top-v,right:e.right-x,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:a0(o)}}function kK(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:KO(t.dom)}}function KO(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=a0(r));return e}function NK({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;XO(n,r==0?0:r-e)}function XO(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Sp=null;function CK(t){if(t.setActive)return t.setActive();if(Sp)return t.focus(Sp);let e=KO(t);t.focus(Sp==null?{get preventScroll(){return Sp={preventScroll:!0},!0}}:void 0),Sp||(Sp=!1,XO(e,0))}function YO(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Jc(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let y=h[p];if(y.top<=o&&y.bottom>=a){o=Math.max(y.bottom,o),a=Math.min(y.top,a);let x=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(x<r){n=u,r=x,i=x&&n.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,u.nodeType==1&&x&&(s=d+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!l&&y.left<=e.left&&y.right>=e.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!n&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?EK(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:YO(n,i)}function EK(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ud(r,1);if(s.top!=s.bottom&&e4(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function e4(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function AK(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function TK(t,e,n){let{node:r,offset:i}=YO(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function jK(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function JO(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(e4(e,c))return JO(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function PK(t,e){let n=t.dom.ownerDocument,r,i=0,s=vK(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!e4(e,c)||(o=JO(t.dom,e,c),!o))return null}if(to)for(let c=o;r&&c;c=a0(c))c.draggable&&(r=void 0);if(o=AK(o,e),r){if(Sl&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;m1&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=jK(t,r,i,e))}a==null&&(a=TK(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function wE(t){return t.top<t.bottom||t.left<t.right}function ud(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(wE(r))return r}return Array.prototype.find.call(n,wE)||t.getBoundingClientRect()}const DK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ZO(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=m1||Sl;if(r.nodeType==3)if(o&&(DK.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=ud(Jc(r,i,i),n);if(Sl&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ud(Jc(r,i-1,i-1),-1);if(c.top==l.top){let u=ud(Jc(r,i,i+1),-1);if(u.top!=l.top)return hm(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,hm(ud(Jc(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Ra(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Qw(l.getBoundingClientRect(),!1)}if(s==null&&i<Ra(r)){let l=r.childNodes[i];if(l.nodeType==1)return Qw(l.getBoundingClientRect(),!0)}return Qw(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Ra(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Jc(l,Ra(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return hm(ud(c,1),!1)}if(s==null&&i<Ra(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Jc(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return hm(ud(c,-1),!0)}return hm(ud(r.nodeType==3?Jc(r):r,-n),n>=0)}function hm(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Qw(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function QO(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function OK(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return QO(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=ZO(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Jc(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const LK=/[\u0590-\u08ac]/;function MK(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!LK.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:QO(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:y,focusOffset:x}=t.domSelectionRange(),v=y&&!p.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==x;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let bE=null,_E=null,SE=!1;function IK(t,e,n){return bE==e&&_E==n?SE:(bE=e,_E=n,SE=n=="up"||n=="down"?OK(t,e,n):MK(t,e,n))}const Ua=0,kE=1,Zf=2,pc=3;class g1{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ua,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>is(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof tL){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof eL&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?is(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?is(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=is(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=is(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let p=0,y=0;p<this.children.length;p++){let x=this.children[p],v=y+x.size;if(s>y&&o<v)return x.setSelection(e-y-x.border,n-y-x.border,r,i);y=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Sl||to)&&e==n){let{node:p,offset:y}=a;if(p.nodeType==3){if(d=!!(y&&p.nodeValue[y-1]==`
`),d&&y==p.nodeValue.length)for(let x=p,v;x;x=x.parentNode){if(v=x.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:is(v)+1});break}let b=x.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let x=p.childNodes[y-1];d=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Sl&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&to)&&xh(a.node,a.offset,u.anchorNode,u.anchorOffset)&&xh(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let y=a;a=l,l=y}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Zf:kE,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=pc:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Zf:pc}r=o}this.dirty=Zf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Zf:kE;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class eL extends g1{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ua&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class RK extends g1{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class vh extends g1{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Th.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new vh(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&pc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=pc&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ua){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ua}}slice(e,n,r){let i=vh.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Z5(s,n,o,r)),e>0&&(s=Z5(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Dd extends g1{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Th.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=iL(u,r,n),c?l=new FK(e,n,r,i,u,d||null,h,c,s,o+1):n.isText?new Yv(e,n,r,i,u,h,s):new Dd(e,n,r,i,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>pt.empty)}return e}matchesNode(e,n,r){return this.dirty==Ua&&e.eq(this.node)&&Ux(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new BK(this,o&&o.node,e);WK(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?xr.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Zf)&&(o&&this.protectLocalComposition(e,o),nL(this.contentDOM,this.children,e),l0&&VK(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof wn)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=HK(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new RK(this,s,n,i);e.input.compositionNodes.push(o),this.children=Z5(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==pc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ua}updateOuterDeco(e){if(Ux(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=rL(this.dom,this.nodeDOM,J5(this.outerDeco,this.node,n),J5(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function NE(t,e,n,r,i){iL(r,e,t);let s=new Dd(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Yv extends Dd{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==pc||this.dirty!=Ua&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ua||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ua,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Yv(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=pc)}get domAtom(){return!1}isText(e){return this.node.text==e}}class tL extends g1{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ua&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class FK extends Dd{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==pc)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function nL(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=CE(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof vh){let l=r?r.previousSibling:t.lastChild;nL(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=CE(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Xm=function(t){t&&(this.nodeName=t)};Xm.prototype=Object.create(null);const Qf=[new Xm];function J5(t,e,n){if(t.length==0)return Qf;let r=n?Qf[0]:new Xm,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Xm(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Xm(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function rL(t,e,n,r){if(n==Qf&&r==Qf)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Qf[0]),i=l}zK(i,a||Qf[0],o)}return i}function zK(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function iL(t,e,n){return rL(t,t,Qf,J5(e,n,t.nodeType!=1))}function Ux(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function CE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class BK{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=UK(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ua,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=vh.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==pc&&o.dom==o.contentDOM&&(o.dirty=Zf),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Dd){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=pc&&Ux(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Zf,d.updateChildren(i,o+1),d.dirty=Ua),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ux(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Dd.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Dd.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new eL(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof vh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Yv)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((to||Ls)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new tL(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function UK(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof vh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function $K(t,e){return t.type.side-e.type.side}function WK(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort($K);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<t.childCount)p=c,h=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let y=s+h.nodeSize;if(h.isText){let v=y;o<i.length&&i[o].from<v&&(v=i[o].from);for(let b=0;b<a.length;b++)a[b].to<v&&(v=a[b].to);v<y&&(l=h.cut(v-s),h=h.cut(0,v-s),y=v,p=-1)}else for(;o<i.length&&i[o].to<y;)o++;let x=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,x,e.forChild(s,h),p),s=y}}function VK(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function HK(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Z5(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function t4(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Xv(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&rn.isSelectable(d)&&i.parent&&!(d.isInline&&yK(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new rn(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let p=0;p<n.rangeCount;p++){let y=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(y.startContainer,y.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=n4(t,u,a,d)}return c}function sL(t){return t.editable?t.hasFocus():aL(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function su(t,e=!1){let n=t.state.selection;if(oL(t,n),!!sL(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ls){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&xh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)GK(t);else{let{anchor:r,head:i}=n,s,o;EE&&!(n instanceof wn)&&(n.$from.parent.inlineContent||(s=AE(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=AE(t,n.to))),t.docView.setSelection(r,i,t,e),EE&&(s&&TE(s),o&&TE(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&qK(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const EE=to||Ls&&GO<63;function AE(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(to&&i&&i.contentEditable=="false")return eb(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return eb(i);if(s)return eb(s)}}function eb(t){return t.contentEditable="true",to&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function TE(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function qK(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!sL(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function GK(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,is(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Eo&&Pd<=11&&(r.disabled=!0,r.disabled=!1)}function oL(t,e){if(e instanceof rn){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(jE(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else jE(t)}function jE(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function n4(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||wn.between(e,n,r)}function PE(t){return t.editable&&!t.hasFocus()?!1:aL(t)}function aL(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function KK(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return xh(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Q5(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&kn.findFrom(s,e)}function pd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function DE(t,e,n){let r=t.state.selection;if(r instanceof wn)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return pd(t,new wn(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Q5(t.state,e);return i&&i instanceof rn?pd(t,i):!1}else if(!(Ia&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?rn.isSelectable(s)?pd(t,new rn(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):m1?pd(t,new wn(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof rn&&r.node.isInline)return pd(t,new wn(e>0?r.$to:r.$from));{let i=Q5(t.state,e);return i?pd(t,i):!1}}}function $x(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ym(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function kp(t,e){return e<0?XK(t):YK(t)}function XK(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Sl&&n.nodeType==1&&r<$x(n)&&Ym(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Ym(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(lL(n))break;{let a=n.previousSibling;for(;a&&Ym(a,-1);)i=n.parentNode,s=is(a),a=a.previousSibling;if(a)n=a,r=$x(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?e_(t,n,r):i&&e_(t,i,s)}function YK(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=$x(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Ym(a,1))s=n,o=++r;else break}else{if(lL(n))break;{let a=n.nextSibling;for(;a&&Ym(a,1);)s=a.parentNode,o=is(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=$x(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&e_(t,s,o)}function lL(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function JK(t,e){for(;t&&e==t.childNodes.length&&!p1(t);)e=is(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function ZK(t,e){for(;t&&!e&&!p1(t);)e=is(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function e_(t,e,n){if(e.nodeType!=3){let s,o;(o=JK(e,n))?(e=o,n=0):(s=ZK(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Xv(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&su(t)},50)}function OE(t,e){let n=t.state.doc.resolve(e);if(!(Ls||wK)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function LE(t,e,n){let r=t.state.selection;if(r instanceof wn&&!r.empty||n.indexOf("s")>-1||Ia&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Q5(t.state,e);if(o&&o instanceof rn)return pd(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof sa?kn.near(o,e):kn.findFrom(o,e);return a?pd(t,a):!1}return!1}function ME(t,e){if(!(t.state.selection instanceof wn))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function IE(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function QK(t){if(!to||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;IE(t,r,"true"),setTimeout(()=>IE(t,r,"false"),20)}return!1}function eX(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function tX(t,e){let n=e.keyCode,r=eX(e);if(n==8||Ia&&n==72&&r=="c")return ME(t,-1)||kp(t,-1);if(n==46&&!e.shiftKey||Ia&&n==68&&r=="c")return ME(t,1)||kp(t,1);if(n==13||n==27)return!0;if(n==37||Ia&&n==66&&r=="c"){let i=n==37?OE(t,t.state.selection.from)=="ltr"?-1:1:-1;return DE(t,i,r)||kp(t,i)}else if(n==39||Ia&&n==70&&r=="c"){let i=n==39?OE(t,t.state.selection.from)=="ltr"?1:-1:1;return DE(t,i,r)||kp(t,i)}else{if(n==38||Ia&&n==80&&r=="c")return LE(t,-1,r)||kp(t,-1);if(n==40||Ia&&n==78&&r=="c")return QK(t)||LE(t,1,r)||kp(t,1);if(r==(Ia?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function r4(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||Th.fromSchema(t.state.schema),a=pL(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=hL[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let y=a.createElement(u[p]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function cL(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new zt(pt.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):zt.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:p}=t.state,y=Th.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let v=o.appendChild(document.createElement("p"));x&&v.appendChild(y.serializeNode(p.text(x,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=sX(n),m1&&oX(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||jd.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!nX.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=aX(RE(a,+u[1],+u[2]),u[4]);else if(a=zt.maxOpen(rX(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=RE(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const nX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rX(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&dL(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=fL(o[o.length-1],s.length));let u=uL(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return pt.from(o)}return t}function uL(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,pt.from(t));return t}function dL(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=dL(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(pt.from(uL(n,t,i+1))))}}function fL(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,fL(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(pt.empty,!0);return t.copy(n.append(r))}function t_(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=t_(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(pt.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function RE(t,e,n){return e<t.openStart&&(t=new zt(t_(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new zt(t_(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const hL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let FE=null;function pL(){return FE||(FE=document.implementation.createHTMLDocument("title"))}let tb=null;function iX(t){let e=window.trustedTypes;return e?(tb||(tb=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),tb.createHTML(t)):t}function sX(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=pL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&hL[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=iX(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function oX(t){let e=t.querySelectorAll(Ls?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function aX(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=pt.from(l.create(r[a+1],i)),s++,o++}return new zt(i,s,o)}const no={},ro={},lX={touchstart:!0,touchmove:!0};class cX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function uX(t){for(let e in no){let n=no[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{fX(t,r)&&!i4(t,r)&&(t.editable||!(r.type in ro))&&n(t,r)},lX[e]?{passive:!0}:void 0)}to&&t.dom.addEventListener("input",()=>null),n_(t)}function Sd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function dX(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function n_(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>i4(t,r))})}function i4(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function fX(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function hX(t,e){!i4(t,e)&&no[e.type]&&(t.editable||!(e.type in ro))&&no[e.type](t,e)}ro.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!gL(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(tu&&Ls&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),l0&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Kf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||tX(t,n)?n.preventDefault():Sd(t,"key")};ro.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ro.keypress=(t,e)=>{let n=e;if(gL(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ia&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof wn)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Jv(t){return{left:t.clientX,top:t.clientY}}function pX(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function s4(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Xp(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function mX(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&rn.isSelectable(r)?(Xp(t,new rn(n)),!0):!1}function gX(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof rn&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(rn.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Xp(t,rn.create(t.state.doc,i)),!0):!1}function yX(t,e,n,r,i){return s4(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?gX(t,n):mX(t,n))}function xX(t,e,n,r){return s4(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function vX(t,e,n,r){return s4(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||wX(t,n,r)}function wX(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Xp(t,wn.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Xp(t,wn.create(r,a+1,a+1+o.content.size));else if(rn.isSelectable(o))Xp(t,rn.create(r,a));else continue;return!0}}function o4(t){return Wx(t)}const mL=Ia?"metaKey":"ctrlKey";no.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=o4(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&pX(n,t.input.lastClick)&&!n[mL]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Jv(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new bX(t,o,n,!!r)):(s=="doubleClick"?xX:vX)(t,o.pos,o.inside,n)?n.preventDefault():Sd(t,"pointer"))};class bX{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[mL],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof rn&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Sl&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Sd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>su(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Jv(e))),this.updateAllowDefault(e),this.allowDefault||!n?Sd(this.view,"pointer"):yX(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||to&&this.mightDrag&&!this.mightDrag.node.isAtom||Ls&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Xp(this.view,kn.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Sd(this.view,"pointer")}move(e){this.updateAllowDefault(e),Sd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}no.touchstart=t=>{t.input.lastTouch=Date.now(),o4(t),Sd(t,"pointer")};no.touchmove=t=>{t.input.lastTouch=Date.now(),Sd(t,"pointer")};no.contextmenu=t=>o4(t);function gL(t,e){return t.composing?!0:to&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const _X=tu?5e3:-1;ro.compositionstart=ro.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof wn&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Wx(t,!0),t.markCursor=null;else if(Wx(t,!e.selection.empty),Sl&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}yL(t,_X)};ro.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,yL(t,20))};function yL(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Wx(t),e))}function xL(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=kX());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function SX(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=mK(e.focusNode,e.focusOffset),r=gK(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function kX(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Wx(t,e=!1){if(!(tu&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),xL(t),e||t.docView&&t.docView.dirty){let n=t4(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function NX(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Pg=Eo&&Pd<15||l0&&bK<604;no.copy=ro.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Pg?null:n.clipboardData,o=r.content(),{dom:a,text:l}=r4(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):NX(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function CX(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function EX(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Dg(t,r.value,null,i,e):Dg(t,r.textContent,r.innerHTML,i,e)},50)}function Dg(t,e,n,r,i){let s=cL(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||zt.empty)))return!0;if(!s)return!1;let o=CX(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function vL(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ro.paste=(t,e)=>{let n=e;if(t.composing&&!tu)return;let r=Pg?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Dg(t,vL(r),r.getData("text/html"),i,n)?n.preventDefault():EX(t,n)};class wL{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const bL=Ia?"altKey":"ctrlKey";no.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Jv(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof rn?i.to-1:i.to))){if(r&&r.mightDrag)o=rn.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=rn.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=r4(t,a);(!n.dataTransfer.files.length||!Ls||GO>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Pg?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Pg||n.dataTransfer.setData("text/plain",c),t.dragging=new wL(u,!n[bL],o)};no.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ro.dragover=ro.dragenter=(t,e)=>e.preventDefault();ro.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Jv(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",y=>{o=y(o,t)}):o=cL(t,vL(n.dataTransfer),Pg?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[bL]);if(t.someProp("handleDrop",y=>y(t,n,o||zt.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?zO(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&rn.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new rn(p));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((x,v,b,S)=>y=S),c.setSelection(n4(t,p,c.doc.resolve(y)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};no.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&su(t)},20))};no.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};no.beforeinput=(t,e)=>{if(Ls&&tu&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Kf(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in ro)no[t]=ro[t];function Og(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Vx{constructor(e,n){this.toDOM=e,this.spec=n||lh,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new na(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Vx&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Og(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Od{constructor(e,n){this.attrs=e,this.spec=n||lh}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new na(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Od&&Og(this.attrs,e.attrs)&&Og(this.spec,e.spec)}static is(e){return e.type instanceof Od}destroy(){}}class a4{constructor(e,n){this.attrs=e,this.spec=n||lh}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new na(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof a4&&Og(this.attrs,e.attrs)&&Og(this.spec,e.spec)}destroy(){}}class na{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new na(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new na(e,e,new Vx(n,r))}static inline(e,n,r,i){return new na(e,n,new Od(r,i))}static node(e,n,r,i){return new na(e,n,new a4(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Od}get widget(){return this.type instanceof Vx}}const Op=[],lh={};class gi{constructor(e,n){this.local=e.length?e:Op,this.children=n.length?n:Op}static create(e,n){return n.length?Hx(n,e,0,lh):Ps}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Ps||e.maps.length==0?this:this.mapInner(e,n,0,0,r||lh)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?AX(this.children,o||[],e,n,r,i,s):o?new gi(o.sort(ch),Op):Ps}add(e,n){return n.length?this==Ps?gi.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=SL(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Hx(u,a,c+1,lh)),s+=3}});let o=_L(s?kL(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new gi(o.length?this.local.concat(o).sort(ch):this.local,i||this.children)}remove(e){return e.length==0||this==Ps?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Ps?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new gi(i,r):Ps}forChild(e,n){if(this==Ps)return this;if(n.isLeaf)return gi.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Od){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new gi(i.sort(ch),Op);return r?new yd([a,r]):a}return r||Ps}eq(e){if(this==e)return!0;if(!(e instanceof gi)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return l4(this.localsInner(e))}localsInner(e){if(this==Ps)return Op;if(e.inlineContent||!this.local.some(Od.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Od||n.push(this.local[r]);return n}forEachSet(e){e(this)}}gi.empty=new gi([],[]);gi.removeOverlap=l4;const Ps=gi.empty;class yd{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,lh));return yd.from(r)}forChild(e,n){if(n.isLeaf)return gi.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Ps&&(s instanceof yd?r=r.concat(s.members):r.push(s))}return yd.from(r)}eq(e){if(!(e instanceof yd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?l4(r?n:n.sort(ch)):Op}static from(e){switch(e.length){case 0:return Ps;case 1:return e[0];default:return new yd(e.every(n=>n instanceof gi)?e:e.reduce((n,r)=>n.concat(r instanceof gi?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function AX(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,p,y,x)=>{let v=x-y-(p-h);for(let b=0;b<a.length;b+=3){let S=a[b+1];if(S<0||h>S+u-d)continue;let k=a[b]+u-d;p>=k?a[b+1]=h<=k?-2:-1:h>=u&&v&&(a[b]+=v,a[b+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),p=h-i,{index:y,offset:x}=r.content.findIndex(d),v=r.maybeChild(y);if(v&&x==d&&x+v.nodeSize==p){let b=a[c+2].mapInner(n,v,u+1,t[c]+s+1,o);b!=Ps?(a[c]=d,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=TX(a,t,e,n,i,s,o),u=Hx(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new gi(e.sort(ch),a)}function _L(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new na(i.from+e,i.to+e,i.type))}return n}function TX(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function SL(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function kL(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hx(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=SL(t,a,l+n);if(c){s=!0;let u=Hx(c,a,n+l+1,r);u!=Ps&&i.push(l,l+a.nodeSize,u)}});let o=_L(s?kL(t):t,-n).sort(ch);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new gi(o,i):Ps}function ch(t,e){return t.from-e.from||t.to-e.to}function l4(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),zE(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),zE(e,i,r.copy(s.from,r.to)));break}}}return e}function zE(t,e,n){for(;e<t.length&&ch(n,t[e])>0;)e++;t.splice(e,0,n)}function nb(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ps&&e.push(r)}),t.cursorWrapper&&e.push(gi.create(t.state.doc,[t.cursorWrapper.deco])),yd.from(e)}const jX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},PX=Eo&&Pd<=11;class DX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class OX{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new DX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Eo&&Pd<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),PX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,jX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(PE(this.view)){if(this.suppressingSelectionUpdates)return su(this.view);if(Eo&&Pd<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&xh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=a0(s))n.add(s);for(let s=e.anchorNode;s;s=a0(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&PE(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Sl&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||IX(e,d)!=p)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Xv(r)&&(c=t4(e))&&c.eq(kn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,su(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),LX(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||su(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Eo&&Pd<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?is(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?is(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let BE=new WeakMap,UE=!1;function LX(t){if(!BE.has(t)&&(BE.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Sl,UE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),UE=!0}}function $E(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return xh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function MX(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return $E(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?$E(t,n):null}function IX(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function RX(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Xv(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ls&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let b=r.childNodes[v-1],S=b.pmViewDesc;if(b.nodeName=="BR"&&!S){s=v;break}if(!S||S.size)break}let d=t.state.doc,h=t.someProp("domParser")||jd.fromSchema(t.state.schema),p=d.resolve(o),y=null,x=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:FX,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=v),y={anchor:v+o,head:b+o}}return{doc:x,sel:y,from:o,to:a}}function FX(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(to&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||to&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const zX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function BX(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=t4(t,O);if(z&&!t.state.selection.eq(z)){if(Ls&&tu&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",M=>M(t,Kf(13,"Enter"))))return;let L=t.state.tr.setSelection(z);O=="pointer"?L.setMeta("pointer",!0):O=="key"&&L.scrollIntoView(),s&&L.setMeta("composition",s),t.dispatch(L)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=RX(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let y=WX(d.content,c.doc.content,c.from,h,p);if(y&&t.input.domChangeCount++,(l0&&t.input.lastIOSEnter>Date.now()-225||tu)&&i.some(O=>O.nodeType==1&&!zX.test(O.nodeName))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",O=>O(t,Kf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof wn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=WE(t,t.state.doc,c.sel);if(O&&!O.eq(t.state.selection)){let z=t.state.tr.setSelection(O);s&&z.setMeta("composition",s),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof wn&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),Eo&&Pd<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)=="  "&&(y.start--,y.endA--,y.endB--);let x=c.doc.resolveNoCache(y.start-c.from),v=c.doc.resolveNoCache(y.endB-c.from),b=u.resolve(y.start),S=x.sameParent(v)&&x.parent.inlineContent&&b.end()>=y.endA,k;if((l0&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!S&&x.pos<c.doc.content.size&&!x.sameParent(v)&&(k=kn.findFrom(c.doc.resolve(x.pos+1),1,!0))&&k.head==v.pos)&&t.someProp("handleKeyDown",O=>O(t,Kf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>y.start&&$X(u,y.start,y.endA,x,v)&&t.someProp("handleKeyDown",O=>O(t,Kf(8,"Backspace")))){tu&&Ls&&t.domObserver.suppressSelectionUpdates();return}Ls&&y.endB==y.start&&(t.input.lastChromeDelete=Date.now()),tu&&!S&&x.start()!=v.start()&&v.parentOffset==0&&x.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,v=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,Kf(13,"Enter"))})},20));let T=y.start,j=y.endA,P,C,N;if(S){if(x.pos==v.pos)Eo&&Pd<=11&&x.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>su(t),20)),P=t.state.tr.delete(T,j),C=u.resolve(y.start).marksAcross(u.resolve(y.endA));else if(y.endA==y.endB&&(N=UX(x.parent.content.cut(x.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,y.endA-b.start()))))P=t.state.tr,N.type=="add"?P.addMark(T,j,N.mark):P.removeMark(T,j,N.mark);else if(x.parent.child(x.index()).isText&&x.index()==v.index()-(v.textOffset?0:1)){let O=x.parent.textBetween(x.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",z=>z(t,T,j,O)))return;P=t.state.tr.insertText(O,T,j)}}if(P||(P=t.state.tr.replace(T,j,c.doc.slice(y.start-c.from,y.endB-c.from))),c.sel){let O=WE(t,P.doc,c.sel);O&&!(Ls&&t.composing&&O.empty&&(y.start!=y.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==T||O.head==P.mapping.map(j)-1)||Eo&&O.empty&&O.head==T)&&P.setSelection(O)}C&&P.ensureMarks(C),s&&P.setMeta("composition",s),t.dispatch(P.scrollIntoView())}function WE(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:n4(t,e.resolve(n.anchor),e.resolve(n.head))}function UX(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(pt.from(c).eq(t))return{mark:a,type:o}}function $X(t,e,n,r,i){if(n-e<=i.pos-r.pos||rb(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(rb(s,!0,!0));return!o.parent.isTextblock||o.pos>n||rb(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function rb(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function WX(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&VE(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&VE(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function VE(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class VX{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new cX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(XE),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=GE(this),qE(this),this.nodeViews=KE(this),this.docView=NE(this.state.doc,HE(this),nb(this),this.dom,this),this.domObserver=new OX(this,(r,i,s,o)=>BX(this,r,i,s,o)),this.domObserver.start(),uX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&n_(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(XE),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(xL(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=KE(this);qX(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&n_(this),this.editable=GE(this),qE(this);let l=nb(this),c=HE(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&kK(this);if(o){this.domObserver.stop();let p=d&&(Eo||Ls)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&HX(i.selection,e.selection);if(d){let y=Ls?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=SX(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=NE(e.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&KK(this))?su(this,p):(oL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&NK(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof rn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&vE(this,n.getBoundingClientRect(),e)}else vE(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new wL(e.slice,e.move,i<0?void 0:rn.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Eo){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&CK(this.dom),su(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return PK(this,e)}coordsAtPos(e,n=1){return ZO(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return IK(this,n||this.state,e)}pasteHTML(e,n){return Dg(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Dg(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return r4(this,e)}destroy(){this.docView&&(dX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],nb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,hK())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return hX(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?to&&this.root.nodeType===11&&xK(this.dom.ownerDocument)==this.dom&&MX(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function HE(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[na.node(0,t.state.doc.content.size,e)]}function qE(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:na.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function GE(t){return!t.someProp("editable",e=>e(t.state)===!1)}function HX(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function KE(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function qX(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function XE(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Wd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},GX=typeof navigator<"u"&&/Mac/.test(navigator.platform),KX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ss=0;ss<10;ss++)Wd[48+ss]=Wd[96+ss]=String(ss);for(var ss=1;ss<=24;ss++)Wd[ss+111]="F"+ss;for(var ss=65;ss<=90;ss++)Wd[ss]=String.fromCharCode(ss+32),qx[ss]=String.fromCharCode(ss);for(var ib in Wd)qx.hasOwnProperty(ib)||(qx[ib]=Wd[ib]);function XX(t){var e=GX&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||KX&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?qx:Wd)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const YX=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function JX(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))YX?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function ZX(t){let e=Object.create(null);for(let n in t)e[JX(n)]=t[n];return e}function sb(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function QX(t){return new oo({props:{handleKeyDown:NL(t)}})}function NL(t){let e=ZX(t);return function(n,r){let i=XX(r),s,o=e[sb(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[sb(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Wd[r.keyCode])&&s!=i){let a=e[sb(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const c4=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CL(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const EL=(t,e,n)=>{let r=CL(t,n);if(!r)return!1;let i=u4(r);if(!i){let o=r.blockRange(),a=o&&A0(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(IL(t,i,e,-1))return!0;if(r.parent.content.size==0&&(c0(s,"end")||rn.isSelectable(s)))for(let o=r.depth;;o--){let a=Gv(t.doc,r.before(o),r.after(o),zt.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(c0(s,"end")?kn.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):rn.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},eY=(t,e,n)=>{let r=CL(t,n);if(!r)return!1;let i=u4(r);return i?AL(t,i,e):!1},tY=(t,e,n)=>{let r=jL(t,n);if(!r)return!1;let i=d4(r);return i?AL(t,i,e):!1};function AL(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Gv(t.doc,s,l,zt.empty);if(!c||c.from!=s||c instanceof Mi&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(wn.create(u.doc,s)),n(u.scrollIntoView())}return!0}function c0(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const TL=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=u4(r)}let o=s&&s.nodeBefore;return!o||!rn.isSelectable(o)?!1:(e&&e(t.tr.setSelection(rn.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function u4(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function jL(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const PL=(t,e,n)=>{let r=jL(t,n);if(!r)return!1;let i=d4(r);if(!i)return!1;let s=i.nodeAfter;if(IL(t,i,e,1))return!0;if(r.parent.content.size==0&&(c0(s,"start")||rn.isSelectable(s))){let o=Gv(t.doc,r.before(),r.after(),zt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(c0(s,"start")?kn.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):rn.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},DL=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=d4(r)}let o=s&&s.nodeAfter;return!o||!rn.isSelectable(o)?!1:(e&&e(t.tr.setSelection(rn.create(t.doc,s.pos)).scrollIntoView()),!0)};function d4(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const nY=(t,e)=>{let n=t.selection,r=n instanceof rn,i;if(r){if(n.node.isTextblock||!ef(t.doc,n.from))return!1;i=n.from}else if(i=qv(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(rn.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},rY=(t,e)=>{let n=t.selection,r;if(n instanceof rn){if(n.node.isTextblock||!ef(t.doc,n.to))return!1;r=n.to}else if(r=qv(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},iY=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&A0(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},OL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function f4(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const sY=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=f4(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(kn.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},LL=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof sa||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=f4(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(wn.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},ML=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(iu(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&A0(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function oY(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof rn&&e.selection.node.isBlock)return!r.parentOffset||!iu(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=f4(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof wn||e.selection instanceof sa)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=iu(u.doc,d,s.length,s);if(h||(s[0]=a?{type:a}:null,h=iu(u.doc,d,s.length,s)),u.split(d,s.length,s),!l&&c&&r.node(o).type!=a){let p=u.mapping.map(r.before(o)),y=u.doc.resolve(p);a&&r.node(o-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const aY=oY(),lY=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(rn.create(t.doc,i))),!0)};function cY(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ef(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function IL(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&cY(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,y=pt.empty;for(let b=o.length-1;b>=0;b--)y=pt.from(o[b].create(null,y));y=pt.from(i.copy(y));let x=t.tr.step(new Ui(e.pos-1,p,e.pos,p,new zt(y,1,0),o.length,!0)),v=x.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&ef(x.doc,v.pos)&&x.join(v.pos),n(x.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:kn.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&A0(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&c0(s,"start",!0)&&c0(i,"end")){let p=i,y=[];for(;y.push(p),!p.isTextblock;)p=p.lastChild;let x=s,v=1;for(;!x.isTextblock;x=x.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,x.content)){if(n){let b=pt.empty;for(let k=y.length-1;k>=0;k--)b=pt.from(y[k].copy(b));let S=t.tr.step(new Ui(e.pos-y.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new zt(b,y.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function RL(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(wn.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const uY=RL(-1),dY=RL(1);function fY(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&ZS(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function YE(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function h4(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}h4(c4,EL,TL);h4(c4,PL,DL);h4(OL,LL,ML,aY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function hY(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return pY(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function pY(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new zx(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new zx(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=ZS(s,n,r,e);return a?(t&&mY(t,e,a,i,n),!0):!1}function mY(t,e,n,r,i){let s=pt.empty;for(let u=n.length-1;u>=0;u--)s=pt.from(n[u].type.create(n[u].attrs,s));t.step(new Ui(e.start-(r?2:0),e.end,e.start,e.end,new zt(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&iu(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function gY(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?yY(e,n,t,s):xY(e,n,s):!0:!1}}function yY(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ui(s-1,o,s,o,new zt(pt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new zx(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=A0(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ef(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function xY(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,y=n.endIndex-1,x=n.startIndex;y>x;y--)p-=i.child(y).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?pt.empty:pt.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new Ui(d-(a?1:0),h+(l?1:0),d+1,h-1,new zt((a?pt.empty:pt.from(i.copy(pt.empty))).append(l?pt.empty:pt.from(i.copy(pt.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function vY(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=pt.from(c?t.create():null),d=new zt(pt.from(t.create(null,pt.from(a.type.create(null,u)))),c?3:1,0),h=s.start,p=s.end;n(e.tr.step(new Ui(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}function Zv(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Qv{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...x)=>{const v=this.buildProps(c,n),b=p(...x)(v);return a.push(b),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Zv({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class wY{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Gt(t,e,n){return t.config[e]===void 0&&t.parent?Gt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Gt(t.parent,e,n):null}):t.config[e]}function e2(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function FL(t){const e=[],{nodeExtensions:n,markExtensions:r}=e2(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Gt(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:d,name:h,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Gt(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Hi(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function io(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function r_(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>io(n,r),{})}function zL(t){return typeof t=="function"}function Pn(t,e=void 0,...n){return zL(t)?e?t.bind(e)(...n):t(...n):t}function bY(t={}){return Object.keys(t).length===0&&t.constructor===Object}function _Y(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function JE(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):_Y(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function ZE(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&bY(n)?!1:n!=null))}function SY(t,e){var n;const r=FL(t),{nodeExtensions:i,markExtensions:s}=e2(t),o=(n=i.find(c=>Gt(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,S)=>{const k=Gt(S,"extendNodeSchema",d);return{...b,...k?k(c):{}}},{}),p=ZE({...h,content:Pn(Gt(c,"content",d)),marks:Pn(Gt(c,"marks",d)),group:Pn(Gt(c,"group",d)),inline:Pn(Gt(c,"inline",d)),atom:Pn(Gt(c,"atom",d)),selectable:Pn(Gt(c,"selectable",d)),draggable:Pn(Gt(c,"draggable",d)),code:Pn(Gt(c,"code",d)),whitespace:Pn(Gt(c,"whitespace",d)),linebreakReplacement:Pn(Gt(c,"linebreakReplacement",d)),defining:Pn(Gt(c,"defining",d)),isolating:Pn(Gt(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var S;return[b.name,{default:(S=b==null?void 0:b.attribute)===null||S===void 0?void 0:S.default}]}))}),y=Pn(Gt(c,"parseHTML",d));y&&(p.parseDOM=y.map(b=>JE(b,u)));const x=Gt(c,"renderHTML",d);x&&(p.toDOM=b=>x({node:b,HTMLAttributes:r_(b,u)}));const v=Gt(c,"renderText",d);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,b)=>{const S=Gt(b,"extendMarkSchema",d);return{...v,...S?S(c):{}}},{}),p=ZE({...h,inclusive:Pn(Gt(c,"inclusive",d)),excludes:Pn(Gt(c,"excludes",d)),group:Pn(Gt(c,"group",d)),spanning:Pn(Gt(c,"spanning",d)),code:Pn(Gt(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),y=Pn(Gt(c,"parseHTML",d));y&&(p.parseDOM=y.map(v=>JE(v,u)));const x=Gt(c,"renderHTML",d);return x&&(p.toDOM=v=>x({mark:v,HTMLAttributes:r_(v,u)})),[c.name,p]}));return new AO({topNode:o,nodes:a,marks:l})}function ob(t,e){return e.nodes[t]||e.marks[t]||null}function QE(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function p4(t,e){const n=Th.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const kY=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function m4(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class t2{constructor(e){this.find=e.find,this.handler=e.handler}}const NY=(t,e)=>{if(m4(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function by(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=kY(c)+s;return o.forEach(h=>{if(u)return;const p=NY(d,h.find);if(!p)return;const y=l.state.tr,x=Zv({state:l.state,transaction:y}),v={from:r-(p[0].length-s.length),to:i},{commands:b,chain:S,can:k}=new Qv({editor:n,state:x});h.handler({state:x,range:v,match:p,commands:b,chain:S,can:k})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:r,to:i,text:s}),l.dispatch(y),u=!0)}),u}function CY(t){const{editor:e,rules:n}=t,r=new oo({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=p4(pt.from(u),o.schema);const{from:d}=l,h=d+u.length;by({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return by({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&by({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?by({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function EY(t){return Object.prototype.toString.call(t).slice(8,-1)}function _y(t){return EY(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function n2(t,e){const n={...t};return _y(t)&&_y(e)&&Object.keys(e).forEach(r=>{_y(e[r])&&_y(t[r])?n[r]=n2(t[r],e[r]):n[r]=e[r]}),n}class Vd{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pn(Gt(this,"addOptions",{name:this.name}))),this.storage=Pn(Gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Vd(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>n2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Vd(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Pn(Gt(n,"addOptions",{name:n.name})),n.storage=Pn(Gt(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function AY(t){return typeof t=="number"}class TY{constructor(e){this.find=e.find,this.handler=e.handler}}const jY=(t,e,n)=>{if(m4(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function PY(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Qv({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,y)=>{if(!p.isTextblock||p.type.spec.code)return;const x=Math.max(r,y),v=Math.min(i,y+p.content.size),b=p.textBetween(x-y,v-y,void 0,"￼");jY(b,s.find,o).forEach(k=>{if(k.index===void 0)return;const T=x+k.index+1,j=T+k[0].length,P={from:n.tr.mapping.map(T),to:n.tr.mapping.map(j)},C=s.handler({state:n,range:P,match:k,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(C)})}),d.every(p=>p!==null)}let Sy=null;const DY=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function OY(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:p,pasteEvt:y})=>{const x=u.tr,v=Zv({state:u,transaction:x});if(!(!PY({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:p,pasteEvent:y,dropEvent:a})||!x.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return n.map(u=>new oo({view(d){const h=y=>{var x;r=!((x=d.dom.parentElement)===null||x===void 0)&&x.contains(y.target)?d.dom.parentElement:null,r&&(Sy=e)},p=()=>{Sy&&(Sy=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const p=Sy;p&&setTimeout(()=>{const y=p.state.selection;y&&p.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(d,h)=>{var p;const y=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=h,i=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,p)=>{const y=d[0],x=y.getMeta("uiEvent")==="paste"&&!i,v=y.getMeta("uiEvent")==="drop"&&!s,b=y.getMeta("applyPasteRules"),S=!!b;if(!x&&!v&&!S)return;if(S){let{text:j}=b;typeof j=="string"?j=j:j=p4(pt.from(j),p.schema);const{from:P}=b,C=P+j.length,N=DY(j);return l({rule:u,state:p,from:P,to:{b:C},pasteEvt:N})}const k=h.doc.content.findDiffStart(p.doc.content),T=h.doc.content.findDiffEnd(p.doc.content);if(!(!AY(k)||!T||k===T.b))return l({rule:u,state:p,from:k,to:T,pasteEvt:o})}}))}function LY(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Wp{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Wp.resolve(e),this.schema=SY(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Wp.sort(Wp.flatten(e)),r=LY(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Gt(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Gt(r,"priority")||100,o=Gt(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ob(n.name,this.schema)},i=Gt(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Wp.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ob(o.name,this.schema)},l=[],c=Gt(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&Gt(o,"exitable",a)&&(u.ArrowRight=()=>Vd.handleExit({editor:e,mark:o})),c){const x=Object.fromEntries(Object.entries(c()).map(([v,b])=>[v,()=>b({editor:e})]));u={...u,...x}}const d=QX(u);l.push(d);const h=Gt(o,"addInputRules",a);QE(o,e.options.enableInputRules)&&h&&r.push(...h());const p=Gt(o,"addPasteRules",a);QE(o,e.options.enablePasteRules)&&p&&i.push(...p());const y=Gt(o,"addProseMirrorPlugins",a);if(y){const x=y();l.push(...x)}return l}).flat();return[CY({editor:e,rules:r}),...OY({editor:e,rules:i}),...s]}get attributes(){return FL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=e2(this.extensions);return Object.fromEntries(n.filter(r=>!!Gt(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Hi(r.name,this.schema)},o=Gt(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,h)=>{const p=r_(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ob(e.name,this.schema)};e.type==="mark"&&(!((n=Pn(Gt(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=Gt(e,"onBeforeCreate",r),s=Gt(e,"onCreate",r),o=Gt(e,"onUpdate",r),a=Gt(e,"onSelectionUpdate",r),l=Gt(e,"onTransaction",r),c=Gt(e,"onFocus",r),u=Gt(e,"onBlur",r),d=Gt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Fs{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pn(Gt(this,"addOptions",{name:this.name}))),this.storage=Pn(Gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fs(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>n2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Fs({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Pn(Gt(n,"addOptions",{name:n.name})),n.storage=Pn(Gt(n,"addStorage",{name:n.name,options:n.options})),n}}function BL(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function UL(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const MY=Fs.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new oo({key:new Nl("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=UL(n);return BL(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),IY=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),RY=(t=!1)=>({commands:e})=>e.setContent("",t),FY=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const y=A0(p);if(a.type.isTextblock){const{defaultType:x}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,x)}(y||y===0)&&e.lift(p,y)})}),!0},zY=t=>e=>t(e),BY=()=>({state:t,dispatch:e})=>LL(t,e),UY=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new wn(r.doc.resolve(o-1))),!0},$Y=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},WY=t=>({tr:e,state:n,dispatch:r})=>{const i=Hi(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},VY=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},HY=()=>({state:t,dispatch:e})=>c4(t,e),qY=()=>({commands:t})=>t.keyboardShortcut("Enter"),GY=()=>({state:t,dispatch:e})=>sY(t,e);function Gx(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:m4(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function $L(t,e,n={}){return t.find(r=>r.type===e&&Gx(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function eA(t,e,n={}){return!!$L(t,e,n)}function g4(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!$L([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&eA([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&eA([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function nf(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const KY=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=nf(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=g4(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=wn.create(o,d.from,d.to);n.setSelection(h)}}return!0},XY=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function WL(t){return t instanceof wn}function eh(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function VL(t,e=null){if(!e)return null;const n=kn.atStart(t),r=kn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?wn.create(t,eh(0,i,s),eh(t.content.size,i,s)):wn.create(t,eh(e,i,s),eh(e,i,s))}function YY(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function y4(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const JY=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(y4()||YY())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!WL(n.state.selection))return o(),!0;const a=VL(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},ZY=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),QY=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),HL=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&HL(r)}return t};function ky(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return HL(n)}function Kx(t,e,n){if(t instanceof Td||t instanceof pt)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return pt.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Kx("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new AO({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?jd.fromSchema(l).parseSlice(ky(t),n.parseOptions):jd.fromSchema(l).parse(ky(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=jd.fromSchema(e);return n.slice?s.parseSlice(ky(t),n.parseOptions).content:s.parse(ky(t),n.parseOptions)}return Kx("",e,n)}function eJ(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Mi||i instanceof Ui))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(kn.near(t.doc.resolve(o),n))}const tJ=t=>!("type"in t),nJ=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Kx(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(y){return s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((tJ(a)?a:[a]).forEach(y=>{y.check(),u=u?y.isText&&y.marks.length===0:!1,d=d?y.isBlock:!1}),l===c&&d){const{parent:y}=r.doc.resolve(l);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(y=>y.text||"").join("");else if(e instanceof pt){let y="";e.forEach(x=>{x.text&&(y+=x.text)}),p=y}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);n.updateSelection&&eJ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},rJ=()=>({state:t,dispatch:e})=>nY(t,e),iJ=()=>({state:t,dispatch:e})=>rY(t,e),sJ=()=>({state:t,dispatch:e})=>EL(t,e),oJ=()=>({state:t,dispatch:e})=>PL(t,e),aJ=()=>({state:t,dispatch:e,tr:n})=>{try{const r=qv(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},lJ=()=>({state:t,dispatch:e,tr:n})=>{try{const r=qv(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},cJ=()=>({state:t,dispatch:e})=>eY(t,e),uJ=()=>({state:t,dispatch:e})=>tY(t,e);function qL(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dJ(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))y4()||qL()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const fJ=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=dJ(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Lg(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Hi(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const p=Math.max(r,h),y=Math.min(i,h+d.nodeSize);a.push({node:d,from:p,to:y})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Gx(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const hJ=(t,e={})=>({state:n,dispatch:r})=>{const i=Hi(t,n.schema);return Lg(n,i,e)?iY(n,r):!1},pJ=()=>({state:t,dispatch:e})=>ML(t,e),mJ=t=>({state:e,dispatch:n})=>{const r=Hi(t,e.schema);return gY(r)(e,n)},gJ=()=>({state:t,dispatch:e})=>OL(t,e);function r2(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function tA(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const yJ=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=r2(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Hi(t,r.schema)),a==="mark"&&(o=nf(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,tA(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(tA(d.attrs,e)))})})}),!0):!1},xJ=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),vJ=()=>({tr:t,dispatch:e})=>{if(e){const n=new sa(t.doc);t.setSelection(n)}return!0},wJ=()=>({state:t,dispatch:e})=>TL(t,e),bJ=()=>({state:t,dispatch:e})=>DL(t,e),_J=()=>({state:t,dispatch:e})=>lY(t,e),SJ=()=>({state:t,dispatch:e})=>dY(t,e),kJ=()=>({state:t,dispatch:e})=>uY(t,e);function i_(t,e,n={},r={}){return Kx(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const NJ=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=i_(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function GL(t,e){const n=nf(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function CJ(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function EJ(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function x4(t){return e=>EJ(e.$from,t)}function AJ(t,e){const n={from:0,to:t.content.size};return BL(t,n,e)}function TJ(t,e){const n=Hi(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function jJ(t,e){const n=r2(typeof e=="string"?e:e.name,t.schema);return n==="node"?TJ(t,e):n==="mark"?GL(t,e):{}}function KL(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=g4(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function ux(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function s_(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?nf(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Gx(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const p=d.pos,y=h.pos;t.doc.nodesBetween(p,y,(x,v)=>{if(!x.isText&&!x.marks.length)return;const b=Math.max(p,v),S=Math.min(y,v+x.nodeSize),k=S-b;o+=k,a.push(...x.marks.map(T=>({mark:T,from:b,to:S})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Gx(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function PJ(t,e,n={}){if(!e)return Lg(t,null,n)||s_(t,null,n);const r=r2(e,t.schema);return r==="node"?Lg(t,e,n):r==="mark"?s_(t,e,n):!1}function nA(t,e){const{nodeExtensions:n}=e2(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Pn(Gt(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function i2(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(i2(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function DJ(t){return t instanceof rn}function OJ(t,e,n){var r;const{selection:i}=e;let s=null;if(WL(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(x=>x.type.excludes(n));c=p&&y}return!c}),c})}const LJ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=nf(t,r.schema);if(i)if(o){const c=GL(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{const y=Math.max(p,u),x=Math.min(p+h.nodeSize,d);h.marks.find(b=>b.type===l)?h.marks.forEach(b=>{l===b.type&&n.addMark(y,x,l.create({...b.attrs,...e}))}):n.addMark(y,x,l.create(e))})});return OJ(r,n,l)},MJ=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),IJ=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Hi(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>YE(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>YE(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},RJ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=eh(t,0,r.content.size),s=rn.create(r,i);e.setSelection(s)}return!0},FJ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=wn.atStart(r).from,a=wn.atEnd(r).to,l=eh(i,o,a),c=eh(s,o,a),u=wn.create(r,l,c);e.setSelection(u)}return!0},zJ=t=>({state:e,dispatch:n})=>{const r=Hi(t,e.schema);return vY(r)(e,n)};function rA(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const BJ=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=ux(c,a.node().type.name,a.node().attrs);if(s instanceof rn&&s.node.isBlock)return!a.parentOffset||!iu(o,a.pos)?!1:(r&&(t&&rA(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:CJ(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,y=iu(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!y&&iu(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(y=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(y&&(s instanceof wn&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const x=e.mapping.map(a.before()),v=e.doc.resolve(x);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&rA(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return y},UJ=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Hi(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let b=pt.empty;const S=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-S;N>=l.depth-3;N-=1)b=pt.from(l.node(N).copy(b));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,T={...ux(h,l.node().type.name,l.node().attrs),...e},j=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(T))||void 0;b=b.append(pt.from(a.createAndFill(null,j)||void 0));const P=l.before(l.depth-(S-1));n.replace(P,l.after(-k),new zt(b,4-S,0));let C=-1;n.doc.nodesBetween(P,n.doc.content.size,(N,O)=>{if(C>-1)return!1;N.isTextblock&&N.content.size===0&&(C=O+1)}),C>-1&&n.setSelection(wn.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,y={...ux(h,d.type.name,d.attrs),...e},x={...ux(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=p?[{type:a,attrs:y},{type:p,attrs:x}]:[{type:a,attrs:y}];if(!iu(n.doc,l.pos,2))return!1;if(i){const{selection:b,storedMarks:S}=r,{splittableMarks:k}=s.extensionManager,T=S||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!T||!i)return!0;const j=T.filter(P=>k.includes(P.type.name));n.ensureMarks(j)}return!0},ab=(t,e)=>{const n=x4(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ef(t.doc,n.pos)&&t.join(n.pos),!0},lb=(t,e)=>{const n=x4(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ef(t.doc,r)&&t.join(r),!0},$J=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,p=Hi(t,o.schema),y=Hi(e,o.schema),{selection:x,storedMarks:v}=o,{$from:b,$to:S}=x,k=b.blockRange(S),T=v||x.$to.parentOffset&&x.$from.marks();if(!k)return!1;const j=x4(P=>nA(P.type.name,d))(x);if(k.depth>=1&&j&&k.depth-j.depth<=1){if(j.node.type===p)return c.liftListItem(y);if(nA(j.node.type.name,d)&&p.validContent(j.node.content)&&a)return l().command(()=>(s.setNodeMarkup(j.pos,p),!0)).command(()=>ab(s,p)).command(()=>lb(s,p)).run()}return!n||!T||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>ab(s,p)).command(()=>lb(s,p)).run():l().command(()=>{const P=u().wrapInList(p,r),C=T.filter(N=>h.includes(N.type.name));return s.ensureMarks(C),P?!0:c.clearNodes()}).wrapInList(p,r).command(()=>ab(s,p)).command(()=>lb(s,p)).run()},WJ=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=nf(t,r.schema);return s_(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},VJ=(t,e,n={})=>({state:r,commands:i})=>{const s=Hi(t,r.schema),o=Hi(e,r.schema),a=Lg(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},HJ=(t,e={})=>({state:n,commands:r})=>{const i=Hi(t,n.schema);return Lg(n,i,e)?r.lift(i):r.wrapIn(i,e)},qJ=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},GJ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},KJ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=nf(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:p}=a;const y=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,x=g4(c,l,y);x&&(h=x.from,p=x.to),n.removeMark(h,p,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},XJ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=r2(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Hi(t,r.schema)),a==="mark"&&(o=nf(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,p,y;n.selection.empty?r.doc.nodesBetween(c,u,(x,v)=>{s&&s===x.type&&(p=Math.max(v,c),y=Math.min(v+x.nodeSize,u),d=v,h=x)}):r.doc.nodesBetween(c,u,(x,v)=>{v<c&&s&&s===x.type&&(p=Math.max(v,c),y=Math.min(v+x.nodeSize,u),d=v,h=x),v>=c&&v<=u&&(s&&s===x.type&&n.setNodeMarkup(v,void 0,{...x.attrs,...e}),o&&x.marks.length&&x.marks.forEach(b=>{if(o===b.type){const S=Math.max(v,c),k=Math.min(v+x.nodeSize,u);n.addMark(S,k,o.create({...b.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(x=>{o===x.type&&n.addMark(p,y,o.create({...x.attrs,...e}))}))}),!0):!1},YJ=(t,e={})=>({state:n,dispatch:r})=>{const i=Hi(t,n.schema);return fY(i,e)(n,r)},JJ=(t,e={})=>({state:n,dispatch:r})=>{const i=Hi(t,n.schema);return hY(i,e)(n,r)};var ZJ=Object.freeze({__proto__:null,blur:IY,clearContent:RY,clearNodes:FY,command:zY,createParagraphNear:BY,cut:UY,deleteCurrentNode:$Y,deleteNode:WY,deleteRange:VY,deleteSelection:HY,enter:qY,exitCode:GY,extendMarkRange:KY,first:XY,focus:JY,forEach:ZY,insertContent:QY,insertContentAt:nJ,joinBackward:sJ,joinDown:iJ,joinForward:oJ,joinItemBackward:aJ,joinItemForward:lJ,joinTextblockBackward:cJ,joinTextblockForward:uJ,joinUp:rJ,keyboardShortcut:fJ,lift:hJ,liftEmptyBlock:pJ,liftListItem:mJ,newlineInCode:gJ,resetAttributes:yJ,scrollIntoView:xJ,selectAll:vJ,selectNodeBackward:wJ,selectNodeForward:bJ,selectParentNode:_J,selectTextblockEnd:SJ,selectTextblockStart:kJ,setContent:NJ,setMark:LJ,setMeta:MJ,setNode:IJ,setNodeSelection:RJ,setTextSelection:FJ,sinkListItem:zJ,splitBlock:BJ,splitListItem:UJ,toggleList:$J,toggleMark:WJ,toggleNode:VJ,toggleWrap:HJ,undoInputRule:qJ,unsetAllMarks:GJ,unsetMark:KJ,updateAttributes:XJ,wrapIn:YJ,wrapInList:JJ});const QJ=Fs.create({name:"commands",addCommands(){return{...ZJ}}}),eZ=Fs.create({name:"drop",addProseMirrorPlugins(){return[new oo({key:new Nl("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),tZ=Fs.create({name:"editable",addProseMirrorPlugins(){return[new oo({key:new Nl("editable"),props:{editable:()=>this.editor.options.editable}})]}}),nZ=Fs.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new oo({key:new Nl("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),rZ=Fs.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:p}=d,y=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,x=y.parent.type.spec.isolating,v=d.pos-d.parentOffset,b=x&&y.parent.childCount===1?v===d.pos:kn.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return y4()||qL()?s:i},addProseMirrorPlugins(){return[new oo({key:new Nl("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(x=>x.getMeta("composition")))return;const r=t.some(x=>x.docChanged)&&!e.doc.eq(n.doc),i=t.some(x=>x.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=kn.atStart(e.doc).from,c=kn.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!i2(n.doc))return;const h=n.tr,p=Zv({state:n,transaction:h}),{commands:y}=new Qv({editor:this.editor,state:p});if(y.clearNodes(),!!h.steps.length)return h}})]}}),iZ=Fs.create({name:"paste",addProseMirrorPlugins(){return[new oo({key:new Nl("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),sZ=Fs.create({name:"tabindex",addProseMirrorPlugins(){return[new oo({key:new Nl("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Xf{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Xf(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Xf(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Xf(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Xf(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Xf(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const oZ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function aZ(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class lZ extends wY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=aZ(oZ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=zL(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=n.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[tZ,MY.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),QJ,nZ,rZ,sZ,eZ,iZ].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Wp(i,this)}createCommandManager(){this.commandManager=new Qv({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=i_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=i_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=VL(n,this.options.autofocus);this.view=new VX(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:$p.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return jJ(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return PJ(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return p4(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return AJ(this.state.doc,{blockSeparator:n,textSerializers:{...UL(this.schema),...r}})}get isEmpty(){return i2(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Xf(n,this)}get $doc(){return this.$pos(0)}}function u0(t){return new t2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Pn(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(KL(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(x=>x===t.type&&x!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function cZ(t){return new t2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Pn(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function o_(t){return new t2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Pn(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Mg(t){return new t2({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Pn(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&ZS(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,y=h||d.$to.parentOffset&&d.$from.marks();if(y){const x=y.filter(v=>p.includes(v.type.name));o.ensureMarks(x)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&ef(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class To{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pn(Gt(this,"addOptions",{name:this.name}))),this.storage=Pn(Gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new To(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>n2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new To(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Pn(Gt(n,"addOptions",{name:n.name})),n.storage=Pn(Gt(n,"addStorage",{name:n.name,options:n.options})),n}}function d0(t){return new TY({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Pn(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(KL(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(v=>v===t.type&&v!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function uZ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XL={exports:{}},cb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA;function dZ(){if(iA)return cb;iA=1;var t=Mt;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var p=h(),y=r({inst:{value:p,getSnapshot:h}}),x=y[0].inst,v=y[1];return s(function(){x.value=p,x.getSnapshot=h,l(x)&&v({inst:x})},[d,p,h]),i(function(){return l(x)&&v({inst:x}),d(function(){l(x)&&v({inst:x})})},[d]),o(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return cb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,cb}XL.exports=dZ();var v4=XL.exports;const fZ=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},hZ=({contentComponent:t})=>{const e=v4.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Mt.createElement(Mt.Fragment,null,Object.values(e))};function pZ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:jP.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class mZ extends Mt.Component{constructor(e){var n;super(e),this.editorContentRef=Mt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=pZ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Mt.createElement(Mt.Fragment,null,Mt.createElement("div",{ref:fZ(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Mt.createElement(hZ,{contentComponent:e.contentComponent}))}}const gZ=Y.forwardRef((t,e)=>{const n=Mt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Mt.createElement(mZ,{key:n,innerRef:e,...t})}),yZ=Mt.memo(gZ);var xZ=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},vZ=uZ(xZ),YL={exports:{}},ub={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function wZ(){if(sA)return ub;sA=1;var t=Mt,e=v4;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return ub.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=a(function(){function b(P){if(!S){if(S=!0,k=P,P=h(P),p!==void 0&&x.hasValue){var C=x.value;if(p(C,P))return T=C}return T=P}if(C=T,r(k,P))return C;var N=h(P);return p!==void 0&&p(C,N)?C:(k=P,T=N)}var S=!1,k,T,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,h,p]);var v=i(c,y[0],y[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),l(v),v},ub}YL.exports=wZ();var bZ=YL.exports;const _Z=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;class SZ{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function kZ(t){var e;const[n]=Y.useState(()=>new SZ(t.editor)),r=bZ.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:vZ);return _Z(()=>n.watch(t.editor),[t.editor,n]),Y.useDebugValue(r),r}const NZ=!1,a_=typeof window>"u",CZ=a_||!!(typeof window<"u"&&window.next);class w4{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?a_||CZ?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new lZ(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?w4.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function EZ(t={},e=[]){const n=Y.useRef(t);n.current=t;const[r]=Y.useState(()=>new w4(n)),i=v4.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return Y.useDebugValue(i),Y.useEffect(r.onRender(e)),kZ({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const AZ=Y.createContext({editor:null});AZ.Consumer;const TZ=Y.createContext({onDragStart:void 0}),jZ=()=>Y.useContext(TZ);Mt.forwardRef((t,e)=>{const{onDragStart:n}=jZ(),r=t.as||"div";return Mt.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const PZ=/^\s*>\s$/,DZ=To.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",io(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Mg({find:PZ,type:this.type})]}}),OZ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,LZ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,MZ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,IZ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,RZ=Vd.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",io(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[u0({find:OZ,type:this.type}),u0({find:MZ,type:this.type})]},addPasteRules(){return[d0({find:LZ,type:this.type}),d0({find:IZ,type:this.type})]}}),FZ="listItem",oA="textStyle",aA=/^\s*([-+*])\s$/,zZ=To.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",io(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(FZ,this.editor.getAttributes(oA)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Mg({find:aA,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Mg({find:aA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(oA),editor:this.editor})),[t]}}),BZ=/(^|[^`])`([^`]+)`(?!`)/,UZ=/(^|[^`])`([^`]+)`(?!`)/g,$Z=Vd.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",io(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[u0({find:BZ,type:this.type})]},addPasteRules(){return[d0({find:UZ,type:this.type})]}}),WZ=/^```([a-z]+)?[\s\n]$/,VZ=/^~~~([a-z]+)?[\s\n]$/,HZ=To.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",io(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(kn.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[o_({find:WZ,type:this.type,getAttributes:t=>({language:t[1]})}),o_({find:VZ,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new oo({key:new Nl("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(wn.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),qZ=To.create({name:"doc",topNode:!0,content:"block+"});function GZ(t={}){return new oo({view(e){return new KZ(e,t)}})}class KZ{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=zO(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const XZ=Fs.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[GZ(this.options)]}});class Zr extends kn{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Zr.valid(r)?new Zr(r):kn.near(r)}content(){return zt.empty}eq(e){return e instanceof Zr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Zr(e.resolve(n.pos))}getBookmark(){return new b4(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!YZ(e)||!JZ(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Zr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Zr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!rn.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Zr.valid(a))return a}return null}}}Zr.prototype.visible=!1;Zr.findFrom=Zr.findGapCursorFrom;kn.jsonID("gapcursor",Zr);class b4{constructor(e){this.pos=e}map(e){return new b4(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Zr.valid(n)?new Zr(n):kn.near(n)}}function YZ(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function JZ(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function ZZ(){return new oo({props:{decorations:nQ,createSelectionBetween(t,e,n){return e.pos==n.pos&&Zr.valid(n)?new Zr(n):null},handleClick:eQ,handleKeyDown:QZ,handleDOMEvents:{beforeinput:tQ}}})}const QZ=NL({ArrowLeft:Ny("horiz",-1),ArrowRight:Ny("horiz",1),ArrowUp:Ny("vert",-1),ArrowDown:Ny("vert",1)});function Ny(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof wn){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Zr.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Zr(c))),!0):!1}}function eQ(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Zr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&rn.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Zr(r))),!0)}function tQ(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Zr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=pt.empty;for(let o=r.length-1;o>=0;o--)i=pt.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new zt(i,0,0));return s.setSelection(wn.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function nQ(t){if(!(t.selection instanceof Zr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",gi.create(t.doc,[na.widget(t.selection.head,e,{key:"gapcursor"})])}const rQ=Fs.create({name:"gapCursor",addProseMirrorPlugins(){return[ZZ()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Pn(Gt(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),iQ=To.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",io(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),sQ=To.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,io(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>o_({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Xx=200,$i=function(){};$i.prototype.append=function(e){return e.length?(e=$i.from(e),!this.length&&e||e.length<Xx&&this.leafAppend(e)||this.length<Xx&&e.leafPrepend(this)||this.appendInner(e)):this};$i.prototype.prepend=function(e){return e.length?$i.from(e).append(this):this};$i.prototype.appendInner=function(e){return new oQ(this,e)};$i.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?$i.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};$i.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};$i.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};$i.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};$i.from=function(e){return e instanceof $i?e:e&&e.length?new JL(e):$i.empty};var JL=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Xx)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Xx)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}($i);$i.empty=new JL([]);var oQ=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}($i);const aQ=500;class gl{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Ql(d.map));let p=d.step.map(i.slice(s)),y;p&&o.maybeStep(p).doc&&(y=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ql(y,void 0,void 0,c.length+u.length))),s--,y&&i.appendMap(y,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new gl(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Ql(e.mapping.maps[u],d,n),p;(p=l&&l.merge(h))&&(h=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>cQ&&(a=lQ(a,c),o-=c),new gl(a.append(s),o)}remapping(e,n){let r=new Tg;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new gl(this.items.append(e.map(n=>new Ql(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let y=s.maps[p];if(h.step){let x=e.steps[p].invert(e.docs[p]),v=h.selection&&h.selection.map(s.slice(l+1,p));v&&a++,r.push(new Ql(y,x,v))}else r.push(new Ql(y))},i);let c=[];for(let h=n;h<o;h++)c.push(new Ql(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new gl(u,a);return d.emptyItemCount()>aQ&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Ql(c.invert(),l,u),h,p=i.length-1;(h=i.length&&i[p].merge(d))?i[p]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new gl($i.from(i.reverse()),s)}}gl.empty=new gl($i.empty,0);function lQ(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ql{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ql(n.getMap().invert(),n,this.selection)}}}class md{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const cQ=20;function uQ(t,e,n,r){let i=n.getMeta(uh),s;if(i)return i.historyState;n.getMeta(hQ)&&(t=new md(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(uh))return o.getMeta(uh).redo?new md(t.done.addTransform(n,void 0,r,dx(e)),t.undone,lA(n.mapping.maps),t.prevTime,t.prevComposition):new md(t.done,t.undone.addTransform(n,void 0,r,dx(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!dQ(n,t.prevRanges)),c=o?db(t.prevRanges,n.mapping):lA(n.mapping.maps);return new md(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,dx(e)),gl.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new md(t.done.rebased(n,s),t.undone.rebased(n,s),db(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new md(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),db(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function dQ(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function lA(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function db(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function fQ(t,e,n){let r=dx(e),i=uh.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new md(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(uh,{redo:n,historyState:l})}let fb=!1,cA=null;function dx(t){let e=t.plugins;if(cA!=e){fb=!1,cA=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){fb=!0;break}}return fb}const uh=new Nl("history"),hQ=new Nl("closeHistory");function pQ(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new oo({key:uh,state:{init(){return new md(gl.empty,gl.empty,null,0,-1)},apply(e,n,r){return uQ(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?QL:r=="historyRedo"?e8:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function ZL(t,e){return(n,r)=>{let i=uh.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=fQ(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const QL=ZL(!1,!0),e8=ZL(!0,!0),mQ=Fs.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>QL(t,e),redo:()=>({state:t,dispatch:e})=>e8(t,e)}},addProseMirrorPlugins(){return[pQ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),gQ=To.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",io(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):DJ(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(wn.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(rn.create(o.doc,c.pos)):o.setSelection(wn.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(wn.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[cZ({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),yQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,vQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,wQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,bQ=Vd.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",io(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[u0({find:yQ,type:this.type}),u0({find:vQ,type:this.type})]},addPasteRules(){return[d0({find:xQ,type:this.type}),d0({find:wQ,type:this.type})]}}),_Q=To.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",io(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),SQ="listItem",uA="textStyle",dA=/^(\d+)\.\s$/,kQ=To.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",io(this.options.HTMLAttributes,n),0]:["ol",io(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(SQ,this.editor.getAttributes(uA)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Mg({find:dA,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Mg({find:dA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(uA)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),NQ=To.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",io(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),CQ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,EQ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,AQ=Vd.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",io(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[u0({find:CQ,type:this.type})]},addPasteRules(){return[d0({find:EQ,type:this.type})]}}),TQ=To.create({name:"text",group:"inline"}),jQ=Fs.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,d,h,p,y,x,v,b;const S=[];return this.options.bold!==!1&&S.push(RZ.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&S.push(DZ.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&S.push(zZ.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&S.push($Z.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&S.push(HZ.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&S.push(qZ.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&S.push(XZ.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&S.push(rQ.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&S.push(iQ.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&S.push(sQ.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&S.push(mQ.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&S.push(gQ.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&S.push(bQ.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&S.push(_Q.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&S.push(kQ.configure((y=this.options)===null||y===void 0?void 0:y.orderedList)),this.options.paragraph!==!1&&S.push(NQ.configure((x=this.options)===null||x===void 0?void 0:x.paragraph)),this.options.strike!==!1&&S.push(AQ.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&S.push(TQ.configure((b=this.options)===null||b===void 0?void 0:b.text)),S}}),PQ=Fs.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new oo({key:new Nl("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&i2(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const d=na.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),gi.create(t,i)}}})]}});function DQ(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function t8(t,e){return new Promise(function(n,r){let i;return OQ(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const OQ=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let u;switch(s.getUint16(c)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,u)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,u),h=c+d+2+12*s.getUint16(c+d,u);for(let p=c+d+2;p<h;p+=12)if(s.getUint16(p,u)==274){if(s.getUint16(p+2,u)!==3)return n("Orientation data type is invalid");if(s.getUint32(p+4,u)!==1)return n("Orientation data count is invalid");s.setUint16(p+8,1,u);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Yx={},LQ={get exports(){return Yx},set exports(t){Yx=t}};(function(t){var e,n,r={};LQ.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(i),d=u.length-4;a(u,d)!=101010256;)d--;l=d,l+=4;var h=o(u,l+=4);o(u,l+=2);var p=a(u,l+=2),y=a(u,l+=4);l+=4,l=y;for(var x=0;x<h;x++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),p=a(u,l+=4);var v=a(u,l+=4),b=o(u,l+=4),S=o(u,l+2),k=o(u,l+4);l+=6;var T=a(u,l+=8);l+=4,l+=b+S+k,r._readLocal(u,T,c,p,v,s)}return c},r._readLocal=function(i,s,o,a,l,c){var u=r.bin.readUshort,d=r.bin.readUint;d(i,s),u(i,s+=4),u(i,s+=2);var h=u(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var p=u(i,s+=8),y=u(i,s+=2);s+=2;var x=r.bin.readUTF8(i,s,p);if(s+=p,s+=y,c)o[x]={size:l,csize:a};else{var v=new Uint8Array(i.buffer,s);if(h==0)o[x]=new Uint8Array(v.buffer.slice(s,s+a));else{if(h!=8)throw"unknown compression method: "+h;var b=new Uint8Array(l);r.inflateRaw(v,b),o[x]=b}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in i){var d=!r._noNeed(u)&&!s,h=i[u],p=r.crc.crc(h,0,h.length);c[u]={cpr:d,usize:h.length,crc:p,file:d?r.deflateRaw(h):h}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var y=new Uint8Array(o),x=0,v=[];for(var u in c){var b=c[u];v.push(x),x=r._writeHeader(y,x,u,b,0)}var S=0,k=x;for(var u in c)b=c[u],v.push(x),x=r._writeHeader(y,x,u,b,1,v[S++]);var T=x-k;return a(y,x,101010256),x+=4,l(y,x+=4,S),l(y,x+=2,S),a(y,x+=2,T),a(y,x+=4,k),x+=4,x+=2,y.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,c){var u=r.bin.writeUint,d=r.bin.writeUshort,h=a.file;return u(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),u(i,s+=2,0),u(i,s+=4,a.crc),u(i,s+=4,h.length),u(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,u(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(h,s),s+=h.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,c=s,u=s+o;c<u;){for(var d=Math.min(c+5552,u);c<d;)l+=a+=i[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if((4294967168&u)==0)i[s+l]=u,l++;else if((4294965248&u)==0)i[s+l]=192|u>>6,i[s+l+1]=128|u>>0&63,l+=2;else if((4294901760&u)==0)i[s+l]=224|u>>12,i[s+l+1]=128|u>>6&63,i[s+l+2]=128|u>>0&63,l+=3;else{if((4292870144&u)!=0)throw"e";i[s+l]=240|u>>18,i[s+l+1]=128|u>>12&63,i[s+l+2]=128|u>>6&63,i[s+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if((4294967168&l)==0)o++;else if((4294965248&l)==0)o+=2;else if((4294901760&l)==0)o+=3;else{if((4292870144&l)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,h=0,p=o<<3,y=0,x=i.length;if(a==0){for(;h<x;)d(s,p,h+(L=Math.min(65535,x-h))==x?1:0),p=r.F._copyExact(i,h,L,s,p+8),h+=L;return p>>>3}var v=c.lits,b=c.strt,S=c.prev,k=0,T=0,j=0,P=0,C=0,N=0;for(x>2&&(b[N=r.F._hash(i,0)]=0),h=0;h<x;h++){if(C=N,h+1<x-2){N=r.F._hash(i,h+1);var O=h+1&32767;S[O]=b[N],b[N]=O}if(y<=h){(k>14e3||T>26697)&&x-h>100&&(y<h&&(v[k]=h-y,k+=2,y=h),p=r.F._writeBlock(h==x-1||y==x?1:0,v,k,P,i,j,h-j,s,p),k=T=P=0,j=h);var z=0;h<x-2&&(z=r.F._bestMatch(i,h,S,C,Math.min(l[2],x-h),l[3]));var L=z>>>16,M=65535&z;if(z!=0){M=65535&z;var K=u(L=z>>>16,c.of0);c.lhst[257+K]++;var W=u(M,c.df0);c.dhst[W]++,P+=c.exb[K]+c.dxb[W],v[k]=L<<23|h-y,v[k+1]=M<<16|K<<8|W,k+=2,y=h+L}else c.lhst[i[h]]++;T++}}for(j==h&&i.length!=0||(y<h&&(v[k]=h-y,k+=2,y=h),p=r.F._writeBlock(1,v,k,P,i,j,h-j,s,p),k=0,T=0,k=T=P=0,j=h);(7&p)!=0;)p++;return p>>>3},r.F._bestMatch=function(i,s,o,a,l,c){var u=32767&s,d=o[u],h=u-d+32768&32767;if(d==u||a!=r.F._hash(i,s-h))return 0;for(var p=0,y=0,x=Math.min(32767,s);h<=x&&--c!=0&&d!=u;){if(p==0||i[s+p]==i[s+p-h]){var v=r.F._howLong(i,s,h);if(v>p){if(y=h,(p=v)>=l)break;h+2<v&&(v=h+2);for(var b=0,S=0;S<v-2;S++){var k=s-h+S+32768&32767,T=k-o[k]+32768&32767;T>b&&(b=T,d=k)}}}h+=(u=d)-(d=o[u])+32768&32767}return p<<16|y},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,c,u,d,h){var p,y,x,v,b,S,k,T,j,P=r.F.U,C=r.F._putsF,N=r.F._putsE;P.lhst[256]++,y=(p=r.F.getTrees())[0],x=p[1],v=p[2],b=p[3],S=p[4],k=p[5],T=p[6],j=p[7];var O=32+((h+3&7)==0?0:8-(h+3&7))+(u<<3),z=a+r.F.contSize(P.fltree,P.lhst)+r.F.contSize(P.fdtree,P.dhst),L=a+r.F.contSize(P.ltree,P.lhst)+r.F.contSize(P.dtree,P.dhst);L+=14+3*k+r.F.contSize(P.itree,P.ihst)+(2*P.ihst[16]+3*P.ihst[17]+7*P.ihst[18]);for(var M=0;M<286;M++)P.lhst[M]=0;for(M=0;M<30;M++)P.dhst[M]=0;for(M=0;M<19;M++)P.ihst[M]=0;var K=O<z&&O<L?0:z<L?1:2;if(C(d,h,i),C(d,h+1,K),h+=3,K==0){for(;(7&h)!=0;)h++;h=r.F._copyExact(l,c,u,d,h)}else{var W,Z;if(K==1&&(W=P.fltree,Z=P.fdtree),K==2){r.F.makeCodes(P.ltree,y),r.F.revCodes(P.ltree,y),r.F.makeCodes(P.dtree,x),r.F.revCodes(P.dtree,x),r.F.makeCodes(P.itree,v),r.F.revCodes(P.itree,v),W=P.ltree,Z=P.dtree,N(d,h,b-257),N(d,h+=5,S-1),N(d,h+=5,k-4),h+=4;for(var U=0;U<k;U++)N(d,h+3*U,P.itree[1+(P.ordr[U]<<1)]);h+=3*k,h=r.F._codeTiny(T,P.itree,d,h),h=r.F._codeTiny(j,P.itree,d,h)}for(var F=c,J=0;J<o;J+=2){for(var Q=s[J],ee=Q>>>23,ne=F+(8388607&Q);F<ne;)h=r.F._writeLit(l[F++],W,d,h);if(ee!=0){var D=s[J+1],G=D>>16,V=D>>8&255,H=255&D;N(d,h=r.F._writeLit(257+V,W,d,h),ee-P.of0[V]),h+=P.exb[V],C(d,h=r.F._writeLit(H,Z,d,h),G-P.df0[H]),h+=P.dxb[H],F+=ee}}h=r.F._writeLit(256,W,d,h)}return h},r.F._copyExact=function(i,s,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),c=[],u=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[s,o,h,l,u,p,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var c=i[l],u=i[l+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],c=a+3<o?i[a+3]:-1,u=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(l==0&&c==l&&u==l){for(var h=a+5;h+2<o&&i[h+2]==l;)h+=2;(p=Math.min(h+1-a>>>1,138))<11?s.push(17,p-3):s.push(18,p-11),a+=2*p-2}else if(l==d&&c==l&&u==l){for(h=a+5;h+2<o&&i[h+2]==l;)h+=2;var p=Math.min(h+1-a>>>1,6);s.push(16,p-3),a+=2*p-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,c=s.length,u=0;for(u=0;u<c;u+=2)s[u]=0,s[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&a.push({lit:u,f:i[u]});var d=a.length,h=a.slice(0);if(d==0)return 0;if(d==1){var p=a[0].lit;return h=p==0?1:0,s[1+(p<<1)]=1,s[1+(h<<1)]=1,1}a.sort(function(T,j){return T.f-j.f});var y=a[0],x=a[1],v=0,b=1,S=2;for(a[0]={lit:-1,f:y.f+x.f,l:y,r:x,d:0};b!=d-1;)y=v!=b&&(S==d||a[v].f<a[S].f)?a[v++]:a[S++],x=v!=b&&(S==d||a[v].f<a[S].f)?a[v++]:a[S++],a[b++]={lit:-1,f:y.f+x.f,l:y,r:x};var k=r.F.setDepth(a[b-1],0);for(k>o&&(r.F.restrictDepth(h,o,k),k=o),u=0;u<d;u++)s[1+(h[u].lit<<1)]=h[u].d;return k},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,c=0;for(i.sort(function(d,h){return h.d==d.d?d.f-h.f:h.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var u=i[a].d;i[a].d=s,c+=l-(1<<o-u)}for(c>>>=o-s;c>0;)(u=i[a].d)<s?(i[a].d++,c-=1<<s-u-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,d=a.makeCodes,h=a.codes2map,p=a._get17,y=a.U,x=s==null;x&&(s=new o(i.length>>>2<<3));for(var v,b,S=0,k=0,T=0,j=0,P=0,C=0,N=0,O=0,z=0;S==0;)if(S=l(i,z,1),k=l(i,z+1,2),z+=3,k!=0){if(x&&(s=r.F._check(s,O+(1<<17))),k==1&&(v=y.flmap,b=y.fdmap,C=511,N=31),k==2){T=c(i,z,5)+257,j=c(i,z+5,5)+1,P=c(i,z+10,4)+4,z+=14;for(var L=0;L<38;L+=2)y.itree[L]=0,y.itree[L+1]=0;var M=1;for(L=0;L<P;L++){var K=c(i,z+3*L,3);y.itree[1+(y.ordr[L]<<1)]=K,K>M&&(M=K)}z+=3*P,d(y.itree,M),h(y.itree,M,y.imap),v=y.lmap,b=y.dmap,z=u(y.imap,(1<<M)-1,T+j,i,z,y.ttree);var W=a._copyOut(y.ttree,0,T,y.ltree);C=(1<<W)-1;var Z=a._copyOut(y.ttree,T,j,y.dtree);N=(1<<Z)-1,d(y.ltree,W),h(y.ltree,W,v),d(y.dtree,Z),h(y.dtree,Z,b)}for(;;){var U=v[p(i,z)&C];z+=15&U;var F=U>>>4;if(!(F>>>8))s[O++]=F;else{if(F==256)break;var J=O+F-254;if(F>264){var Q=y.ldef[F-257];J=O+(Q>>>3)+c(i,z,7&Q),z+=7&Q}var ee=b[p(i,z)&N];z+=15&ee;var ne=ee>>>4,D=y.ddef[ne],G=(D>>>4)+l(i,z,15&D);for(z+=15&D,x&&(s=r.F._check(s,O+(1<<17)));O<J;)s[O]=s[O++-G],s[O]=s[O++-G],s[O]=s[O++-G],s[O]=s[O++-G];O=J}}}else{(7&z)!=0&&(z+=8-(7&z));var V=4+(z>>>3),H=i[V-4]|i[V-3]<<8;x&&(s=r.F._check(s,O+H)),s.set(new o(i.buffer,i.byteOffset+V,H),O),z=V+H<<3,O+=H}return s.length==O?s:s.slice(0,O)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,c){for(var u=r.F._bitsE,d=r.F._get17,h=0;h<o;){var p=i[d(a,l)&s];l+=15&p;var y=p>>>4;if(y<=15)c[h]=y,h++;else{var x=0,v=0;y==16?(v=3+u(a,l,2),l+=2,x=c[h-1]):y==17?(v=3+u(a,l,3),l+=3):y==18&&(v=11+u(a,l,7),l+=7);for(var b=h+v;h<b;)c[h]=x,h++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,c,u=r.F.U,d=i.length,h=u.bl_count,p=0;p<=s;p++)h[p]=0;for(p=1;p<d;p+=2)h[i[p]]++;var y=u.next_code;for(o=0,h[0]=0,a=1;a<=s;a++)o=o+h[a-1]<<1,y[a]=o;for(l=0;l<d;l+=2)(c=i[l+1])!=0&&(i[l]=y[c],y[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var u=c>>1,d=i[c+1],h=u<<4|d,p=s-d,y=i[c]<<p,x=y+(1<<p);y!=x;)o[l[y]>>>15-s]=h,y++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var MQ=DQ({__proto__:null,default:Yx},[Yx]);const hl=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,h){u[d]=h>>8&255,u[d+1]=255&h},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,h){u[d]=h>>24&255,u[d+1]=h>>16&255,u[d+2]=h>>8&255,u[d+3]=255&h},readASCII(u,d,h){let p="";for(let y=0;y<h;y++)p+=String.fromCharCode(u[d+y]);return p},writeASCII(u,d,h){for(let p=0;p<h.length;p++)u[d+p]=h.charCodeAt(p)},readBytes(u,d,h){const p=[];for(let y=0;y<h;y++)p.push(u[d+y]);return p},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,h){let p,y="";for(let x=0;x<h;x++)y+=`%${t.pad(u[d+x].toString(16))}`;try{p=decodeURIComponent(y)}catch{return t.readASCII(u,d,h)}return p}};function e(u,d,h,p){const y=d*h,x=s(p),v=Math.ceil(d*x/8),b=new Uint8Array(4*y),S=new Uint32Array(b.buffer),{ctype:k}=p,{depth:T}=p,j=t.readUshort;if(k==6){const Q=y<<2;if(T==8)for(var P=0;P<Q;P+=4)b[P]=u[P],b[P+1]=u[P+1],b[P+2]=u[P+2],b[P+3]=u[P+3];if(T==16)for(P=0;P<Q;P++)b[P]=u[P<<1]}else if(k==2){const Q=p.tabs.tRNS;if(Q==null){if(T==8)for(P=0;P<y;P++){var C=3*P;S[P]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C]}if(T==16)for(P=0;P<y;P++)C=6*P,S[P]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C]}else{var N=Q[0];const ee=Q[1],ne=Q[2];if(T==8)for(P=0;P<y;P++){var O=P<<2;C=3*P,S[P]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C],u[C]==N&&u[C+1]==ee&&u[C+2]==ne&&(b[O+3]=0)}if(T==16)for(P=0;P<y;P++)O=P<<2,C=6*P,S[P]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C],j(u,C)==N&&j(u,C+2)==ee&&j(u,C+4)==ne&&(b[O+3]=0)}}else if(k==3){const Q=p.tabs.PLTE,ee=p.tabs.tRNS,ne=ee?ee.length:0;if(T==1)for(var z=0;z<h;z++){var L=z*v,M=z*d;for(P=0;P<d;P++){O=M+P<<2;var K=3*(W=u[L+(P>>3)]>>7-((7&P)<<0)&1);b[O]=Q[K],b[O+1]=Q[K+1],b[O+2]=Q[K+2],b[O+3]=W<ne?ee[W]:255}}if(T==2)for(z=0;z<h;z++)for(L=z*v,M=z*d,P=0;P<d;P++)O=M+P<<2,K=3*(W=u[L+(P>>2)]>>6-((3&P)<<1)&3),b[O]=Q[K],b[O+1]=Q[K+1],b[O+2]=Q[K+2],b[O+3]=W<ne?ee[W]:255;if(T==4)for(z=0;z<h;z++)for(L=z*v,M=z*d,P=0;P<d;P++)O=M+P<<2,K=3*(W=u[L+(P>>1)]>>4-((1&P)<<2)&15),b[O]=Q[K],b[O+1]=Q[K+1],b[O+2]=Q[K+2],b[O+3]=W<ne?ee[W]:255;if(T==8)for(P=0;P<y;P++){var W;O=P<<2,K=3*(W=u[P]),b[O]=Q[K],b[O+1]=Q[K+1],b[O+2]=Q[K+2],b[O+3]=W<ne?ee[W]:255}}else if(k==4){if(T==8)for(P=0;P<y;P++){O=P<<2;var Z=u[U=P<<1];b[O]=Z,b[O+1]=Z,b[O+2]=Z,b[O+3]=u[U+1]}if(T==16)for(P=0;P<y;P++){var U;O=P<<2,Z=u[U=P<<2],b[O]=Z,b[O+1]=Z,b[O+2]=Z,b[O+3]=u[U+2]}}else if(k==0)for(N=p.tabs.tRNS?p.tabs.tRNS:-1,z=0;z<h;z++){const Q=z*v,ee=z*d;if(T==1)for(var F=0;F<d;F++){var J=(Z=255*(u[Q+(F>>>3)]>>>7-(7&F)&1))==255*N?0:255;S[ee+F]=J<<24|Z<<16|Z<<8|Z}else if(T==2)for(F=0;F<d;F++)J=(Z=85*(u[Q+(F>>>2)]>>>6-((3&F)<<1)&3))==85*N?0:255,S[ee+F]=J<<24|Z<<16|Z<<8|Z;else if(T==4)for(F=0;F<d;F++)J=(Z=17*(u[Q+(F>>>1)]>>>4-((1&F)<<2)&15))==17*N?0:255,S[ee+F]=J<<24|Z<<16|Z<<8|Z;else if(T==8)for(F=0;F<d;F++)J=(Z=u[Q+F])==N?0:255,S[ee+F]=J<<24|Z<<16|Z<<8|Z;else if(T==16)for(F=0;F<d;F++)Z=u[Q+(F<<1)],J=j(u,Q+(F<<1))==N?0:255,S[ee+F]=J<<24|Z<<16|Z<<8|Z}return b}function n(u,d,h,p){const y=s(u),x=Math.ceil(h*y/8),v=new Uint8Array((x+1+u.interlace)*p);return d=u.tabs.CgBI?i(d,v):r(d,v),u.interlace==0?d=o(d,u,0,h,p):u.interlace==1&&(d=function(S,k){const T=k.width,j=k.height,P=s(k),C=P>>3,N=Math.ceil(T*P/8),O=new Uint8Array(j*N);let z=0;const L=[0,0,4,0,2,0,1],M=[0,4,0,2,0,1,0],K=[8,8,8,4,4,2,2],W=[8,8,4,4,2,2,1];let Z=0;for(;Z<7;){const F=K[Z],J=W[Z];let Q=0,ee=0,ne=L[Z];for(;ne<j;)ne+=F,ee++;let D=M[Z];for(;D<T;)D+=J,Q++;const G=Math.ceil(Q*P/8);o(S,k,z,Q,ee);let V=0,H=L[Z];for(;H<j;){let te=M[Z],ge=z+V*G<<3;for(;te<T;){var U;if(P==1&&(U=(U=S[ge>>3])>>7-(7&ge)&1,O[H*N+(te>>3)]|=U<<7-((7&te)<<0)),P==2&&(U=(U=S[ge>>3])>>6-(7&ge)&3,O[H*N+(te>>2)]|=U<<6-((3&te)<<1)),P==4&&(U=(U=S[ge>>3])>>4-(7&ge)&15,O[H*N+(te>>1)]|=U<<4-((1&te)<<2)),P>=8){const xe=H*N+te*C;for(let ve=0;ve<C;ve++)O[xe+ve]=S[(ge>>3)+ve]}ge+=P,te+=J}V++,H+=F}Q*ee!=0&&(z+=ee*(1+G)),Z+=1}return O}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,h){const p=Uint8Array;let y,x,v=0,b=0,S=0,k=0,T=0,j=0,P=0,C=0,N=0;if(d[0]==3&&d[1]==0)return h||new p(0);const O=u.H,z=O.b,L=O.e,M=O.R,K=O.n,W=O.A,Z=O.Z,U=O.m,F=h==null;for(F&&(h=new p(d.length>>>2<<5));v==0;)if(v=z(d,N,1),b=z(d,N+1,2),N+=3,b!=0){if(F&&(h=u.H.W(h,C+(1<<17))),b==1&&(y=U.J,x=U.h,j=511,P=31),b==2){S=L(d,N,5)+257,k=L(d,N+5,5)+1,T=L(d,N+10,4)+4,N+=14;let Q=1;for(var J=0;J<38;J+=2)U.Q[J]=0,U.Q[J+1]=0;for(J=0;J<T;J++){const D=L(d,N+3*J,3);U.Q[1+(U.X[J]<<1)]=D,D>Q&&(Q=D)}N+=3*T,K(U.Q,Q),W(U.Q,Q,U.u),y=U.w,x=U.d,N=M(U.u,(1<<Q)-1,S+k,d,N,U.v);const ee=O.V(U.v,0,S,U.C);j=(1<<ee)-1;const ne=O.V(U.v,S,k,U.D);P=(1<<ne)-1,K(U.C,ee),W(U.C,ee,y),K(U.D,ne),W(U.D,ne,x)}for(;;){const Q=y[Z(d,N)&j];N+=15&Q;const ee=Q>>>4;if(!(ee>>>8))h[C++]=ee;else{if(ee==256)break;{let ne=C+ee-254;if(ee>264){const te=U.q[ee-257];ne=C+(te>>>3)+L(d,N,7&te),N+=7&te}const D=x[Z(d,N)&P];N+=15&D;const G=D>>>4,V=U.c[G],H=(V>>>4)+z(d,N,15&V);for(N+=15&V;C<ne;)h[C]=h[C++-H],h[C]=h[C++-H],h[C]=h[C++-H],h[C]=h[C++-H];C=ne}}}}else{(7&N)!=0&&(N+=8-(7&N));const Q=4+(N>>>3),ee=d[Q-4]|d[Q-3]<<8;F&&(h=u.H.W(h,C+ee)),h.set(new p(d.buffer,d.byteOffset+Q,ee),C),N=Q+ee<<3,C+=ee}return h.length==C?h:h.slice(0,C)},u.H.W=function(d,h){const p=d.length;if(h<=p)return d;const y=new Uint8Array(p<<1);return y.set(d,0),y},u.H.R=function(d,h,p,y,x,v){const b=u.H.e,S=u.H.Z;let k=0;for(;k<p;){const T=d[S(y,x)&h];x+=15&T;const j=T>>>4;if(j<=15)v[k]=j,k++;else{let P=0,C=0;j==16?(C=3+b(y,x,2),x+=2,P=v[k-1]):j==17?(C=3+b(y,x,3),x+=3):j==18&&(C=11+b(y,x,7),x+=7);const N=k+C;for(;k<N;)v[k]=P,k++}}return x},u.H.V=function(d,h,p,y){let x=0,v=0;const b=y.length>>>1;for(;v<p;){const S=d[v+h];y[v<<1]=0,y[1+(v<<1)]=S,S>x&&(x=S),v++}for(;v<b;)y[v<<1]=0,y[1+(v<<1)]=0,v++;return x},u.H.n=function(d,h){const p=u.H.m,y=d.length;let x,v,b,S;const k=p.j;for(var T=0;T<=h;T++)k[T]=0;for(T=1;T<y;T+=2)k[d[T]]++;const j=p.K;for(x=0,k[0]=0,v=1;v<=h;v++)x=x+k[v-1]<<1,j[v]=x;for(b=0;b<y;b+=2)S=d[b+1],S!=0&&(d[b]=j[S],j[S]++)},u.H.A=function(d,h,p){const y=d.length,x=u.H.m.r;for(let v=0;v<y;v+=2)if(d[v+1]!=0){const b=v>>1,S=d[v+1],k=b<<4|S,T=h-S;let j=d[v]<<T;const P=j+(1<<T);for(;j!=P;)p[x[j]>>>15-h]=k,j++}},u.H.l=function(d,h){const p=u.H.m.r,y=15-h;for(let x=0;x<d.length;x+=2){const v=d[x]<<h-d[x+1];d[x]=p[v]>>>y}},u.H.M=function(d,h,p){p<<=7&h;const y=h>>>3;d[y]|=p,d[y+1]|=p>>>8},u.H.I=function(d,h,p){p<<=7&h;const y=h>>>3;d[y]|=p,d[y+1]|=p>>>8,d[y+2]|=p>>>16},u.H.e=function(d,h,p){return(d[h>>>3]|d[1+(h>>>3)]<<8)>>>(7&h)&(1<<p)-1},u.H.b=function(d,h,p){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)&(1<<p)-1},u.H.Z=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)},u.H.i=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16|d[3+(h>>>3)]<<24)>>>(7&h)},u.H.m=function(){const d=Uint16Array,h=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var h=0;h<32768;h++){let y=h;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,d.r[h]=(y>>>16|y<<16)>>>17}function p(y,x,v){for(;x--!=0;)y.push(0,v)}for(h=0;h<32;h++)d.q[h]=d.S[h]<<3|d.T[h],d.c[h]=d.p[h]<<4|d.z[h];p(d._,144,8),p(d._,112,9),p(d._,24,7),p(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),p(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),p(d.Q,19,0),p(d.C,286,0),p(d.D,30,0),p(d.v,320,0)}(),u.H.N}();function s(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,d,h,p,y){let x=s(d);const v=Math.ceil(p*x/8);let b,S;x=Math.ceil(x/8);let k=u[h],T=0;if(k>1&&(u[h]=[0,0,1][k-2]),k==3)for(T=x;T<v;T++)u[T+1]=u[T+1]+(u[T+1-x]>>>1)&255;for(let j=0;j<y;j++)if(b=h+j*v,S=b+j+1,k=u[S-1],T=0,k==0)for(;T<v;T++)u[b+T]=u[S+T];else if(k==1){for(;T<x;T++)u[b+T]=u[S+T];for(;T<v;T++)u[b+T]=u[S+T]+u[b+T-x]}else if(k==2)for(;T<v;T++)u[b+T]=u[S+T]+u[b+T-v];else if(k==3){for(;T<x;T++)u[b+T]=u[S+T]+(u[b+T-v]>>>1);for(;T<v;T++)u[b+T]=u[S+T]+(u[b+T-v]+u[b+T-x]>>>1)}else{for(;T<x;T++)u[b+T]=u[S+T]+a(0,u[b+T-v],0);for(;T<v;T++)u[b+T]=u[S+T]+a(u[b+T-x],u[b+T-v],u[b+T-x-v])}return u}function a(u,d,h){const p=u+d-h,y=p-u,x=p-d,v=p-h;return y*y<=x*x&&y*y<=v*v?u:x*x<=v*v?d:h}function l(u,d,h){h.width=t.readUint(u,d),d+=4,h.height=t.readUint(u,d),d+=4,h.depth=u[d],d++,h.ctype=u[d],d++,h.compress=u[d],d++,h.filter=u[d],d++,h.interlace=u[d],d++}function c(u,d,h,p,y,x,v,b,S){const k=Math.min(d,y),T=Math.min(h,x);let j=0,P=0;for(let Z=0;Z<T;Z++)for(let U=0;U<k;U++)if(v>=0&&b>=0?(j=Z*d+U<<2,P=(b+Z)*y+v+U<<2):(j=(-b+Z)*d-v+U<<2,P=Z*y+U<<2),S==0)p[P]=u[j],p[P+1]=u[j+1],p[P+2]=u[j+2],p[P+3]=u[j+3];else if(S==1){var C=u[j+3]*.00392156862745098,N=u[j]*C,O=u[j+1]*C,z=u[j+2]*C,L=p[P+3]*(1/255),M=p[P]*L,K=p[P+1]*L,W=p[P+2]*L;const F=1-C,J=C+L*F,Q=J==0?0:1/J;p[P+3]=255*J,p[P+0]=(N+M*F)*Q,p[P+1]=(O+K*F)*Q,p[P+2]=(z+W*F)*Q}else if(S==2)C=u[j+3],N=u[j],O=u[j+1],z=u[j+2],L=p[P+3],M=p[P],K=p[P+1],W=p[P+2],C==L&&N==M&&O==K&&z==W?(p[P]=0,p[P+1]=0,p[P+2]=0,p[P+3]=0):(p[P]=N,p[P+1]=O,p[P+2]=z,p[P+3]=C);else if(S==3){if(C=u[j+3],N=u[j],O=u[j+1],z=u[j+2],L=p[P+3],M=p[P],K=p[P+1],W=p[P+2],C==L&&N==M&&O==K&&z==W)continue;if(C<220&&L>20)return!1}return!0}return{decode:function(d){const h=new Uint8Array(d);let p=8;const y=t,x=y.readUshort,v=y.readUint,b={tabs:{},frames:[]},S=new Uint8Array(h.length);let k,T=0,j=0;const P=[137,80,78,71,13,10,26,10];for(var C=0;C<8;C++)if(h[C]!=P[C])throw"The input is not a PNG file!";for(;p<h.length;){const Z=y.readUint(h,p);p+=4;const U=y.readASCII(h,p,4);if(p+=4,U=="IHDR")l(h,p,b);else if(U=="iCCP"){for(var N=p;h[N]!=0;)N++;y.readASCII(h,p,N-p),h[N+1];const F=h.slice(N+2,p+Z);let J=null;try{J=r(F)}catch{J=i(F)}b.tabs[U]=J}else if(U=="CgBI")b.tabs[U]=h.slice(p,p+4);else if(U=="IDAT"){for(C=0;C<Z;C++)S[T+C]=h[p+C];T+=Z}else if(U=="acTL")b.tabs[U]={num_frames:v(h,p),num_plays:v(h,p+4)},k=new Uint8Array(h.length);else if(U=="fcTL"){j!=0&&((W=b.frames[b.frames.length-1]).data=n(b,k.slice(0,j),W.rect.width,W.rect.height),j=0);const F={x:v(h,p+12),y:v(h,p+16),width:v(h,p+4),height:v(h,p+8)};let J=x(h,p+22);J=x(h,p+20)/(J==0?100:J);const Q={rect:F,delay:Math.round(1e3*J),dispose:h[p+24],blend:h[p+25]};b.frames.push(Q)}else if(U=="fdAT"){for(C=0;C<Z-4;C++)k[j+C]=h[p+C+4];j+=Z-4}else if(U=="pHYs")b.tabs[U]=[y.readUint(h,p),y.readUint(h,p+4),h[p+8]];else if(U=="cHRM")for(b.tabs[U]=[],C=0;C<8;C++)b.tabs[U].push(y.readUint(h,p+4*C));else if(U=="tEXt"||U=="zTXt"){b.tabs[U]==null&&(b.tabs[U]={});var O=y.nextZero(h,p),z=y.readASCII(h,p,O-p),L=p+Z-O-1;if(U=="tEXt")K=y.readASCII(h,O+1,L);else{var M=r(h.slice(O+2,O+2+L));K=y.readUTF8(M,0,M.length)}b.tabs[U][z]=K}else if(U=="iTXt"){b.tabs[U]==null&&(b.tabs[U]={}),O=0,N=p,O=y.nextZero(h,N),z=y.readASCII(h,N,O-N);const F=h[N=O+1];var K;h[N+1],N+=2,O=y.nextZero(h,N),y.readASCII(h,N,O-N),N=O+1,O=y.nextZero(h,N),y.readUTF8(h,N,O-N),L=Z-((N=O+1)-p),F==0?K=y.readUTF8(h,N,L):(M=r(h.slice(N,N+L)),K=y.readUTF8(M,0,M.length)),b.tabs[U][z]=K}else if(U=="PLTE")b.tabs[U]=y.readBytes(h,p,Z);else if(U=="hIST"){const F=b.tabs.PLTE.length/3;for(b.tabs[U]=[],C=0;C<F;C++)b.tabs[U].push(x(h,p+2*C))}else if(U=="tRNS")b.ctype==3?b.tabs[U]=y.readBytes(h,p,Z):b.ctype==0?b.tabs[U]=x(h,p):b.ctype==2&&(b.tabs[U]=[x(h,p),x(h,p+2),x(h,p+4)]);else if(U=="gAMA")b.tabs[U]=y.readUint(h,p)/1e5;else if(U=="sRGB")b.tabs[U]=h[p];else if(U=="bKGD")b.ctype==0||b.ctype==4?b.tabs[U]=[x(h,p)]:b.ctype==2||b.ctype==6?b.tabs[U]=[x(h,p),x(h,p+2),x(h,p+4)]:b.ctype==3&&(b.tabs[U]=h[p]);else if(U=="IEND")break;p+=Z,y.readUint(h,p),p+=4}var W;return j!=0&&((W=b.frames[b.frames.length-1]).data=n(b,k.slice(0,j),W.rect.width,W.rect.height)),b.data=n(b,S,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(d){const h=d.width,p=d.height;if(d.tabs.acTL==null)return[e(d.data,h,p,d).buffer];const y=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const x=h*p*4,v=new Uint8Array(x),b=new Uint8Array(x),S=new Uint8Array(x);for(let T=0;T<d.frames.length;T++){const j=d.frames[T],P=j.rect.x,C=j.rect.y,N=j.rect.width,O=j.rect.height,z=e(j.data,N,O,d);if(T!=0)for(var k=0;k<x;k++)S[k]=v[k];if(j.blend==0?c(z,N,O,v,h,p,P,C,0):j.blend==1&&c(z,N,O,v,h,p,P,C,1),y.push(v.buffer.slice(0)),j.dispose!=0){if(j.dispose==1)c(b,N,O,v,h,p,P,C,0);else if(j.dispose==2)for(k=0;k<x;k++)v[k]=S[k]}}return y},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=hl,{_bin:e}=hl,n=hl._paeth;var r={table:function(){const N=new Uint32Array(256);for(let O=0;O<256;O++){let z=O;for(let L=0;L<8;L++)1&z?z=3988292384^z>>>1:z>>>=1;N[O]=z}return N}(),update(N,O,z,L){for(let M=0;M<L;M++)N=r.table[255&(N^O[z+M])]^N>>>8;return N},crc:(N,O,z)=>4294967295^r.update(4294967295,N,O,z)};function i(N,O,z,L){O[z]+=N[0]*L>>4,O[z+1]+=N[1]*L>>4,O[z+2]+=N[2]*L>>4,O[z+3]+=N[3]*L>>4}function s(N){return Math.max(0,Math.min(255,N))}function o(N,O){const z=N[0]-O[0],L=N[1]-O[1],M=N[2]-O[2],K=N[3]-O[3];return z*z+L*L+M*M+K*K}function a(N,O,z,L,M,K,W){W==null&&(W=1);const Z=L.length,U=[];for(var F=0;F<Z;F++){const H=L[F];U.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(F=0;F<Z;F++){let H=4294967295;for(var J=0,Q=0;Q<Z;Q++){var ee=o(U[F],U[Q]);Q!=F&&ee<H&&(H=ee,J=Q)}}const ne=new Uint32Array(M.buffer),D=new Int16Array(O*z*4),G=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(F=0;F<G.length;F++)G[F]=255*((G[F]+.5)/16-.5);for(let H=0;H<z;H++)for(let te=0;te<O;te++){var V;F=4*(H*O+te),W!=2?V=[s(N[F]+D[F]),s(N[F+1]+D[F+1]),s(N[F+2]+D[F+2]),s(N[F+3]+D[F+3])]:(ee=G[4*(3&H)+(3&te)],V=[s(N[F]+ee),s(N[F+1]+ee),s(N[F+2]+ee),s(N[F+3]+ee)]),J=0;let ge=16777215;for(Q=0;Q<Z;Q++){const Ne=o(V,U[Q]);Ne<ge&&(ge=Ne,J=Q)}const xe=U[J],ve=[V[0]-xe[0],V[1]-xe[1],V[2]-xe[2],V[3]-xe[3]];W==1&&(te!=O-1&&i(ve,D,F+4,7),H!=z-1&&(te!=0&&i(ve,D,F+4*O-4,3),i(ve,D,F+4*O,5),te!=O-1&&i(ve,D,F+4*O+4,1))),K[F>>2]=J,ne[F>>2]=L[J]}}function l(N,O,z,L,M){M==null&&(M={});const{crc:K}=r,W=e.writeUint,Z=e.writeUshort,U=e.writeASCII;let F=8;const J=N.frames.length>1;let Q,ee=!1,ne=33+(J?20:0);if(M.sRGB!=null&&(ne+=13),M.pHYs!=null&&(ne+=21),M.iCCP!=null&&(Q=pako.deflate(M.iCCP),ne+=21+Q.length+4),N.ctype==3){for(var D=N.plte.length,G=0;G<D;G++)N.plte[G]>>>24!=255&&(ee=!0);ne+=8+3*D+4+(ee?8+1*D+4:0)}for(var V=0;V<N.frames.length;V++)J&&(ne+=38),ne+=(xe=N.frames[V]).cimg.length+12,V!=0&&(ne+=4);ne+=12;const H=new Uint8Array(ne),te=[137,80,78,71,13,10,26,10];for(G=0;G<8;G++)H[G]=te[G];if(W(H,F,13),F+=4,U(H,F,"IHDR"),F+=4,W(H,F,O),F+=4,W(H,F,z),F+=4,H[F]=N.depth,F++,H[F]=N.ctype,F++,H[F]=0,F++,H[F]=0,F++,H[F]=0,F++,W(H,F,K(H,F-17,17)),F+=4,M.sRGB!=null&&(W(H,F,1),F+=4,U(H,F,"sRGB"),F+=4,H[F]=M.sRGB,F++,W(H,F,K(H,F-5,5)),F+=4),M.iCCP!=null){const ve=13+Q.length;W(H,F,ve),F+=4,U(H,F,"iCCP"),F+=4,U(H,F,"ICC profile"),F+=11,F+=2,H.set(Q,F),F+=Q.length,W(H,F,K(H,F-(ve+4),ve+4)),F+=4}if(M.pHYs!=null&&(W(H,F,9),F+=4,U(H,F,"pHYs"),F+=4,W(H,F,M.pHYs[0]),F+=4,W(H,F,M.pHYs[1]),F+=4,H[F]=M.pHYs[2],F++,W(H,F,K(H,F-13,13)),F+=4),J&&(W(H,F,8),F+=4,U(H,F,"acTL"),F+=4,W(H,F,N.frames.length),F+=4,W(H,F,M.loop!=null?M.loop:0),F+=4,W(H,F,K(H,F-12,12)),F+=4),N.ctype==3){for(W(H,F,3*(D=N.plte.length)),F+=4,U(H,F,"PLTE"),F+=4,G=0;G<D;G++){const ve=3*G,Ne=N.plte[G],He=255&Ne,Ke=Ne>>>8&255,qe=Ne>>>16&255;H[F+ve+0]=He,H[F+ve+1]=Ke,H[F+ve+2]=qe}if(F+=3*D,W(H,F,K(H,F-3*D-4,3*D+4)),F+=4,ee){for(W(H,F,D),F+=4,U(H,F,"tRNS"),F+=4,G=0;G<D;G++)H[F+G]=N.plte[G]>>>24&255;F+=D,W(H,F,K(H,F-D-4,D+4)),F+=4}}let ge=0;for(V=0;V<N.frames.length;V++){var xe=N.frames[V];J&&(W(H,F,26),F+=4,U(H,F,"fcTL"),F+=4,W(H,F,ge++),F+=4,W(H,F,xe.rect.width),F+=4,W(H,F,xe.rect.height),F+=4,W(H,F,xe.rect.x),F+=4,W(H,F,xe.rect.y),F+=4,Z(H,F,L[V]),F+=2,Z(H,F,1e3),F+=2,H[F]=xe.dispose,F++,H[F]=xe.blend,F++,W(H,F,K(H,F-30,30)),F+=4);const ve=xe.cimg;W(H,F,(D=ve.length)+(V==0?0:4)),F+=4;const Ne=F;U(H,F,V==0?"IDAT":"fdAT"),F+=4,V!=0&&(W(H,F,ge++),F+=4),H.set(ve,F),F+=D,W(H,F,K(H,Ne,F-Ne)),F+=4}return W(H,F,0),F+=4,U(H,F,"IEND"),F+=4,W(H,F,K(H,F-4,4)),F+=4,H.buffer}function c(N,O,z){for(let L=0;L<N.frames.length;L++){const M=N.frames[L];M.rect.width;const K=M.rect.height,W=new Uint8Array(K*M.bpl+K);M.cimg=p(M.img,K,M.bpp,M.bpl,W,O,z)}}function u(N,O,z,L,M){const K=M[0],W=M[1],Z=M[2],U=M[3],F=M[4],J=M[5];let Q=6,ee=8,ne=255;for(var D=0;D<N.length;D++){const fe=new Uint8Array(N[D]);for(var G=fe.length,V=0;V<G;V+=4)ne&=fe[V+3]}const H=ne!=255,te=function(Ge,et,Le,ke,We,at){const xt=[];for(var _t=0;_t<Ge.length;_t++){const Ft=new Uint8Array(Ge[_t]),dt=new Uint32Array(Ft.buffer);var Pt;let Tn=0,sn=0,Wn=et,hn=Le,jn=ke?1:0;if(_t!=0){const Wr=at||ke||_t==1||xt[_t-2].dispose!=0?1:2;let yn=0,Fr=1e9;for(let Nn=0;Nn<Wr;Nn++){var Vt=new Uint8Array(Ge[_t-1-Nn]);const vr=new Uint32Array(Ge[_t-1-Nn]);let pn=et,tn=Le,Rt=-1,nn=-1;for(let xn=0;xn<Le;xn++)for(let On=0;On<et;On++)dt[Bt=xn*et+On]!=vr[Bt]&&(On<pn&&(pn=On),On>Rt&&(Rt=On),xn<tn&&(tn=xn),xn>nn&&(nn=xn));Rt==-1&&(pn=tn=Rt=nn=0),We&&((1&pn)==1&&pn--,(1&tn)==1&&tn--);const rr=(Rt-pn+1)*(nn-tn+1);rr<Fr&&(Fr=rr,yn=Nn,Tn=pn,sn=tn,Wn=Rt-pn+1,hn=nn-tn+1)}Vt=new Uint8Array(Ge[_t-1-yn]),yn==1&&(xt[_t-1].dispose=2),Pt=new Uint8Array(Wn*hn*4),t(Vt,et,Le,Pt,Wn,hn,-Tn,-sn,0),jn=t(Ft,et,Le,Pt,Wn,hn,-Tn,-sn,3)?1:0,jn==1?h(Ft,et,Le,Pt,{x:Tn,y:sn,width:Wn,height:hn}):t(Ft,et,Le,Pt,Wn,hn,-Tn,-sn,0)}else Pt=Ft.slice(0);xt.push({rect:{x:Tn,y:sn,width:Wn,height:hn},img:Pt,blend:jn,dispose:0})}if(ke)for(_t=0;_t<xt.length;_t++){if((It=xt[_t]).blend==1)continue;const Ft=It.rect,dt=xt[_t-1].rect,Tn=Math.min(Ft.x,dt.x),sn=Math.min(Ft.y,dt.y),Wn={x:Tn,y:sn,width:Math.max(Ft.x+Ft.width,dt.x+dt.width)-Tn,height:Math.max(Ft.y+Ft.height,dt.y+dt.height)-sn};xt[_t-1].dispose=1,_t-1!=0&&d(Ge,et,Le,xt,_t-1,Wn,We),d(Ge,et,Le,xt,_t,Wn,We)}let Xt=0;if(Ge.length!=1)for(var Bt=0;Bt<xt.length;Bt++){var It;Xt+=(It=xt[Bt]).rect.width*It.rect.height}return xt}(N,O,z,K,W,Z),ge={},xe=[],ve=[];if(L!=0){const fe=[];for(V=0;V<te.length;V++)fe.push(te[V].img.buffer);const Ge=function(We){let at=0;for(var xt=0;xt<We.length;xt++)at+=We[xt].byteLength;const _t=new Uint8Array(at);let Pt=0;for(xt=0;xt<We.length;xt++){const Vt=new Uint8Array(We[xt]),Xt=Vt.length;for(let Bt=0;Bt<Xt;Bt+=4){let It=Vt[Bt],Ft=Vt[Bt+1],dt=Vt[Bt+2];const Tn=Vt[Bt+3];Tn==0&&(It=Ft=dt=0),_t[Pt+Bt]=It,_t[Pt+Bt+1]=Ft,_t[Pt+Bt+2]=dt,_t[Pt+Bt+3]=Tn}Pt+=Xt}return _t.buffer}(fe),et=x(Ge,L);for(V=0;V<et.plte.length;V++)xe.push(et.plte[V].est.rgba);let Le=0;for(V=0;V<te.length;V++){const ke=(He=te[V]).img.length;var Ne=new Uint8Array(et.inds.buffer,Le>>2,ke>>2);ve.push(Ne);const We=new Uint8Array(et.abuf,Le,ke);J&&a(He.img,He.rect.width,He.rect.height,xe,We,Ne),He.img.set(We),Le+=ke}}else for(D=0;D<te.length;D++){var He=te[D];const fe=new Uint32Array(He.img.buffer);var Ke=He.rect.width;for(G=fe.length,Ne=new Uint8Array(G),ve.push(Ne),V=0;V<G;V++){const Ge=fe[V];if(V!=0&&Ge==fe[V-1])Ne[V]=Ne[V-1];else if(V>Ke&&Ge==fe[V-Ke])Ne[V]=Ne[V-Ke];else{let et=ge[Ge];if(et==null&&(ge[Ge]=et=xe.length,xe.push(Ge),xe.length>=300))break;Ne[V]=et}}}const qe=xe.length;for(qe<=256&&F==0&&(ee=qe<=2?1:qe<=4?2:qe<=16?4:8,ee=Math.max(ee,U)),D=0;D<te.length;D++){(He=te[D]).rect.x,He.rect.y,Ke=He.rect.width;const fe=He.rect.height;let Ge=He.img;new Uint32Array(Ge.buffer);let et=4*Ke,Le=4;if(qe<=256&&F==0){et=Math.ceil(ee*Ke/8);var Be=new Uint8Array(et*fe);const ke=ve[D];for(let We=0;We<fe;We++){V=We*et;const at=We*Ke;if(ee==8)for(var Te=0;Te<Ke;Te++)Be[V+Te]=ke[at+Te];else if(ee==4)for(Te=0;Te<Ke;Te++)Be[V+(Te>>1)]|=ke[at+Te]<<4-4*(1&Te);else if(ee==2)for(Te=0;Te<Ke;Te++)Be[V+(Te>>2)]|=ke[at+Te]<<6-2*(3&Te);else if(ee==1)for(Te=0;Te<Ke;Te++)Be[V+(Te>>3)]|=ke[at+Te]<<7-1*(7&Te)}Ge=Be,Q=3,Le=1}else if(H==0&&te.length==1){Be=new Uint8Array(Ke*fe*3);const ke=Ke*fe;for(V=0;V<ke;V++){const We=3*V,at=4*V;Be[We]=Ge[at],Be[We+1]=Ge[at+1],Be[We+2]=Ge[at+2]}Ge=Be,Q=2,Le=3,et=3*Ke}He.img=Ge,He.bpl=et,He.bpp=Le}return{ctype:Q,depth:ee,plte:xe,frames:te}}function d(N,O,z,L,M,K,W){const Z=Uint8Array,U=Uint32Array,F=new Z(N[M-1]),J=new U(N[M-1]),Q=M+1<N.length?new Z(N[M+1]):null,ee=new Z(N[M]),ne=new U(ee.buffer);let D=O,G=z,V=-1,H=-1;for(let ge=0;ge<K.height;ge++)for(let xe=0;xe<K.width;xe++){const ve=K.x+xe,Ne=K.y+ge,He=Ne*O+ve,Ke=ne[He];Ke==0||L[M-1].dispose==0&&J[He]==Ke&&(Q==null||Q[4*He+3]!=0)||(ve<D&&(D=ve),ve>V&&(V=ve),Ne<G&&(G=Ne),Ne>H&&(H=Ne))}V==-1&&(D=G=V=H=0),W&&((1&D)==1&&D--,(1&G)==1&&G--),K={x:D,y:G,width:V-D+1,height:H-G+1};const te=L[M];te.rect=K,te.blend=1,te.img=new Uint8Array(K.width*K.height*4),L[M-1].dispose==0?(t(F,O,z,te.img,K.width,K.height,-K.x,-K.y,0),h(ee,O,z,te.img,K)):t(ee,O,z,te.img,K.width,K.height,-K.x,-K.y,0)}function h(N,O,z,L,M){t(N,O,z,L,M.width,M.height,-M.x,-M.y,2)}function p(N,O,z,L,M,K,W){const Z=[];let U,F=[0,1,2,3,4];K!=-1?F=[K]:(O*L>5e5||z==1)&&(F=[0]),W&&(U={level:0});const J=MQ;for(var Q=0;Q<F.length;Q++){for(let D=0;D<O;D++)y(M,N,D,L,z,F[Q]);Z.push(J.deflate(M,U))}let ee,ne=1e9;for(Q=0;Q<Z.length;Q++)Z[Q].length<ne&&(ee=Q,ne=Z[Q].length);return Z[ee]}function y(N,O,z,L,M,K){const W=z*L;let Z=W+z;if(N[Z]=K,Z++,K==0)if(L<500)for(var U=0;U<L;U++)N[Z+U]=O[W+U];else N.set(new Uint8Array(O.buffer,W,L),Z);else if(K==1){for(U=0;U<M;U++)N[Z+U]=O[W+U];for(U=M;U<L;U++)N[Z+U]=O[W+U]-O[W+U-M]+256&255}else if(z==0){for(U=0;U<M;U++)N[Z+U]=O[W+U];if(K==2)for(U=M;U<L;U++)N[Z+U]=O[W+U];if(K==3)for(U=M;U<L;U++)N[Z+U]=O[W+U]-(O[W+U-M]>>1)+256&255;if(K==4)for(U=M;U<L;U++)N[Z+U]=O[W+U]-n(O[W+U-M],0,0)+256&255}else{if(K==2)for(U=0;U<L;U++)N[Z+U]=O[W+U]+256-O[W+U-L]&255;if(K==3){for(U=0;U<M;U++)N[Z+U]=O[W+U]+256-(O[W+U-L]>>1)&255;for(U=M;U<L;U++)N[Z+U]=O[W+U]+256-(O[W+U-L]+O[W+U-M]>>1)&255}if(K==4){for(U=0;U<M;U++)N[Z+U]=O[W+U]+256-n(0,O[W+U-L],0)&255;for(U=M;U<L;U++)N[Z+U]=O[W+U]+256-n(O[W+U-M],O[W+U-L],O[W+U-M-L])&255}}}function x(N,O){const z=new Uint8Array(N),L=z.slice(0),M=new Uint32Array(L.buffer),K=v(L,O),W=K[0],Z=K[1],U=z.length,F=new Uint8Array(U>>2);let J;if(z.length<2e7)for(var Q=0;Q<U;Q+=4)J=b(W,ee=z[Q]*(1/255),ne=z[Q+1]*(1/255),D=z[Q+2]*(1/255),G=z[Q+3]*(1/255)),F[Q>>2]=J.ind,M[Q>>2]=J.est.rgba;else for(Q=0;Q<U;Q+=4){var ee=z[Q]*.00392156862745098,ne=z[Q+1]*(1/255),D=z[Q+2]*(1/255),G=z[Q+3]*(1/255);for(J=W;J.left;)J=S(J.est,ee,ne,D,G)<=0?J.left:J.right;F[Q>>2]=J.ind,M[Q>>2]=J.est.rgba}return{abuf:L.buffer,inds:F,plte:Z}}function v(N,O,z){z==null&&(z=1e-4);const L=new Uint32Array(N.buffer),M={i0:0,i1:N.length,bst:null,est:null,tdst:0,left:null,right:null};M.bst=j(N,M.i0,M.i1),M.est=P(M.bst);const K=[M];for(;K.length<O;){let Z=0,U=0;for(var W=0;W<K.length;W++)K[W].est.L>Z&&(Z=K[W].est.L,U=W);if(Z<z)break;const F=K[U],J=k(N,L,F.i0,F.i1,F.est.e,F.est.eMq255);if(F.i0>=J||F.i1<=J){F.est.L=0;continue}const Q={i0:F.i0,i1:J,bst:null,est:null,tdst:0,left:null,right:null};Q.bst=j(N,Q.i0,Q.i1),Q.est=P(Q.bst);const ee={i0:J,i1:F.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:F.bst.N-Q.bst.N},W=0;W<16;W++)ee.bst.R[W]=F.bst.R[W]-Q.bst.R[W];for(W=0;W<4;W++)ee.bst.m[W]=F.bst.m[W]-Q.bst.m[W];ee.est=P(ee.bst),F.left=Q,F.right=ee,K[U]=Q,K.push(ee)}for(K.sort((Z,U)=>U.bst.N-Z.bst.N),W=0;W<K.length;W++)K[W].ind=W;return[M,K]}function b(N,O,z,L,M){if(N.left==null)return N.tdst=function(Q,ee,ne,D,G){const V=ee-Q[0],H=ne-Q[1],te=D-Q[2],ge=G-Q[3];return V*V+H*H+te*te+ge*ge}(N.est.q,O,z,L,M),N;const K=S(N.est,O,z,L,M);let W=N.left,Z=N.right;K>0&&(W=N.right,Z=N.left);const U=b(W,O,z,L,M);if(U.tdst<=K*K)return U;const F=b(Z,O,z,L,M);return F.tdst<U.tdst?F:U}function S(N,O,z,L,M){const{e:K}=N;return K[0]*O+K[1]*z+K[2]*L+K[3]*M-N.eMq}function k(N,O,z,L,M,K){for(L-=4;z<L;){for(;T(N,z,M)<=K;)z+=4;for(;T(N,L,M)>K;)L-=4;if(z>=L)break;const W=O[z>>2];O[z>>2]=O[L>>2],O[L>>2]=W,z+=4,L-=4}for(;T(N,z,M)>K;)z-=4;return z+4}function T(N,O,z){return N[O]*z[0]+N[O+1]*z[1]+N[O+2]*z[2]+N[O+3]*z[3]}function j(N,O,z){const L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M=[0,0,0,0],K=z-O>>2;for(let W=O;W<z;W+=4){const Z=N[W]*.00392156862745098,U=N[W+1]*(1/255),F=N[W+2]*(1/255),J=N[W+3]*(1/255);M[0]+=Z,M[1]+=U,M[2]+=F,M[3]+=J,L[0]+=Z*Z,L[1]+=Z*U,L[2]+=Z*F,L[3]+=Z*J,L[5]+=U*U,L[6]+=U*F,L[7]+=U*J,L[10]+=F*F,L[11]+=F*J,L[15]+=J*J}return L[4]=L[1],L[8]=L[2],L[9]=L[6],L[12]=L[3],L[13]=L[7],L[14]=L[11],{R:L,m:M,N:K}}function P(N){const{R:O}=N,{m:z}=N,{N:L}=N,M=z[0],K=z[1],W=z[2],Z=z[3],U=L==0?0:1/L,F=[O[0]-M*M*U,O[1]-M*K*U,O[2]-M*W*U,O[3]-M*Z*U,O[4]-K*M*U,O[5]-K*K*U,O[6]-K*W*U,O[7]-K*Z*U,O[8]-W*M*U,O[9]-W*K*U,O[10]-W*W*U,O[11]-W*Z*U,O[12]-Z*M*U,O[13]-Z*K*U,O[14]-Z*W*U,O[15]-Z*Z*U],J=F,Q=C;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],ne=0,D=0;if(L!=0)for(let V=0;V<16&&(ee=Q.multVec(J,ee),D=Math.sqrt(Q.dot(ee,ee)),ee=Q.sml(1/D,ee),!(V!=0&&Math.abs(D-ne)<1e-9));V++)ne=D;const G=[M*U,K*U,W*U,Z*U];return{Cov:F,q:G,e:ee,L:ne,eMq255:Q.dot(Q.sml(255,G),ee),eMq:Q.dot(ee,G),rgba:(Math.round(255*G[3])<<24|Math.round(255*G[2])<<16|Math.round(255*G[1])<<8|Math.round(255*G[0])<<0)>>>0}}var C={multVec:(N,O)=>[N[0]*O[0]+N[1]*O[1]+N[2]*O[2]+N[3]*O[3],N[4]*O[0]+N[5]*O[1]+N[6]*O[2]+N[7]*O[3],N[8]*O[0]+N[9]*O[1]+N[10]*O[2]+N[11]*O[3],N[12]*O[0]+N[13]*O[1]+N[14]*O[2]+N[15]*O[3]],dot:(N,O)=>N[0]*O[0]+N[1]*O[1]+N[2]*O[2]+N[3]*O[3],sml:(N,O)=>[N*O[0],N*O[1],N*O[2],N*O[3]]};hl.encode=function(O,z,L,M,K,W,Z){M==null&&(M=0),Z==null&&(Z=!1);const U=u(O,z,L,M,[!1,!1,!1,0,Z,!1]);return c(U,-1),l(U,z,L,K,W)},hl.encodeLL=function(O,z,L,M,K,W,Z,U){const F={ctype:0+(M==1?0:2)+(K==0?0:4),depth:W,frames:[]},J=(M+K)*W,Q=J*z;for(let ee=0;ee<O.length;ee++)F.frames.push({rect:{x:0,y:0,width:z,height:L},img:new Uint8Array(O[ee]),blend:0,dispose:1,bpp:Math.ceil(J/8),bpl:Math.ceil(Q/8)});return c(F,0,!0),l(F,z,L,Z,U)},hl.encode.compress=u,hl.encode.dither=a,hl.quantize=x,hl.quantize.getKDtree=v,hl.quantize.getNearest=b})();const n8={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h=1<<20;let p,y,x,v,b=h,S=0,k=0,T=0;function j(N){d.setUint16(k,N,!0),k+=2}function P(N){d.setUint32(k,N,!0),k+=4}function C(N){k+=N}j(19778),P(c),C(4),P(122),P(108),P(n),P(-r>>>0),j(1),j(32),P(3),P(l),P(2835),P(2835),C(8),P(16711680),P(65280),P(255),P(4278190080),P(1466527264),function N(){for(;S<r&&b>0;){for(v=122+S*a,p=0;p<i;)b--,y=o[T++],x=y>>>24,d.setUint32(v+p,y<<8|x),p+=4;S++}T<o.length?(b=h,setTimeout(N,n8._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ko={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},IQ={[ko.CHROME]:16384,[ko.FIREFOX]:11180,[ko.DESKTOP_SAFARI]:16384,[ko.IE]:8192,[ko.IOS]:4096,[ko.ETC]:8192};const _4=typeof window<"u",r8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Jx=_4&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),RQ=(_4||r8)&&(Jx&&Jx.getOriginalSymbol(window,"File")||typeof File<"u"&&File),i8=(_4||r8)&&(Jx&&Jx.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function S4(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function s8(t){return new Promise((e,n)=>{const r=new i8;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function o8(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function th(){if(th.cachedResult!==void 0)return th.cachedResult;let t=ko.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ko.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ko.IOS:/Safari/i.test(e)?t=ko.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ko.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ko.IE),th.cachedResult=t,th.cachedResult}function a8(t,e){const n=th(),r=IQ[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function s2(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function l8(t,e){const{width:n,height:r}=a8(t.width,t.height),[i,s]=s2(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function fx(){return fx.cachedResult!==void 0||(fx.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),fx.cachedResult}function Zx(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=l8(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var c=function(u){try{throw u}catch(d){return r(d)}};try{let u;return s8(t).then(function(d){try{return u=d,o8(u).then(function(h){try{return i=h,function(){try{return o()}catch(p){return r(p)}}()}catch(p){return c(p)}},c)}catch(h){return c(h)}},c)}catch(u){c(u)}}catch(u){return r(u)}};try{if(fx()||[ko.DESKTOP_SAFARI,ko.MOBILE_SAFARI].includes(th()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function Qx(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let c,u,d;return c=t.getContext("2d"),{data:u}=c.getImageData(0,0,t.width,t.height),d=hl.encode([u.buffer],t.width,t.height,4096*i),a=new Blob([d],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let c=function(){return l.call(this)};if(e==="image/bmp")return new Promise(u=>n8.toBlob(t,u)).then((function(u){try{return a=u,a.name=n,a.lastModified=r,c.call(this)}catch(d){return o(d)}}).bind(this),o);{let u=function(){return c.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(d){try{return a=d,a.name=n,a.lastModified=r,u.call(this)}catch(h){return o(h)}}).bind(this),o);{let d;return d=t.toDataURL(e,i),S4(d,n,r).then((function(h){try{return a=h,u.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function l(){return s(a)}})}function tc(t){t.width=0,t.height=0}function Vp(){return new Promise(function(t,e){let n,r,i,s;return Vp.cachedResult!==void 0?t(Vp.cachedResult):S4("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Zx(n).then(function(a){try{return r=a[1],Qx(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,tc(r),Zx(i).then(function(c){try{return s=c[0],Vp.cachedResult=s.width===1&&s.height===2,t(Vp.cachedResult)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function c8(t){return new Promise((e,n)=>{const r=new i8;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const u=s.getUint16(a,c);a+=2;for(let d=0;d<u;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function u8(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=s2(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),tc(t)),o}function d8(t,e){const{width:n}=t,{height:r}=t,[i,s]=s2(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),tc(t),i}function fA(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,c,u,d,h,p,y,x,v,b,S,k,T,j,P,C,N;function O(L=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=L,e.onProgress(Math.min(s,100))}function z(L){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(L,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,O(),Zx(t,e).then((function(L){try{return[,l]=L,O(),c=u8(l,e),O(),new Promise(function(M,K){var W;if(!(W=e.exifOrientation))return c8(t).then((function(U){try{return W=U,Z.call(this)}catch(F){return K(F)}}).bind(this),K);function Z(){return M(W)}return Z.call(this)}).then((function(M){try{return u=M,O(),Vp().then((function(K){try{return d=K?c:d8(c,u),O(),h=e.initialQuality||1,p=e.fileType||t.type,Qx(d,p,t.name,t.lastModified,h).then((function(W){try{{let U=function(){if(o--&&(k>a||k>b)){let J,Q;return J=N?.95*C.width:C.width,Q=N?.95*C.height:C.height,[j,P]=s2(J,Q),P.drawImage(C,0,0,J,Q),h*=p==="image/png"?.85:.95,Qx(j,p,t.name,t.lastModified,h).then(function(ee){try{return T=ee,tc(C),C=j,k=T.size,z(Math.min(99,Math.floor((S-k)/(S-a)*100))),U}catch(ne){return i(ne)}},i)}return[1]},F=function(){return tc(C),tc(j),tc(c),tc(d),tc(l),z(100),r(T)};if(y=W,O(),x=y.size>a,v=y.size>t.size,!x&&!v)return z(100),r(y);var Z;return b=t.size,S=y.size,k=S,C=d,N=!e.alwaysKeepResolution&&x,(Z=(function(J){for(;J;){if(J.then)return void J.then(Z,i);try{if(J.pop){if(J.length)return J.pop()?F.call(this):J;J=U}else J=J.call(this)}catch(Q){return i(Q)}}}).bind(this))(U)}}catch(U){return i(U)}}).bind(this),i)}catch(W){return i(W)}}).bind(this),i)}catch(K){return i(K)}}).bind(this),i)}catch(M){return i(M)}}).bind(this),i)})}const FQ=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let hb;function zQ(t,e){return new Promise((n,r)=>{hb||(hb=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(FQ));const i=new Worker(hb);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function As(t,e){return new Promise(function(n,r){let i,s,o,a,l,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{o=p,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof RQ))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return fA(t,i).then((function(p){try{return s=p,h.call(this)}catch(y){return r(y)}}).bind(this),r);var u=(function(){try{return h.call(this)}catch(p){return r(p)}}).bind(this),d=function(p){try{return fA(t,i).then(function(y){try{return s=y,u()}catch(x){return r(x)}},r)}catch(y){return r(y)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",zQ(t,i).then(function(p){try{return s=p,u()}catch{return d()}},d)}catch{d()}function h(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=t8(t,s))}catch{}return n(s)}})}As.getDataUrlFromFile=s8,As.getFilefromDataUrl=S4,As.loadImage=o8,As.drawImageInCanvas=l8,As.drawFileInCanvas=Zx,As.canvasToFile=Qx,As.getExifOrientation=c8,As.handleMaxWidthOrHeight=u8,As.followExifOrientation=d8,As.cleanupCanvasMemory=tc,As.isAutoOrientationInBrowser=Vp,As.approximateBelowMaximumCanvasSizeOfBrowser=a8,As.copyExifWithoutOrientation=t8,As.getBrowserName=th,As.version="2.0.2";function Jn(t){"@babel/helpers - typeof";return Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(t)}function BQ(t,e){if(Jn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UQ(t){var e=BQ(t,"string");return Jn(e)=="symbol"?e:e+""}function $Q(t,e,n){return(e=UQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hA(Object(n),!0).forEach(function(r){$Q(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function So(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var mA=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gA=function(){return Math.random().toString(36).substring(7).split("").join(".")},yA={INIT:"@@redux/INIT"+gA(),REPLACE:"@@redux/REPLACE"+gA()};function WQ(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function f8(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(So(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(So(1));return n(f8)(t,e)}if(typeof t!="function")throw new Error(So(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(So(3));return s}function d(x){if(typeof x!="function")throw new Error(So(4));if(l)throw new Error(So(5));var v=!0;return c(),a.push(x),function(){if(v){if(l)throw new Error(So(6));v=!1,c();var S=a.indexOf(x);a.splice(S,1),o=null}}}function h(x){if(!WQ(x))throw new Error(So(7));if(typeof x.type>"u")throw new Error(So(8));if(l)throw new Error(So(9));try{l=!0,s=i(s,x)}finally{l=!1}for(var v=o=a,b=0;b<v.length;b++){var S=v[b];S()}return x}function p(x){if(typeof x!="function")throw new Error(So(10));i=x,h({type:yA.REPLACE})}function y(){var x,v=d;return x={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error(So(11));function k(){S.next&&S.next(u())}k();var T=v(k);return{unsubscribe:T}}},x[mA]=function(){return this},x}return h({type:yA.INIT}),r={dispatch:h,subscribe:d,getState:u,replaceReducer:p},r[mA]=y,r}function xA(t,e){return function(){return e(t.apply(this,arguments))}}function vA(t,e){if(typeof t=="function")return xA(t,e);if(typeof t!="object"||t===null)throw new Error(So(16));var n={};for(var r in t){var i=t[r];typeof i=="function"&&(n[r]=xA(i,e))}return n}function h8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function VQ(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(So(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=h8.apply(void 0,a)(i.dispatch),pA(pA({},i),{},{dispatch:s})}}}var pb={exports:{}},mb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA;function HQ(){if(wA)return mb;wA=1;var t=s1();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var p=h(),y=r({inst:{value:p,getSnapshot:h}}),x=y[0].inst,v=y[1];return s(function(){x.value=p,x.getSnapshot=h,l(x)&&v({inst:x})},[d,p,h]),i(function(){return l(x)&&v({inst:x}),d(function(){l(x)&&v({inst:x})})},[d]),o(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return mb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,mb}var bA;function p8(){return bA||(bA=1,pb.exports=HQ()),pb.exports}var qQ=p8(),gb={exports:{}},yb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function GQ(){if(_A)return yb;_A=1;var t=s1(),e=p8();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return yb.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=a(function(){function b(P){if(!S){if(S=!0,k=P,P=h(P),p!==void 0&&x.hasValue){var C=x.value;if(p(C,P))return T=C}return T=P}if(C=T,r(k,P))return C;var N=h(P);return p!==void 0&&p(C,N)?(k=P,C):(k=P,T=N)}var S=!1,k,T,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,h,p]);var v=i(c,y[0],y[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),l(v),v},yb}var SA;function KQ(){return SA||(SA=1,gb.exports=GQ()),gb.exports}KQ();function XQ(t){t()}let m8=XQ;const YQ=t=>m8=t,JQ=()=>m8,kA=Symbol.for("react-redux-context"),NA=typeof globalThis<"u"?globalThis:{};function ZQ(){var t;if(!Y.createContext)return{};const e=(t=NA[kA])!=null?t:NA[kA]=new Map;let n=e.get(Y.createContext);return n||(n=Y.createContext(null),e.set(Y.createContext,n)),n}const g8=ZQ(),QQ=()=>{throw new Error("uSES not initialized!")};function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ld.apply(null,arguments)}function y8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xb={exports:{}},ar={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CA;function eee(){if(CA)return ar;CA=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,S=t?Symbol.for("react.scope"):60119;function k(j){if(typeof j=="object"&&j!==null){var P=j.$$typeof;switch(P){case e:switch(j=j.type,j){case l:case c:case r:case s:case i:case d:return j;default:switch(j=j&&j.$$typeof,j){case a:case u:case y:case p:case o:return j;default:return P}}case n:return P}}}function T(j){return k(j)===c}return ar.AsyncMode=l,ar.ConcurrentMode=c,ar.ContextConsumer=a,ar.ContextProvider=o,ar.Element=e,ar.ForwardRef=u,ar.Fragment=r,ar.Lazy=y,ar.Memo=p,ar.Portal=n,ar.Profiler=s,ar.StrictMode=i,ar.Suspense=d,ar.isAsyncMode=function(j){return T(j)||k(j)===l},ar.isConcurrentMode=T,ar.isContextConsumer=function(j){return k(j)===a},ar.isContextProvider=function(j){return k(j)===o},ar.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},ar.isForwardRef=function(j){return k(j)===u},ar.isFragment=function(j){return k(j)===r},ar.isLazy=function(j){return k(j)===y},ar.isMemo=function(j){return k(j)===p},ar.isPortal=function(j){return k(j)===n},ar.isProfiler=function(j){return k(j)===s},ar.isStrictMode=function(j){return k(j)===i},ar.isSuspense=function(j){return k(j)===d},ar.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===c||j===s||j===i||j===d||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===y||j.$$typeof===p||j.$$typeof===o||j.$$typeof===a||j.$$typeof===u||j.$$typeof===v||j.$$typeof===b||j.$$typeof===S||j.$$typeof===x)},ar.typeOf=k,ar}var EA;function tee(){return EA||(EA=1,xb.exports=eee()),xb.exports}var vb,AA;function nee(){if(AA)return vb;AA=1;var t=tee(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=i;function o(y){return t.isMemo(y)?i:s[y.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function p(y,x,v){if(typeof x!="string"){if(h){var b=d(x);b&&b!==h&&p(y,b,v)}var S=l(x);c&&(S=S.concat(c(x)));for(var k=o(y),T=o(x),j=0;j<S.length;++j){var P=S[j];if(!n[P]&&!(v&&v[P])&&!(T&&T[P])&&!(k&&k[P])){var C=u(x,P);try{a(y,P,C)}catch{}}}}return y}return vb=p,vb}var ree=nee();const TA=Pv(ree);var wb={exports:{}},lr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jA;function iee(){if(jA)return lr;jA=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function x(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case n:case i:case r:case c:case u:return v;default:switch(v=v&&v.$$typeof,v){case a:case o:case l:case h:case d:case s:return v;default:return b}}case e:return b}}}return lr.ContextConsumer=o,lr.ContextProvider=s,lr.Element=t,lr.ForwardRef=l,lr.Fragment=n,lr.Lazy=h,lr.Memo=d,lr.Portal=e,lr.Profiler=i,lr.StrictMode=r,lr.Suspense=c,lr.SuspenseList=u,lr.isAsyncMode=function(){return!1},lr.isConcurrentMode=function(){return!1},lr.isContextConsumer=function(v){return x(v)===o},lr.isContextProvider=function(v){return x(v)===s},lr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},lr.isForwardRef=function(v){return x(v)===l},lr.isFragment=function(v){return x(v)===n},lr.isLazy=function(v){return x(v)===h},lr.isMemo=function(v){return x(v)===d},lr.isPortal=function(v){return x(v)===e},lr.isProfiler=function(v){return x(v)===i},lr.isStrictMode=function(v){return x(v)===r},lr.isSuspense=function(v){return x(v)===c},lr.isSuspenseList=function(v){return x(v)===u},lr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===c||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===d||v.$$typeof===s||v.$$typeof===o||v.$$typeof===l||v.$$typeof===y||v.getModuleId!==void 0)},lr.typeOf=x,lr}var PA;function see(){return PA||(PA=1,wb.exports=iee()),wb.exports}var oee=see();const aee=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function lee(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let a=!1,l,c,u,d,h;function p(S,k){return l=S,c=k,u=t(l,c),d=e(r,c),h=n(u,d,c),a=!0,h}function y(){return u=t(l,c),e.dependsOnOwnProps&&(d=e(r,c)),h=n(u,d,c),h}function x(){return t.dependsOnOwnProps&&(u=t(l,c)),e.dependsOnOwnProps&&(d=e(r,c)),h=n(u,d,c),h}function v(){const S=t(l,c),k=!o(S,u);return u=S,k&&(h=n(u,d,c)),h}function b(S,k){const T=!s(k,c),j=!i(S,l,k,c);return l=S,c=k,T&&j?y():T?x():j?v():h}return function(k,T){return a?b(k,T):p(k,T)}}function cee(t,e){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=e,s=y8(e,aee);const o=n(t,s),a=r(t,s),l=i(t,s);return lee(o,a,l,t,s)}function uee(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function l_(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function DA(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function x8(t,e){return function(r,{displayName:i}){const s=function(a,l){return s.dependsOnOwnProps?s.mapToProps(a,l):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,l){s.mapToProps=t,s.dependsOnOwnProps=DA(t);let c=s(a,l);return typeof c=="function"&&(s.mapToProps=c,s.dependsOnOwnProps=DA(c),c=s(a,l)),c},s}}function k4(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function dee(t){return t&&typeof t=="object"?l_(e=>uee(t,e)):t?typeof t=="function"?x8(t):k4(t,"mapDispatchToProps"):l_(e=>({dispatch:e}))}function fee(t){return t?typeof t=="function"?x8(t):k4(t,"mapStateToProps"):l_(()=>({}))}function hee(t,e,n){return Ld({},n,t,e)}function pee(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(l,c,u){const d=t(l,c,u);return s?i(d,o)||(o=d):(s=!0,o=d),o}}}function mee(t){return t?typeof t=="function"?pee(t):k4(t,"mergeProps"):()=>hee}function gee(){const t=JQ();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const OA={notify(){},get:()=>[]};function v8(t,e){let n,r=OA,i=0,s=!1;function o(x){u();const v=r.subscribe(x);let b=!1;return()=>{b||(b=!0,v(),d())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return s}function u(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=gee())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=OA)}function h(){s||(s=!0,u())}function p(){s&&(s=!1,d())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return y}const yee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ev=yee?Y.useLayoutEffect:Y.useEffect;function LA(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function bb(t,e){if(LA(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!LA(t[n[i]],e[n[i]]))return!1;return!0}const xee=["reactReduxForwardedRef"];let w8=QQ;const vee=t=>{w8=t},wee=[null,null];function bee(t,e,n){ev(()=>t(...e),n)}function _ee(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function See(t,e,n,r,i,s,o,a,l,c,u){if(!t)return()=>{};let d=!1,h=null;const p=()=>{if(d||!a.current)return;const x=e.getState();let v,b;try{v=r(x,i.current)}catch(S){b=S,h=S}b||(h=null),v===s.current?o.current||c():(s.current=v,l.current=v,o.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function kee(t,e){return t===e}function b8(t,e,n,{pure:r,areStatesEqual:i=kee,areOwnPropsEqual:s=bb,areStatePropsEqual:o=bb,areMergedPropsEqual:a=bb,forwardRef:l=!1,context:c=g8}={}){const u=c,d=fee(t),h=dee(e),p=mee(n),y=!!t;return v=>{const b=v.displayName||v.name||"Component",S=`Connect(${b})`,k={shouldHandleStateChanges:y,displayName:S,wrappedComponentName:b,WrappedComponent:v,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:a};function T(C){const[N,O,z]=Y.useMemo(()=>{const{reactReduxForwardedRef:Ke}=C,qe=y8(C,xee);return[C.context,Ke,qe]},[C]),L=Y.useMemo(()=>N&&N.Consumer&&oee.isContextConsumer(Y.createElement(N.Consumer,null))?N:u,[N,u]),M=Y.useContext(L),K=!!C.store&&!!C.store.getState&&!!C.store.dispatch,W=!!M&&!!M.store,Z=K?C.store:M.store,U=W?M.getServerState:Z.getState,F=Y.useMemo(()=>cee(Z.dispatch,k),[Z]),[J,Q]=Y.useMemo(()=>{if(!y)return wee;const Ke=v8(Z,K?void 0:M.subscription),qe=Ke.notifyNestedSubs.bind(Ke);return[Ke,qe]},[Z,K,M]),ee=Y.useMemo(()=>K?M:Ld({},M,{subscription:J}),[K,M,J]),ne=Y.useRef(),D=Y.useRef(z),G=Y.useRef(),V=Y.useRef(!1);Y.useRef(!1);const H=Y.useRef(!1),te=Y.useRef();ev(()=>(H.current=!0,()=>{H.current=!1}),[]);const ge=Y.useMemo(()=>()=>G.current&&z===D.current?G.current:F(Z.getState(),z),[Z,z]),xe=Y.useMemo(()=>qe=>J?See(y,Z,J,F,D,ne,V,H,G,Q,qe):()=>{},[J]);bee(_ee,[D,ne,V,z,G,Q]);let ve;try{ve=w8(xe,ge,U?()=>F(U(),z):ge)}catch(Ke){throw te.current&&(Ke.message+=`
The error may be correlated with this previous error:
${te.current.stack}

`),Ke}ev(()=>{te.current=void 0,G.current=void 0,ne.current=ve});const Ne=Y.useMemo(()=>Y.createElement(v,Ld({},ve,{ref:O})),[O,v,ve]);return Y.useMemo(()=>y?Y.createElement(L.Provider,{value:ee},Ne):Ne,[L,Ne,ee])}const P=Y.memo(T);if(P.WrappedComponent=v,P.displayName=T.displayName=S,l){const N=Y.forwardRef(function(z,L){return Y.createElement(P,Ld({},z,{reactReduxForwardedRef:L}))});return N.displayName=S,N.WrappedComponent=v,TA(N,v)}return TA(P,v)}}function Nee({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=Y.useMemo(()=>{const c=v8(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=Y.useMemo(()=>t.getState(),[t]);ev(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||g8;return Y.createElement(l.Provider,{value:o},n)}vee(qQ.useSyncExternalStore);YQ(eu.unstable_batchedUpdates);function Cee(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function _8(t,e){var n=Y.useState(function(){return{inputs:e,result:t()}})[0],r=Y.useRef(!0),i=Y.useRef(n),s=r.current||!!(e&&i.current.inputs&&Cee(e,i.current.inputs)),o=s?i.current:{inputs:e,result:t()};return Y.useEffect(function(){r.current=!1,i.current=o},[o]),o.result}function Eee(t,e){return _8(function(){return t},e)}var Fn=_8,Zt=Eee,Aee="Invariant failed";function Tee(t,e){throw new Error(Aee)}var xl=function(e){var n=e.top,r=e.right,i=e.bottom,s=e.left,o=r-s,a=i-n,l={top:n,right:r,bottom:i,left:s,width:o,height:a,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return l},N4=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},MA=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},jee=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},_b={top:0,right:0,bottom:0,left:0},C4=function(e){var n=e.borderBox,r=e.margin,i=r===void 0?_b:r,s=e.border,o=s===void 0?_b:s,a=e.padding,l=a===void 0?_b:a,c=xl(N4(n,i)),u=xl(MA(n,o)),d=xl(MA(u,l));return{marginBox:c,borderBox:xl(n),paddingBox:u,contentBox:d,margin:i,border:o,padding:l}},ja=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&Tee(),i},Pee=function(){return{x:window.pageXOffset,y:window.pageYOffset}},tv=function(e,n){var r=e.borderBox,i=e.border,s=e.margin,o=e.padding,a=jee(r,n);return C4({borderBox:a,border:i,margin:s,padding:o})},nv=function(e,n){return n===void 0&&(n=Pee()),tv(e,n)},S8=function(e,n){var r={top:ja(n.marginTop),right:ja(n.marginRight),bottom:ja(n.marginBottom),left:ja(n.marginLeft)},i={top:ja(n.paddingTop),right:ja(n.paddingRight),bottom:ja(n.paddingBottom),left:ja(n.paddingLeft)},s={top:ja(n.borderTopWidth),right:ja(n.borderRightWidth),bottom:ja(n.borderBottomWidth),left:ja(n.borderLeftWidth)};return C4({borderBox:e,margin:r,padding:i,border:s})},k8=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return S8(n,r)},IA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Dee(t,e){return!!(t===e||IA(t)&&IA(e))}function Oee(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Dee(t[n],e[n]))return!1;return!0}function Wi(t,e){e===void 0&&(e=Oee);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var Ig=function(e){var n=[],r=null,i=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];n=a,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function N8(t,e){}N8.bind(null,"warn");N8.bind(null,"error");function Md(){}function Lee(t,e){return{...t,...e}}function Fa(t,e,n){const r=e.map(i=>{const s=Lee(n,i.options);return t.addEventListener(i.eventName,i.fn,s),function(){t.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(s=>{s()})}}const Mee="Invariant failed";class rv extends Error{}rv.prototype.toString=function(){return this.message};function Ct(t,e){throw new rv(Mee)}class Iee extends Mt.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Md,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof rv&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Fa(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof rv){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Ree=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,iv=t=>t+1,Fee=t=>`
  You have lifted an item in position ${iv(t.source.index)}
`,C8=(t,e)=>{const n=t.droppableId===e.droppableId,r=iv(t.index),i=iv(e.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},E8=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,zee=t=>{const e=t.destination;if(e)return C8(t.source,e);const n=t.combine;return n?E8(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},RA=t=>`
  The item has returned to its starting position
  of ${iv(t.index)}
`,Bee=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${RA(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${C8(t.source,e)}
    `:n?`
      You have dropped the item.
      ${E8(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${RA(t.source)}
  `},Uee={dragHandleUsageInstructions:Ree,onDragStart:Fee,onDragUpdate:zee,onDragEnd:Bee};var hx=Uee;const qi={x:0,y:0},cs=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),ra=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Id=(t,e)=>t.x===e.x&&t.y===e.y,T0=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),wh=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},Rg=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),FA=(t,e)=>Math.min(...e.map(n=>Rg(t,n))),A8=t=>e=>({x:t(e.x),y:t(e.y)});var $ee=(t,e)=>{const n=xl({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const y1=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),zA=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],Wee={top:0,right:0,bottom:0,left:0},Vee=(t,e)=>e?y1(t,e.scroll.diff.displacement):t,Hee=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,qee=(t,e)=>e&&e.shouldClipSubject?$ee(e.pageMarginBox,t):xl(t);var f0=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const i=Vee(t.marginBox,r),s=Hee(i,n,e),o=qee(s,r);return{page:t,withPlaceholder:e,active:o}},E4=(t,e)=>{t.frame||Ct();const n=t.frame,r=ra(e,n.scroll.initial),i=T0(r),s={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:i},max:n.scroll.max}},o=f0({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:s});return{...t,frame:s,subject:o}};const T8=Wi(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),j8=Wi(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),o2=Wi(t=>Object.values(t)),Gee=Wi(t=>Object.values(t));var j0=Wi((t,e)=>Gee(e).filter(r=>t===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function A4(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function a2(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var l2=Wi((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),Kee=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!A4(i))return null;function o(p){const y={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...i,at:y}}const a=i.displaced.all,l=a.length?a[0]:null;if(t)return l?o(l):null;const c=l2(e,r);if(!l){if(!c.length)return null;const p=c[c.length-1];return o(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&Ct();const d=u-1;if(d<0)return null;const h=c[d];return o(h.descriptor.id)},P0=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const P8={point:qi,value:0},Fg={invisible:{},visible:{},all:[]},Xee={displaced:Fg,displacedBy:P8,at:null};var Yee=Xee,$a=(t,e)=>n=>t<=n&&n<=e,D8=t=>{const e=$a(t.top,t.bottom),n=$a(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=e(r.top)||e(r.bottom),o=n(r.left)||n(r.right);if(s&&o)return!0;const l=r.top<t.top&&r.bottom>t.bottom,c=r.left<t.left&&r.right>t.right;return l&&c?!0:l&&o||c&&s}},Jee=t=>{const e=$a(t.top,t.bottom),n=$a(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const T4={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},O8={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Zee=t=>e=>{const n=$a(e.top,e.bottom),r=$a(e.left,e.right);return i=>t===T4?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const Qee=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:qi;return y1(t,n)},ete=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,tte=(t,e,n)=>n(e)(t),j4=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const s=r?Qee(t,e):t;return ete(s,e,i)&&tte(s,n,i)},nte=t=>j4({...t,isVisibleThroughFrameFn:D8}),L8=t=>j4({...t,isVisibleThroughFrameFn:Jee}),rte=t=>j4({...t,isVisibleThroughFrameFn:Zee(t.destination.axis)}),ite=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:i}=e;if(r[t])return!1;const s=i[t];return s?s.shouldAnimate:!0};function ste(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return xl(N4(n,r))}function zg({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:i,last:s}){return t.reduce(function(a,l){const c=ste(l,n),u=l.descriptor.id;if(a.all.push(u),!nte({target:c,destination:e,viewport:r,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=ite(u,s,i),p={draggableId:u,shouldAnimate:h};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function ote(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function BA({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const i=ote(t,{inHomeList:e});return{displaced:Fg,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function sv({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:i,last:s,index:o,forceShouldAnimate:a}){const l=P0(t,n);if(o==null)return BA({insideDestination:e,inHomeList:l,displacedBy:i,destination:n});const c=e.find(y=>y.descriptor.index===o);if(!c)return BA({insideDestination:e,inHomeList:l,displacedBy:i,destination:n});const u=l2(t,e),d=e.indexOf(c),h=u.slice(d);return{displaced:zg({afterDragging:h,destination:n,displacedBy:i,last:s,viewport:r.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Hd(t,e){return!!e.effected[t]}var ate=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const s=r.draggableId,a=n[s].descriptor.index;return Hd(s,i)?t?a:a-1:t?a+1:a},lte=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,s=t?i+1:i-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,l=e?a:a+1;return s<o||s>l?null:s},cte=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:i,insideDestination:s,previousImpact:o,viewport:a,afterCritical:l})=>{const c=o.at;if(c||Ct(),c.type==="REORDER"){const d=lte({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:s});return d==null?null:sv({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:d})}const u=ate({isMovingForward:t,destination:i,displaced:o.displaced,draggables:r,combine:c.combine,afterCritical:l});return u==null?null:sv({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:u})},ute=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const i=!!(t.visible[n]||t.invisible[n]);return Hd(n,e)?i?qi:T0(r.point):i?r.point:qi},dte=({afterCritical:t,impact:e,draggables:n})=>{const r=a2(e);r||Ct();const i=r.draggableId,s=n[i].page.borderBox.center,o=ute({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return cs(s,o)};const M8=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,fte=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,P4=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,UA=({axis:t,moveRelativeTo:e,isMoving:n})=>wh(t.line,e.marginBox[t.end]+M8(t,n),P4(t,e.marginBox,n)),$A=({axis:t,moveRelativeTo:e,isMoving:n})=>wh(t.line,e.marginBox[t.start]-fte(t,n),P4(t,e.marginBox,n)),hte=({axis:t,moveInto:e,isMoving:n})=>wh(t.line,e.contentBox[t.start]+M8(t,n),P4(t,e.contentBox,n));var pte=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i})=>{const s=j0(r.descriptor.id,n),o=e.page,a=r.axis;if(!s.length)return hte({axis:a,moveInto:r.page,isMoving:o});const{displaced:l,displacedBy:c}=t,u=l.all[0];if(u){const h=n[u];if(Hd(u,i))return $A({axis:a,moveRelativeTo:h.page,isMoving:o});const p=tv(h.page,c.point);return $A({axis:a,moveRelativeTo:p,isMoving:o})}const d=s[s.length-1];if(d.descriptor.id===e.descriptor.id)return o.borderBox.center;if(Hd(d.descriptor.id,i)){const h=tv(d.page,T0(i.displacedBy.point));return UA({axis:a,moveRelativeTo:h,isMoving:o})}return UA({axis:a,moveRelativeTo:d.page,isMoving:o})},c_=(t,e)=>{const n=t.frame;return n?cs(e,n.scroll.diff.displacement):e};const mte=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:i})=>{const s=e.page.borderBox.center,o=t.at;return!n||!o?s:o.type==="REORDER"?pte({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i}):dte({impact:t,draggables:r,afterCritical:i})};var c2=t=>{const e=mte(t),n=t.droppable;return n?c_(n,e):e},I8=(t,e)=>{const n=ra(e,t.scroll.initial),r=T0(n);return{frame:xl({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function WA(t,e){return t.map(n=>e[n])}function gte(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var yte=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:i})=>{const s=I8(e,cs(e.scroll.current,i)),o=n.frame?E4(n,cs(n.frame.scroll.current,i)):n,a=t.displaced,l=zg({afterDragging:WA(a.all,r),destination:n,displacedBy:t.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),c=zg({afterDragging:WA(a.all,r),destination:o,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),u={},d={},h=[a,l,c];return a.all.forEach(y=>{const x=gte(y,h);if(x){d[y]=x;return}u[y]=!0}),{...t,displaced:{all:a.all,invisible:u,visible:d}}},xte=(t,e)=>cs(t.scroll.diff.displacement,e),D4=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=xte(n,t),i=ra(r,e.page.borderBox.center);return cs(e.client.borderBox.center,i)},R8=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:s=!1})=>{const o=ra(n,t.page.borderBox.center),l={target:y1(t.page.borderBox,o),destination:e,withDroppableDisplacement:i,viewport:r};return s?rte(l):L8(l)},vte=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:i,viewport:s,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:l})=>{if(!n.isEnabled)return null;const c=j0(n.descriptor.id,r),u=P0(e,n),d=Kee({isMovingForward:t,draggable:e,destination:n,insideDestination:c,previousImpact:i})||cte({isMovingForward:t,isInHomeList:u,draggable:e,draggables:r,destination:n,insideDestination:c,previousImpact:i,viewport:s,afterCritical:l});if(!d)return null;const h=c2({impact:d,draggable:e,droppable:n,draggables:r,afterCritical:l});if(R8({draggable:e,destination:n,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:D4({pageBorderBoxCenter:h,draggable:e,viewport:s}),impact:d,scrollJumpRequest:null};const y=ra(h,o),x=yte({impact:d,viewport:s,destination:n,draggables:r,maxScrollChange:y});return{clientSelection:a,impact:x,scrollJumpRequest:y}};const Ys=t=>{const e=t.subject.active;return e||Ct(),e};var wte=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:i})=>{const s=n.subject.active;if(!s)return null;const o=n.axis,a=$a(s[o.start],s[o.end]),l=o2(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>D8(i.frame)(Ys(u))).filter(u=>{const d=Ys(u);return t?s[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<s[o.crossAxisStart]}).filter(u=>{const d=Ys(u),h=$a(d[o.start],d[o.end]);return a(d[o.start])||a(d[o.end])||h(s[o.start])||h(s[o.end])}).sort((u,d)=>{const h=Ys(u)[o.crossAxisStart],p=Ys(d)[o.crossAxisStart];return t?h-p:p-h}).filter((u,d,h)=>Ys(u)[o.crossAxisStart]===Ys(h[0])[o.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>$a(Ys(u)[o.start],Ys(u)[o.end])(e[o.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>Ys(u)[o.start]-Ys(d)[o.start])[0]:l.sort((u,d)=>{const h=FA(e,zA(Ys(u))),p=FA(e,zA(Ys(d)));return h!==p?h-p:Ys(u)[o.start]-Ys(d)[o.start]})[0]};const VA=(t,e)=>{const n=t.page.borderBox.center;return Hd(t.descriptor.id,e)?ra(n,e.displacedBy.point):n},bte=(t,e)=>{const n=t.page.borderBox;return Hd(t.descriptor.id,e)?y1(n,T0(e.displacedBy.point)):n};var _te=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>L8({target:bte(o,i),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const l=Rg(t,c_(n,VA(o,i))),c=Rg(t,c_(n,VA(a,i)));return l<c?-1:c<l?1:o.descriptor.index-a.descriptor.index})[0]||null,x1=Wi(function(e,n){const r=n[e.line];return{value:r,point:wh(e.line,r)}});const Ste=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return wh(r.line,e[r.line]);const i=t.subject.page.contentBox[r.size],l=j0(t.descriptor.id,n).reduce((c,u)=>c+u.client.marginBox[r.size],0)+e[r.line]-i;return l<=0?null:wh(r.line,l)},F8=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),z8=(t,e,n)=>{const r=t.frame;P0(e,t)&&Ct(),t.subject.withPlaceholder&&Ct();const i=x1(t.axis,e.displaceBy).point,s=Ste(t,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const u=f0({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return{...t,subject:u}}const a=s?cs(r.scroll.max,s):r.scroll.max,l=F8(r,a),c=f0({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},kte=t=>{const e=t.subject.withPlaceholder;e||Ct();const n=t.frame;if(!n){const o=f0({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:o}}const r=e.oldFrameMaxScroll;r||Ct();const i=F8(n,r),s=f0({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:s,frame:i}};var Nte=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:i,destination:s,viewport:o,afterCritical:a})=>{if(!e){if(n.length)return null;const d={displaced:Fg,displacedBy:P8,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},h=c2({impact:d,draggable:r,droppable:s,draggables:i,afterCritical:a}),p=P0(r,s)?s:z8(s,r,i);return R8({draggable:r,destination:p,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=t[s.axis.line]<=e.page.borderBox.center[s.axis.line],c=(()=>{const d=e.descriptor.index;return e.descriptor.id===r.descriptor.id||l?d:d+1})(),u=x1(s.axis,r.displaceBy);return sv({draggable:r,insideDestination:n,destination:s,viewport:o,displacedBy:u,last:Fg,index:c})},Cte=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:i,droppables:s,viewport:o,afterCritical:a})=>{const l=wte({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:s,viewport:o});if(!l)return null;const c=j0(l.descriptor.id,i),u=_te({pageBorderBoxCenter:e,viewport:o,destination:l,insideDestination:c,afterCritical:a}),d=Nte({previousPageBorderBoxCenter:e,destination:l,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:c,viewport:o,afterCritical:a});if(!d)return null;const h=c2({impact:d,draggable:n,droppable:l,draggables:i,afterCritical:a});return{clientSelection:D4({pageBorderBoxCenter:h,draggable:n,viewport:o}),impact:d,scrollJumpRequest:null}},oa=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const Ete=(t,e)=>{const n=oa(t);return n?e[n]:null};var Ate=({state:t,type:e})=>{const n=Ete(t.impact,t.dimensions.droppables),r=!!n,i=t.dimensions.droppables[t.critical.droppable.id],s=n||i,o=s.axis.direction,a=o==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||o==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!r)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:d,droppables:h}=t.dimensions;return a?vte({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:s,draggables:d,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Cte({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:s,draggables:d,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Wf(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function B8(t){const e=$a(t.top,t.bottom),n=$a(t.left,t.right);return function(i){return e(i.y)&&n(i.x)}}function Tte(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function jte({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,i=n.map(s=>{const o=s.axis,a=wh(s.axis.line,t.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:Rg(r,a)}}).sort((s,o)=>o.distance-s.distance);return i[0]?i[0].id:null}function Pte({pageBorderBox:t,draggable:e,droppables:n}){const r=o2(n).filter(i=>{if(!i.isEnabled)return!1;const s=i.subject.active;if(!s||!Tte(t,s))return!1;if(B8(s)(t.center))return!0;const o=i.axis,a=s.center[o.crossAxisLine],l=t[o.crossAxisStart],c=t[o.crossAxisEnd],u=$a(s[o.crossAxisStart],s[o.crossAxisEnd]),d=u(l),h=u(c);return!d&&!h?!0:d?l<a:c>a});return r.length?r.length===1?r[0].descriptor.id:jte({pageBorderBox:t,draggable:e,candidates:r}):null}const U8=(t,e)=>xl(y1(t,e));var Dte=(t,e)=>{const n=t.frame;return n?U8(e,n.scroll.diff.value):e};function $8({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function Ote({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var Lte=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:i,viewport:s,afterCritical:o})=>{const a=n.axis,l=x1(n.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],p=l2(e,r).find(x=>{const v=x.descriptor.id,b=x.page.borderBox.center[a.line],S=Hd(v,o),k=$8({displaced:i,id:v});return S?k?d<=b:u<b-c:k?d<=b+c:u<b})||null,y=Ote({draggable:e,closest:p,inHomeList:P0(e,n)});return sv({draggable:e,insideDestination:r,destination:n,viewport:s,last:i,displacedBy:l,index:y})};const Mte=4;var Ite=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:i,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=x1(r.axis,t.displaceBy),l=a.value,c=e[o.start],u=e[o.end],h=l2(t,i).find(y=>{const x=y.descriptor.id,v=y.page.borderBox,S=v[o.size]/Mte,k=Hd(x,s),T=$8({displaced:n.displaced,id:x});return k?T?u>v[o.start]+S&&u<v[o.end]-S:c>v[o.start]-l+S&&c<v[o.end]-l-S:T?u>v[o.start]+l+S&&u<v[o.end]+l-S:c>v[o.start]+S&&c<v[o.end]-S});return h?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:r.descriptor.id}}}:null},W8=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:i,viewport:s,afterCritical:o})=>{const a=U8(e.page.borderBox,t),l=Pte({pageBorderBox:a,draggable:e,droppables:r});if(!l)return Yee;const c=r[l],u=j0(c.descriptor.id,n),d=Dte(c,a);return Ite({pageBorderBoxWithDroppableScroll:d,draggable:e,previousImpact:i,destination:c,insideDestination:u,afterCritical:o})||Lte({pageBorderBoxWithDroppableScroll:d,draggable:e,destination:c,insideDestination:u,last:i.displaced,viewport:s,afterCritical:o})},O4=(t,e)=>({...t,[e.descriptor.id]:e});const Rte=({previousImpact:t,impact:e,droppables:n})=>{const r=oa(t),i=oa(e);if(!r||r===i)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const o=kte(s);return O4(n,o)};var Fte=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:i})=>{const s=Rte({previousImpact:r,impact:i,droppables:n}),o=oa(i);if(!o)return s;const a=n[o];if(P0(t,a)||a.subject.withPlaceholder)return s;const l=z8(a,t,e);return O4(s,l)},Jm=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:i,scrollJumpRequest:s})=>{const o=r||t.viewport,a=n||t.dimensions,l=e||t.current.client.selection,c=ra(l,t.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:cs(t.initial.client.borderBoxCenter,c)},d={selection:cs(u.selection,o.scroll.current),borderBoxCenter:cs(u.borderBoxCenter,o.scroll.current),offset:cs(u.offset,o.scroll.diff.value)},h={client:u,page:d};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:o,current:h};const p=a.draggables[t.critical.draggable.id],y=i||W8({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),x=Fte({draggable:p,impact:y,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:x},impact:y,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function zte(t,e){return t.map(n=>e[n])}var V8=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:i})=>{const s=t.displaced,o=zte(s.all,n),a=zg({afterDragging:o,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:s});return{...t,displaced:a}},H8=({impact:t,draggable:e,droppable:n,draggables:r,viewport:i,afterCritical:s})=>{const o=c2({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:s});return D4({pageBorderBoxCenter:o,draggable:e,viewport:i})},q8=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&Ct();const r=t.impact,i=n||t.viewport,s=e||t.dimensions,{draggables:o,droppables:a}=s,l=o[t.critical.draggable.id],c=oa(r);c||Ct();const u=a[c],d=V8({impact:r,viewport:i,destination:u,draggables:o}),h=H8({impact:d,draggable:l,droppable:u,draggables:o,viewport:i,afterCritical:t.afterCritical});return Jm({impact:d,clientSelection:h,state:t,dimensions:s,viewport:i})},Bte=t=>({index:t.index,droppableId:t.droppableId}),G8=({draggable:t,home:e,draggables:n,viewport:r})=>{const i=x1(e.axis,t.displaceBy),s=j0(e.descriptor.id,n),o=s.indexOf(t);o===-1&&Ct();const a=s.slice(o+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:l};return{impact:{displaced:zg({afterDragging:a,destination:e,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:Bte(t.descriptor)}},afterCritical:c}},Ute=(t,e)=>({draggables:t.draggables,droppables:O4(t.droppables,e)}),$te=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=tv(t.client,e),i=nv(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:i}},Wte=t=>{const e=t.frame;return e||Ct(),e},Vte=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(i=>{const s=i.descriptor.droppableId,o=e[s],l=Wte(o).scroll.diff.value,c=cs(r,l);return $te({draggable:i,offset:c,initialWindowScroll:n.scroll.initial})})},Hte=({state:t,published:e})=>{const n=e.modified.map(b=>{const S=t.dimensions.droppables[b.droppableId];return E4(S,b.scroll)}),r={...t.dimensions.droppables,...T8(n)},i=j8(Vte({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),s={...t.dimensions.draggables,...i};e.removals.forEach(b=>{delete s[b]});const o={droppables:r,draggables:s},a=oa(t.impact),l=a?o.droppables[a]:null,c=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],{impact:d,afterCritical:h}=G8({draggable:c,home:u,draggables:s,viewport:t.viewport}),p=l&&l.isCombineEnabled?t.impact:d,y=W8({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),x={...t,phase:"DRAGGING",impact:y,onLiftImpact:d,dimensions:o,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const u_=t=>t.movementMode==="SNAP",Sb=(t,e,n)=>{const r=Ute(t.dimensions,e);return!u_(t)||n?Jm({state:t,dimensions:r}):q8({state:t,dimensions:r})};function kb(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const HA={phase:"IDLE",completed:null,shouldFlush:!1};var qte=(t=HA,e)=>{if(e.type==="FLUSH")return{...HA,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&Ct();const{critical:n,clientSelection:r,viewport:i,dimensions:s,movementMode:o}=e.payload,a=s.draggables[n.draggable.id],l=s.droppables[n.droppable.id],c={selection:r,borderBoxCenter:a.client.borderBox.center,offset:qi},u={client:c,page:{selection:cs(c.selection,i.scroll.initial),borderBoxCenter:cs(c.selection,i.scroll.initial),offset:cs(c.selection,i.scroll.diff.value)}},d=o2(s.droppables).every(x=>!x.isFixedOnPage),{impact:h,afterCritical:p}=G8({draggable:a,home:l,draggables:s.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&Ct(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||Ct(),Hte({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Wf(t)||Ct();const{client:n}=e.payload;return Id(n,t.current.client.selection)?t:Jm({state:t,clientSelection:n,impact:u_(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return kb(t);Wf(t)||Ct();const{id:n,newScroll:r}=e.payload,i=t.dimensions.droppables[n];if(!i)return t;const s=E4(i,r);return Sb(t,s,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Wf(t)||Ct();const{id:n,isEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||Ct(),i.isEnabled===r&&Ct();const s={...i,isEnabled:r};return Sb(t,s,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Wf(t)||Ct();const{id:n,isCombineEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||Ct(),i.isCombineEnabled===r&&Ct();const s={...i,isCombineEnabled:r};return Sb(t,s,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Wf(t)||Ct(),t.isWindowScrollAllowed||Ct();const n=e.payload.newScroll;if(Id(t.viewport.scroll.current,n))return kb(t);const r=I8(t.viewport,n);return u_(t)?q8({state:t,viewport:r}):Jm({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Wf(t))return t;const n=e.payload.maxScroll;if(Id(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&Ct();const n=Ate({state:t,type:e.type});return n?Jm({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&Ct(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||Ct(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};const Gte=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),Kte=t=>({type:"LIFT",payload:t}),Xte=t=>({type:"INITIAL_PUBLISH",payload:t}),Yte=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),Jte=()=>({type:"COLLECTION_STARTING",payload:null}),Zte=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),Qte=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),ene=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),K8=t=>({type:"MOVE",payload:t}),tne=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),nne=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),rne=()=>({type:"MOVE_UP",payload:null}),ine=()=>({type:"MOVE_DOWN",payload:null}),sne=()=>({type:"MOVE_RIGHT",payload:null}),one=()=>({type:"MOVE_LEFT",payload:null}),L4=()=>({type:"FLUSH",payload:null}),ane=t=>({type:"DROP_ANIMATE",payload:t}),M4=t=>({type:"DROP_COMPLETE",payload:t}),X8=t=>({type:"DROP",payload:t}),lne=t=>({type:"DROP_PENDING",payload:t}),Y8=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var cne=t=>({getState:e,dispatch:n})=>r=>i=>{if(i.type!=="LIFT"){r(i);return}const{id:s,clientSelection:o,movementMode:a}=i.payload,l=e();l.phase==="DROP_ANIMATING"&&n(M4({completed:l.completed})),e().phase!=="IDLE"&&Ct(),n(L4()),n(Gte({draggableId:s,movementMode:a}));const u={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:p}=t.startPublishing(u);n(Xte({critical:d,dimensions:h,clientSelection:o,movementMode:a,viewport:p}))},une=t=>()=>e=>n=>{n.type==="INITIAL_PUBLISH"&&t.dragging(),n.type==="DROP_ANIMATE"&&t.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&t.resting(),e(n)};const I4={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Bg={opacity:{drop:0,combining:.7},scale:{drop:.75}},J8={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},If=`${J8.outOfTheWay}s ${I4.outOfTheWay}`,Zm={fluid:`opacity ${If}`,snap:`transform ${If}, opacity ${If}`,drop:t=>{const e=`${t}s ${I4.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${If}`,placeholder:`height ${If}, width ${If}, margin ${If}`},qA=t=>Id(t,qi)?void 0:`translate(${t.x}px, ${t.y}px)`,d_={moveTo:qA,drop:(t,e)=>{const n=qA(t);if(n)return e?`${n} scale(${Bg.scale.drop})`:n}},{minDropTime:f_,maxDropTime:Z8}=J8,dne=Z8-f_,GA=1500,fne=.6;var hne=({current:t,destination:e,reason:n})=>{const r=Rg(t,e);if(r<=0)return f_;if(r>=GA)return Z8;const i=r/GA,s=f_+dne*i,o=n==="CANCEL"?s*fne:s;return Number(o.toFixed(2))},pne=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:s,droppables:o}=n,a=oa(t),l=a?o[a]:null,c=o[e.descriptor.droppableId],u=H8({impact:t,draggable:e,draggables:s,afterCritical:i,droppable:l||c,viewport:r});return ra(u,e.client.borderBox.center)},mne=({draggables:t,reason:e,lastImpact:n,home:r,viewport:i,onLiftImpact:s})=>!n.at||e!=="DROP"?{impact:V8({draggables:t,impact:s,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Fg},didDropInsideDroppable:!0};const gne=({getState:t,dispatch:e})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const i=t(),s=r.payload.reason;if(i.phase==="COLLECTING"){e(lne({reason:s}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&Ct(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||Ct();const a=i.critical,l=i.dimensions,c=l.draggables[i.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=mne({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=d?A4(u):null,p=d?a2(u):null,y={index:a.draggable.index,droppableId:a.droppable.id},x={draggableId:c.descriptor.id,type:c.descriptor.type,source:y,reason:s,mode:i.movementMode,destination:h,combine:p},v=pne({impact:u,draggable:c,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:u};if(!(!Id(i.current.client.offset,v)||!!x.combine)){e(M4({completed:b}));return}const k=hne({current:i.current.client.offset,destination:v,reason:s});e(ane({newHomeClientOffset:v,dropDuration:k,completed:b}))};var yne=gne,Q8=()=>({x:window.pageXOffset,y:window.pageYOffset});function xne(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function vne({onWindowScroll:t}){function e(){t(Q8())}const n=Ig(e),r=xne(n);let i=Md;function s(){return i!==Md}function o(){s()&&Ct(),i=Fa(window,[r])}function a(){s()||Ct(),n.cancel(),i(),i=Md}return{start:o,stop:a,isActive:s}}const wne=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",bne=t=>{const e=vne({onWindowScroll:n=>{t.dispatch(tne({newScroll:n}))}});return n=>r=>{!e.isActive()&&r.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&wne(r)&&e.stop(),n(r)}};var _ne=bne,Sne=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=s=>{e||n||(e=!0,t(s),clearTimeout(r))};return i.wasCalled=()=>e,i},kne=()=>{const t=[],e=i=>{const s=t.findIndex(a=>a.timerId===i);s===-1&&Ct();const[o]=t.splice(s,1);o.callback()};return{add:i=>{const s=setTimeout(()=>e(s)),o={timerId:s,callback:i};t.push(o)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const Nne=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,Cne=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,Ene=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},pm=(t,e)=>{e()},Cy=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function Nb(t,e,n,r){if(!t){n(r(e));return}const i=Sne(n);t(e,{announce:i}),i.wasCalled()||n(r(e))}var Ane=(t,e)=>{const n=kne();let r=null;const i=(d,h)=>{r&&Ct(),pm("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:d,mode:h})})},s=(d,h)=>{r&&Ct(),pm("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Cy(d,h))})},o=(d,h)=>{r&&Ct();const p=Cy(d,h);r={mode:h,lastCritical:d,lastLocation:p.source,lastCombine:null},n.add(()=>{pm("onDragStart",()=>Nb(t().onDragStart,p,e,hx.onDragStart))})},a=(d,h)=>{const p=A4(h),y=a2(h);r||Ct();const x=!Ene(d,r.lastCritical);x&&(r.lastCritical=d);const v=!Nne(r.lastLocation,p);v&&(r.lastLocation=p);const b=!Cne(r.lastCombine,y);if(b&&(r.lastCombine=y),!x&&!v&&!b)return;const S={...Cy(d,r.mode),combine:y,destination:p};n.add(()=>{pm("onDragUpdate",()=>Nb(t().onDragUpdate,S,e,hx.onDragUpdate))})},l=()=>{r||Ct(),n.flush()},c=d=>{r||Ct(),r=null,pm("onDragEnd",()=>Nb(t().onDragEnd,d,e,hx.onDragEnd))};return{beforeCapture:i,beforeStart:s,start:o,update:a,flush:l,drop:c,abort:()=>{if(!r)return;const d={...Cy(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},Tne=(t,e)=>{const n=Ane(t,e);return r=>i=>s=>{if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){const a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),i(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){const a=s.payload.completed.result;n.flush(),i(s),n.drop(a);return}if(i(s),s.type==="FLUSH"){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const jne=t=>e=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&Ct(),t.dispatch(M4({completed:r.completed}))};var Pne=jne;const Dne=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return i=>s=>{if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),i(s),s.type!=="DROP_ANIMATE")return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(Y8())}};n=requestAnimationFrame(()=>{n=null,e=Fa(window,[o])})}};var One=Dne,Lne=t=>()=>e=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&t.stopPublishing(),e(n)},Mne=t=>{let e=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(r.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){e=!1;const i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Ine=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var Rne=t=>e=>n=>r=>{if(Ine(r)){t.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const i=e.getState();i.phase!=="DRAGGING"&&Ct(),t.start(i);return}n(r),t.scroll(e.getState())};const Fne=t=>e=>n=>{if(e(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(X8({reason:r.reason})))};var zne=Fne;const Bne=h8;var Une=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:i,autoScroller:s})=>f8(qte,Bne(VQ(une(n),Lne(t),cne(t),yne,Pne,One,zne,Rne(s),_ne,Mne(e),Tne(r,i))));const Cb=()=>({additions:{},removals:{},modified:{}});function $ne({registry:t,callbacks:e}){let n=Cb(),r=null;const i=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:l,removals:c,modified:u}=n,d=Object.keys(l).map(y=>t.draggable.getById(y).getDimension(qi)).sort((y,x)=>y.descriptor.index-x.descriptor.index),h=Object.keys(u).map(y=>{const v=t.droppable.getById(y).callbacks.getScrollWhileDragging();return{droppableId:y,scroll:v}}),p={additions:d,removals:Object.keys(c),modified:h};n=Cb(),e.publish(p)}))};return{add:l=>{const c=l.descriptor.id;n.additions[c]=l,n.modified[l.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],i()},remove:l=>{const c=l.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Cb())}}}var eM=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const i=ra({x:e,y:t},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},tM=()=>{const t=document.documentElement;return t||Ct(),t},nM=()=>{const t=tM();return eM({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Wne=()=>{const t=Q8(),e=nM(),n=t.y,r=t.x,i=tM(),s=i.clientWidth,o=i.clientHeight,a=r+s,l=n+o;return{frame:xl({top:n,left:r,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:qi,displacement:qi}}}},Vne=({critical:t,scrollOptions:e,registry:n})=>{const r=Wne(),i=r.scroll.current,s=t.droppable,o=n.droppable.getAllByType(s.type).map(u=>u.callbacks.getDimensionAndWatchScroll(i,e)),a=n.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(i));return{dimensions:{draggables:j8(a),droppables:T8(o)},critical:t,viewport:r}};function KA(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Hne=(t,e)=>{let n=null;const r=$ne({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||Ct(),n&&e.updateDroppableIsEnabled({id:h,isEnabled:p})},s=(h,p)=>{n&&(t.droppable.exists(h)||Ct(),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},o=(h,p)=>{n&&(t.droppable.exists(h)||Ct(),e.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{n&&t.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!n)return;r.stop();const h=n.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},c=h=>{n||Ct();const p=n.critical.draggable;h.type==="ADDITION"&&KA(t,p,h.value)&&r.add(h.value),h.type==="REMOVAL"&&KA(t,p,h.value)&&r.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:o,startPublishing:h=>{n&&Ct();const p=t.draggable.getById(h.draggableId),y=t.droppable.getById(p.descriptor.droppableId),x={draggable:p.descriptor,droppable:y.descriptor},v=t.subscribe(c);return n={critical:x,unsubscribe:v},Vne({critical:x,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},rM=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",qne=t=>{window.scrollBy(t.x,t.y)};const Gne=Wi(t=>o2(t).filter(e=>!(!e.isEnabled||!e.frame))),Kne=(t,e)=>Gne(e).find(r=>(r.frame||Ct(),B8(r.frame.pageMarginBox)(t)))||null;var Xne=({center:t,destination:e,droppables:n})=>{if(e){const i=n[e];return i.frame?i:null}return Kne(t,n)};const Ug={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Yne=(t,e,n=()=>Ug)=>{const r=n(),i=t[e.size]*r.startFromPercentage,s=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:s}},iM=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},R4=1,Jne=(t,e,n=()=>Ug)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return R4;const s=1-iM({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),o=r.maxPixelScroll*r.ease(s);return Math.ceil(o)},Zne=(t,e,n)=>{const r=n(),i=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,o=e,a=s,c=Date.now()-o;if(c>=s)return t;if(c<i)return R4;const u=iM({startOfRange:i,endOfRange:a,current:c}),d=t*r.ease(u);return Math.ceil(d)},XA=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const s=Jne(t,e,i);return s===0?0:r?Math.max(Zne(s,n,i),R4):s},YA=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=Yne(t,r,s);return e[r.end]<e[r.start]?XA({distanceToEdge:e[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s}):-1*XA({distanceToEdge:e[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s})},Qne=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,i=e.width>t.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const ere=A8(t=>t===0?0:t);var sM=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},a=YA({container:e,distanceToEdges:o,dragStartTime:t,axis:T4,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),l=YA({container:e,distanceToEdges:o,dragStartTime:t,axis:O8,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),c=ere({x:l,y:a});if(Id(c,qi))return null;const u=Qne({container:e,subject:n,proposedScroll:c});return u?Id(u,qi)?null:u:null};const tre=A8(t=>t===0?0:t>0?1:-1),F4=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const i=cs(e,r),s={x:t(i.x,n.x),y:t(i.y,n.y)};return Id(s,qi)?null:s}})(),oM=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=tre(n),s=F4({max:r,current:e,change:i});return!s||i.x!==0&&s.x===0||i.y!==0&&s.y===0},z4=(t,e)=>oM({current:t.scroll.current,max:t.scroll.max,change:e}),nre=(t,e)=>{if(!z4(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return F4({current:r,max:n,change:e})},B4=(t,e)=>{const n=t.frame;return n?oM({current:n.scroll.current,max:n.scroll.max,change:e}):!1},rre=(t,e)=>{const n=t.frame;return!n||!B4(t,e)?null:F4({current:n.scroll.current,max:n.scroll.max,change:e})};var ire=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=sM({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return o&&z4(t,o)?o:null},sre=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=t.frame;if(!o)return null;const a=sM({dragStartTime:r,container:o.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return a&&B4(t,a)?a:null},JA=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:s})=>{const o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const d=t.viewport,h=ire({dragStartTime:e,viewport:d,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(h){r(h);return}}const c=Xne({center:o,destination:oa(t.impact),droppables:t.dimensions.droppables});if(!c)return;const u=sre({dragStartTime:e,droppable:c,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});u&&i(c.descriptor.id,u)},ore=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>Ug})=>{const r=Ig(t),i=Ig(e);let s=null;const o=c=>{s||Ct();const{shouldUseTimeDampening:u,dragStartTime:d}=s;JA({state:c,scrollWindow:r,scrollDroppable:i,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:c=>{s&&Ct();const u=Date.now();let d=!1;const h=()=>{d=!0};JA({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:n}),s={dragStartTime:u,shouldUseTimeDampening:d},d&&o(c)},stop:()=>{s&&(r.cancel(),i.cancel(),s=null)},scroll:o}},are=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(a,l)=>{const c=cs(a.current.client.selection,l);t({client:c})},i=(a,l)=>{if(!B4(a,l))return l;const c=rre(a,l);if(!c)return e(a.descriptor.id,l),null;const u=ra(l,c);return e(a.descriptor.id,u),ra(l,u)},s=(a,l,c)=>{if(!a||!z4(l,c))return c;const u=nre(l,c);if(!u)return n(c),null;const d=ra(c,u);return n(d),ra(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=oa(a.impact);c||Ct();const u=i(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,h=s(a.isWindowScrollAllowed,d,u);h&&r(a,h)}},lre=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const i=ore({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),s=are({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(r().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&s(l)}},start:i.start,stop:i.stop}};const h0="data-rfd",p0=(()=>{const t=`${h0}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),h_=(()=>{const t=`${h0}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),cre=(()=>{const t=`${h0}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),ZA={contextId:`${h0}-scroll-container-context-id`},ure=t=>e=>`[${e}="${t}"]`,mm=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),dre="pointer-events: none;";var fre=t=>{const e=ure(t),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(p0.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:dre,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${Zm.outOfTheWay};
    `;return{selector:e(h_.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:e(cre.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:mm(o,"always"),resting:mm(o,"resting"),dragging:mm(o,"dragging"),dropAnimating:mm(o,"dropAnimating"),userCancel:mm(o,"userCancel")}};const hre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Y.useLayoutEffect:Y.useEffect;var aa=hre;const Eb=()=>{const t=document.querySelector("head");return t||Ct(),t},QA=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function pre(t,e){const n=Fn(()=>fre(t),[t]),r=Y.useRef(null),i=Y.useRef(null),s=Zt(Wi(d=>{const h=i.current;h||Ct(),h.textContent=d}),[]),o=Zt(d=>{const h=r.current;h||Ct(),h.textContent=d},[]);aa(()=>{!r.current&&!i.current||Ct();const d=QA(e),h=QA(e);return r.current=d,i.current=h,d.setAttribute(`${h0}-always`,t),h.setAttribute(`${h0}-dynamic`,t),Eb().appendChild(d),Eb().appendChild(h),o(n.always),s(n.resting),()=>{const p=y=>{const x=y.current;x||Ct(),Eb().removeChild(x),y.current=null};p(r),p(i)}},[e,o,s,n.always,n.resting,t]);const a=Zt(()=>s(n.dragging),[s,n.dragging]),l=Zt(d=>{if(d==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),c=Zt(()=>{i.current&&s(n.resting)},[s,n.resting]);return Fn(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function aM(t,e){return Array.from(t.querySelectorAll(e))}var lM=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function u2(t){return t instanceof lM(t).HTMLElement}function mre(t,e){const n=`[${p0.contextId}="${t}"]`,r=aM(document,n);if(!r.length)return null;const i=r.find(s=>s.getAttribute(p0.draggableId)===e);return!i||!u2(i)?null:i}function gre(t){const e=Y.useRef({}),n=Y.useRef(null),r=Y.useRef(null),i=Y.useRef(!1),s=Zt(function(h,p){const y={id:h,focus:p};return e.current[h]=y,function(){const v=e.current;v[h]!==y&&delete v[h]}},[]),o=Zt(function(h){const p=mre(t,h);p&&p!==document.activeElement&&p.focus()},[t]),a=Zt(function(h,p){n.current===h&&(n.current=p)},[]),l=Zt(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const h=n.current;h&&o(h)}))},[o]),c=Zt(function(h){n.current=null;const p=document.activeElement;p&&p.getAttribute(p0.draggableId)===h&&(n.current=h)},[]);return aa(()=>(i.current=!0,function(){i.current=!1;const h=r.current;h&&cancelAnimationFrame(h)}),[]),Fn(()=>({register:s,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[s,c,l,a])}function yre(){const t={draggables:{},droppables:{}},e=[];function n(d){return e.push(d),function(){const p=e.indexOf(d);p!==-1&&e.splice(p,1)}}function r(d){e.length&&e.forEach(h=>h(d))}function i(d){return t.draggables[d]||null}function s(d){const h=i(d);return h||Ct(),h}const o={register:d=>{t.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:(d,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,p=i(h);p&&d.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[d.descriptor.droppableId]&&r({type:"REMOVAL",value:d}))},getById:s,findById:i,exists:d=>!!i(d),getAllByType:d=>Object.values(t.draggables).filter(h=>h.descriptor.type===d)};function a(d){return t.droppables[d]||null}function l(d){const h=a(d);return h||Ct(),h}const c={register:d=>{t.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete t.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(t.droppables).filter(h=>h.descriptor.type===d)};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:n,clean:u}}function xre(){const t=Fn(yre,[]);return Y.useEffect(()=>function(){Mt.version.startsWith("16")||Mt.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var U4=Mt.createContext(null),ov=()=>{const t=document.body;return t||Ct(),t};const vre={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var wre=vre;const bre=t=>`rfd-announcement-${t}`;function _re(t){const e=Fn(()=>bre(t),[t]),n=Y.useRef(null);return Y.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=e,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Ld(s.style,wre),ov().appendChild(s),function(){setTimeout(function(){const l=ov();l.contains(s)&&l.removeChild(s),s===n.current&&(n.current=null)})}},[e]),Zt(i=>{const s=n.current;if(s){s.textContent=i;return}},[])}let Sre=0;const cM={separator:"::"};function kre(t,e=cM){return Fn(()=>`${t}${e.separator}${Sre++}`,[e.separator,t])}function Nre(t,e=cM){const n=Mt.useId();return Fn(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}var $4="useId"in Mt?Nre:kre;function Cre({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function Ere({contextId:t,text:e}){const n=$4("hidden-text",{separator:"-"}),r=Fn(()=>Cre({contextId:t,uniqueId:n}),[n,t]);return Y.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=e,s.style.display="none",ov().appendChild(s),function(){const a=ov();a.contains(s)&&a.removeChild(s)}},[r,e]),r}var d2=Mt.createContext(null);function uM(t){const e=Y.useRef(t);return Y.useEffect(()=>{e.current=t}),e}function Are(){let t=null;function e(){return!!t}function n(o){return o===t}function r(o){t&&Ct();const a={abandon:o};return t=a,a}function i(){t||Ct(),t=null}function s(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:n,claim:r,release:i,tryAbandon:s}}function $g(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Tre=9,jre=13,W4=27,dM=32,Pre=33,Dre=34,Ore=35,Lre=36,Mre=37,Ire=38,Rre=39,Fre=40,zre={[jre]:!0,[Tre]:!0};var fM=t=>{zre[t.keyCode]&&t.preventDefault()};const Bre=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})();var f2=Bre;const hM=0,eT=5;function Ure(t,e){return Math.abs(e.x-t.x)>=eT||Math.abs(e.y-t.y)>=eT}const tT={type:"IDLE"};function $re({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:s,clientX:o,clientY:a}=i;if(s!==hM)return;const l={x:o,y:a},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&Ct();const u=c.point;if(!Ure(u,l))return;i.preventDefault();const d=c.actions.fluidLift(l);r({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:i=>{const s=n();if(s.type!=="DRAGGING"){t();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){t();return}if(i.keyCode===W4){i.preventDefault(),t();return}fM(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const s=n();if(s.type==="IDLE"&&Ct(),s.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:f2,fn:t}]}function Wre(t){const e=Y.useRef(tT),n=Y.useRef(Md),r=Fn(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==hM||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=t.findClosestDraggableId(d);if(!h)return;const p=t.tryGetLock(h,o,{sourceEvent:d});if(!p)return;d.preventDefault();const y={x:d.clientX,y:d.clientY};n.current(),c(p,y)}}),[t]),i=Fn(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=t.findClosestDraggableId(u);if(!d)return;const h=t.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||t.canGetLock(d)&&u.preventDefault())}}),[t]),s=Zt(function(){const d={passive:!1,capture:!0};n.current=Fa(window,[i,r],d)},[i,r]),o=Zt(()=>{e.current.type!=="IDLE"&&(e.current=tT,n.current(),s())},[s]),a=Zt(()=>{const u=e.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),l=Zt(function(){const d={capture:!0,passive:!1},h=$re({cancel:a,completed:o,getPhase:()=>e.current,setPhase:p=>{e.current=p}});n.current=Fa(window,h,d)},[a,o]),c=Zt(function(d,h){e.current.type!=="IDLE"&&Ct(),e.current={type:"PENDING",point:h,actions:d},l()},[l]);aa(function(){return s(),function(){n.current()}},[s])}function Vre(){}const Hre={[Dre]:!0,[Pre]:!0,[Lre]:!0,[Ore]:!0};function qre(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===W4){i.preventDefault(),n();return}if(i.keyCode===dM){i.preventDefault(),r();return}if(i.keyCode===Fre){i.preventDefault(),t.moveDown();return}if(i.keyCode===Ire){i.preventDefault(),t.moveUp();return}if(i.keyCode===Rre){i.preventDefault(),t.moveRight();return}if(i.keyCode===Mre){i.preventDefault(),t.moveLeft();return}if(Hre[i.keyCode]){i.preventDefault();return}fM(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:f2,fn:n}]}function Gre(t){const e=Y.useRef(Vre),n=Fn(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==dM)return;const o=t.findClosestDraggableId(s);if(!o)return;const a=t.tryGetLock(o,u,{sourceEvent:s});if(!a)return;s.preventDefault();let l=!0;const c=a.snapLift();e.current();function u(){l||Ct(),l=!1,e.current(),r()}e.current=Fa(window,qre(c,u),{capture:!0,passive:!1})}}),[t]),r=Zt(function(){const s={passive:!1,capture:!0};e.current=Fa(window,[n],s)},[n]);aa(function(){return r(),function(){e.current()}},[r])}const Ab={type:"IDLE"},Kre=120,Xre=.15;function Yre({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===W4&&n.preventDefault(),t()}},{eventName:f2,fn:t}]}function Jre({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:s,clientY:o}=r.touches[0],a={x:s,y:o};r.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&Ct();const s=r.touches[0];if(!s||!(s.force>=Xre))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&t();return}if(a){if(i.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:f2,fn:t}]}function Zre(t){const e=Y.useRef(Ab),n=Y.useRef(Md),r=Zt(function(){return e.current},[]),i=Zt(function(p){e.current=p},[]),s=Fn(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const y=t.findClosestDraggableId(p);if(!y)return;const x=t.tryGetLock(y,a,{sourceEvent:p});if(!x)return;const v=p.touches[0],{clientX:b,clientY:S}=v,k={x:b,y:S};n.current(),d(x,k)}}),[t]),o=Zt(function(){const p={capture:!0,passive:!1};n.current=Fa(window,[s],p)},[s]),a=Zt(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(Ab),n.current(),o())},[o,i]),l=Zt(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=Zt(function(){const p={capture:!0,passive:!1},y={cancel:l,completed:a,getPhase:r},x=Fa(window,Jre(y),p),v=Fa(window,Yre(y),p);n.current=function(){x(),v()}},[l,r,a]),u=Zt(function(){const p=r();p.type!=="PENDING"&&Ct();const y=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:y,hasMoved:!1})},[r,i]),d=Zt(function(p,y){r().type!=="IDLE"&&Ct();const x=setTimeout(u,Kre);i({type:"PENDING",point:y,actions:p,longPressTimerId:x}),c()},[c,r,i,u]);aa(function(){return o(),function(){n.current();const y=r();y.type==="PENDING"&&(clearTimeout(y.longPressTimerId),i(Ab))}},[r,o,i]),aa(function(){return Fa(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Qre=["input","button","textarea","select","option","optgroup","video","audio"];function pM(t,e){if(e==null)return!1;if(Qre.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:pM(t,e.parentElement)}function eie(t,e){const n=e.target;return u2(n)?pM(t,n):!1}var tie=t=>xl(t.getBoundingClientRect()).center;function nie(t){return t instanceof lM(t).Element}const rie=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function mM(t,e){return t==null?null:t[rie](e)?t:mM(t.parentElement,e)}function iie(t,e){return t.closest?t.closest(e):mM(t,e)}function sie(t){return`[${p0.contextId}="${t}"]`}function oie(t,e){const n=e.target;if(!nie(n))return null;const r=sie(t),i=iie(n,r);return!i||!u2(i)?null:i}function aie(t,e){const n=oie(t,e);return n?n.getAttribute(p0.draggableId):null}function lie(t,e){const n=`[${h_.contextId}="${t}"]`,i=aM(document,n).find(s=>s.getAttribute(h_.id)===e);return!i||!u2(i)?null:i}function cie(t){t.preventDefault()}function Ey({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function gM({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!rM(e.getState(),r))}function uie({lockAPI:t,contextId:e,store:n,registry:r,draggableId:i,forceSensorStop:s,sourceEvent:o}){if(!gM({lockAPI:t,store:n,registry:r,draggableId:i}))return null;const l=r.draggable.getById(i),c=lie(e,l.descriptor.id);if(!c||o&&!l.options.canDragInteractiveElements&&eie(c,o))return null;const u=t.claim(s||Md);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return t.isActive(u)}function y(j,P){Ey({expected:j,phase:d,isLockActive:p,shouldWarn:!0})&&n.dispatch(P())}const x=y.bind(null,"DRAGGING");function v(j){function P(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(P(),Ct()),n.dispatch(Kte(j.liftActionArgs)),d="DRAGGING";function C(N,O={shouldBlockNextClick:!1}){if(j.cleanup(),O.shouldBlockNextClick){const z=Fa(window,[{eventName:"click",fn:cie,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}P(),n.dispatch(X8({reason:N}))}return{isActive:()=>Ey({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:N=>C("DROP",N),cancel:N=>C("CANCEL",N),...j.actions}}function b(j){const P=Ig(N=>{x(()=>K8({client:N}))});return{...v({liftActionArgs:{id:i,clientSelection:j,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function S(){const j={moveUp:()=>x(rne),moveRight:()=>x(sne),moveDown:()=>x(ine),moveLeft:()=>x(one)};return v({liftActionArgs:{id:i,clientSelection:tie(c),movementMode:"SNAP"},cleanup:Md,actions:j})}function k(){Ey({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>Ey({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:S,abort:k}}const die=[Wre,Gre,Zre];function fie({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:i}){const s=[...i?die:[],...r||[]],o=Y.useState(()=>Are())[0],a=Zt(function(v,b){$g(v)&&!$g(b)&&o.tryAbandon()},[o]);aa(function(){let v=e.getState();return e.subscribe(()=>{const S=e.getState();a(v,S),v=S})},[o,e,a]),aa(()=>o.tryAbandon,[o.tryAbandon]);const l=Zt(x=>gM({lockAPI:o,registry:n,store:e,draggableId:x}),[o,n,e]),c=Zt((x,v,b)=>uie({lockAPI:o,registry:n,contextId:t,store:e,draggableId:x,forceSensorStop:v||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[t,o,n,e]),u=Zt(x=>aie(t,x),[t]),d=Zt(x=>{const v=n.draggable.findById(x);return v?v.options:null},[n.draggable]),h=Zt(function(){o.isClaimed()&&(o.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(L4()))},[o,e]),p=Zt(()=>o.isClaimed(),[o]),y=Fn(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:p}),[l,c,u,d,h,p]);for(let x=0;x<s.length;x++)s[x](y)}const hie=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};Mt.version.startsWith("16")||Mt.version.startsWith("17")?n():eu.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),pie=t=>({...Ug,...t.autoScrollerOptions,durationDampening:{...Ug.durationDampening,...t.autoScrollerOptions}});function gm(t){return t.current||Ct(),t.current}function mie(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:s}=t,o=Y.useRef(null),a=uM(t),l=Zt(()=>hie(a.current),[a]),c=Zt(()=>pie(a.current),[a]),u=_re(e),d=Ere({contextId:e,text:s}),h=pre(e,i),p=Zt(z=>{gm(o).dispatch(z)},[]),y=Fn(()=>vA({publishWhileDragging:Yte,updateDroppableScroll:Zte,updateDroppableIsEnabled:Qte,updateDroppableIsCombineEnabled:ene,collectionStarting:Jte},p),[p]),x=xre(),v=Fn(()=>Hne(x,y),[x,y]),b=Fn(()=>lre({scrollWindow:qne,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:c,...vA({move:K8},p)}),[v.scrollDroppable,p,c]),S=gre(e),k=Fn(()=>Une({announce:u,autoScroller:b,dimensionMarshal:v,focusMarshal:S,getResponders:l,styleMarshal:h}),[u,b,v,S,l,h]);o.current=k;const T=Zt(()=>{const z=gm(o);z.getState().phase!=="IDLE"&&z.dispatch(L4())},[]),j=Zt(()=>{const z=gm(o).getState();return z.phase==="DROP_ANIMATING"?!0:z.phase==="IDLE"?!1:z.isDragging},[]),P=Fn(()=>({isDragging:j,tryAbort:T}),[j,T]);n(P);const C=Zt(z=>rM(gm(o).getState(),z),[]),N=Zt(()=>Wf(gm(o).getState()),[]),O=Fn(()=>({marshal:v,focus:S,contextId:e,canLift:C,isMovementAllowed:N,dragHandleUsageInstructionsId:d,registry:x}),[e,v,d,S,C,N,x]);return fie({contextId:e,store:k,registry:x,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),Y.useEffect(()=>T,[T]),Mt.createElement(d2.Provider,{value:O},Mt.createElement(Nee,{context:U4,store:k},t.children))}let gie=0;function yie(){return Fn(()=>`${gie++}`,[])}function xie(){return Mt.useId()}var vie="useId"in Mt?xie:yie;function Tb(t){const e=vie(),n=t.dragHandleUsageInstructions||hx.dragHandleUsageInstructions;return Mt.createElement(Iee,null,r=>Mt.createElement(mie,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const nT={dragging:5e3,dropAnimating:4500},wie=(t,e)=>e?Zm.drop(e.duration):t?Zm.snap:Zm.fluid,bie=(t,e)=>{if(t)return e?Bg.opacity.drop:Bg.opacity.combining},_ie=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function Sie(t){const n=t.dimension.client,{offset:r,combineWith:i,dropping:s}=t,o=!!i,a=_ie(t),l=!!s,c=l?d_.drop(r,o):d_.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:wie(a,s),transform:c,opacity:bie(o,l),zIndex:l?nT.dropAnimating:nT.dragging,pointerEvents:"none"}}function kie(t){return{transform:d_.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function Nie(t){return t.type==="DRAGGING"?Sie(t):kie(t)}function Cie(t,e,n=qi){const r=window.getComputedStyle(e),i=e.getBoundingClientRect(),s=S8(i,r),o=nv(s,n),a={client:s,tagName:e.tagName.toLowerCase(),display:r.display},l={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:s,page:o}}function Eie(t){const e=$4("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}=t,l=Fn(()=>({canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}),[s,a,o]),c=Zt(p=>{const y=i();return y||Ct(),Cie(n,y,p)},[n,i]),u=Fn(()=>({uniqueId:e,descriptor:n,options:l,getDimension:c}),[n,c,l,e]),d=Y.useRef(u),h=Y.useRef(!0);aa(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),aa(()=>{if(h.current){h.current=!1;return}const p=d.current;d.current=u,r.draggable.update(u,p)},[u,r.draggable])}var V4=Mt.createContext(null);function av(t){const e=Y.useContext(t);return e||Ct(),e}function Aie(t){t.preventDefault()}const Tie=t=>{const e=Y.useRef(null),n=Zt((P=null)=>{e.current=P},[]),r=Zt(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:s,registry:o}=av(d2),{type:a,droppableId:l}=av(V4),c=Fn(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:u,draggableId:d,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:y,isClone:x,mapped:v,dropAnimationFinished:b}=t;if(!x){const P=Fn(()=>({descriptor:c,registry:o,getDraggableRef:r,canDragInteractiveElements:y,shouldRespectForcePress:p,isEnabled:h}),[c,o,r,y,p,h]);Eie(P)}const S=Fn(()=>h?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Aie}:null,[i,s,d,h]),k=Zt(P=>{v.type==="DRAGGING"&&v.dropping&&P.propertyName==="transform"&&(Mt.version.startsWith("16")||Mt.version.startsWith("17")?b():eu.flushSync(b))},[b,v]),T=Fn(()=>{const P=Nie(v),C=v.type==="DRAGGING"&&v.dropping?k:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:P,onTransitionEnd:C},dragHandleProps:S}},[i,S,d,v,k,n]),j=Fn(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return Mt.createElement(Mt.Fragment,null,u(T,v.snapshot,j))};var jie=Tie,yM=(t,e)=>t===e,xM=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const Pie=t=>t.combine?t.combine.draggableId:null,Die=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function Oie(){const t=Wi((i,s)=>({x:i,y:s})),e=Wi((i,s,o=null,a=null,l=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:o,combineWith:a,combineTargetFor:null})),n=Wi((i,s,o,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:s,offset:i,dimension:o,forceShouldAnimate:u,snapshot:e(s,a,l,c,null)}}));return(i,s)=>{if($g(i)){if(i.critical.draggable.id!==s.draggableId)return null;const o=i.current.client.offset,a=i.dimensions.draggables[s.draggableId],l=oa(i.impact),c=Die(i.impact),u=i.forceShouldAnimate;return n(t(o.x,o.y),i.movementMode,a,s.isClone,l,c,u)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==s.draggableId)return null;const a=s.isClone,l=i.dimensions.draggables[s.draggableId],c=o.result,u=c.mode,d=xM(c),h=Pie(c),y={duration:i.dropDuration,curve:I4.drop,moveTo:i.newHomeClientOffset,opacity:h?Bg.opacity.drop:null,scale:h?Bg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:l,dropping:y,draggingOver:d,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:e(u,a,d,h,y)}}}return null}}function vM(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const Lie={mapped:{type:"SECONDARY",offset:qi,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:vM(null)}};function Mie(){const t=Wi((o,a)=>({x:o,y:a})),e=Wi(vM),n=Wi((o,a=null,l)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),r=o=>o?n(qi,o,!0):null,i=(o,a,l,c)=>{const u=l.displaced.visible[o],d=!!(c.inVirtualList&&c.effected[o]),h=a2(l),p=h&&h.draggableId===o?a:null;if(!u){if(!d)return r(p);if(l.displaced.invisible[o])return null;const v=T0(c.displacedBy.point),b=t(v.x,v.y);return n(b,p,!0)}if(d)return r(p);const y=l.displacedBy.point,x=t(y.x,y.y);return n(x,p,u.shouldAnimate)};return(o,a)=>{if($g(o))return o.critical.draggable.id===a.draggableId?null:i(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const l=o.completed;return l.result.draggableId===a.draggableId?null:i(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const Iie=()=>{const t=Oie(),e=Mie();return(r,i)=>t(r,i)||e(r,i)||Lie},Rie={dropAnimationFinished:Y8},Fie=b8(Iie,Rie,null,{context:U4,areStatePropsEqual:yM})(jie);var zie=Fie;function wM(t){return av(V4).isUsingCloneFor===t.draggableId&&!t.isClone?null:Mt.createElement(zie,t)}function jb(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Mt.createElement(wM,Ld({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const bM=t=>e=>t===e,Bie=bM("scroll"),Uie=bM("auto"),rT=(t,e)=>e(t.overflowX)||e(t.overflowY),$ie=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return rT(n,Bie)||rT(n,Uie)},Wie=()=>!1,_M=t=>t==null?null:t===document.body?Wie()?t:null:t===document.documentElement?null:$ie(t)?t:_M(t.parentElement);var p_=t=>({x:t.scrollLeft,y:t.scrollTop});const SM=t=>t?window.getComputedStyle(t).position==="fixed"?!0:SM(t.parentElement):!1;var Vie=t=>{const e=_M(t),n=SM(t);return{closestScrollable:e,isFixedOnPage:n}},Hie=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:s,page:o,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,y=eM({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:y,diff:{value:qi,displacement:qi}}}})(),c=i==="vertical"?T4:O8,u=f0({page:o,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:c,isEnabled:e,client:s,page:o,frame:l,subject:u}};const qie=(t,e)=>{const n=k8(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,i=n.paddingBox.left-e.scrollLeft,s=r+e.scrollHeight,o=i+e.scrollWidth,l=N4({top:r,right:o,bottom:s,left:i},n.border);return C4({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})};var Gie=({ref:t,descriptor:e,env:n,windowScroll:r,direction:i,isDropDisabled:s,isCombineEnabled:o,shouldClipSubject:a})=>{const l=n.closestScrollable,c=qie(t,l),u=nv(c,r),d=(()=>{if(!l)return null;const p=k8(l),y={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:nv(p,r),scroll:p_(l),scrollSize:y,shouldClipSubject:a}})();return Hie({descriptor:e,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:c,page:u,closest:d})};const Kie={passive:!1},Xie={passive:!0};var iT=t=>t.shouldPublishImmediately?Kie:Xie;const Ay=t=>t&&t.env.closestScrollable||null;function Yie(t){const e=Y.useRef(null),n=av(d2),r=$4("droppable"),{registry:i,marshal:s}=n,o=uM(t),a=Fn(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=Y.useRef(a),c=Fn(()=>Wi((T,j)=>{e.current||Ct();const P={x:T,y:j};s.updateDroppableScroll(a.id,P)}),[a.id,s]),u=Zt(()=>{const T=e.current;return!T||!T.env.closestScrollable?qi:p_(T.env.closestScrollable)},[]),d=Zt(()=>{const T=u();c(T.x,T.y)},[u,c]),h=Fn(()=>Ig(d),[d]),p=Zt(()=>{const T=e.current,j=Ay(T);if(T&&j||Ct(),T.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),y=Zt((T,j)=>{e.current&&Ct();const P=o.current,C=P.getDroppableRef();C||Ct();const N=Vie(C),O={ref:C,descriptor:a,env:N,scrollOptions:j};e.current=O;const z=Gie({ref:C,descriptor:a,env:N,windowScroll:T,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),L=N.closestScrollable;return L&&(L.setAttribute(ZA.contextId,n.contextId),L.addEventListener("scroll",p,iT(O.scrollOptions))),z},[n.contextId,a,p,o]),x=Zt(()=>{const T=e.current,j=Ay(T);return T&&j||Ct(),p_(j)},[]),v=Zt(()=>{const T=e.current;T||Ct();const j=Ay(T);e.current=null,j&&(h.cancel(),j.removeAttribute(ZA.contextId),j.removeEventListener("scroll",p,iT(T.scrollOptions)))},[p,h]),b=Zt(T=>{const j=e.current;j||Ct();const P=Ay(j);P||Ct(),P.scrollTop+=T.y,P.scrollLeft+=T.x},[]),S=Fn(()=>({getDimensionAndWatchScroll:y,getScrollWhileDragging:x,dragStopped:v,scroll:b}),[v,y,x,b]),k=Fn(()=>({uniqueId:r,descriptor:a,callbacks:S}),[S,a,r]);aa(()=>(l.current=k.descriptor,i.droppable.register(k),()=>{e.current&&v(),i.droppable.unregister(k)}),[S,a,v,k,s,i.droppable]),aa(()=>{e.current&&s.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,s]),aa(()=>{e.current&&s.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,s])}function Pb(){}const sT={width:0,height:0,margin:Wee},Jie=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?sT:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},Zie=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=Jie({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Zm.placeholder:null}},Qie=t=>{const e=Y.useRef(null),n=Zt(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:s,contextId:o}=t,[a,l]=Y.useState(t.animate==="open");Y.useEffect(()=>a?r!=="open"?(n(),l(!1),Pb):e.current?Pb:(e.current=setTimeout(()=>{e.current=null,l(!1)}),n):Pb,[r,a,n]);const c=Zt(d=>{d.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),u=Zie({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return Mt.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:c,ref:t.innerRef})};var ese=Mt.memo(Qie);class tse extends Mt.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const nse=t=>{const e=Y.useContext(d2);e||Ct();const{contextId:n,isMovementAllowed:r}=e,i=Y.useRef(null),s=Y.useRef(null),{children:o,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:p,snapshot:y,useClone:x,updateViewportMaxScroll:v,getContainerForClone:b}=t,S=Zt(()=>i.current,[]),k=Zt((L=null)=>{i.current=L},[]);Zt(()=>s.current,[]);const T=Zt((L=null)=>{s.current=L},[]),j=Zt(()=>{r()&&v({maxScroll:nM()})},[r,v]);Yie({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:S});const P=Fn(()=>Mt.createElement(tse,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:L,data:M,animate:K})=>Mt.createElement(ese,{placeholder:M,onClose:L,innerRef:T,animate:K,contextId:n,onTransitionEnd:j})),[n,j,t.placeholder,t.shouldAnimatePlaceholder,T]),C=Fn(()=>({innerRef:k,placeholder:P,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,P,k]),N=x?x.dragging.draggableId:null,O=Fn(()=>({droppableId:a,type:l,isUsingCloneFor:N}),[a,N,l]);function z(){if(!x)return null;const{dragging:L,render:M}=x,K=Mt.createElement(wM,{draggableId:L.draggableId,index:L.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(W,Z)=>M(W,Z,L));return jP.createPortal(K,b())}return Mt.createElement(V4.Provider,{value:O},o(C,y),z())};var rse=nse;function ise(){return document.body||Ct(),document.body}const oT={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ise},kM=t=>{let e={...t},n;for(n in oT)t[n]===void 0&&(e={...e,[n]:oT[n]});return e},Db=(t,e)=>t===e.droppable.type,aT=(t,e)=>e.draggables[t.draggable.id],sse=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=Wi(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=Wi((s,o,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===s){const y=u?{render:u,dragging:n(c.descriptor)}:null,x={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:y}}if(!o)return e;if(!l)return t;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(s,o)=>{const a=kM(o),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if($g(s)){const h=s.critical;if(!Db(c,h))return e;const p=aT(h,s.dimensions),y=oa(s.impact)===l;return r(l,u,y,y,p,d)}if(s.phase==="DROP_ANIMATING"){const h=s.completed;if(!Db(c,h.critical))return e;const p=aT(h.critical,s.dimensions);return r(l,u,xM(h.result)===l,oa(h.impact)===l,p,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const h=s.completed;if(!Db(c,h.critical))return e;const p=oa(h.impact)===l,y=!!(h.impact.at&&h.impact.at.type==="COMBINE"),x=h.critical.droppable.id===l;return p?y?t:e:x?t:e}return e}},ose={updateViewportMaxScroll:nne},ase=b8(sse,ose,(t,e,n)=>({...kM(n),...t,...e}),{context:U4,areStatePropsEqual:yM})(rse);var Ob=ase;const lse=({product:t,isOpen:e,onClose:n,onSave:r})=>{const[i,s]=Y.useState({name:"",description:"",price:0,deposit:0,image:"",categories:["budowlany"],quantity:1,specifications:[],features:[],variants:[],technical_details:{}}),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,d]=Y.useState(null),[h,p]=Y.useState({}),y=Y.useRef(null),x=Y.useRef(null),v=EZ({extensions:[jQ,PQ.configure({placeholder:"Wprowadź opis produktu..."})],content:i.description,onUpdate:({editor:W})=>{s(Z=>({...Z,description:W.getHTML()}))}});Y.useEffect(()=>{t&&(s({...t,specifications:t.specifications||[],features:t.features||[],variants:t.variants||[],technical_details:t.technical_details||{}}),d(t.image))},[t]);const b=async W=>{W.preventDefault(),a(!1);const Z=W.dataTransfer.files[0];Z&&await S(Z)},S=async W=>{try{const U=await As(W,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),F=new FileReader;F.onloadend=()=>{d(F.result),s(J=>({...J,image:F.result}))},F.readAsDataURL(U)}catch(Z){console.error("Error compressing image:",Z)}},k=(W,Z,U)=>{s(F=>({...F,specifications:F.specifications.map(J=>J.id===W?{...J,[Z]:U}:J)}))},T=()=>{s(W=>({...W,specifications:[...W.specifications,{id:crypto.randomUUID(),key:"",value:""}]}))},j=W=>{s(Z=>({...Z,specifications:Z.specifications.filter(U=>U.id!==W)}))},P=(W,Z)=>{s(U=>({...U,features:U.features.map(F=>F.id===W?{...F,text:Z}:F)}))},C=()=>{s(W=>({...W,features:[...W.features,{id:crypto.randomUUID(),text:""}]}))},N=W=>{s(Z=>({...Z,features:Z.features.filter(U=>U.id!==W)}))},O=(W,Z,U)=>{s(F=>({...F,variants:F.variants.map(J=>J.id===W?{...J,[Z]:U}:J)}))},z=()=>{s(W=>({...W,variants:[...W.variants,{id:crypto.randomUUID(),name:"",price:0}]}))},L=W=>{s(Z=>({...Z,variants:Z.variants.filter(U=>U.id!==W)}))},M=()=>{const W={};return i.name.trim()||(W.name="Nazwa produktu jest wymagana"),i.description.trim()||(W.description="Opis produktu jest wymagany"),i.price<=0&&(W.price="Cena musi być większa od 0"),i.quantity<0&&(W.quantity="Ilość nie może być ujemna"),i.image||(W.image="Zdjęcie produktu jest wymagane"),p(W),Object.keys(W).length===0},K=async W=>{if(W.preventDefault(),!!M()){c(!0);try{await r(i),n()}catch(Z){console.error("Error saving product:",Z)}finally{c(!1)}}};return e?g.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50",children:g.jsx("div",{className:"min-h-screen px-4 text-center",children:g.jsx("div",{className:"inline-block w-full max-w-6xl my-8 text-left align-middle",children:g.jsx(Ii.div,{ref:x,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-lg shadow-xl overflow-hidden",children:g.jsxs("form",{onSubmit:K,children:[g.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:t?"Edytuj produkt":"Dodaj nowy produkt"}),g.jsx("button",{type:"button",onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(cu,{className:"w-6 h-6"})})]}),g.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nazwa produktu"}),g.jsx("input",{type:"text",value:i.name,onChange:W=>s(Z=>({...Z,name:W.target.value})),className:`mt-1 block w-full rounded-md border ${h.name?"border-red-500":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),h.name&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.name})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kategoria"}),g.jsxs("select",{value:i.categories[0],onChange:W=>s(Z=>({...Z,categories:[W.target.value]})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.jsx("option",{value:"budowlany",children:"Sprzęt budowlany"}),g.jsx("option",{value:"ogrodniczy",children:"Sprzęt ogrodniczy"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cena (zł/dzień)"}),g.jsx("input",{type:"number",min:"0",step:"0.01",value:i.price,onChange:W=>s(Z=>({...Z,price:parseFloat(W.target.value)})),className:`mt-1 block w-full rounded-md border ${h.price?"border-red-500":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),h.price&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.price})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kaucja (zł)"}),g.jsx("input",{type:"number",min:"0",step:"0.01",value:i.deposit,onChange:W=>s(Z=>({...Z,deposit:parseFloat(W.target.value)})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dostępna ilość"}),g.jsx("input",{type:"number",min:"0",value:i.quantity,onChange:W=>s(Z=>({...Z,quantity:parseInt(W.target.value)})),className:`mt-1 block w-full rounded-md border ${h.quantity?"border-red-500":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),h.quantity&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.quantity})]})]}),g.jsxs("div",{className:"mt-6",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zdjęcie produktu"}),g.jsxs("div",{className:`border-2 border-dashed rounded-lg p-4 text-center ${o?"border-blue-500 bg-blue-50":"border-gray-300"} ${h.image?"border-red-500":""}`,onDragOver:W=>{W.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:b,children:[u?g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:u,alt:"Preview",className:"max-h-48 mx-auto object-contain"}),g.jsx("button",{type:"button",onClick:()=>{d(null),s(W=>({...W,image:""}))},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:g.jsx(cu,{className:"w-4 h-4"})})]}):g.jsxs("div",{className:"cursor-pointer",onClick:()=>{var W;return(W=y.current)==null?void 0:W.click()},children:[g.jsx(mz,{className:"w-12 h-12 mx-auto text-gray-400"}),g.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Przeciągnij i upuść zdjęcie lub kliknij, aby wybrać"})]}),g.jsx("input",{ref:y,type:"file",accept:"image/*",className:"hidden",onChange:W=>{var U;const Z=(U=W.target.files)==null?void 0:U[0];Z&&S(Z)}})]}),h.image&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.image})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis produktu"}),g.jsx(yZ,{editor:v,className:`prose max-w-none border rounded-lg p-4 min-h-[200px] ${h.description?"border-red-500":"border-gray-300"}`}),h.description&&g.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.description})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Specyfikacja techniczna"}),g.jsxs("button",{type:"button",onClick:T,className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[g.jsx(ic,{className:"w-4 h-4 mr-1"}),"Dodaj parametr"]})]}),g.jsx(Tb,{onDragEnd:W=>{if(!W.destination)return;const Z=Array.from(i.specifications),[U]=Z.splice(W.source.index,1);Z.splice(W.destination.index,0,U),s(F=>({...F,specifications:Z}))},children:g.jsx(Ob,{droppableId:"specifications",children:W=>g.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:"space-y-2",children:[i.specifications.map((Z,U)=>g.jsx(jb,{draggableId:Z.id,index:U,children:F=>g.jsxs("div",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:Z.key,onChange:J=>k(Z.id,"key",J.target.value),placeholder:"Parametr",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),g.jsx("input",{type:"text",value:Z.value,onChange:J=>k(Z.id,"value",J.target.value),placeholder:"Wartość",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),g.jsx("button",{type:"button",onClick:()=>j(Z.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:g.jsx(sc,{className:"w-5 h-5"})})]})},Z.id)),W.placeholder]})})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Główne cechy"}),g.jsxs("button",{type:"button",onClick:C,className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[g.jsx(ic,{className:"w-4 h-4 mr-1"}),"Dodaj cechę"]})]}),g.jsx(Tb,{onDragEnd:W=>{if(!W.destination)return;const Z=Array.from(i.features),[U]=Z.splice(W.source.index,1);Z.splice(W.destination.index,0,U),s(F=>({...F,features:Z}))},children:g.jsx(Ob,{droppableId:"features",children:W=>g.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:"space-y-2",children:[i.features.map((Z,U)=>g.jsx(jb,{draggableId:Z.id,index:U,children:F=>g.jsxs("div",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:Z.text,onChange:J=>P(Z.id,J.target.value),placeholder:"Cecha produktu",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),g.jsx("button",{type:"button",onClick:()=>N(Z.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:g.jsx(sc,{className:"w-5 h-5"})})]})},Z.id)),W.placeholder]})})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Warianty produktu"}),g.jsxs("button",{type:"button",onClick:z,className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[g.jsx(ic,{className:"w-4 h-4 mr-1"}),"Dodaj wariant"]})]}),g.jsx(Tb,{onDragEnd:W=>{if(!W.destination)return;const Z=Array.from(i.variants),[U]=Z.splice(W.source.index,1);Z.splice(W.destination.index,0,U),s(F=>({...F,variants:Z}))},children:g.jsx(Ob,{droppableId:"variants",children:W=>g.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:"space-y-2",children:[i.variants.map((Z,U)=>g.jsx(jb,{draggableId:Z.id,index:U,children:F=>g.jsxs("div",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:Z.name,onChange:J=>O(Z.id,"name",J.target.value),placeholder:"Nazwa wariantu",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),g.jsx("input",{type:"number",min:"0",step:"0.01",value:Z.price,onChange:J=>O(Z.id,"price",parseFloat(J.target.value)),placeholder:"Cena",className:"w-32 rounded-md border border-gray-300 px-3 py-2"}),g.jsx("button",{type:"button",onClick:()=>L(Z.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:g.jsx(sc,{className:"w-5 h-5"})})]})},Z.id)),W.placeholder]})})})]})]})]})}),g.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 flex justify-end space-x-4",children:[g.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Anuluj"}),g.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:l?g.jsxs(g.Fragment,{children:[g.jsx(b0,{className:"w-5 h-5 mr-2 animate-spin"}),"Zapisywanie..."]}):g.jsxs(g.Fragment,{children:[g.jsx(X_,{className:"w-5 h-5 mr-2"}),"Zapisz produkt"]})})]})]})})})})}):null},cse=({onExport:t})=>g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs("button",{onClick:()=>t("csv"),className:"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1.5 text-sm",children:[g.jsx(Nh,{className:"w-4 h-4"}),"Eksportuj CSV"]}),g.jsxs("button",{onClick:()=>t("pdf"),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1.5 text-sm",children:[g.jsx(Lv,{className:"w-4 h-4"}),"Eksportuj PDF"]})]}),use=()=>{const[t,e]=Y.useState([]),[n,r]=Y.useState(!0),[i,s]=Y.useState(null),[o,a]=Y.useState(null),[l,c]=Y.useState(!1);Y.useEffect(()=>{u()},[]);const u=async()=>{try{r(!0);const{data:p,error:y}=await lt.from("equipment").select(`
          *,
          specifications (*),
          features (*),
          variants (*)
        `).order("name");if(y)throw y;e(p||[]),s(null)}catch(p){console.error("Error loading equipment:",p),s("Nie udało się załadować sprzętu")}finally{r(!1)}},d=async p=>{var y,x,v;try{if(r(!0),s(null),p.id){const{error:b}=await lt.from("equipment").update({name:p.name,description:p.description,price:p.price,promotional_price:p.promotional_price,deposit:p.deposit,image:p.image,categories:p.categories,quantity:p.quantity,purchase_date:p.purchase_date,purchase_price:p.purchase_price}).eq("id",p.id);if(b)throw b;p.specifications&&(await lt.from("specifications").delete().eq("equipment_id",p.id),await lt.from("specifications").insert(p.specifications.map(S=>({...S,equipment_id:p.id})))),p.features&&(await lt.from("features").delete().eq("equipment_id",p.id),await lt.from("features").insert(p.features.map(S=>({...S,equipment_id:p.id})))),p.variants&&(await lt.from("variants").delete().eq("equipment_id",p.id),await lt.from("variants").insert(p.variants.map(S=>({...S,equipment_id:p.id}))))}else{const{data:b,error:S}=await lt.from("equipment").insert({name:p.name,description:p.description,price:p.price,promotional_price:p.promotional_price,deposit:p.deposit,image:p.image,categories:p.categories,quantity:p.quantity,purchase_date:p.purchase_date,purchase_price:p.purchase_price}).select().single();if(S)throw S;(y=p.specifications)!=null&&y.length&&await lt.from("specifications").insert(p.specifications.map(k=>({...k,equipment_id:b.id}))),(x=p.features)!=null&&x.length&&await lt.from("features").insert(p.features.map(k=>({...k,equipment_id:b.id}))),(v=p.variants)!=null&&v.length&&await lt.from("variants").insert(p.variants.map(k=>({...k,equipment_id:b.id})))}await u(),c(!1)}catch(b){console.error("Error saving product:",b),s("Nie udało się zapisać produktu")}finally{r(!1)}},h=async p=>{if(window.confirm("Czy na pewno chcesz usunąć ten produkt?"))try{r(!0);const{error:y}=await lt.from("equipment").delete().eq("id",p);if(y)throw y;await u()}catch(y){console.error("Error deleting product:",y),s("Nie udało się usunąć produktu")}finally{r(!1)}};return n?g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"})}):i?g.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:g.jsx("p",{children:i})}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Zarządzanie sprzętem"}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx(cse,{equipmentData:t}),g.jsxs("button",{onClick:()=>{a(null),c(!0)},className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[g.jsx(ic,{className:"w-5 h-5"}),"Dodaj sprzęt"]})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>g.jsxs(Ii.div,{layout:!0,className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[g.jsx("div",{className:"h-48 bg-gray-200 relative",children:g.jsx("img",{src:p.image,alt:p.name,className:"w-full h-full object-contain"})}),g.jsxs("div",{className:"p-4",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p.name}),g.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:p.description}),g.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-lg font-bold text-solrent-orange",children:[p.price," zł/dzień"]}),p.deposit>0&&g.jsxs("p",{className:"text-sm text-gray-600",children:["Kaucja: ",p.deposit," zł"]})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>{a(p),c(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:g.jsx(_0,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>h(p.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:g.jsx(sc,{className:"w-5 h-5"})})]})]})]})]},p.id))}),g.jsx(lse,{product:o,isOpen:l,onClose:()=>c(!1),onSave:d})]})},dse=()=>{const[t,e]=Y.useState([]),[n,r]=Y.useState(null),[i,s]=Y.useState([]),[o,a]=Y.useState(!1);Y.useEffect(()=>{l(),c()},[]);const l=async()=>{const{data:h,error:p}=await lt.from("advertisements").select("*").order("display_order",{ascending:!0});if(p){console.error("Error fetching ads:",p);return}e(h||[])},c=async()=>{const{data:h,error:p}=await lt.from("equipment").select("id, name");if(p){console.error("Error fetching products:",p);return}s(h||[])},u=async h=>{a(!0);try{if(h.id){const{error:p}=await lt.from("advertisements").update({title:h.title,content:h.content,image_url:h.image_url,product_id:h.product_id,start_date:h.start_date,end_date:h.end_date,is_active:h.is_active,device_type:h.device_type,display_order:h.display_order}).eq("id",h.id);if(p)throw p}else{const{error:p}=await lt.from("advertisements").insert([{...h,display_order:t.length}]);if(p)throw p}await l(),r(null)}catch(p){console.error("Error saving ad:",p)}finally{a(!1)}},d=async h=>{if(!window.confirm("Czy na pewno chcesz usunąć tę reklamę?"))return;const{error:p}=await lt.from("advertisements").delete().eq("id",h);if(p){console.error("Error deleting ad:",p);return}await l()};return g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Zarządzanie reklamami"}),g.jsxs("button",{onClick:()=>r({id:"",title:"",content:"",image_url:"",product_id:"",start_date:new Date().toISOString(),end_date:new Date(Date.now()+7*24*60*60*1e3).toISOString(),is_active:!0,display_order:t.length,device_type:"all"}),className:"flex items-center px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:[g.jsx(ic,{className:"w-5 h-5 mr-2"}),"Dodaj reklamę"]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(h=>g.jsxs(Ii.div,{layout:!0,className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[h.image_url&&g.jsx("img",{src:h.image_url,alt:h.title,className:"w-full h-48 object-cover"}),g.jsxs("div",{className:"p-4",children:[g.jsx("h3",{className:"font-medium text-lg mb-2",children:h.title}),g.jsx("p",{className:"text-gray-600 text-sm mb-4",children:h.content}),g.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[g.jsx(dc,{className:"w-4 h-4 mr-2"}),g.jsxs("span",{children:[new Date(h.start_date).toLocaleDateString()," - ",new Date(h.end_date).toLocaleDateString()]})]}),g.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[g.jsx(xz,{className:"w-4 h-4 mr-2"}),g.jsx("span",{children:h.device_type==="all"?"Wszystkie urządzenia":h.device_type==="desktop"?"Tylko desktop":"Tylko mobile"})]}),g.jsxs("div",{className:"flex justify-end space-x-2",children:[g.jsx("button",{onClick:()=>r(h),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:g.jsx(_0,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>d(h.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:g.jsx(sc,{className:"w-5 h-5"})})]})]})]},h.id))}),n&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:g.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-xl font-medium mb-4",children:n.id?"Edytuj reklamę":"Dodaj nową reklamę"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tytuł"}),g.jsx("input",{type:"text",value:n.title,onChange:h=>r({...n,title:h.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Treść"}),g.jsx("textarea",{value:n.content,onChange:h=>r({...n,content:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",rows:3})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL obrazu"}),g.jsx("input",{type:"text",value:n.image_url,onChange:h=>r({...n,image_url:h.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data rozpoczęcia"}),g.jsx("input",{type:"datetime-local",value:n.start_date.slice(0,16),onChange:h=>r({...n,start_date:new Date(h.target.value).toISOString()}),className:"w-full px-3 py-2 border rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data zakończenia"}),g.jsx("input",{type:"datetime-local",value:n.end_date.slice(0,16),onChange:h=>r({...n,end_date:new Date(h.target.value).toISOString()}),className:"w-full px-3 py-2 border rounded-lg"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Powiązany produkt"}),g.jsxs("select",{value:n.product_id,onChange:h=>r({...n,product_id:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[g.jsx("option",{value:"",children:"Brak"}),i.map(h=>g.jsx("option",{value:h.id,children:h.name},h.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Typ urządzenia"}),g.jsxs("select",{value:n.device_type,onChange:h=>r({...n,device_type:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[g.jsx("option",{value:"all",children:"Wszystkie urządzenia"}),g.jsx("option",{value:"desktop",children:"Tylko desktop"}),g.jsx("option",{value:"mobile",children:"Tylko mobile"})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:n.is_active,onChange:h=>r({...n,is_active:h.target.checked}),className:"h-4 w-4 text-solrent-orange rounded border-gray-300"}),g.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Aktywna"})]})]}),g.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[g.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Anuluj"}),g.jsxs("button",{onClick:()=>u(n),disabled:o,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center",children:[g.jsx(X_,{className:"w-5 h-5 mr-2"}),o?"Zapisywanie...":"Zapisz"]})]})]})})})]})},fse=["PON","WT","ŚR","CZW","PT","SOB","NIEDZ"],hse=()=>{const t=kl(),[e,n]=Y.useState([]),[r,i]=Y.useState([]),[s,o]=Y.useState(new Date),[a,l]=Y.useState(!0);Y.useEffect(()=>{c(),u()},[s]);const c=async()=>{const{data:S,error:k}=await lt.from("equipment").select("id, name").order("name");if(k){console.error("Error loading equipment:",k);return}n(S||[])},u=async()=>{const S=new Date(s.getFullYear(),s.getMonth(),1),k=new Date(s.getFullYear(),s.getMonth()+1,0),{data:T,error:j}=await lt.from("reservations").select(`
        id,
        customer:customers (
          first_name,
          last_name
        ),
        start_date,
        end_date,
        start_time,
        end_time,
        status,
        reservation_items!inner (
          equipment_id
        )
      `).gte("start_date",S.toISOString()).lte("end_date",k.toISOString()).neq("status","cancelled");if(j){console.error("Error loading reservations:",j);return}i(T||[]),l(!1)},d=()=>{const S=s.getFullYear(),k=s.getMonth();return new Date(S,k+1,0).getDate()},h=(S,k,T)=>{const j=new Date(S.start_date),P=new Date(S.end_date),C=j<k?1:j.getDate(),N=P>T?T.getDate():P.getDate();return{startDay:C,endDay:N,span:N-C+1}},p=(S,k)=>`${k} ${S}`,y=(S,k,T,j)=>{const P=new Date(S),C=new Date(k);return Math.ceil((C.getTime()-P.getTime())/(1e3*60*60*24))>=4?`${P.getDate()}.${P.getMonth()+1} ${T} - ${C.getDate()}.${C.getMonth()+1} ${j}`:`${P.getDate()}-${C.getDate()}`},x=(S,k,T)=>{const j=S.customer.last_name,P=S.customer.first_name,C=new Date(S.start_date),N=new Date(S.end_date),O=Math.ceil((N.getTime()-C.getTime())/(1e3*60*60*24));if(O>=4){const z=p(P,j),L=y(S.start_date,S.end_date,S.start_time,S.end_time);return`${z}
${L}`}if(O>=2&&O<=3){const z=y(S.start_date,S.end_date,S.start_time,S.end_time);return`${k<100?`${j} ${P[0]}.`:`${j} ${P}`}
${z}`}return`${j}
${C.getDate()}`},v=(S,k)=>{const T="absolute inset-1 rounded p-1.5 cursor-pointer transition-all duration-300 text-sm flex flex-col items-center justify-center",j=Math.ceil((new Date(S.end_date).getTime()-new Date(S.start_date).getTime())/864e5);return j>=4?`${T} bg-gradient-to-r from-indigo-100 to-blue-50 hover:from-indigo-200 hover:to-blue-100 text-center font-medium`:j>=2?`${T} bg-gradient-to-r from-blue-100 to-blue-50 hover:from-blue-200 hover:to-blue-100 text-center font-medium`:`${T} bg-blue-50 hover:bg-blue-100 font-medium text-center`},b=()=>{const S=Array.from({length:d()},(k,T)=>T+1);return g.jsxs("div",{className:"grid grid-cols-[200px_1fr] border-b",children:[g.jsx("div",{className:"p-4 font-medium text-gray-700 border-r",children:"Nazwa sprzętu"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsx("div",{className:"grid grid-cols-31 min-w-[1240px]",children:S.map(k=>{const T=new Date(s.getFullYear(),s.getMonth(),k),j=fse[T.getDay()===0?6:T.getDay()-1];return g.jsxs("div",{className:"p-2 text-center border-r last:border-r-0",children:[g.jsx("div",{className:"font-bold text-lg",children:k}),g.jsx("div",{className:"text-sm text-gray-500",children:j})]},k)})})})]})};return g.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("button",{onClick:()=>o(new Date(s.setMonth(s.getMonth()-1))),className:"p-3 md:p-2 hover:bg-gray-100 rounded-full touch-manipulation",children:g.jsx(Ov,{className:"w-5 h-5"})}),g.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:s.toLocaleString("pl-PL",{month:"long",year:"numeric"})}),g.jsx("button",{onClick:()=>o(new Date(s.setMonth(s.getMonth()+1))),className:"p-3 md:p-2 hover:bg-gray-100 rounded-full touch-manipulation",children:g.jsx(K_,{className:"w-5 h-5"})})]}),g.jsxs("button",{onClick:()=>{},className:"hidden md:flex items-center px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:[g.jsx(Nh,{className:"w-5 h-5 mr-2"}),"Eksportuj"]})]}),a?g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-500",children:"Ładowanie kalendarza..."})]}):g.jsxs("div",{className:"overflow-x-auto relative touch-pan-x",children:[b(),g.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[200px_1fr] relative",children:[g.jsx("div",{className:"border-r",children:e.map(S=>g.jsx("div",{className:"p-2 md:p-4 border-b last:border-b-0 h-[60px] flex items-center",children:g.jsx("div",{className:"text-xs md:text-base line-clamp-2 break-words min-w-[100px] md:min-w-[180px] max-w-full",children:S.name})},S.id))}),g.jsx("div",{className:"overflow-x-auto relative",children:g.jsx("div",{className:"min-w-[calc(100vw-120px)] md:min-w-[1240px]",children:e.map(S=>g.jsx("div",{className:"grid grid-cols-31 border-b last:border-b-0 h-[60px]",children:Array.from({length:d()}).map((k,T)=>{const j=r.filter(O=>O.reservation_items.some(z=>z.equipment_id===S.id)),P=new Date(s.getFullYear(),s.getMonth(),1),C=new Date(s.getFullYear(),s.getMonth()+1,0),N=j.find(O=>{const{startDay:z,endDay:L}=h(O,P,C);return T+1>=z&&T+1<=L});if(N){const{startDay:O,span:z}=h(N,P,C),L=z>1,M=Math.floor(1240/d());return T+1===O?g.jsx("div",{className:"relative",style:{gridColumn:`span ${z}`},children:g.jsxs("div",{onClick:()=>t(`/admin/panel/customer/${N.id}`),className:`${v(N)} min-h-[44px] touch-manipulation`,children:[g.jsx("div",{className:"text-[10px] md:text-xs whitespace-pre-line font-medium",children:x(N,M)}),L&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-1",children:g.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full"})}),g.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 -mr-1",children:g.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full"})})]})]})},T):null}return g.jsx("div",{className:"border-r last:border-r-0 h-[60px]"},T)})},S.id))})})]})]})]})};var Co=Uint8Array,Qs=Uint16Array,Wg=Uint32Array,h2=new Co([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p2=new Co([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m_=new Co([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NM=function(t,e){for(var n=new Qs(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Wg(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},CM=NM(h2,2),EM=CM[0],g_=CM[1];EM[28]=258,g_[258]=28;var AM=NM(p2,0),pse=AM[0],lT=AM[1],y_=new Qs(32768);for(var Dr=0;Dr<32768;++Dr){var rd=(Dr&43690)>>>1|(Dr&21845)<<1;rd=(rd&52428)>>>2|(rd&13107)<<2,rd=(rd&61680)>>>4|(rd&3855)<<4,y_[Dr]=((rd&65280)>>>8|(rd&255)<<8)>>>1}var lc=function(t,e,n){for(var r=t.length,i=0,s=new Qs(e);i<r;++i)++s[t[i]-1];var o=new Qs(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Qs(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[y_[d]>>>l]=c}else for(a=new Qs(r),i=0;i<r;++i)a[i]=y_[o[t[i]-1]++]>>>15-t[i];return a},qd=new Co(288);for(var Dr=0;Dr<144;++Dr)qd[Dr]=8;for(var Dr=144;Dr<256;++Dr)qd[Dr]=9;for(var Dr=256;Dr<280;++Dr)qd[Dr]=7;for(var Dr=280;Dr<288;++Dr)qd[Dr]=8;var Vg=new Co(32);for(var Dr=0;Dr<32;++Dr)Vg[Dr]=5;var mse=lc(qd,9,0),gse=lc(qd,9,1),yse=lc(Vg,5,0),xse=lc(Vg,5,1),Lb=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cl=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(e&7)&n},Mb=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},H4=function(t){return(t/8>>0)+(t&7&&1)},TM=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Qs?Qs:t instanceof Wg?Wg:Co)(n-e);return r.set(t.subarray(e,n)),r},vse=function(t,e,n){var r=t.length,i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Co(r*3));var o=function(te){var ge=e.length;if(te>ge){var xe=new Co(Math.max(ge*2,te));xe.set(e),e=xe}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,h=n.m,p=n.n,y=r*8;do{if(!u){n.f=a=cl(t,l,1);var x=cl(t,l+1,3);if(l+=3,x)if(x==1)u=gse,d=xse,h=9,p=5;else if(x==2){var k=cl(t,l,31)+257,T=cl(t,l+10,15)+4,j=k+cl(t,l+5,31)+1;l+=14;for(var P=new Co(j),C=new Co(19),N=0;N<T;++N)C[m_[N]]=cl(t,l+N*3,7);l+=T*3;var O=Lb(C),z=(1<<O)-1;if(!s&&l+j*(O+7)>y)break;for(var L=lc(C,O,1),N=0;N<j;){var M=L[cl(t,l,z)];l+=M&15;var v=M>>>4;if(v<16)P[N++]=v;else{var K=0,W=0;for(v==16?(W=3+cl(t,l,3),l+=2,K=P[N-1]):v==17?(W=3+cl(t,l,7),l+=3):v==18&&(W=11+cl(t,l,127),l+=7);W--;)P[N++]=K}}var Z=P.subarray(0,k),U=P.subarray(k);h=Lb(Z),p=Lb(U),u=lc(Z,h,1),d=lc(U,p,1)}else throw"invalid block type";else{var v=H4(l)+4,b=t[v-4]|t[v-3]<<8,S=v+b;if(S>r){if(s)throw"unexpected EOF";break}i&&o(c+b),e.set(t.subarray(v,S),c),n.b=c+=b,n.p=l=S*8;continue}if(l>y)throw"unexpected EOF"}i&&o(c+131072);for(var F=(1<<h)-1,J=(1<<p)-1,Q=h+p+18;s||l+Q<y;){var K=u[Mb(t,l)&F],ee=K>>>4;if(l+=K&15,l>y)throw"unexpected EOF";if(!K)throw"invalid length/literal";if(ee<256)e[c++]=ee;else if(ee==256){u=null;break}else{var ne=ee-254;if(ee>264){var N=ee-257,D=h2[N];ne=cl(t,l,(1<<D)-1)+EM[N],l+=D}var G=d[Mb(t,l)&J],V=G>>>4;if(!G)throw"invalid distance";l+=G&15;var U=pse[V];if(V>3){var D=p2[V];U+=Mb(t,l)&(1<<D)-1,l+=D}if(l>y)throw"unexpected EOF";i&&o(c+131072);for(var H=c+ne;c<H;c+=4)e[c]=e[c-U],e[c+1]=e[c+1-U],e[c+2]=e[c+2-U],e[c+3]=e[c+3-U];c=H}}n.l=u,n.p=l,n.b=c,u&&(a=1,n.m=h,n.d=d,n.n=p)}while(!a);return c==e.length?e:TM(e,0,c)},qc=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},ym=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Ib=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Co(0),0];if(i==1){var o=new Co(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(j,P){return j.f-P.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var p=new Qs(h+1),y=x_(n[u-1],p,0);if(y>e){var r=0,x=0,v=y-e,b=1<<v;for(s.sort(function(P,C){return p[C.s]-p[P.s]||P.f-C.f});r<i;++r){var S=s[r].s;if(p[S]>e)x+=b-(1<<y-p[S]),p[S]=e;else break}for(x>>>=v;x>0;){var k=s[r].s;p[k]<e?x-=1<<e-p[k]++-1:++r}for(;r>=0&&x;--r){var T=s[r].s;p[T]==e&&(--p[T],++x)}y=e}return[new Co(p),y]},x_=function(t,e,n){return t.s==-1?Math.max(x_(t.l,e,n+1),x_(t.r,e,n+1)):e[t.s]=n},cT=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Qs(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},xm=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},v_=function(t,e,n){var r=n.length,i=H4(e+2);t[i]=r&255,t[i+1]=r>>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},uT=function(t,e,n,r,i,s,o,a,l,c,u){qc(e,u++,n),++i[256];for(var d=Ib(i,15),h=d[0],p=d[1],y=Ib(s,15),x=y[0],v=y[1],b=cT(h),S=b[0],k=b[1],T=cT(x),j=T[0],P=T[1],C=new Qs(19),N=0;N<S.length;++N)C[S[N]&31]++;for(var N=0;N<j.length;++N)C[j[N]&31]++;for(var O=Ib(C,7),z=O[0],L=O[1],M=19;M>4&&!z[m_[M-1]];--M);var K=c+5<<3,W=xm(i,qd)+xm(s,Vg)+o,Z=xm(i,h)+xm(s,x)+o+14+3*M+xm(C,z)+(2*C[16]+3*C[17]+7*C[18]);if(K<=W&&K<=Z)return v_(e,u,t.subarray(l,l+c));var U,F,J,Q;if(qc(e,u,1+(Z<W)),u+=2,Z<W){U=lc(h,p,0),F=h,J=lc(x,v,0),Q=x;var ee=lc(z,L,0);qc(e,u,k-257),qc(e,u+5,P-1),qc(e,u+10,M-4),u+=14;for(var N=0;N<M;++N)qc(e,u+3*N,z[m_[N]]);u+=3*M;for(var ne=[S,j],D=0;D<2;++D)for(var G=ne[D],N=0;N<G.length;++N){var V=G[N]&31;qc(e,u,ee[V]),u+=z[V],V>15&&(qc(e,u,G[N]>>>5&127),u+=G[N]>>>12)}}else U=mse,F=qd,J=yse,Q=Vg;for(var N=0;N<a;++N)if(r[N]>255){var V=r[N]>>>18&31;ym(e,u,U[V+257]),u+=F[V+257],V>7&&(qc(e,u,r[N]>>>23&31),u+=h2[V]);var H=r[N]&31;ym(e,u,J[H]),u+=Q[H],H>3&&(ym(e,u,r[N]>>>5&8191),u+=p2[H])}else ym(e,u,U[r[N]]),u+=F[r[N]];return ym(e,u,U[256]),u+F[256]},wse=new Wg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bse=function(t,e,n,r,i,s){var o=t.length,a=new Co(r+o+5*(1+Math.floor(o/7e3))+i),l=a.subarray(r,a.length-i),c=0;if(!e||o<8)for(var u=0;u<=o;u+=65535){var d=u+65535;d<o?c=v_(l,c,t.subarray(u,d)):(l[u]=s,c=v_(l,c,t.subarray(u,o)))}else{for(var h=wse[e-1],p=h>>>13,y=h&8191,x=(1<<n)-1,v=new Qs(32768),b=new Qs(x+1),S=Math.ceil(n/3),k=2*S,T=function(Be){return(t[Be]^t[Be+1]<<S^t[Be+2]<<k)&x},j=new Wg(25e3),P=new Qs(288),C=new Qs(32),N=0,O=0,u=0,z=0,L=0,M=0;u<o;++u){var K=T(u),W=u&32767,Z=b[K];if(v[W]=Z,b[K]=W,L<=u){var U=o-u;if((N>7e3||z>24576)&&U>423){c=uT(t,l,0,j,P,C,O,z,M,u-M,c),z=N=O=0,M=u;for(var F=0;F<286;++F)P[F]=0;for(var F=0;F<30;++F)C[F]=0}var J=2,Q=0,ee=y,ne=W-Z&32767;if(U>2&&K==T(u-ne))for(var D=Math.min(p,U)-1,G=Math.min(32767,u),V=Math.min(258,U);ne<=G&&--ee&&W!=Z;){if(t[u+J]==t[u+J-ne]){for(var H=0;H<V&&t[u+H]==t[u+H-ne];++H);if(H>J){if(J=H,Q=ne,H>D)break;for(var te=Math.min(ne,H-2),ge=0,F=0;F<te;++F){var xe=u-ne+F+32768&32767,ve=v[xe],Ne=xe-ve+32768&32767;Ne>ge&&(ge=Ne,Z=xe)}}}W=Z,Z=v[W],ne+=W-Z+32768&32767}if(Q){j[z++]=268435456|g_[J]<<18|lT[Q];var He=g_[J]&31,Ke=lT[Q]&31;O+=h2[He]+p2[Ke],++P[257+He],++C[Ke],L=u+J,++N}else j[z++]=t[u],++P[t[u]]}}c=uT(t,l,s,j,P,C,O,z,M,u-M,c)}return TM(a,0,r+H4(c)+i)},_se=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)r+=n[o],i+=r;r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},Sse=function(t,e,n,r,i){return bse(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,!0)},kse=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Nse=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},Cse=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function w_(t,e){e===void 0&&(e={});var n=_se();n.p(t);var r=Sse(t,e,2,4);return Nse(r,e),kse(r,r.length-4,n.d()),r}function Ese(t,e){return vse((Cse(t),t.subarray(2,-4)),e)}var fn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Rb(){fn.console&&typeof fn.console.log=="function"&&fn.console.log.apply(fn.console,arguments)}var yr={log:Rb,warn:function(t){fn.console&&(typeof fn.console.warn=="function"?fn.console.warn.apply(fn.console,arguments):Rb.call(null,arguments))},error:function(t){fn.console&&(typeof fn.console.error=="function"?fn.console.error.apply(fn.console,arguments):Rb(t))}};function Fb(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Vf(r.response,e,n)},r.onerror=function(){yr.error("could not download file")},r.send()}function dT(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ty(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Qm,b_,Vf=fn.saveAs||((typeof window>"u"?"undefined":Jn(window))!=="object"||window!==fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=fn.URL||fn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?dT(i.href)?Fb(t,e,n):Ty(i,i.target="_blank"):Ty(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ty(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(dT(t))Fb(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Ty(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Jn(s)!=="object"&&(yr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Fb(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(fn.HTMLElement)||fn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Jn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=fn.URL||fn.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jM(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zb(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ks(n,r,i,s,e[0],7,-680876936),s=ks(s,n,r,i,e[1],12,-389564586),i=ks(i,s,n,r,e[2],17,606105819),r=ks(r,i,s,n,e[3],22,-1044525330),n=ks(n,r,i,s,e[4],7,-176418897),s=ks(s,n,r,i,e[5],12,1200080426),i=ks(i,s,n,r,e[6],17,-1473231341),r=ks(r,i,s,n,e[7],22,-45705983),n=ks(n,r,i,s,e[8],7,1770035416),s=ks(s,n,r,i,e[9],12,-1958414417),i=ks(i,s,n,r,e[10],17,-42063),r=ks(r,i,s,n,e[11],22,-1990404162),n=ks(n,r,i,s,e[12],7,1804603682),s=ks(s,n,r,i,e[13],12,-40341101),i=ks(i,s,n,r,e[14],17,-1502002290),n=Ns(n,r=ks(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ns(s,n,r,i,e[6],9,-1069501632),i=Ns(i,s,n,r,e[11],14,643717713),r=Ns(r,i,s,n,e[0],20,-373897302),n=Ns(n,r,i,s,e[5],5,-701558691),s=Ns(s,n,r,i,e[10],9,38016083),i=Ns(i,s,n,r,e[15],14,-660478335),r=Ns(r,i,s,n,e[4],20,-405537848),n=Ns(n,r,i,s,e[9],5,568446438),s=Ns(s,n,r,i,e[14],9,-1019803690),i=Ns(i,s,n,r,e[3],14,-187363961),r=Ns(r,i,s,n,e[8],20,1163531501),n=Ns(n,r,i,s,e[13],5,-1444681467),s=Ns(s,n,r,i,e[2],9,-51403784),i=Ns(i,s,n,r,e[7],14,1735328473),n=Cs(n,r=Ns(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Cs(s,n,r,i,e[8],11,-2022574463),i=Cs(i,s,n,r,e[11],16,1839030562),r=Cs(r,i,s,n,e[14],23,-35309556),n=Cs(n,r,i,s,e[1],4,-1530992060),s=Cs(s,n,r,i,e[4],11,1272893353),i=Cs(i,s,n,r,e[7],16,-155497632),r=Cs(r,i,s,n,e[10],23,-1094730640),n=Cs(n,r,i,s,e[13],4,681279174),s=Cs(s,n,r,i,e[0],11,-358537222),i=Cs(i,s,n,r,e[3],16,-722521979),r=Cs(r,i,s,n,e[6],23,76029189),n=Cs(n,r,i,s,e[9],4,-640364487),s=Cs(s,n,r,i,e[12],11,-421815835),i=Cs(i,s,n,r,e[15],16,530742520),n=Es(n,r=Cs(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Es(s,n,r,i,e[7],10,1126891415),i=Es(i,s,n,r,e[14],15,-1416354905),r=Es(r,i,s,n,e[5],21,-57434055),n=Es(n,r,i,s,e[12],6,1700485571),s=Es(s,n,r,i,e[3],10,-1894986606),i=Es(i,s,n,r,e[10],15,-1051523),r=Es(r,i,s,n,e[1],21,-2054922799),n=Es(n,r,i,s,e[8],6,1873313359),s=Es(s,n,r,i,e[15],10,-30611744),i=Es(i,s,n,r,e[6],15,-1560198380),r=Es(r,i,s,n,e[13],21,1309151649),n=Es(n,r,i,s,e[4],6,-145523070),s=Es(s,n,r,i,e[11],10,-1120210379),i=Es(i,s,n,r,e[2],15,718787259),r=Es(r,i,s,n,e[9],21,-343485551),t[0]=kd(n,t[0]),t[1]=kd(r,t[1]),t[2]=kd(i,t[2]),t[3]=kd(s,t[3])}function m2(t,e,n,r,i,s){return e=kd(kd(e,t),kd(r,s)),kd(e<<i|e>>>32-i,n)}function ks(t,e,n,r,i,s,o){return m2(e&n|~e&r,t,e,i,s,o)}function Ns(t,e,n,r,i,s,o){return m2(e&r|n&~r,t,e,i,s,o)}function Cs(t,e,n,r,i,s,o){return m2(e^n^r,t,e,i,s,o)}function Es(t,e,n,r,i,s,o){return m2(n^(e|~r),t,e,i,s,o)}function PM(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)zb(r,Ase(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(zb(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,zb(r,i),r}function Ase(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Qm=fn.atob.bind(fn),b_=fn.btoa.bind(fn);var fT="0123456789abcdef".split("");function Tse(t){for(var e="",n=0;n<4;n++)e+=fT[t>>8*n+4&15]+fT[t>>8*n&15];return e}function jse(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function __(t){return PM(t).map(jse).join("")}var Pse=function(t){for(var e=0;e<t.length;e++)t[e]=Tse(t[e]);return t.join("")}(PM("hello"))!="5d41402abc4b2a76b9719d911017c592";function kd(t,e){if(Pse){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function S_(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,p=0,y="";for(l=0;l<d;l++)p=(p+(u=a[h=(h+1)%256]))%256,a[h]=a[p],a[p]=u,o=a[(a[h]+a[p])%256],y+=String.fromCharCode(e.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var hT={print:4,modify:8,copy:16,"annot-forms":32};function Lp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(hT.perm!==void 0)throw new Error("Invalid permission: "+a);i+=hT[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=__(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=S_(this.encryptionKey,this.padding)}function Mp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function pT(t){if(Jn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){fn.console&&yr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Hg(t){if(!(this instanceof Hg))return new Hg(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function DM(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function xd(t,e,n,r,i){if(!(this instanceof xd))return new xd(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,DM.call(this,r,i)}function nh(t,e,n,r,i){if(!(this instanceof nh))return new nh(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,DM.call(this,r,i)}function ln(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;Jn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=pT;var y="1.3",x=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(I){y=I};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return v};var b=p.__private__.getPageFormat=function(I){return v[I]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},k=S.COMPAT;function T(){this.saveGraphicsState(),fe(new jt(dt,0,0,-dt,0,Il()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),c="n",k=S.ADVANCED}function j(){this.restoreGraphicsState(),c="S",k=S.COMPAT}var P=p.__private__.combineFontStyleAndFontWeight=function(I,se){if(I=="bold"&&se=="normal"||I=="bold"&&se==400||I=="normal"&&se=="italic"||I=="bold"&&se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return se&&(I=se==400||se==="normal"?I==="italic"?"italic":"normal":se!=700&&se!=="bold"||I!=="normal"?(se==700?"bold":se)+""+I:"bold"),I};p.advancedAPI=function(I){var se=k===S.COMPAT;return se&&T.call(this),typeof I!="function"||(I(this),se&&j.call(this)),this},p.compatAPI=function(I){var se=k===S.ADVANCED;return se&&j.call(this),typeof I!="function"||(I(this),se&&T.call(this)),this},p.isAdvancedAPI=function(){return k===S.ADVANCED};var C,N=function(I){if(k!==S.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=p.roundToPrecision=p.__private__.roundToPrecision=function(I,se){var _e=e||se;if(isNaN(I)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(_e).replace(/0+$/,"")};C=p.hpf=p.__private__.hpf=typeof l=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return O(I,l)}:l==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return O(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return O(I,16)};var z=p.f2=p.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return O(I,2)},L=p.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return O(I,3)},M=p.scale=p.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return k===S.COMPAT?I*dt:k===S.ADVANCED?I:void 0},K=function(I){return k===S.COMPAT?Il()-I:k===S.ADVANCED?I:void 0},W=function(I){return M(K(I))};p.__private__.setPrecision=p.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var Z,U="00000000000000000000000000000000",F=p.__private__.getFileId=function(){return U},J=p.__private__.setFileId=function(I){return U=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Cr=new Lp(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};p.setFileId=function(I){return J(I),this},p.getFileId=function(){return F()};var Q=p.__private__.convertDateToPDFDate=function(I){var se=I.getTimezoneOffset(),_e=se<0?"+":"-",Ce=Math.floor(Math.abs(se/60)),Re=Math.abs(se%60),tt=[_e,V(Ce),"'",V(Re),"'"].join("");return["D:",I.getFullYear(),V(I.getMonth()+1),V(I.getDate()),V(I.getHours()),V(I.getMinutes()),V(I.getSeconds()),tt].join("")},ee=p.__private__.convertPDFDateToDate=function(I){var se=parseInt(I.substr(2,4),10),_e=parseInt(I.substr(6,2),10)-1,Ce=parseInt(I.substr(8,2),10),Re=parseInt(I.substr(10,2),10),tt=parseInt(I.substr(12,2),10),mt=parseInt(I.substr(14,2),10);return new Date(se,_e,Ce,Re,tt,mt,0)},ne=p.__private__.setCreationDate=function(I){var se;if(I===void 0&&(I=new Date),I instanceof Date)se=Q(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");se=I}return Z=se},D=p.__private__.getCreationDate=function(I){var se=Z;return I==="jsDate"&&(se=ee(Z)),se};p.setCreationDate=function(I){return ne(I),this},p.getCreationDate=function(I){return D(I)};var G,V=p.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},H=p.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},te=0,ge=[],xe=[],ve=0,Ne=[],He=[],Ke=!1,qe=xe,Be=function(){te=0,ve=0,xe=[],ge=[],Ne=[],de=Et(),he=Et()};p.__private__.setCustomOutputDestination=function(I){Ke=!0,qe=I};var Te=function(I){Ke||(qe=I)};p.__private__.resetCustomOutputDestination=function(){Ke=!1,qe=xe};var fe=p.__private__.out=function(I){return I=I.toString(),ve+=I.length+1,qe.push(I),qe},Ge=p.__private__.write=function(I){return fe(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},et=p.__private__.getArrayBuffer=function(I){for(var se=I.length,_e=new ArrayBuffer(se),Ce=new Uint8Array(_e);se--;)Ce[se]=I.charCodeAt(se);return _e},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Le};var ke=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(I){return ke=k===S.ADVANCED?I/dt:I,this};var We,at=p.__private__.getFontSize=p.getFontSize=function(){return k===S.COMPAT?ke:ke*dt},xt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(I){return xt=I,this},p.__private__.getR2L=p.getR2L=function(){return xt};var _t,Pt=p.__private__.setZoomMode=function(I){var se=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))We=I;else if(isNaN(I)){if(se.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');We=I}else We=parseInt(I,10)};p.__private__.getZoomMode=function(){return We};var Vt,Xt=p.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');_t=I};p.__private__.getPageMode=function(){return _t};var Bt=p.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Vt=I};p.__private__.getLayoutMode=function(){return Vt},p.__private__.setDisplayMode=p.setDisplayMode=function(I,se,_e){return Pt(I),Bt(se),Xt(_e),this};var It={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(I){if(Object.keys(It).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return It[I]},p.__private__.getDocumentProperties=function(){return It},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(I){for(var se in It)It.hasOwnProperty(se)&&I[se]&&(It[se]=I[se]);return this},p.__private__.setDocumentProperty=function(I,se){if(Object.keys(It).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return It[I]=se};var Ft,dt,Tn,sn,Wn,hn={},jn={},Wr=[],yn={},Fr={},Nn={},vr={},pn=null,tn=0,Rt=[],nn=new pT(p),rr=t.hotfixes||[],xn={},On={},Sr=[],jt=function I(se,_e,Ce,Re,tt,mt){if(!(this instanceof I))return new I(se,_e,Ce,Re,tt,mt);isNaN(se)&&(se=1),isNaN(_e)&&(_e=0),isNaN(Ce)&&(Ce=0),isNaN(Re)&&(Re=1),isNaN(tt)&&(tt=0),isNaN(mt)&&(mt=0),this._matrix=[se,_e,Ce,Re,tt,mt]};Object.defineProperty(jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),jt.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(I)},jt.prototype.multiply=function(I){var se=I.sx*this.sx+I.shy*this.shx,_e=I.sx*this.shy+I.shy*this.sy,Ce=I.shx*this.sx+I.sy*this.shx,Re=I.shx*this.shy+I.sy*this.sy,tt=I.tx*this.sx+I.ty*this.shx+this.tx,mt=I.tx*this.shy+I.ty*this.sy+this.ty;return new jt(se,_e,Ce,Re,tt,mt)},jt.prototype.decompose=function(){var I=this.sx,se=this.shy,_e=this.shx,Ce=this.sy,Re=this.tx,tt=this.ty,mt=Math.sqrt(I*I+se*se),Ot=(I/=mt)*_e+(se/=mt)*Ce;_e-=I*Ot,Ce-=se*Ot;var Qt=Math.sqrt(_e*_e+Ce*Ce);return Ot/=Qt,I*(Ce/=Qt)<se*(_e/=Qt)&&(I=-I,se=-se,Ot=-Ot,mt=-mt),{scale:new jt(mt,0,0,Qt,0,0),translate:new jt(1,0,0,1,Re,tt),rotate:new jt(I,se,-se,I,0,0),skew:new jt(1,0,Ot,1,0,0)}},jt.prototype.toString=function(I){return this.join(" ")},jt.prototype.inversed=function(){var I=this.sx,se=this.shy,_e=this.shx,Ce=this.sy,Re=this.tx,tt=this.ty,mt=1/(I*Ce-se*_e),Ot=Ce*mt,Qt=-se*mt,vn=-_e*mt,Sn=I*mt;return new jt(Ot,Qt,vn,Sn,-Ot*Re-vn*tt,-Qt*Re-Sn*tt)},jt.prototype.applyToPoint=function(I){var se=I.x*this.sx+I.y*this.shx+this.tx,_e=I.x*this.shy+I.y*this.sy+this.ty;return new ga(se,_e)},jt.prototype.applyToRectangle=function(I){var se=this.applyToPoint(I),_e=this.applyToPoint(new ga(I.x+I.w,I.y+I.h));return new Ml(se.x,se.y,_e.x-se.x,_e.y-se.y)},jt.prototype.clone=function(){var I=this.sx,se=this.shy,_e=this.shx,Ce=this.sy,Re=this.tx,tt=this.ty;return new jt(I,se,_e,Ce,Re,tt)},p.Matrix=jt;var pe=p.matrixMult=function(I,se){return se.multiply(I)},Qe=new jt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Qe;var vt=function(I,se){if(!Fr[I]){var _e=(se instanceof xd?"Sh":"P")+(Object.keys(yn).length+1).toString(10);se.id=_e,Fr[I]=_e,yn[_e]=se,nn.publish("addPattern",se)}};p.ShadingPattern=xd,p.TilingPattern=nh,p.addShadingPattern=function(I,se){return N("addShadingPattern()"),vt(I,se),this},p.beginTilingPattern=function(I){N("beginTilingPattern()"),Vh(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},p.endTilingPattern=function(I,se){N("endTilingPattern()"),se.stream=He[G].join(`
`),vt(I,se),nn.publish("endTilingPattern",se),Sr.pop().restore()};var $t=p.__private__.newObject=function(){var I=Et();return re(I,!0),I},Et=p.__private__.newObjectDeferred=function(){return te++,ge[te]=function(){return ve},te},re=function(I,se){return se=typeof se=="boolean"&&se,ge[I]=ve,se&&fe(I+" 0 obj"),I},ye=p.__private__.newAdditionalObject=function(){var I={objId:Et(),content:""};return Ne.push(I),I},de=Et(),he=Et(),we=p.__private__.decodeColorString=function(I){var se=I.split(" ");if(se.length!==2||se[1]!=="g"&&se[1]!=="G")se.length===5&&(se[4]==="k"||se[4]==="K")&&(se=[(1-se[0])*(1-se[3]),(1-se[1])*(1-se[3]),(1-se[2])*(1-se[3]),"r"]);else{var _e=parseFloat(se[0]);se=[_e,_e,_e,"r"]}for(var Ce="#",Re=0;Re<3;Re++)Ce+=("0"+Math.floor(255*parseFloat(se[Re])).toString(16)).slice(-2);return Ce},be=p.__private__.encodeColorString=function(I){var se;typeof I=="string"&&(I={ch1:I});var _e=I.ch1,Ce=I.ch2,Re=I.ch3,tt=I.ch4,mt=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var Ot=new jM(_e);if(Ot.ok)_e=Ot.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var Qt=parseInt(_e.substr(1),16);_e=Qt>>16&255,Ce=Qt>>8&255,Re=255&Qt}if(Ce===void 0||tt===void 0&&_e===Ce&&Ce===Re)if(typeof _e=="string")se=_e+" "+mt[0];else switch(I.precision){case 2:se=z(_e/255)+" "+mt[0];break;case 3:default:se=L(_e/255)+" "+mt[0]}else if(tt===void 0||Jn(tt)==="object"){if(tt&&!isNaN(tt.a)&&tt.a===0)return se=["1.","1.","1.",mt[1]].join(" ");if(typeof _e=="string")se=[_e,Ce,Re,mt[1]].join(" ");else switch(I.precision){case 2:se=[z(_e/255),z(Ce/255),z(Re/255),mt[1]].join(" ");break;default:case 3:se=[L(_e/255),L(Ce/255),L(Re/255),mt[1]].join(" ")}}else if(typeof _e=="string")se=[_e,Ce,Re,tt,mt[2]].join(" ");else switch(I.precision){case 2:se=[z(_e),z(Ce),z(Re),z(tt),mt[2]].join(" ");break;case 3:default:se=[L(_e),L(Ce),L(Re),L(tt),mt[2]].join(" ")}return se},Ue=p.__private__.getFilters=function(){return o},Ye=p.__private__.putStream=function(I){var se=(I=I||{}).data||"",_e=I.filters||Ue(),Ce=I.alreadyAppliedFilters||[],Re=I.addLength1||!1,tt=se.length,mt=I.objectId,Ot=function(Ci){return Ci};if(u!==null&&mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Ot=Cr.encryptor(mt,0));var Qt={};_e===!0&&(_e=["FlateEncode"]);var vn=I.additionalKeyValues||[],Sn=(Qt=ln.API.processDataByFilters!==void 0?ln.API.processDataByFilters(se,_e):{data:se,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(Qt.data.length!==0&&(vn.push({key:"Length",value:Qt.data.length}),Re===!0&&vn.push({key:"Length1",value:tt})),Sn.length!=0)if(Sn.split("/").length-1==1)vn.push({key:"Filter",value:Sn});else{vn.push({key:"Filter",value:"["+Sn+"]"});for(var Ln=0;Ln<vn.length;Ln+=1)if(vn[Ln].key==="DecodeParms"){for(var Er=[],Mr=0;Mr<Qt.reverseChain.split("/").length-1;Mr+=1)Er.push("null");Er.push(vn[Ln].value),vn[Ln].value="["+Er.join(" ")+"]"}}fe("<<");for(var Hr=0;Hr<vn.length;Hr++)fe("/"+vn[Hr].key+" "+vn[Hr].value);fe(">>"),Qt.data.length!==0&&(fe("stream"),fe(Ot(Qt.data)),fe("endstream"))},Me=p.__private__.putPage=function(I){var se=I.number,_e=I.data,Ce=I.objId,Re=I.contentsObjId;re(Ce,!0),fe("<</Type /Page"),fe("/Parent "+I.rootDictionaryObjId+" 0 R"),fe("/Resources "+I.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(C(I.mediaBox.bottomLeftX))+" "+parseFloat(C(I.mediaBox.bottomLeftY))+" "+C(I.mediaBox.topRightX)+" "+C(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&fe("/CropBox ["+C(I.cropBox.bottomLeftX)+" "+C(I.cropBox.bottomLeftY)+" "+C(I.cropBox.topRightX)+" "+C(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&fe("/BleedBox ["+C(I.bleedBox.bottomLeftX)+" "+C(I.bleedBox.bottomLeftY)+" "+C(I.bleedBox.topRightX)+" "+C(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&fe("/TrimBox ["+C(I.trimBox.bottomLeftX)+" "+C(I.trimBox.bottomLeftY)+" "+C(I.trimBox.topRightX)+" "+C(I.trimBox.topRightY)+"]"),I.artBox!==null&&fe("/ArtBox ["+C(I.artBox.bottomLeftX)+" "+C(I.artBox.bottomLeftY)+" "+C(I.artBox.topRightX)+" "+C(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&fe("/UserUnit "+I.userUnit),nn.publish("putPage",{objId:Ce,pageContext:Rt[se],pageNumber:se,page:_e}),fe("/Contents "+Re+" 0 R"),fe(">>"),fe("endobj");var tt=_e.join(`
`);return k===S.ADVANCED&&(tt+=`
Q`),re(Re,!0),Ye({data:tt,filters:Ue(),objectId:Re}),fe("endobj"),Ce},Ie=p.__private__.putPages=function(){var I,se,_e=[];for(I=1;I<=tn;I++)Rt[I].objId=Et(),Rt[I].contentsObjId=Et();for(I=1;I<=tn;I++)_e.push(Me({number:I,data:He[I],objId:Rt[I].objId,contentsObjId:Rt[I].contentsObjId,mediaBox:Rt[I].mediaBox,cropBox:Rt[I].cropBox,bleedBox:Rt[I].bleedBox,trimBox:Rt[I].trimBox,artBox:Rt[I].artBox,userUnit:Rt[I].userUnit,rootDictionaryObjId:de,resourceDictionaryObjId:he}));re(de,!0),fe("<</Type /Pages");var Ce="/Kids [";for(se=0;se<tn;se++)Ce+=_e[se]+" 0 R ";fe(Ce+"]"),fe("/Count "+tn),fe(">>"),fe("endobj"),nn.publish("postPutPages")},$e=function(I){nn.publish("putFont",{font:I,out:fe,newObject:$t,putStream:Ye}),I.isAlreadyPutted!==!0&&(I.objectNumber=$t(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Mp(I.postScriptName)),fe("/Subtype /Type1"),typeof I.encoding=="string"&&fe("/Encoding /"+I.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},ut=function(){for(var I in hn)hn.hasOwnProperty(I)&&(d===!1||d===!0&&h.hasOwnProperty(I))&&$e(hn[I])},wt=function(I){I.objectNumber=$t();var se=[];se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Form"}),se.push({key:"BBox",value:"["+[C(I.x),C(I.y),C(I.x+I.width),C(I.y+I.height)].join(" ")+"]"}),se.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var _e=I.pages[1].join(`
`);Ye({data:_e,additionalKeyValues:se,objectId:I.objectNumber}),fe("endobj")},Dt=function(){for(var I in xn)xn.hasOwnProperty(I)&&wt(xn[I])},bt=function(I,se){var _e,Ce=[],Re=1/(se-1);for(_e=0;_e<1;_e+=Re)Ce.push(_e);if(Ce.push(1),I[0].offset!=0){var tt={offset:0,color:I[0].color};I.unshift(tt)}if(I[I.length-1].offset!=1){var mt={offset:1,color:I[I.length-1].color};I.push(mt)}for(var Ot="",Qt=0,vn=0;vn<Ce.length;vn++){for(_e=Ce[vn];_e>I[Qt+1].offset;)Qt++;var Sn=I[Qt].offset,Ln=(_e-Sn)/(I[Qt+1].offset-Sn),Er=I[Qt].color,Mr=I[Qt+1].color;Ot+=H(Math.round((1-Ln)*Er[0]+Ln*Mr[0]).toString(16))+H(Math.round((1-Ln)*Er[1]+Ln*Mr[1]).toString(16))+H(Math.round((1-Ln)*Er[2]+Ln*Mr[2]).toString(16))}return Ot.trim()},gt=function(I,se){se||(se=21);var _e=$t(),Ce=bt(I.colors,se),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+se+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ye({data:Ce,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),fe("endobj"),I.objectNumber=$t(),fe("<< /ShadingType "+I.type),fe("/ColorSpace /DeviceRGB");var tt="/Coords ["+C(parseFloat(I.coords[0]))+" "+C(parseFloat(I.coords[1]))+" ";I.type===2?tt+=C(parseFloat(I.coords[2]))+" "+C(parseFloat(I.coords[3])):tt+=C(parseFloat(I.coords[2]))+" "+C(parseFloat(I.coords[3]))+" "+C(parseFloat(I.coords[4]))+" "+C(parseFloat(I.coords[5])),fe(tt+="]"),I.matrix&&fe("/Matrix ["+I.matrix.toString()+"]"),fe("/Function "+_e+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},dn=function(I,se){var _e=Et(),Ce=$t();se.push({resourcesOid:_e,objectOid:Ce}),I.objectNumber=Ce;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+I.boundingBox.map(C).join(" ")+"]"}),Re.push({key:"XStep",value:C(I.xStep)}),Re.push({key:"YStep",value:C(I.yStep)}),Re.push({key:"Resources",value:_e+" 0 R"}),I.matrix&&Re.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),Ye({data:I.stream,additionalKeyValues:Re,objectId:I.objectNumber}),fe("endobj")},zn=function(I){var se;for(se in yn)yn.hasOwnProperty(se)&&(yn[se]instanceof xd?gt(yn[se]):yn[se]instanceof nh&&dn(yn[se],I))},Zn=function(I){for(var se in I.objectNumber=$t(),fe("<<"),I)switch(se){case"opacity":fe("/ca "+z(I[se]));break;case"stroke-opacity":fe("/CA "+z(I[se]))}fe(">>"),fe("endobj")},kr=function(){var I;for(I in Nn)Nn.hasOwnProperty(I)&&Zn(Nn[I])},Oo=function(){for(var I in fe("/XObject <<"),xn)xn.hasOwnProperty(I)&&xn[I].objectNumber>=0&&fe("/"+I+" "+xn[I].objectNumber+" 0 R");nn.publish("putXobjectDict"),fe(">>")},ua=function(){Cr.oid=$t(),fe("<<"),fe("/Filter /Standard"),fe("/V "+Cr.v),fe("/R "+Cr.r),fe("/U <"+Cr.toHexString(Cr.U)+">"),fe("/O <"+Cr.toHexString(Cr.O)+">"),fe("/P "+Cr.P),fe(">>"),fe("endobj")},Bs=function(){for(var I in fe("/Font <<"),hn)hn.hasOwnProperty(I)&&(d===!1||d===!0&&h.hasOwnProperty(I))&&fe("/"+I+" "+hn[I].objectNumber+" 0 R");fe(">>")},Vr=function(){if(Object.keys(yn).length>0){for(var I in fe("/Shading <<"),yn)yn.hasOwnProperty(I)&&yn[I]instanceof xd&&yn[I].objectNumber>=0&&fe("/"+I+" "+yn[I].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),fe(">>")}},da=function(I){if(Object.keys(yn).length>0){for(var se in fe("/Pattern <<"),yn)yn.hasOwnProperty(se)&&yn[se]instanceof p.TilingPattern&&yn[se].objectNumber>=0&&yn[se].objectNumber<I&&fe("/"+se+" "+yn[se].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),fe(">>")}},Nr=function(){if(Object.keys(Nn).length>0){var I;for(I in fe("/ExtGState <<"),Nn)Nn.hasOwnProperty(I)&&Nn[I].objectNumber>=0&&fe("/"+I+" "+Nn[I].objectNumber+" 0 R");nn.publish("putGStateDict"),fe(">>")}},zr=function(I){re(I.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bs(),Vr(),da(I.objectOid),Nr(),Oo(),fe(">>"),fe("endobj")},Fh=function(){var I=[];ut(),kr(),Dt(),zn(I),nn.publish("putResources"),I.forEach(zr),zr({resourcesOid:he,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},zh=function(){nn.publish("putAdditionalObjects");for(var I=0;I<Ne.length;I++){var se=Ne[I];re(se.objId,!0),fe(se.content),fe("endobj")}nn.publish("postPutAdditionalObjects")},xc=function(I){jn[I.fontName]=jn[I.fontName]||{},jn[I.fontName][I.fontStyle]=I.id},Al=function(I,se,_e,Ce,Re){var tt={id:"F"+(Object.keys(hn).length+1).toString(10),postScriptName:I,fontName:se,fontStyle:_e,encoding:Ce,isStandardFont:Re||!1,metadata:{}};return nn.publish("addFont",{font:tt,instance:this}),hn[tt.id]=tt,xc(tt),tt.id},vc=function(I){for(var se=0,_e=Le.length;se<_e;se++){var Ce=Al.call(this,I[se][0],I[se][1],I[se][2],Le[se][3],!0);d===!1&&(h[Ce]=!0);var Re=I[se][0].split("-");xc({id:Ce,fontName:Re[0],fontStyle:Re[1]||""})}nn.publish("addFonts",{fonts:hn,dictionary:jn})},fs=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(Ce){var se=Ce.stack||"";~se.indexOf(" at ")&&(se=se.split(" at ")[1]);var _e="Error in function "+se.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!fn.console)throw new Error(_e);fn.console.error(_e,Ce),fn.alert&&alert(_e)}},I.foo.bar=I,I.foo},yu=function(I,se){var _e,Ce,Re,tt,mt,Ot,Qt,vn,Sn;if(Re=(se=se||{}).sourceEncoding||"Unicode",mt=se.outputEncoding,(se.autoencode||mt)&&hn[Ft].metadata&&hn[Ft].metadata[Re]&&hn[Ft].metadata[Re].encoding&&(tt=hn[Ft].metadata[Re].encoding,!mt&&hn[Ft].encoding&&(mt=hn[Ft].encoding),!mt&&tt.codePages&&(mt=tt.codePages[0]),typeof mt=="string"&&(mt=tt[mt]),mt)){for(Qt=!1,Ot=[],_e=0,Ce=I.length;_e<Ce;_e++)(vn=mt[I.charCodeAt(_e)])?Ot.push(String.fromCharCode(vn)):Ot.push(I[_e]),Ot[_e].charCodeAt(0)>>8&&(Qt=!0);I=Ot.join("")}for(_e=I.length;Qt===void 0&&_e!==0;)I.charCodeAt(_e-1)>>8&&(Qt=!0),_e--;if(!Qt)return I;for(Ot=se.noBOM?[]:[254,255],_e=0,Ce=I.length;_e<Ce;_e++){if((Sn=(vn=I.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ot.push(Sn),Ot.push(vn-(Sn<<8))}return String.fromCharCode.apply(void 0,Ot)},hs=p.__private__.pdfEscape=p.pdfEscape=function(I,se){return yu(I,se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wc=p.__private__.beginPage=function(I){He[++tn]=[],Rt[tn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},Tl(tn),Te(He[G])},sf=function(I,se){var _e,Ce,Re;switch(n=se||n,typeof I=="string"&&(_e=b(I.toLowerCase()),Array.isArray(_e)&&(Ce=_e[0],Re=_e[1])),Array.isArray(I)&&(Ce=I[0]*dt,Re=I[1]*dt),isNaN(Ce)&&(Ce=i[0],Re=i[1]),(Ce>14400||Re>14400)&&(yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),Re=Math.min(14400,Re)),i=[Ce,Re],n.substr(0,1)){case"l":Re>Ce&&(i=[Re,Ce]);break;case"p":Ce>Re&&(i=[Re,Ce])}wc(i),Nc(cf),fe(ps),df!==0&&fe(df+" J"),Ec!==0&&fe(Ec+" j"),nn.publish("addPage",{pageNumber:tn})},of=function(I){I>0&&I<=tn&&(He.splice(I,1),Rt.splice(I,1),tn--,G>tn&&(G=tn),this.setPage(G))},Tl=function(I){I>0&&I<=tn&&(G=I)},R0=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return He.length-1},xu=function(I,se,_e){var Ce,Re=void 0;return _e=_e||{},I=I!==void 0?I:hn[Ft].fontName,se=se!==void 0?se:hn[Ft].fontStyle,Ce=I.toLowerCase(),jn[Ce]!==void 0&&jn[Ce][se]!==void 0?Re=jn[Ce][se]:jn[I]!==void 0&&jn[I][se]!==void 0?Re=jn[I][se]:_e.disableWarning===!1&&yr.warn("Unable to look up font label for font '"+I+"', '"+se+"'. Refer to getFontList() for available fonts."),Re||_e.noFallback||(Re=jn.times[se])==null&&(Re=jn.times.normal),Re},Vn=p.__private__.putInfo=function(){var I=$t(),se=function(Ce){return Ce};for(var _e in u!==null&&(se=Cr.encryptor(I,0)),fe("<<"),fe("/Producer ("+hs(se("jsPDF "+ln.version))+")"),It)It.hasOwnProperty(_e)&&It[_e]&&fe("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+hs(se(It[_e]))+")");fe("/CreationDate ("+hs(se(Z))+")"),fe(">>"),fe("endobj")},vu=p.__private__.putCatalog=function(I){var se=(I=I||{}).rootDictionaryObjId||de;switch($t(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+se+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+We;_e.substr(_e.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+z(We)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}_t&&fe("/PageMode /"+_t),nn.publish("putCatalog"),fe(">>"),fe("endobj")},Bh=p.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(te+1)),fe("/Root "+te+" 0 R"),fe("/Info "+(te-1)+" 0 R"),u!==null&&fe("/Encrypt "+Cr.oid+" 0 R"),fe("/ID [ <"+U+"> <"+U+"> ]"),fe(">>")},af=p.__private__.putHeader=function(){fe("%PDF-"+y),fe("%ºß¬à")},Uh=p.__private__.putXRef=function(){var I="0000000000";fe("xref"),fe("0 "+(te+1)),fe("0000000000 65535 f ");for(var se=1;se<=te;se++)typeof ge[se]=="function"?fe((I+ge[se]()).slice(-10)+" 00000 n "):ge[se]!==void 0?fe((I+ge[se]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},fa=p.__private__.buildDocument=function(){Be(),Te(xe),nn.publish("buildDocument"),af(),Ie(),zh(),Fh(),u!==null&&ua(),Vn(),vu();var I=ve;return Uh(),Bh(),fe("startxref"),fe(""+I),fe("%%EOF"),Te(He[G]),xe.join(`
`)},bc=p.__private__.getBlob=function(I){return new Blob([et(I)],{type:"application/pdf"})},jl=p.output=p.__private__.output=fs(function(I,se){switch(typeof(se=se||{})=="string"?se={filename:se}:se.filename=se.filename||"generated.pdf",I){case void 0:return fa();case"save":p.save(se.filename);break;case"arraybuffer":return et(fa());case"blob":return bc(fa());case"bloburi":case"bloburl":if(fn.URL!==void 0&&typeof fn.URL.createObjectURL=="function")return fn.URL&&fn.URL.createObjectURL(bc(fa()))||void 0;yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Ce=fa();try{_e=b_(Ce)}catch{_e=b_(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+se.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",tt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';se.pdfObjectUrl&&(Re=se.pdfObjectUrl,tt="");var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+tt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(se)+");<\/script></body></html>",Ot=fn.open();return Ot!==null&&Ot.document.write(mt),Ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+se.filename+'" width="500px" height="400px" /></body></html>',vn=fn.open();if(vn!==null){vn.document.write(Qt);var Sn=this;vn.document.documentElement.querySelector("#pdfViewer").onload=function(){vn.document.title=se.filename,vn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Sn.output("bloburl"))}}return vn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",se)+'"></iframe></body></html>',Er=fn.open();if(Er!==null&&(Er.document.write(Ln),Er.document.title=se.filename),Er||typeof safari>"u")return Er;break;case"datauri":case"dataurl":return fn.document.location.href=this.output("datauristring",se);default:return null}}),_c=function(I){return Array.isArray(rr)===!0&&rr.indexOf(I)>-1};switch(r){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=_c("px_scaling")==1?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);dt=r}var Cr=null;ne(),J();var ha=function(I){return u!==null?Cr.encryptor(I,0):function(se){return se}},Lo=p.__private__.getPageInfo=p.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[I].objId,pageNumber:I,pageContext:Rt[I]}},cn=p.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var se in Rt)if(Rt[se].objId===I)break;return Lo(se)},Sc=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Rt[G].objId,pageNumber:G,pageContext:Rt[G]}};p.addPage=function(){return sf.apply(this,arguments),this},p.setPage=function(){return Tl.apply(this,arguments),Te.call(this,He[G]),this},p.insertPage=function(I){return this.addPage(),this.movePage(G,I),this},p.movePage=function(I,se){var _e,Ce;if(I>se){_e=He[I],Ce=Rt[I];for(var Re=I;Re>se;Re--)He[Re]=He[Re-1],Rt[Re]=Rt[Re-1];He[se]=_e,Rt[se]=Ce,this.setPage(se)}else if(I<se){_e=He[I],Ce=Rt[I];for(var tt=I;tt<se;tt++)He[tt]=He[tt+1],Rt[tt]=Rt[tt+1];He[se]=_e,Rt[se]=Ce,this.setPage(se)}return this},p.deletePage=function(){return of.apply(this,arguments),this},p.__private__.text=p.text=function(I,se,_e,Ce,Re){var tt,mt,Ot,Qt,vn,Sn,Ln,Er,Mr,Hr=(Ce=Ce||{}).scope||this;if(typeof I=="number"&&typeof se=="number"&&(typeof _e=="string"||Array.isArray(_e))){var Ci=_e;_e=se,se=I,I=Ci}if(arguments[3]instanceof jt?(N("The transform parameter of text() with a Matrix value"),Mr=Re):(Ot=arguments[4],Qt=arguments[5],Jn(Ln=arguments[3])==="object"&&Ln!==null||(typeof Ot=="string"&&(Qt=Ot,Ot=null),typeof Ln=="string"&&(Qt=Ln,Ln=null),typeof Ln=="number"&&(Ot=Ln,Ln=null),Ce={flags:Ln,angle:Ot,align:Qt})),isNaN(se)||isNaN(_e)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return Hr;var fi="",Bo=!1,$s=typeof Ce.lineHeightFactor=="number"?Ce.lineHeightFactor:kc,Uo=Hr.internal.scaleFactor;function Rl(qn){return qn=qn.split("	").join(Array(Ce.TabLen||9).join(" ")),hs(qn,Ln)}function pf(qn){for(var ir,Ir=qn.concat(),Rr=[],gs=Ir.length;gs--;)typeof(ir=Ir.shift())=="string"?Rr.push(ir):Array.isArray(qn)&&(ir.length===1||ir[1]===void 0&&ir[2]===void 0)?Rr.push(ir[0]):Rr.push([ir[0],ir[1],ir[2]]);return Rr}function Tu(qn,ir){var Ir;if(typeof qn=="string")Ir=ir(qn)[0];else if(Array.isArray(qn)){for(var Rr,gs,wa=qn.concat(),Dc=[],Oc=wa.length;Oc--;)typeof(Rr=wa.shift())=="string"?Dc.push(ir(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(gs=ir(Rr[0],Rr[1],Rr[2]),Dc.push([gs[0],gs[1],gs[2]]));Ir=Dc}return Ir}var Ac=!1,ju=!0;if(typeof I=="string")Ac=!0;else if(Array.isArray(I)){var Pu=I.concat();mt=[];for(var Tc,ti=Pu.length;ti--;)(typeof(Tc=Pu.shift())!="string"||Array.isArray(Tc)&&typeof Tc[0]!="string")&&(ju=!1);Ac=ju}if(Ac===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var Du=ke/Hr.internal.scaleFactor,Ou=Du*($s-1);switch(Ce.baseline){case"bottom":_e-=Ou;break;case"top":_e+=Du-Ou;break;case"hanging":_e+=Du-2*Ou;break;case"middle":_e+=Du/2-Ou}if((Sn=Ce.maxWidth||0)>0&&(typeof I=="string"?I=Hr.splitTextToSize(I,Sn):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(qn,ir){return qn.concat(Hr.splitTextToSize(ir,Sn))},[]))),tt={text:I,x:se,y:_e,options:Ce,mutex:{pdfEscape:hs,activeFontKey:Ft,fonts:hn,activeFontSize:ke}},nn.publish("preProcessText",tt),I=tt.text,Ot=(Ce=tt.options).angle,!(Mr instanceof jt)&&Ot&&typeof Ot=="number"){Ot*=Math.PI/180,Ce.rotationDirection===0&&(Ot=-Ot),k===S.ADVANCED&&(Ot=-Ot);var Lu=Math.cos(Ot),Mu=Math.sin(Ot);Mr=new jt(Lu,Mu,-Mu,Lu,0,0)}else Ot&&Ot instanceof jt&&(Mr=Ot);k!==S.ADVANCED||Mr||(Mr=Qe),(vn=Ce.charSpace||Ll)!==void 0&&(fi+=C(M(vn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Er=Ce.horizontalScale)!==void 0&&(fi+=C(100*Er)+` Tz
`),Ce.lang;var Gi=-1,jc=Ce.renderingMode!==void 0?Ce.renderingMode:Ce.stroke,Ka=Hr.internal.getCurrentPageInfo().pageContext;switch(jc){case 0:case!1:case"fill":Gi=0;break;case 1:case!0:case"stroke":Gi=1;break;case 2:case"fillThenStroke":Gi=2;break;case 3:case"invisible":Gi=3;break;case 4:case"fillAndAddForClipping":Gi=4;break;case 5:case"strokeAndAddPathForClipping":Gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gi=6;break;case 7:case"addToPathForClipping":Gi=7}var Hh=Ka.usedRenderingMode!==void 0?Ka.usedRenderingMode:-1;Gi!==-1?fi+=Gi+` Tr
`:Hh!==-1&&(fi+=`0 Tr
`),Gi!==-1&&(Ka.usedRenderingMode=Gi),Qt=Ce.align||"left";var ms,mf=ke*$s,qh=Hr.internal.pageSize.getWidth(),gf=hn[Ft];vn=Ce.charSpace||Ll,Sn=Ce.maxWidth||0,Ln=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var ya=[];if(Object.prototype.toString.call(I)==="[object Array]"){var Ws;mt=pf(I),Qt!=="left"&&(ms=mt.map(function(qn){return Hr.getStringUnitWidth(qn,{font:gf,charSpace:vn,fontSize:ke,doKerning:!1})*ke/Uo}));var ao,Xa=0;if(Qt==="right"){se-=ms[0],I=[],ti=mt.length;for(var xa=0;xa<ti;xa++)xa===0?(ao=Ro(se),Ws=Fo(_e)):(ao=M(Xa-ms[xa]),Ws=-mf),I.push([mt[xa],ao,Ws]),Xa=ms[xa]}else if(Qt==="center"){se-=ms[0]/2,I=[],ti=mt.length;for(var Ya=0;Ya<ti;Ya++)Ya===0?(ao=Ro(se),Ws=Fo(_e)):(ao=M((Xa-ms[Ya])/2),Ws=-mf),I.push([mt[Ya],ao,Ws]),Xa=ms[Ya]}else if(Qt==="left"){I=[],ti=mt.length;for(var Iu=0;Iu<ti;Iu++)I.push(mt[Iu])}else{if(Qt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');I=[],ti=mt.length,Sn=Sn!==0?Sn:qh;for(var $o=0;$o<ti;$o++)Ws=$o===0?Fo(_e):-mf,ao=$o===0?Ro(se):0,$o<ti-1?ya.push(C(M((Sn-ms[$o])/(mt[$o].split(" ").length-1)))):ya.push(0),I.push([mt[$o],ao,Ws])}}var Ru=typeof Ce.R2L=="boolean"?Ce.R2L:xt;Ru===!0&&(I=Tu(I,function(qn,ir,Ir){return[qn.split("").reverse().join(""),ir,Ir]})),tt={text:I,x:se,y:_e,options:Ce,mutex:{pdfEscape:hs,activeFontKey:Ft,fonts:hn,activeFontSize:ke}},nn.publish("postProcessText",tt),I=tt.text,Bo=tt.mutex.isHex||!1;var Ki=hn[Ft].encoding;Ki!=="WinAnsiEncoding"&&Ki!=="StandardEncoding"||(I=Tu(I,function(qn,ir,Ir){return[Rl(qn),ir,Ir]})),mt=pf(I),I=[];for(var lo,co,va,Fl=0,Pc=1,Ja=Array.isArray(mt[0])?Pc:Fl,zl="",yf=function(qn,ir,Ir){var Rr="";return Ir instanceof jt?(Ir=typeof Ce.angle=="number"?pe(Ir,new jt(1,0,0,1,qn,ir)):pe(new jt(1,0,0,1,qn,ir),Ir),k===S.ADVANCED&&(Ir=pe(new jt(1,0,0,-1,0,0),Ir)),Rr=Ir.join(" ")+` Tm
`):Rr=C(qn)+" "+C(ir)+` Td
`,Rr},wi=0;wi<mt.length;wi++){switch(zl="",Ja){case Pc:va=(Bo?"<":"(")+mt[wi][0]+(Bo?">":")"),lo=parseFloat(mt[wi][1]),co=parseFloat(mt[wi][2]);break;case Fl:va=(Bo?"<":"(")+mt[wi]+(Bo?">":")"),lo=Ro(se),co=Fo(_e)}ya!==void 0&&ya[wi]!==void 0&&(zl=ya[wi]+` Tw
`),wi===0?I.push(zl+yf(lo,co,Mr)+va):Ja===Fl?I.push(zl+va):Ja===Pc&&I.push(zl+yf(lo,co,Mr)+va)}I=Ja===Fl?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var Wo=`BT
/`;return Wo+=Ft+" "+ke+` Tf
`,Wo+=C(ke*$s)+` TL
`,Wo+=ei+`
`,Wo+=fi,Wo+=I,fe(Wo+="ET"),h[Ft]=!0,Hr};var pa=p.__private__.clip=p.clip=function(I){return fe(I==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return pa("evenodd")},p.__private__.discardPath=p.discardPath=function(){return fe("n"),this};var ma=p.__private__.isValidStyle=function(I){var se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(se=!0),se};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(I){return ma(I)&&(c=I),this};var lf=p.__private__.getStyle=p.getStyle=function(I){var se=c;switch(I){case"D":case"S":se="S";break;case"F":se="f";break;case"FD":case"DF":se="B";break;case"f":case"f*":case"B":case"B*":se=I}return se},Pl=p.close=function(){return fe("h"),this};p.stroke=function(){return fe("S"),this},p.fill=function(I){return wu("f",I),this},p.fillEvenOdd=function(I){return wu("f*",I),this},p.fillStroke=function(I){return wu("B",I),this},p.fillStrokeEvenOdd=function(I){return wu("B*",I),this};var wu=function(I,se){Jn(se)==="object"?$h(se,I):fe(I)},bu=function(I){I===null||k===S.ADVANCED&&I===void 0||(I=lf(I),fe(I))};function _u(I,se,_e,Ce,Re){var tt=new nh(se||this.boundingBox,_e||this.xStep,Ce||this.yStep,this.gState,Re||this.matrix);tt.stream=this.stream;var mt=I+"$$"+this.cloneIndex+++"$$";return vt(mt,tt),tt}var $h=function(I,se){var _e=Fr[I.key],Ce=yn[_e];if(Ce instanceof xd)fe("q"),fe(F0(se)),Ce.gState&&p.setGState(Ce.gState),fe(I.matrix.toString()+" cm"),fe("/"+_e+" sh"),fe("Q");else if(Ce instanceof nh){var Re=new jt(1,0,0,-1,0,Il());I.matrix&&(Re=Re.multiply(I.matrix||Qe),_e=_u.call(Ce,I.key,I.boundingBox,I.xStep,I.yStep,Re).id),fe("q"),fe("/Pattern cs"),fe("/"+_e+" scn"),Ce.gState&&p.setGState(Ce.gState),fe(se),fe("Q")}},F0=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},qa=p.moveTo=function(I,se){return fe(C(M(I))+" "+C(W(se))+" m"),this},Mo=p.lineTo=function(I,se){return fe(C(M(I))+" "+C(W(se))+" l"),this},Us=p.curveTo=function(I,se,_e,Ce,Re,tt){return fe([C(M(I)),C(W(se)),C(M(_e)),C(W(Ce)),C(M(Re)),C(W(tt)),"c"].join(" ")),this};p.__private__.line=p.line=function(I,se,_e,Ce,Re){if(isNaN(I)||isNaN(se)||isNaN(_e)||isNaN(Ce)||!ma(Re))throw new Error("Invalid arguments passed to jsPDF.line");return k===S.COMPAT?this.lines([[_e-I,Ce-se]],I,se,[1,1],Re||"S"):this.lines([[_e-I,Ce-se]],I,se,[1,1]).stroke()},p.__private__.lines=p.lines=function(I,se,_e,Ce,Re,tt){var mt,Ot,Qt,vn,Sn,Ln,Er,Mr,Hr,Ci,fi,Bo;if(typeof I=="number"&&(Bo=_e,_e=se,se=I,I=Bo),Ce=Ce||[1,1],tt=tt||!1,isNaN(se)||isNaN(_e)||!Array.isArray(I)||!Array.isArray(Ce)||!ma(Re)||typeof tt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qa(se,_e),mt=Ce[0],Ot=Ce[1],vn=I.length,Ci=se,fi=_e,Qt=0;Qt<vn;Qt++)(Sn=I[Qt]).length===2?(Ci=Sn[0]*mt+Ci,fi=Sn[1]*Ot+fi,Mo(Ci,fi)):(Ln=Sn[0]*mt+Ci,Er=Sn[1]*Ot+fi,Mr=Sn[2]*mt+Ci,Hr=Sn[3]*Ot+fi,Ci=Sn[4]*mt+Ci,fi=Sn[5]*Ot+fi,Us(Ln,Er,Mr,Hr,Ci,fi));return tt&&Pl(),bu(Re),this},p.path=function(I){for(var se=0;se<I.length;se++){var _e=I[se],Ce=_e.c;switch(_e.op){case"m":qa(Ce[0],Ce[1]);break;case"l":Mo(Ce[0],Ce[1]);break;case"c":Us.apply(this,Ce);break;case"h":Pl()}}return this},p.__private__.rect=p.rect=function(I,se,_e,Ce,Re){if(isNaN(I)||isNaN(se)||isNaN(_e)||isNaN(Ce)||!ma(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return k===S.COMPAT&&(Ce=-Ce),fe([C(M(I)),C(W(se)),C(M(_e)),C(M(Ce)),"re"].join(" ")),bu(Re),this},p.__private__.triangle=p.triangle=function(I,se,_e,Ce,Re,tt,mt){if(isNaN(I)||isNaN(se)||isNaN(_e)||isNaN(Ce)||isNaN(Re)||isNaN(tt)||!ma(mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-I,Ce-se],[Re-_e,tt-Ce],[I-Re,se-tt]],I,se,[1,1],mt,!0),this},p.__private__.roundedRect=p.roundedRect=function(I,se,_e,Ce,Re,tt,mt){if(isNaN(I)||isNaN(se)||isNaN(_e)||isNaN(Ce)||isNaN(Re)||isNaN(tt)||!ma(mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ot=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*_e),tt=Math.min(tt,.5*Ce),this.lines([[_e-2*Re,0],[Re*Ot,0,Re,tt-tt*Ot,Re,tt],[0,Ce-2*tt],[0,tt*Ot,-Re*Ot,tt,-Re,tt],[2*Re-_e,0],[-Re*Ot,0,-Re,-tt*Ot,-Re,-tt],[0,2*tt-Ce],[0,-tt*Ot,Re*Ot,-tt,Re,-tt]],I+Re,se,[1,1],mt,!0),this},p.__private__.ellipse=p.ellipse=function(I,se,_e,Ce,Re){if(isNaN(I)||isNaN(se)||isNaN(_e)||isNaN(Ce)||!ma(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var tt=4/3*(Math.SQRT2-1)*_e,mt=4/3*(Math.SQRT2-1)*Ce;return qa(I+_e,se),Us(I+_e,se-mt,I+tt,se-Ce,I,se-Ce),Us(I-tt,se-Ce,I-_e,se-mt,I-_e,se),Us(I-_e,se+mt,I-tt,se+Ce,I,se+Ce),Us(I+tt,se+Ce,I+_e,se+mt,I+_e,se),bu(Re),this},p.__private__.circle=p.circle=function(I,se,_e,Ce){if(isNaN(I)||isNaN(se)||isNaN(_e)||!ma(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,se,_e,_e,Ce)},p.setFont=function(I,se,_e){return _e&&(se=P(se,_e)),Ft=xu(I,se,{disableWarning:!1}),this};var Su=p.__private__.getFont=p.getFont=function(){return hn[xu.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var I,se,_e={};for(I in jn)if(jn.hasOwnProperty(I))for(se in _e[I]=[],jn[I])jn[I].hasOwnProperty(se)&&_e[I].push(se);return _e},p.addFont=function(I,se,_e,Ce,Re){var tt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&tt.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&tt.indexOf(arguments[3])==-1&&(_e=P(_e,Ce)),Re=Re||"Identity-H",Al.call(this,I,se,_e,Re)};var kc,cf=t.lineWidth||.200025,Dl=p.__private__.getLineWidth=p.getLineWidth=function(){return cf},Nc=p.__private__.setLineWidth=p.setLineWidth=function(I){return cf=I,fe(C(M(I))+" w"),this};p.__private__.setLineDash=ln.API.setLineDash=ln.API.setLineDashPattern=function(I,se){if(I=I||[],se=se||0,isNaN(se)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(_e){return C(M(_e))}).join(" "),se=C(M(se)),fe("["+I+"] "+se+" d"),this};var ku=p.__private__.getLineHeight=p.getLineHeight=function(){return ke*kc};p.__private__.getLineHeight=p.getLineHeight=function(){return ke*kc};var uf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(kc=I),this},Io=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return kc};uf(t.lineHeight);var Ro=p.__private__.getHorizontalCoordinate=function(I){return M(I)},Fo=p.__private__.getVerticalCoordinate=function(I){return k===S.ADVANCED?I:Rt[G].mediaBox.topRightY-Rt[G].mediaBox.bottomLeftY-M(I)},Wh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(I){return C(Ro(I))},zo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(I){return C(Fo(I))},ps=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return we(ps)},p.__private__.setStrokeColor=p.setDrawColor=function(I,se,_e,Ce){return ps=be({ch1:I,ch2:se,ch3:_e,ch4:Ce,pdfColorType:"draw",precision:2}),fe(ps),this};var Nu=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return we(Nu)},p.__private__.setFillColor=p.setFillColor=function(I,se,_e,Ce){return Nu=be({ch1:I,ch2:se,ch3:_e,ch4:Ce,pdfColorType:"fill",precision:2}),fe(Nu),this};var ei=t.textColor||"0 g",Ol=p.__private__.getTextColor=p.getTextColor=function(){return we(ei)};p.__private__.setTextColor=p.setTextColor=function(I,se,_e,Ce){return ei=be({ch1:I,ch2:se,ch3:_e,ch4:Ce,pdfColorType:"text",precision:3}),this};var Ll=t.charSpace,Cc=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ll||0)};p.__private__.setCharSpace=p.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ll=I,this};var df=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(I){var se=p.CapJoinStyles[I];if(se===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return df=se,fe(se+" J"),this};var Ec=0;p.__private__.setLineJoin=p.setLineJoin=function(I){var se=p.CapJoinStyles[I];if(se===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ec=se,fe(se+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(C(M(I))+" M"),this},p.GState=Hg,p.setGState=function(I){(I=typeof I=="string"?Nn[vr[I]]:Cu(null,I)).equals(pn)||(fe("/"+I.id+" gs"),pn=I)};var Cu=function(I,se){if(!I||!vr[I]){var _e=!1;for(var Ce in Nn)if(Nn.hasOwnProperty(Ce)&&Nn[Ce].equals(se)){_e=!0;break}if(_e)se=Nn[Ce];else{var Re="GS"+(Object.keys(Nn).length+1).toString(10);Nn[Re]=se,se.id=Re}return I&&(vr[I]=se.id),nn.publish("addGState",se),se}};p.addGState=function(I,se){return Cu(I,se),this},p.saveGraphicsState=function(){return fe("q"),Wr.push({key:Ft,size:ke,color:ei}),this},p.restoreGraphicsState=function(){fe("Q");var I=Wr.pop();return Ft=I.key,ke=I.size,ei=I.color,pn=null,this},p.setCurrentTransformationMatrix=function(I){return fe(I.toString()+" cm"),this},p.comment=function(I){return fe("#"+I),this};var ga=function(I,se){var _e=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(tt){isNaN(tt)||(_e=parseFloat(tt))}});var Ce=se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(tt){isNaN(tt)||(Ce=parseFloat(tt))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(tt){Re=tt.toString()}}),this},Ml=function(I,se,_e,Ce){ga.call(this,I,se),this.type="rect";var Re=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function(mt){isNaN(mt)||(Re=parseFloat(mt))}});var tt=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return tt},set:function(mt){isNaN(mt)||(tt=parseFloat(mt))}}),this},Eu=function(){this.page=tn,this.currentPage=G,this.pages=He.slice(0),this.pagesContext=Rt.slice(0),this.x=Tn,this.y=sn,this.matrix=Wn,this.width=Ga(G),this.height=Il(G),this.outputDestination=qe,this.id="",this.objectNumber=-1};Eu.prototype.restore=function(){tn=this.page,G=this.currentPage,Rt=this.pagesContext,He=this.pages,Tn=this.x,sn=this.y,Wn=this.matrix,ff(G,this.width),hf(G,this.height),qe=this.outputDestination};var Vh=function(I,se,_e,Ce,Re){Sr.push(new Eu),tn=G=0,He=[],Tn=I,sn=se,Wn=Re,wc([_e,Ce])},z0=function(I){if(On[I])Sr.pop().restore();else{var se=new Eu,_e="Xo"+(Object.keys(xn).length+1).toString(10);se.id=_e,On[I]=_e,xn[_e]=se,nn.publish("addFormObject",se),Sr.pop().restore()}};for(var Au in p.beginFormObject=function(I,se,_e,Ce,Re){return Vh(I,se,_e,Ce,Re),this},p.endFormObject=function(I){return z0(I),this},p.doFormObject=function(I,se){var _e=xn[On[I]];return fe("q"),fe(se.toString()+" cm"),fe("/"+_e.id+" Do"),fe("Q"),this},p.getFormObject=function(I){var se=xn[On[I]];return{x:se.x,y:se.y,width:se.width,height:se.height,matrix:se.matrix}},p.save=function(I,se){return I=I||"generated.pdf",(se=se||{}).returnPromise=se.returnPromise||!1,se.returnPromise===!1?(Vf(bc(fa()),I),typeof Vf.unload=="function"&&fn.setTimeout&&setTimeout(Vf.unload,911),this):new Promise(function(_e,Ce){try{var Re=Vf(bc(fa()),I);typeof Vf.unload=="function"&&fn.setTimeout&&setTimeout(Vf.unload,911),_e(Re)}catch(tt){Ce(tt.message)}})},ln.API)ln.API.hasOwnProperty(Au)&&(Au==="events"&&ln.API.events.length?function(I,se){var _e,Ce,Re;for(Re=se.length-1;Re!==-1;Re--)_e=se[Re][0],Ce=se[Re][1],I.subscribe.apply(I,[_e].concat(typeof Ce=="function"?[Ce]:Ce))}(nn,ln.API.events):p[Au]=ln.API[Au]);var Ga=p.getPageWidth=function(I){return(Rt[I=I||G].mediaBox.topRightX-Rt[I].mediaBox.bottomLeftX)/dt},ff=p.setPageWidth=function(I,se){Rt[I].mediaBox.topRightX=se*dt+Rt[I].mediaBox.bottomLeftX},Il=p.getPageHeight=function(I){return(Rt[I=I||G].mediaBox.topRightY-Rt[I].mediaBox.bottomLeftY)/dt},hf=p.setPageHeight=function(I,se){Rt[I].mediaBox.topRightY=se*dt+Rt[I].mediaBox.bottomLeftY};return p.internal={pdfEscape:hs,getStyle:lf,getFont:Su,getFontSize:at,getCharSpace:Cc,getTextColor:Ol,getLineHeight:ku,getLineHeightFactor:Io,getLineWidth:Dl,write:Ge,getHorizontalCoordinate:Ro,getVerticalCoordinate:Fo,getCoordinateString:Wh,getVerticalCoordinateString:zo,collections:{},newObject:$t,newAdditionalObject:ye,newObjectDeferred:Et,newObjectDeferredBegin:re,getFilters:Ue,putStream:Ye,events:nn,scaleFactor:dt,pageSize:{getWidth:function(){return Ga(G)},setWidth:function(I){ff(G,I)},getHeight:function(){return Il(G)},setHeight:function(I){hf(G,I)}},encryptionOptions:u,encryption:Cr,getEncryptor:ha,output:jl,getNumberOfPages:R0,pages:He,out:fe,f2:z,f3:L,getPageInfo:Lo,getPageInfoByObjId:cn,getCurrentPageInfo:Sc,getPDFVersion:x,Point:ga,Rectangle:Ml,Matrix:jt,hasHotfix:_c},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ga(G)},set:function(I){ff(G,I)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Il(G)},set:function(I){hf(G,I)},enumerable:!0,configurable:!0}),vc.call(p,Le),Ft="F1",sf(i,n),nn.publish("initialized"),p}Lp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Lp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Lp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Lp.prototype.processOwnerPassword=function(t,e){return S_(__(e).substr(0,5),t)},Lp.prototype.encryptor=function(t,e){var n=__(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return S_(n,r)}},Hg.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Jn(t)!==Jn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ln.API={events:[]},ln.version="2.5.1";var Xr=ln.API,q4=1,jh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Np=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},bn=function(t){return t.toFixed(2)},id=function(t){return t.toFixed(5)};Xr.__acroform__={};var Do=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},mT=function(t){return t*q4},Xl=function(t){var e=new LM,n=Ht.internal.getHeight(t)||0,r=Ht.internal.getWidth(t)||0;return e.BBox=[0,0,Number(bn(r)),Number(bn(n))],e},Dse=Xr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Ose=Xr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Lse=Xr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},ai=Xr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Lse(t,e-1)},li=Xr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Dse(t,e-1)},ci=Xr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ose(t,e-1)},Mse=Xr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(bn(l.lowerLeft_X)),Number(bn(l.lowerLeft_Y)),Number(bn(l.upperRight_X)),Number(bn(l.upperRight_Y))]},Ise=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=k_(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+bn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Xl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},k_=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(L){return L.split(`
`)}):i.map(function(L){return[L]});var s=n,o=Ht.internal.getHeight(t)||0;o=o<0?-o:o;var a=Ht.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(L,M,K){if(L+1<i.length){var W=M+" "+i[L+1][0];return jy(W,t,K).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,d=jy("3",t,s).height,h=t.multiline?o-s:(o-d)/2,p=h+=2,y=0,x=0,v=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+jy(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var b="",S=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var T=!1;if(i[k].length!==1&&v!==i[k].length-1){if((d+2)*(S+2)+2>o)continue e;b+=i[k][v],T=!0,x=k,k--}else{b=(b+=i[k][v]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var j=parseInt(k),P=l(j,b,s),C=k>=i.length-1;if(P&&!C){b+=" ",v=0;continue}if(P||C){if(C)x=j;else if(t.multiline&&(d+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(S+2)+2>o)continue e;x=j}}for(var N="",O=y;O<=x;O++){var z=i[O];if(t.multiline){if(O===x){N+=z[v]+" ",v=(v+1)%z.length;continue}if(O===y){N+=z[z.length-1]+" ";continue}}N+=z[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=jy(N,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=bn(c)+" "+bn(p)+` Td
`,e+="("+jh(N)+`) Tj
`,e+=-bn(c)+` 0 Td
`,p=-(s+2),u=0,y=T?x:x+1,S++,b=""}break}return r.text=e,r.fontSize=s,r},jy=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Rse={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Fse=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},zse=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Jn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Bse=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Cl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Rse)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");q4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new MM,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Fse(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Mse(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ht.createDefaultAppearanceStream(a),Jn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=Ise(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var p=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,a)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,a)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&zse(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},OM=Xr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Jn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+jh(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Bb=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+jh(r(t))+")"},rc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};rc.prototype.toString=function(){return this.objId+" 0 R"},rc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},rc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:OM(i,this.objId,this.scope)}):i instanceof rc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var LM=function(){rc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Do(LM,rc);var MM=function(){rc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+jh(n(t))+")"}},set:function(n){t=n}})};Do(MM,rc);var Cl=function t(){rc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(e,3)},set:function(b){b?this.F=li(e,3):this.F=ci(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof lv)return;s="FieldObject"+t.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+jh(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/q4:c},set:function(b){c=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof lv||this instanceof Rd))return Bb(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ni?h:Bb(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=this instanceof Ni?b:b.substr(0,1)==="("?Np(b.substr(1,b.length-2)):Np(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ni?Np(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Ni?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ni?p:Bb(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof Ni?b:b.substr(0,1)==="("?Np(b.substr(1,b.length-2)):Np(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ni?Np(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof Ni?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(b){b=!!b,x=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(b){b?this.Ff=li(this.Ff,1):this.Ff=ci(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(b){b?this.Ff=li(this.Ff,2):this.Ff=ci(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(b){b?this.Ff=li(this.Ff,3):this.Ff=ci(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');v=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(v){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Do(Cl,rc);var dh=function(){Cl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return OM(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(n){n?this.Ff=li(this.Ff,18):this.Ff=ci(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=li(this.Ff,19):this.Ff=ci(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(n){n?(this.Ff=li(this.Ff,20),e.sort()):this.Ff=ci(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(n){n?this.Ff=li(this.Ff,22):this.Ff=ci(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(n){n?this.Ff=li(this.Ff,23):this.Ff=ci(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(n){n?this.Ff=li(this.Ff,27):this.Ff=ci(this.Ff,27)}}),this.hasAppearanceStream=!1};Do(dh,Cl);var fh=function(){dh.call(this),this.fontName="helvetica",this.combo=!1};Do(fh,dh);var hh=function(){fh.call(this),this.combo=!0};Do(hh,fh);var eg=function(){hh.call(this),this.edit=!0};Do(eg,hh);var Ni=function(){Cl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(n){n?this.Ff=li(this.Ff,15):this.Ff=ci(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(n){n?this.Ff=li(this.Ff,16):this.Ff=ci(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(n){n?this.Ff=li(this.Ff,17):this.Ff=ci(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(n){n?this.Ff=li(this.Ff,26):this.Ff=ci(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+jh(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Jn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Do(Ni,Cl);var tg=function(){Ni.call(this),this.pushButton=!0};Do(tg,Ni);var ph=function(){Ni.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Do(ph,Ni);var lv=function(){var t,e;Cl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+jh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Jn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Do(lv,Cl),ph.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ph.prototype.createOption=function(t){var e=new lv;return e.Parent=this,e.optionName=t,this.Kids.push(e),Use.call(this.scope,e),e};var ng=function(){Ni.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ht.CheckBox.createAppearanceStream()};Do(ng,Ni);var Rd=function(){Cl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(e){e?this.Ff=li(this.Ff,13):this.Ff=ci(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(e){e?this.Ff=li(this.Ff,21):this.Ff=ci(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(e){e?this.Ff=li(this.Ff,23):this.Ff=ci(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(e){e?this.Ff=li(this.Ff,24):this.Ff=ci(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(e){e?this.Ff=li(this.Ff,25):this.Ff=ci(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(e){e?this.Ff=li(this.Ff,26):this.Ff=ci(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Do(Rd,Cl);var rg=function(){Rd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(t){t?this.Ff=li(this.Ff,14):this.Ff=ci(this.Ff,14)}}),this.password=!0};Do(rg,Rd);var Ht={CheckBox:{createAppearanceStream:function(){return{N:{On:Ht.CheckBox.YesNormal},D:{On:Ht.CheckBox.YesPushDown,Off:Ht.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=k_(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+bn(Ht.internal.getWidth(t))+" "+bn(Ht.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+bn(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Xl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ht.internal.getHeight(t),o=Ht.internal.getWidth(t),a=k_(t,t.caption);return i.push("1 g"),i.push("0 0 "+bn(o)+" "+bn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+bn(o-1)+" "+bn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+bn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+bn(Ht.internal.getWidth(t))+" "+bn(Ht.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ht.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ht.RadioButton.Circle.YesNormal,e.D[t]=Ht.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=Ht.internal.getWidth(t)<=Ht.internal.getHeight(t)?Ht.internal.getWidth(t)/4:Ht.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ht.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+id(Ht.internal.getWidth(t)/2)+" "+id(Ht.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=Ht.internal.getWidth(t)<=Ht.internal.getHeight(t)?Ht.internal.getWidth(t)/4:Ht.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ht.internal.Bezier_C).toFixed(5)),o=Number((r*Ht.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+id(Ht.internal.getWidth(t)/2)+" "+id(Ht.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+id(Ht.internal.getWidth(t)/2)+" "+id(Ht.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=Ht.internal.getWidth(t)<=Ht.internal.getHeight(t)?Ht.internal.getWidth(t)/4:Ht.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ht.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+id(Ht.internal.getWidth(t)/2)+" "+id(Ht.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ht.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ht.RadioButton.Cross.YesNormal,e.D[t]=Ht.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Xl(t);e.scope=t.scope;var n=[],r=Ht.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+bn(Ht.internal.getWidth(t)-2)+" "+bn(Ht.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(bn(r.x1.x)+" "+bn(r.x1.y)+" m"),n.push(bn(r.x2.x)+" "+bn(r.x2.y)+" l"),n.push(bn(r.x4.x)+" "+bn(r.x4.y)+" m"),n.push(bn(r.x3.x)+" "+bn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=Ht.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+bn(Ht.internal.getWidth(t))+" "+bn(Ht.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+bn(Ht.internal.getWidth(t)-2)+" "+bn(Ht.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(bn(n.x1.x)+" "+bn(n.x1.y)+" m"),r.push(bn(n.x2.x)+" "+bn(n.x2.y)+" l"),r.push(bn(n.x4.x)+" "+bn(n.x4.y)+" m"),r.push(bn(n.x3.x)+" "+bn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Xl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+bn(Ht.internal.getWidth(t))+" "+bn(Ht.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ht.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ht.internal.getWidth(t),n=Ht.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ht.internal.getWidth=function(t){var e=0;return Jn(t)==="object"&&(e=mT(t.Rect[2])),e},Ht.internal.getHeight=function(t){var e=0;return Jn(t)==="object"&&(e=mT(t.Rect[3])),e};var Use=Xr.addField=function(t){if(Bse(this,t),!(t instanceof Cl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Xr.AcroFormChoiceField=dh,Xr.AcroFormListBox=fh,Xr.AcroFormComboBox=hh,Xr.AcroFormEditBox=eg,Xr.AcroFormButton=Ni,Xr.AcroFormPushButton=tg,Xr.AcroFormRadioButton=ph,Xr.AcroFormCheckBox=ng,Xr.AcroFormTextField=Rd,Xr.AcroFormPasswordField=rg,Xr.AcroFormAppearance=Ht,Xr.AcroForm={ChoiceField:dh,ListBox:fh,ComboBox:hh,EditBox:eg,Button:Ni,PushButton:tg,RadioButton:ph,CheckBox:ng,TextField:Rd,PasswordField:rg,Appearance:Ht},ln.AcroForm={ChoiceField:dh,ListBox:fh,ComboBox:hh,EditBox:eg,Button:Ni,PushButton:tg,RadioButton:ph,CheckBox:ng,TextField:Rd,PasswordField:rg,Appearance:Ht};var $se=ln.AcroForm;function IM(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(L,M){var K,W,Z,U,F,J=e;if((M=M||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(P(L))for(F in n)for(Z=n[F],K=0;K<Z.length;K+=1){for(U=!0,W=0;W<Z[K].length;W+=1)if(Z[K][W]!==void 0&&Z[K][W]!==L[W]){U=!1;break}if(U===!0){J=F;break}}else for(F in n)for(Z=n[F],K=0;K<Z.length;K+=1){for(U=!0,W=0;W<Z[K].length;W+=1)if(Z[K][W]!==void 0&&Z[K][W]!==L.charCodeAt(W)){U=!1;break}if(U===!0){J=F;break}}return J===e&&M!==e&&(J=M),J},i=function L(M){for(var K=this.internal.write,W=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:M.width}),U.push({key:"Height",value:M.height}),M.colorSpace===v.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===v.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var F="",J=0,Q=M.transparency.length;J<Q;J++)F+=M.transparency[J]+" "+M.transparency[J]+" ";U.push({key:"Mask",value:"["+F+"]"})}M.sMask!==void 0&&U.push({key:"SMask",value:M.objectId+1+" 0 R"});var ee=M.filter!==void 0?["/"+M.filter]:void 0;if(W({data:M.data,additionalKeyValues:U,alreadyAppliedFilters:ee,objectId:M.objectId}),K("endobj"),"sMask"in M&&M.sMask!==void 0){var ne="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,D={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:ne,data:M.sMask};"filter"in M&&(D.filter=M.filter),L.call(this,D)}if(M.colorSpace===v.INDEXED){var G=this.internal.newObject();W({data:N(new Uint8Array(M.palette)),objectId:G}),K("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var M in L)i.call(this,L[M])},o=function(){var L,M=this.internal.collections.addImage_images,K=this.internal.write;for(var W in M)K("/I"+(L=M[W]).index,L.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var L=this.internal.collections.addImage_images;return a.call(this),L},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(L){return typeof t["process"+L.toUpperCase()]=="function"},d=function(L){return Jn(L)==="object"&&L.nodeType===1},h=function(L,M){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var K=""+L.getAttribute("src");if(K.indexOf("data:image/")===0)return Qm(unescape(K).split("base64,").pop());var W=t.loadFile(K,!0);if(W!==void 0)return W}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var Z;switch(M){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Qm(L.toDataURL(Z,1).split("base64,").pop())}},p=function(L){var M=this.internal.collections.addImage_images;if(M){for(var K in M)if(L===M[K].alias)return M[K]}},y=function(L,M,K){return L||M||(L=-96,M=-96),L<0&&(L=-1*K.width*72/L/this.internal.scaleFactor),M<0&&(M=-1*K.height*72/M/this.internal.scaleFactor),L===0&&(L=M*K.width/K.height),M===0&&(M=L*K.height/K.width),[L,M]},x=function(L,M,K,W,Z,U){var F=y.call(this,K,W,Z),J=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,ee=l.call(this);if(K=F[0],W=F[1],ee[Z.index]=Z,U){U*=Math.PI/180;var ne=Math.cos(U),D=Math.sin(U),G=function(H){return H.toFixed(4)},V=[G(ne),G(D),G(-1*D),G(ne),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,J(L),Q(M+W),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([J(K),"0","0",J(W),"0","0","cm"].join(" "))):this.internal.write([J(K),"0","0",J(W),J(L),Q(M+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(L){var M,K,W=0;if(typeof L=="string")for(K=L.length,M=0;M<K;M++)W=(W<<5)-W+L.charCodeAt(M),W|=0;else if(P(L))for(K=L.byteLength/2,M=0;M<K;M++)W=(W<<5)-W+L[M],W|=0;return W},k=t.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var M=!0;return L.length===0&&(M=!1),L.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(M=!1),M},T=t.__addimage__.extractImageFromDataUrl=function(L){var M=(L=L||"").split("base64,"),K=null;if(M.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(M[0]);Array.isArray(W)&&(K={mimeType:W[1],charset:W[2],data:M[1]})}return K},j=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(L){return j()&&L instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(L){return j()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(L){for(var M=L.length,K=new Uint8Array(M),W=0;W<M;W++)K[W]=L.charCodeAt(W);return K},N=t.__addimage__.arrayBufferToBinaryString=function(L){for(var M="",K=P(L)?L:new Uint8Array(L),W=0;W<K.length;W+=8192)M+=String.fromCharCode.apply(null,K.subarray(W,W+8192));return M};t.addImage=function(){var L,M,K,W,Z,U,F,J,Q;if(typeof arguments[1]=="number"?(M=e,K=arguments[1],W=arguments[2],Z=arguments[3],U=arguments[4],F=arguments[5],J=arguments[6],Q=arguments[7]):(M=arguments[1],K=arguments[2],W=arguments[3],Z=arguments[4],U=arguments[5],F=arguments[6],J=arguments[7],Q=arguments[8]),Jn(L=arguments[0])==="object"&&!d(L)&&"imageData"in L){var ee=L;L=ee.imageData,M=ee.format||M||e,K=ee.x||K||0,W=ee.y||W||0,Z=ee.w||ee.width||Z,U=ee.h||ee.height||U,F=ee.alias||F,J=ee.compression||J,Q=ee.rotation||ee.angle||Q}var ne=this.internal.getFilters();if(J===void 0&&ne.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(K)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var D=O.call(this,L,M,F,J);return x.call(this,K,W,Z,U,D,Q),this};var O=function(L,M,K,W){var Z,U,F;if(typeof L=="string"&&r(L)===e){L=unescape(L);var J=z(L,!1);(J!==""||(J=t.loadFile(L,!0))!==void 0)&&(L=J)}if(d(L)&&(L=h(L,M)),M=r(L,M),!u(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((F=K)==null||F.length===0)&&(K=function(Q){return typeof Q=="string"||P(Q)?S(Q):P(Q.data)?S(Q.data):null}(L)),(Z=p.call(this,K))||(j()&&(L instanceof Uint8Array||M==="RGBA"||(U=L,L=C(L))),Z=this["process"+M.toUpperCase()](L,c.call(this),K,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in t.image_compression?Q:b.NONE}(W),U)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},z=t.__addimage__.convertBase64ToBinaryString=function(L,M){var K;M=typeof M!="boolean"||M;var W,Z="";if(typeof L=="string"){W=(K=T(L))!==null?K.data:L;try{Z=Qm(W)}catch(U){if(M)throw k(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(L){var M,K,W="";if(d(L)&&(L=h(L)),typeof L=="string"&&r(L)===e&&((W=z(L,!1))===""&&(W=t.loadFile(L)||""),L=W),K=r(L),!u(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(!j()||L instanceof Uint8Array||(L=C(L)),!(M=this["process"+K.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=K,M}})(ln.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ln.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(x.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(b(r.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(b(S))+") >>",x.content=s;var k=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var T=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var j=this.annotations._nameMap[r.options.name];r.options.pageNumber=j.page,r.options.top=j.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ln.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=t.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(x){var v=0,b=n,S="",k=0;for(v=0;v<x.length;v+=1)b[x.charCodeAt(v)]!==void 0?(k++,typeof(b=b[x.charCodeAt(v)])=="number"&&(S+=String.fromCharCode(b),b=n,k=0),v===x.length-1&&(b=n,S+=x.charAt(v-(k-1)),v-=k-1,k=0)):(b=n,S+=x.charAt(v-k),v-=k,k=0);return S};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(x,v,b){return o(x)?s(x)===!1?-1:!c(x)||!o(v)&&!o(b)||!o(b)&&a(v)||a(x)&&!o(v)||a(x)&&l(v)||a(x)&&a(v)?0:u(x)&&o(v)&&!a(v)&&o(b)&&c(b)?3:a(x)||!o(b)?1:2:-1},p=function(x){var v=0,b=0,S=0,k="",T="",j="",P=(x=x||"").split("\\s+"),C=[];for(v=0;v<P.length;v+=1){for(C.push(""),b=0;b<P[v].length;b+=1)k=P[v][b],T=P[v][b-1],j=P[v][b+1],o(k)?(S=h(k,T,j),C[v]+=S!==-1?String.fromCharCode(e[k.charCodeAt(0)][S]):k):C[v]+=k;C[v]=d(C[v])}return C.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(v)){var S=0;for(b=[],S=0;S<v.length;S+=1)Array.isArray(v[S])?b.push([p(v[S][0]),v[S][1],v[S][2]]):b.push([p(v[S])]);x=b}else x=p(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",y])}(ln.API),ln.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ln.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,x=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=c.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,T){return k.concat(v.splitTextToSize(T,b))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)p<(x=this.getStringUnitWidth(l[S],{font:d})*u)&&(p=x);return p!==0&&(y=l.length),{w:p/=h,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,y,x,v,b=[],S=[],k=[],T={},j={},P=[],C=[],N=(h=h||{}).autoSize||!1,O=h.printHeaders!==!1,z=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,L=h.margins||Object.assign({width:this.getPageWidth()},e),M=typeof h.padding=="number"?h.padding:3,K=h.headerBackgroundColor||"#c8c8c8",W=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=W,this.setFontSize(z),d==null)S=b=Object.keys(u[0]),k=b.map(function(){return"left"});else if(Array.isArray(d)&&Jn(d[0])==="object")for(b=d.map(function(ee){return ee.name}),S=d.map(function(ee){return ee.prompt||ee.name||""}),k=d.map(function(ee){return ee.align||"left"}),p=0;p<d.length;p+=1)j[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(S=b=d,k=b.map(function(){return"left"}));if(N||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<b.length;p+=1){for(T[v=b[p]]=u.map(function(ee){return ee[v]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=T[v],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)P.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,P)+M+M,P=[]}if(O){var Z={};for(p=0;p<b.length;p+=1)Z[b[p]]={},Z[b[p]].text=S[p],Z[b[p]].align=k[p];var U=a.call(this,Z,j);C=b.map(function(ee){return new s(l,c,j[ee],U,Z[ee].text,void 0,Z[ee].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var F=d.reduce(function(ee,ne){return ee[ne.name]=ne.align,ee},{});for(p=0;p<u.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:u[p]},this);var J=a.call(this,u[p],j);for(x=0;x<b.length;x+=1){var Q=u[p][b[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:x,data:Q},this),o.call(this,new s(l,c,j[b[x]],J,Q,p+2,F[b[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var y=l[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/h+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(ln.API);var RM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},FM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],N_=IM(FM),zM=[100,200,300,400,500,600,700,800,900],Wse=IM(zM);function C_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return RM[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof N_[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function gT(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Vse={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function xT(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Hse(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Vse,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=C_(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+xT(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=N_[l],d=u<=N_.normal?-1:1,h=gT(c,FM,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=RM[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Wse[l],d=gT(c,zM,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+xT(s)+"'.");return o}function vT(t){return t.trimLeft()}function qse(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Gse(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Py,wT,bT,Ub=["times"];(function(t){var e,n,r,i,s,o,a,l,c,u=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=D;Object.defineProperty(this,"pdf",{get:function(){return G}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(Te){V=!!Te}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Te){H=!!Te}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Te){isNaN(Te)||(te=Te)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(Te){isNaN(Te)||(ge=Te)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Te){var fe;typeof Te=="number"?fe=[Te,Te,Te,Te]:((fe=new Array(4))[0]=Te[0],fe[1]=Te.length>=2?Te[1]:fe[0],fe[2]=Te.length>=3?Te[2]:fe[0],fe[3]=Te.length>=4?Te[3]:fe[1]),c.margin=fe}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Te){xe=Te}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(Te){ve=Te}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(Te){Ne=Te}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Te){Te instanceof u&&(c=Te)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Te){c.path=Te}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Te){He=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var fe;fe=h(Te),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var fe=h(Te);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var Ke=null;function qe(Te,fe){if(Ke===null){var Ge=function(et){var Le=[];return Object.keys(et).forEach(function(ke){et[ke].forEach(function(We){var at=null;switch(We){case"bold":at={family:ke,weight:"bold"};break;case"italic":at={family:ke,style:"italic"};break;case"bolditalic":at={family:ke,weight:"bold",style:"italic"};break;case"":case"normal":at={family:ke}}at!==null&&(at.ref={name:ke,style:We},Le.push(at))})}),Le}(Te.getFontList());Ke=function(et){for(var Le={},ke=0;ke<et.length;++ke){var We=C_(et[ke]),at=We.family,xt=We.stretch,_t=We.style,Pt=We.weight;Le[at]=Le[at]||{},Le[at][xt]=Le[at][xt]||{},Le[at][xt][_t]=Le[at][xt][_t]||{},Le[at][xt][_t][Pt]=We}return Le}(Ge.concat(fe))}return Ke}var Be=null;Object.defineProperty(this,"fontFaces",{get:function(){return Be},set:function(Te){Ke=null,Be=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var fe;if(this.ctx.font=Te,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var Ge=fe[1],et=(fe[2],fe[3]),Le=fe[4],ke=(fe[5],fe[6]),We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(We==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var at=function(It){var Ft,dt,Tn=[],sn=It.trim();if(sn==="")return Ub;if(sn in yT)return[yT[sn]];for(;sn!=="";){switch(dt=null,Ft=(sn=vT(sn)).charAt(0)){case'"':case"'":dt=qse(sn.substring(1),Ft);break;default:dt=Gse(sn)}if(dt===null||(Tn.push(dt[0]),(sn=vT(dt[1]))!==""&&sn.charAt(0)!==","))return Ub;sn=sn.replace(/^,/,"")}return Tn}(ke);if(this.fontFaces){var xt=Hse(qe(this.pdf,this.fontFaces),at.map(function(It){return{family:It,stretch:"normal",weight:et,style:Ge}}));this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var _t="";(et==="bold"||parseInt(et,10)>=700||Ge==="bold")&&(_t="bold"),Ge==="italic"&&(_t+="italic"),_t.length===0&&(_t="normal");for(var Pt="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Xt=0;Xt<at.length;Xt++){if(this.pdf.internal.getFont(at[Xt],_t,{noFallback:!0,disableWarning:!0})!==void 0){Pt=at[Xt];break}if(_t==="bolditalic"&&this.pdf.internal.getFont(at[Xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Pt=at[Xt],_t="bold";else if(this.pdf.internal.getFont(at[Xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Pt=at[Xt],_t="normal";break}}if(Pt===""){for(var Bt=0;Bt<at.length;Bt++)if(Vt[at[Bt]]){Pt=Vt[at[Bt]];break}}Pt=Pt===""?"Times":Pt,this.pdf.setFont(Pt,_t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};d.prototype.setLineDash=function(D){this.lineDash=D},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){T.call(this,"fill",!1)},d.prototype.stroke=function(){T.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(D,G){if(isNaN(D)||isNaN(G))throw yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(D,G));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(D,G)},d.prototype.closePath=function(){var D=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Jn(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){D=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},d.prototype.lineTo=function(D,G){if(isNaN(D)||isNaN(G))throw yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(D,G));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},d.prototype.quadraticCurveTo=function(D,G,V,H){if(isNaN(V)||isNaN(H)||isNaN(D)||isNaN(G))throw yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(V,H)),ge=this.ctx.transform.applyToPoint(new o(D,G));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},d.prototype.bezierCurveTo=function(D,G,V,H,te,ge){if(isNaN(te)||isNaN(ge)||isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H))throw yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(te,ge)),ve=this.ctx.transform.applyToPoint(new o(D,G)),Ne=this.ctx.transform.applyToPoint(new o(V,H));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:Ne.x,y2:Ne.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},d.prototype.arc=function(D,G,V,H,te,ge){if(isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H)||isNaN(te))throw yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(D,G));D=xe.x,G=xe.y;var ve=this.ctx.transform.applyToPoint(new o(0,V)),Ne=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(ve.x-Ne.x,2)+Math.pow(ve.y-Ne.y,2))}Math.abs(te-H)>=2*Math.PI&&(H=0,te=2*Math.PI),this.path.push({type:"arc",x:D,y:G,radius:V,startAngle:H,endAngle:te,counterclockwise:ge})},d.prototype.arcTo=function(D,G,V,H,te){throw new Error("arcTo not implemented.")},d.prototype.rect=function(D,G,V,H){if(isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H))throw yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,G),this.lineTo(D+V,G),this.lineTo(D+V,G+H),this.lineTo(D,G+H),this.lineTo(D,G),this.lineTo(D+V,G),this.lineTo(D,G)},d.prototype.fillRect=function(D,G,V,H){if(isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H))throw yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,G,V,H),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},d.prototype.strokeRect=function(D,G,V,H){if(isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H))throw yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(D,G,V,H),this.stroke())},d.prototype.clearRect=function(D,G,V,H){if(isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H))throw yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,G,V,H))},d.prototype.save=function(D){D=typeof D!="boolean"||D;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},d.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(G),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(D){var G,V,H,te;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))G=0,V=0,H=0,te=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(ge!==null)G=parseInt(ge[1]),V=parseInt(ge[2]),H=parseInt(ge[3]),te=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)G=parseInt(ge[1]),V=parseInt(ge[2]),H=parseInt(ge[3]),te=parseFloat(ge[4]);else{if(te=1,typeof D=="string"&&D.charAt(0)!=="#"){var xe=new jM(D);D=xe.ok?xe.toHex():"#000000"}D.length===4?(G=D.substring(1,2),G+=G,V=D.substring(2,3),V+=V,H=D.substring(3,4),H+=H):(G=D.substring(1,3),V=D.substring(3,5),H=D.substring(5,7)),G=parseInt(G,16),V=parseInt(V,16),H=parseInt(H,16)}}return{r:G,g:V,b:H,a:te,style:D}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(D,G,V,H){if(isNaN(G)||isNaN(V)||typeof D!="string")throw yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!p.call(this)){var te=J(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;M.call(this,{text:D,x:G,y:V,scale:ge,angle:te,align:this.textAlign,maxWidth:H})}},d.prototype.strokeText=function(D,G,V,H){if(isNaN(G)||isNaN(V)||typeof D!="string")throw yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){H=isNaN(H)?void 0:H;var te=J(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;M.call(this,{text:D,x:G,y:V,scale:ge,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:H})}},d.prototype.measureText=function(D){if(typeof D!="string")throw yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,V=this.pdf.internal.scaleFactor,H=G.internal.getFontSize(),te=G.getStringUnitWidth(D)*H/G.internal.scaleFactor,ge=function(xe){var ve=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this};return new ge({width:te*=Math.round(96*V/72*1e4)/1e4})},d.prototype.scale=function(D,G){if(isNaN(D)||isNaN(G))throw yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new l(D,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.rotate=function(D){if(isNaN(D))throw yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.translate=function(D,G){if(isNaN(D)||isNaN(G))throw yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new l(1,0,0,1,D,G);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.transform=function(D,G,V,H,te,ge){if(isNaN(D)||isNaN(G)||isNaN(V)||isNaN(H)||isNaN(te)||isNaN(ge))throw yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new l(D,G,V,H,te,ge);this.ctx.transform=this.ctx.transform.multiply(xe)},d.prototype.setTransform=function(D,G,V,H,te,ge){D=isNaN(D)?1:D,G=isNaN(G)?0:G,V=isNaN(V)?0:V,H=isNaN(H)?1:H,te=isNaN(te)?0:te,ge=isNaN(ge)?0:ge,this.ctx.transform=new l(D,G,V,H,te,ge)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(D,G,V,H,te,ge,xe,ve,Ne){var He=this.pdf.getImageProperties(D),Ke=1,qe=1,Be=1,Te=1;H!==void 0&&ve!==void 0&&(Be=ve/H,Te=Ne/te,Ke=He.width/H*ve/H,qe=He.height/te*Ne/te),ge===void 0&&(ge=G,xe=V,G=0,V=0),H!==void 0&&ve===void 0&&(ve=H,Ne=te),H===void 0&&ve===void 0&&(ve=He.width,Ne=He.height);for(var fe,Ge=this.ctx.transform.decompose(),et=J(Ge.rotate.shx),Le=new l,ke=(Le=(Le=(Le=Le.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new a(ge-G*Be,xe-V*Te,H*Ke,te*qe)),We=v.call(this,ke),at=[],xt=0;xt<We.length;xt+=1)at.indexOf(We[xt])===-1&&at.push(We[xt]);if(k(at),this.autoPaging)for(var _t=at[0],Pt=at[at.length-1],Vt=_t;Vt<Pt+1;Vt++){this.pdf.setPage(Vt);var Xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Bt=Vt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=Vt===1?0:It+(Vt-2)*Ft;if(this.ctx.clip_path.length!==0){var Tn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(fe,this.posX+this.margin[3],-dt+Bt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Tn}var sn=JSON.parse(JSON.stringify(ke));sn=S([sn],this.posX+this.margin[3],-dt+Bt+this.ctx.prevPageLastElemOffset)[0];var Wn=(Vt>_t||Vt<Pt)&&x.call(this);Wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,Ft,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",sn.x,sn.y,sn.w,sn.h,null,null,et),Wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",ke.x,ke.y,ke.w,ke.h,null,null,et)};var v=function(D,G,V){var H=[];G=G||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":H.push(Math.floor((D.y+te)/V)+1);break;case"arc":H.push(Math.floor((D.y+te-D.radius)/V)+1),H.push(Math.floor((D.y+te+D.radius)/V)+1);break;case"qct":var ge=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);H.push(Math.floor((ge.y+te)/V)+1),H.push(Math.floor((ge.y+ge.h+te)/V)+1);break;case"bct":var xe=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);H.push(Math.floor((xe.y+te)/V)+1),H.push(Math.floor((xe.y+xe.h+te)/V)+1);break;case"rect":H.push(Math.floor((D.y+te)/V)+1),H.push(Math.floor((D.y+D.h+te)/V)+1)}for(var ve=0;ve<H.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<H[ve];)b.call(this);return H},b=function(){var D=this.fillStyle,G=this.strokeStyle,V=this.font,H=this.lineCap,te=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=G,this.font=V,this.lineCap=H,this.lineWidth=te,this.lineJoin=ge},S=function(D,G,V){for(var H=0;H<D.length;H++)switch(D[H].type){case"bct":D[H].x2+=G,D[H].y2+=V;case"qct":D[H].x1+=G,D[H].y1+=V;case"mt":case"lt":case"arc":default:D[H].x+=G,D[H].y+=V}return D},k=function(D){return D.sort(function(G,V){return G-V})},T=function(D,G){for(var V,H,te=this.fillStyle,ge=this.strokeStyle,xe=this.lineCap,ve=this.lineWidth,Ne=Math.abs(ve*this.ctx.transform.scaleX),He=this.lineJoin,Ke=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),Be=[],Te=0;Te<qe.length;Te++)if(qe[Te].x!==void 0)for(var fe=v.call(this,qe[Te]),Ge=0;Ge<fe.length;Ge+=1)Be.indexOf(fe[Ge])===-1&&Be.push(fe[Ge]);for(var et=0;et<Be.length;et++)for(;this.pdf.internal.getNumberOfPages()<Be[et];)b.call(this);if(k(Be),this.autoPaging)for(var Le=Be[0],ke=Be[Be.length-1],We=Le;We<ke+1;We++){this.pdf.setPage(We),this.fillStyle=te,this.strokeStyle=ge,this.lineCap=xe,this.lineWidth=Ne,this.lineJoin=He;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=We===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=We===1?0:_t+(We-2)*Pt;if(this.ctx.clip_path.length!==0){var Xt=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(V,this.posX+this.margin[3],-Vt+xt+this.ctx.prevPageLastElemOffset),j.call(this,D,!0),this.path=Xt}if(H=JSON.parse(JSON.stringify(Ke)),this.path=S(H,this.posX+this.margin[3],-Vt+xt+this.ctx.prevPageLastElemOffset),G===!1||We===0){var Bt=(We>Le||We<ke)&&x.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Pt,null).clip().discardPath()),j.call(this,D,G),Bt&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}else this.lineWidth=Ne,j.call(this,D,G),this.lineWidth=ve;this.path=Ke},j=function(D,G){if((D!=="stroke"||G||!y.call(this))&&(D==="stroke"||G||!p.call(this))){for(var V,H,te=[],ge=this.path,xe=0;xe<ge.length;xe++){var ve=ge[xe];switch(ve.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ve,deltas:[],abs:[]});break;case"lt":var Ne=te.length;if(ge[xe-1]&&!isNaN(ge[xe-1].x)&&(V=[ve.x-ge[xe-1].x,ve.y-ge[xe-1].y],Ne>0)){for(;Ne>=0;Ne--)if(te[Ne-1].close!==!0&&te[Ne-1].begin!==!0){te[Ne-1].deltas.push(V),te[Ne-1].abs.push(ve);break}}break;case"bct":V=[ve.x1-ge[xe-1].x,ve.y1-ge[xe-1].y,ve.x2-ge[xe-1].x,ve.y2-ge[xe-1].y,ve.x-ge[xe-1].x,ve.y-ge[xe-1].y],te[te.length-1].deltas.push(V);break;case"qct":var He=ge[xe-1].x+2/3*(ve.x1-ge[xe-1].x),Ke=ge[xe-1].y+2/3*(ve.y1-ge[xe-1].y),qe=ve.x+2/3*(ve.x1-ve.x),Be=ve.y+2/3*(ve.y1-ve.y),Te=ve.x,fe=ve.y;V=[He-ge[xe-1].x,Ke-ge[xe-1].y,qe-ge[xe-1].x,Be-ge[xe-1].y,Te-ge[xe-1].x,fe-ge[xe-1].y],te[te.length-1].deltas.push(V);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ve)}}H=G?null:D==="stroke"?"stroke":"fill";for(var Ge=!1,et=0;et<te.length;et++)if(te[et].arc)for(var Le=te[et].abs,ke=0;ke<Le.length;ke++){var We=Le[ke];We.type==="arc"?N.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,G,!Ge):K.call(this,We.x,We.y),Ge=!0}else if(te[et].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(te[et].begin!==!0){var at=te[et].start.x,xt=te[et].start.y;W.call(this,te[et].deltas,at,xt),Ge=!0}H&&O.call(this,H),G&&z.call(this)}},P=function(D){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-V;case"top":return D+G-V;case"hanging":return D+G-2*V;case"middle":return D+G/2-V;case"ideographic":return D;case"alphabetic":default:return D}},C=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(G,V){this.colorStops.push([G,V])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(D,G,V,H,te,ge,xe,ve,Ne){for(var He=U.call(this,V,H,te,ge),Ke=0;Ke<He.length;Ke++){var qe=He[Ke];Ke===0&&(Ne?L.call(this,qe.x1+D,qe.y1+G):K.call(this,qe.x1+D,qe.y1+G)),Z.call(this,D,G,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}ve?z.call(this):O.call(this,xe)},O=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(D,G){this.pdf.internal.out(n(D)+" "+r(G)+" m")},M=function(D){var G;switch(D.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var V=this.pdf.getTextDimensions(D.text),H=P.call(this,D.y),te=C.call(this,H)-V.h,ge=this.ctx.transform.applyToPoint(new o(D.x,H)),xe=this.ctx.transform.decompose(),ve=new l;ve=(ve=(ve=ve.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Ne,He,Ke,qe=this.ctx.transform.applyToRectangle(new a(D.x,H,V.w,V.h)),Be=ve.applyToRectangle(new a(D.x,te,V.w,V.h)),Te=v.call(this,Be),fe=[],Ge=0;Ge<Te.length;Ge+=1)fe.indexOf(Te[Ge])===-1&&fe.push(Te[Ge]);if(k(fe),this.autoPaging)for(var et=fe[0],Le=fe[fe.length-1],ke=et;ke<Le+1;ke++){this.pdf.setPage(ke);var We=ke===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[2],_t=xt-this.margin[0],Pt=this.pdf.internal.pageSize.width-this.margin[1],Vt=Pt-this.margin[3],Xt=ke===1?0:at+(ke-2)*_t;if(this.ctx.clip_path.length!==0){var Bt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ne,this.posX+this.margin[3],-1*Xt+We),j.call(this,"fill",!0),this.path=Bt}var It=S([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Xt+We+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*D.scale),Ke=this.lineWidth,this.lineWidth=Ke*D.scale);var Ft=this.autoPaging!=="text";if(Ft||It.y+It.h<=xt){if(Ft||It.y>=We&&It.x<=Pt){var dt=Ft?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Pt-It.x)[0],Tn=S([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Xt+We+this.ctx.prevPageLastElemOffset)[0],sn=Ft&&(ke>et||ke<Le)&&x.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,_t,null).clip().discardPath()),this.pdf.text(dt,Tn.x,Tn.y,{angle:D.angle,align:G,renderingMode:D.renderingMode}),sn&&this.pdf.restoreGraphicsState()}}else It.y<xt&&(this.ctx.prevPageLastElemOffset+=xt-It.y);D.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ke)}else D.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*D.scale),Ke=this.lineWidth,this.lineWidth=Ke*D.scale),this.pdf.text(D.text,ge.x+this.posX,ge.y+this.posY,{angle:D.angle,align:G,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ke)},K=function(D,G,V,H){V=V||0,H=H||0,this.pdf.internal.out(n(D+V)+" "+r(G+H)+" l")},W=function(D,G,V){return this.pdf.lines(D,G,V,null,null)},Z=function(D,G,V,H,te,ge,xe,ve){this.pdf.internal.out([e(i(V+D)),e(s(H+G)),e(i(te+D)),e(s(ge+G)),e(i(xe+D)),e(s(ve+G)),"c"].join(" "))},U=function(D,G,V,H){for(var te=2*Math.PI,ge=Math.PI/2;G>V;)G-=te;var xe=Math.abs(V-G);xe<te&&H&&(xe=te-xe);for(var ve=[],Ne=H?-1:1,He=G;xe>1e-5;){var Ke=He+Ne*Math.min(xe,ge);ve.push(F.call(this,D,He,Ke)),xe-=Math.abs(Ke-He),He=Ke}return ve},F=function(D,G,V){var H=(V-G)/2,te=D*Math.cos(H),ge=D*Math.sin(H),xe=te,ve=-ge,Ne=xe*xe+ve*ve,He=Ne+xe*te+ve*ge,Ke=4/3*(Math.sqrt(2*Ne*He)-He)/(xe*ge-ve*te),qe=xe-Ke*ve,Be=ve+Ke*xe,Te=qe,fe=-Be,Ge=H+G,et=Math.cos(Ge),Le=Math.sin(Ge);return{x1:D*Math.cos(G),y1:D*Math.sin(G),x2:qe*et-Be*Le,y2:qe*Le+Be*et,x3:Te*et-fe*Le,y3:Te*Le+fe*et,x4:D*Math.cos(V),y4:D*Math.sin(V)}},J=function(D){return 180*D/Math.PI},Q=function(D,G,V,H,te,ge){var xe=D+.5*(V-D),ve=G+.5*(H-G),Ne=te+.5*(V-te),He=ge+.5*(H-ge),Ke=Math.min(D,te,xe,Ne),qe=Math.max(D,te,xe,Ne),Be=Math.min(G,ge,ve,He),Te=Math.max(G,ge,ve,He);return new a(Ke,Be,qe-Ke,Te-Be)},ee=function(D,G,V,H,te,ge,xe,ve){var Ne,He,Ke,qe,Be,Te,fe,Ge,et,Le,ke,We,at,xt,_t=V-D,Pt=H-G,Vt=te-V,Xt=ge-H,Bt=xe-te,It=ve-ge;for(He=0;He<41;He++)et=(fe=(Ke=D+(Ne=He/40)*_t)+Ne*((Be=V+Ne*Vt)-Ke))+Ne*(Be+Ne*(te+Ne*Bt-Be)-fe),Le=(Ge=(qe=G+Ne*Pt)+Ne*((Te=H+Ne*Xt)-qe))+Ne*(Te+Ne*(ge+Ne*It-Te)-Ge),He==0?(ke=et,We=Le,at=et,xt=Le):(ke=Math.min(ke,et),We=Math.min(We,Le),at=Math.max(at,et),xt=Math.max(xt,Le));return new a(Math.round(ke),Math.round(We),Math.round(at-ke),Math.round(xt-We))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,G,V=(D=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:G}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(ln.API),function(t){var e=function(s){var o,a,l,c,u,d,h,p,y,x;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(x=u%85))/85)-(y=u%85))/85)-(p=u%85))/85)-(h=u%85))/85)%85,a.push(d+33,h+33,p+33,y+33,x+33)):a.push(122);return function(v,b){for(var S=b;S>0;S--)v.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,d=String,h="length",p=255,y="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[x](s[h]%5||5))[h];u>c;c+=5)a=52200625*(s[y](c)-33)+614125*(s[y](c+1)-33)+7225*(s[y](c+2)-33)+85*(s[y](c+3)-33)+(s[y](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(b,S){for(var k=S;k>0;k--)b.pop()}(l,o[h]),d.fromCharCode.apply(d,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=w_(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ln.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,p=function(y){var x=y.length,v=[],b=String.fromCharCode;for(h=0;h<x;h+=1)v.push(b(255&y.charCodeAt(h)));return v.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(ln.API),function(t){function e(){return(fn.html2canvas?Promise.resolve(fn.html2canvas):uu(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(fn.DOMPurify?Promise.resolve(fn.DOMPurify):uu(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Jn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var p=c[h],y=p.src.find(function(x){return x.format==="truetype"});y&&l.addFont(y.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||ln.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ln.getPageSize=function(o,a,l){if(Jn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var p,y=0,x=0;if(h.hasOwnProperty(d))y=h[d][1]/u,x=h[d][0]/u;else try{y=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",x>y&&(p=x,x=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>x&&(p=x,x=y,y=p)}return{width:x,height:y,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(C_):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ln.API),ln.API.addJS=function(t){return bT=t,this.internal.events.subscribe("postPutResources",function(){Py=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Py+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+bT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Py!==void 0&&wT!==void 0&&this.internal.out("/Names <</JavaScript "+Py+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ln.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,x={width:0,height:0,numcomponents:1},v=4;v<y;v+=2){if(v+=p,e.indexOf(d.charCodeAt(v+1))!==-1){h=256*d.charCodeAt(v+5)+d.charCodeAt(v+6),x={width:256*d.charCodeAt(v+7)+d.charCodeAt(v+8),height:h,numcomponents:d.charCodeAt(v+9)};break}p=256*d.charCodeAt(v+2)+d.charCodeAt(v+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(ln.API);var Cp,Dy,_T,ST,kT,Kse=function(){var t,e,n;function r(s){var o,a,l,c,u,d,h,p,y,x,v,b,S,k;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var T,j;for(j=[],T=0;T<4;++T)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),s=(d!=null?d.data:void 0)||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(S=0;0<=x?S<x:S>x;0<=x?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,v.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(d,h,p,y){var x,v,b,S,k,T,j,P,C,N,O,z,L,M,K,W,Z,U,F,J,Q,ee=Math.ceil((c.width-d)/p),ne=Math.ceil((c.height-h)/y),D=c.width==ee&&c.height==ne;for(M=o*ee,z=D?a:new Uint8Array(M*ne),T=s.length,L=0,v=0;L<ne&&l<T;){switch(s[l++]){case 0:for(S=Z=0;Z<M;S=Z+=1)z[v++]=s[l++];break;case 1:for(S=U=0;U<M;S=U+=1)x=s[l++],k=S<o?0:z[v-o],z[v++]=(x+k)%256;break;case 2:for(S=F=0;F<M;S=F+=1)x=s[l++],b=(S-S%o)/o,K=L&&z[(L-1)*M+b*o+S%o],z[v++]=(K+x)%256;break;case 3:for(S=J=0;J<M;S=J+=1)x=s[l++],b=(S-S%o)/o,k=S<o?0:z[v-o],K=L&&z[(L-1)*M+b*o+S%o],z[v++]=(x+Math.floor((k+K)/2))%256;break;case 4:for(S=Q=0;Q<M;S=Q+=1)x=s[l++],b=(S-S%o)/o,k=S<o?0:z[v-o],L===0?K=W=0:(K=z[(L-1)*M+b*o+S%o],W=b&&z[(L-1)*M+(b-1)*o+S%o]),j=k+K-W,P=Math.abs(j-k),N=Math.abs(j-K),O=Math.abs(j-W),C=P<=N&&P<=O?k:N<=O?K:W,z[v++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!D){var G=((h+L*y)*c.width+d)*o,V=L*M;for(S=0;S<ee;S+=1){for(var H=0;H<o;H+=1)a[G++]=z[V++];G+=(p-1)*o}}L++}}return s=Ese(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,u,d,h,p;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=d=0,h=a.length;d<h;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=u[s++])!=null?p:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,u,d,h,p,y,x,v,b;if(l=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,a=!0),y=(c=s.data||s).length,d=x||o,u=h=0,l===1)for(;u<y;)p=x?4*o[u/4]:h,v=d[p++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=a?d[p++]:255,h=p;else for(;u<y;)p=x?4*o[u/4]:h,c[u++]=d[p++],c[u++]=d[p++],c[u++]=d[p++],c[u++]=a?d[p++]:255,h=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(fn)==="[object Window]"){try{e=fn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,u,d,h,p;if(this.animation){for(p=[],a=u=0,d=(h=this.animation.frames).length;u<d;a=++u)o=h[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=t(l));return p}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,u,d,h=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(o=function(){var p,y;if(p=a++%c,y=l[p],h.renderFrame(s,p),c>1&&a/c<u)return h.animation._timeout=setTimeout(o,y.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Xse(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,p=0,y=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],(1&x)==0&&(h=null),p=x>>2&7,e++;break;case 254:for(;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,T=t[e++],j=T>>6&1,P=1<<(7&T)+1,C=a,N=l,O=!1;T>>7&&(O=!0,C=e,N=P,e+=3*P);var z=e;for(e++;;){var L;if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}u.push({x:v,y:b,width:S,height:k,has_local_palette:O,palette_offset:C,palette_size:N,data_offset:z,data_length:e-z,transparent_index:h,interlaced:!!j,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(M){if(M<0||M>=u.length)throw new Error("Frame index out of range.");return u[M]},this.decodeAndBlitFrameBGRA=function(M,K){var W=this.frameInfo(M),Z=W.width*W.height,U=new Uint8Array(Z);NT(t,W.data_offset,U,Z);var F=W.palette_offset,J=W.transparent_index;J===null&&(J=256);var Q=W.width,ee=n-Q,ne=Q,D=4*(W.y*n+W.x),G=4*((W.y+W.height)*n+W.x),V=D,H=4*ee;W.interlaced===!0&&(H+=4*n*7);for(var te=8,ge=0,xe=U.length;ge<xe;++ge){var ve=U[ge];if(ne===0&&(ne=Q,(V+=H)>=G&&(H=4*ee+4*n*(te-1),V=D+(Q+ee)*(te<<1),te>>=1)),ve===J)V+=4;else{var Ne=t[F+3*ve],He=t[F+3*ve+1],Ke=t[F+3*ve+2];K[V++]=Ke,K[V++]=He,K[V++]=Ne,K[V++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(M,K){var W=this.frameInfo(M),Z=W.width*W.height,U=new Uint8Array(Z);NT(t,W.data_offset,U,Z);var F=W.palette_offset,J=W.transparent_index;J===null&&(J=256);var Q=W.width,ee=n-Q,ne=Q,D=4*(W.y*n+W.x),G=4*((W.y+W.height)*n+W.x),V=D,H=4*ee;W.interlaced===!0&&(H+=4*n*7);for(var te=8,ge=0,xe=U.length;ge<xe;++ge){var ve=U[ge];if(ne===0&&(ne=Q,(V+=H)>=G&&(H=4*ee+4*n*(te-1),V=D+(Q+ee)*(te<<1),te>>=1)),ve===J)V+=4;else{var Ne=t[F+3*ve],He=t[F+3*ve+1],Ke=t[F+3*ve+2];K[V++]=Ne,K[V++]=He,K[V++]=Ke,K[V++]=255}--ne}}}function NT(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,p=t[e++],y=new Int32Array(4096),x=null;;){for(;u<16&&p!==0;)d|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var v=d&c;if(d>>=l,u-=l,v!==s){if(v===o)break;for(var b=v<a?v:x,S=0,k=b;k>s;)k=y[k]>>8,++S;var T=k;if(h+S+(b!==v?1:0)>r)return void yr.log("Warning, gif stream longer than expected.");n[h++]=T;var j=h+=S;for(b!==v&&(n[h++]=T),k=b;S--;)k=y[k],n[--j]=255&k,k>>=8;x!==null&&a<4096&&(y[a++]=x<<8|T,a>=c+1&&l<12&&(++l,c=c<<1|1)),x=v}else a=o+1,c=(1<<(l=i+1))-1,x=null}return h!==r&&yr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $b(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),p=new Array(64),y=new Array(64),x=[],v=0,b=7,S=new Array(64),k=new Array(64),T=new Array(64),j=new Array(256),P=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(D,G){for(var V=0,H=0,te=new Array,ge=1;ge<=16;ge++){for(var xe=1;xe<=D[ge];xe++)te[G[H]]=[],te[G[H]][0]=V,te[G[H]][1]=ge,H++,V++;V*=2}return te}function F(D){for(var G=D[0],V=D[1]-1;V>=0;)G&1<<V&&(v|=1<<b),V--,--b<0&&(v==255?(J(255),J(0)):J(v),b=7,v=0)}function J(D){x.push(D)}function Q(D){J(D>>8&255),J(255&D)}function ee(D,G,V,H,te){for(var ge,xe=te[0],ve=te[240],Ne=function(Le,ke){var We,at,xt,_t,Pt,Vt,Xt,Bt,It,Ft,dt=0;for(It=0;It<8;++It){We=Le[dt],at=Le[dt+1],xt=Le[dt+2],_t=Le[dt+3],Pt=Le[dt+4],Vt=Le[dt+5],Xt=Le[dt+6];var Tn=We+(Bt=Le[dt+7]),sn=We-Bt,Wn=at+Xt,hn=at-Xt,jn=xt+Vt,Wr=xt-Vt,yn=_t+Pt,Fr=_t-Pt,Nn=Tn+yn,vr=Tn-yn,pn=Wn+jn,tn=Wn-jn;Le[dt]=Nn+pn,Le[dt+4]=Nn-pn;var Rt=.707106781*(tn+vr);Le[dt+2]=vr+Rt,Le[dt+6]=vr-Rt;var nn=.382683433*((Nn=Fr+Wr)-(tn=hn+sn)),rr=.5411961*Nn+nn,xn=1.306562965*tn+nn,On=.707106781*(pn=Wr+hn),Sr=sn+On,jt=sn-On;Le[dt+5]=jt+rr,Le[dt+3]=jt-rr,Le[dt+1]=Sr+xn,Le[dt+7]=Sr-xn,dt+=8}for(dt=0,It=0;It<8;++It){We=Le[dt],at=Le[dt+8],xt=Le[dt+16],_t=Le[dt+24],Pt=Le[dt+32],Vt=Le[dt+40],Xt=Le[dt+48];var pe=We+(Bt=Le[dt+56]),Qe=We-Bt,vt=at+Xt,$t=at-Xt,Et=xt+Vt,re=xt-Vt,ye=_t+Pt,de=_t-Pt,he=pe+ye,we=pe-ye,be=vt+Et,Ue=vt-Et;Le[dt]=he+be,Le[dt+32]=he-be;var Ye=.707106781*(Ue+we);Le[dt+16]=we+Ye,Le[dt+48]=we-Ye;var Me=.382683433*((he=de+re)-(Ue=$t+Qe)),Ie=.5411961*he+Me,$e=1.306562965*Ue+Me,ut=.707106781*(be=re+$t),wt=Qe+ut,Dt=Qe-ut;Le[dt+40]=Dt+Ie,Le[dt+24]=Dt-Ie,Le[dt+8]=wt+$e,Le[dt+56]=wt-$e,dt++}for(It=0;It<64;++It)Ft=Le[It]*ke[It],p[It]=Ft>0?Ft+.5|0:Ft-.5|0;return p}(D,G),He=0;He<64;++He)y[C[He]]=Ne[He];var Ke=y[0]-V;V=y[0],Ke==0?F(H[0]):(F(H[h[ge=32767+Ke]]),F(d[ge]));for(var qe=63;qe>0&&y[qe]==0;)qe--;if(qe==0)return F(xe),V;for(var Be,Te=1;Te<=qe;){for(var fe=Te;y[Te]==0&&Te<=qe;)++Te;var Ge=Te-fe;if(Ge>=16){Be=Ge>>4;for(var et=1;et<=Be;++et)F(ve);Ge&=15}ge=32767+y[Te],F(te[(Ge<<4)+h[ge]]),F(d[ge]),Te++}return qe!=63&&F(xe),V}function ne(D){D=Math.min(Math.max(D,1),100),s!=D&&(function(G){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var te=o((V[H]*G+50)/100);te=Math.min(Math.max(te,1),255),a[C[H]]=te}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var ve=o((ge[xe]*G+50)/100);ve=Math.min(Math.max(ve,1),255),l[C[xe]]=ve}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Ke=0;Ke<8;Ke++)for(var qe=0;qe<8;qe++)c[He]=1/(a[C[He]]*Ne[Ke]*Ne[qe]*8),u[He]=1/(l[C[He]]*Ne[Ke]*Ne[qe]*8),He++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),s=D)}this.encode=function(D,G){G&&ne(G),x=new Array,v=0,b=7,Q(65496),Q(65504),Q(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),Q(1),Q(1),J(0),J(0),function(){Q(65499),Q(132),J(0);for(var at=0;at<64;at++)J(a[at]);J(1);for(var xt=0;xt<64;xt++)J(l[xt])}(),function(at,xt){Q(65472),Q(17),J(8),Q(xt),Q(at),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(D.width,D.height),function(){Q(65476),Q(418),J(0);for(var at=0;at<16;at++)J(N[at+1]);for(var xt=0;xt<=11;xt++)J(O[xt]);J(16);for(var _t=0;_t<16;_t++)J(z[_t+1]);for(var Pt=0;Pt<=161;Pt++)J(L[Pt]);J(1);for(var Vt=0;Vt<16;Vt++)J(M[Vt+1]);for(var Xt=0;Xt<=11;Xt++)J(K[Xt]);J(17);for(var Bt=0;Bt<16;Bt++)J(W[Bt+1]);for(var It=0;It<=161;It++)J(Z[It])}(),Q(65498),Q(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var V=0,H=0,te=0;v=0,b=7,this.encode.displayName="_encode_";for(var ge,xe,ve,Ne,He,Ke,qe,Be,Te,fe=D.data,Ge=D.width,et=D.height,Le=4*Ge,ke=0;ke<et;){for(ge=0;ge<Le;){for(He=Le*ke+ge,qe=-1,Be=0,Te=0;Te<64;Te++)Ke=He+(Be=Te>>3)*Le+(qe=4*(7&Te)),ke+Be>=et&&(Ke-=Le*(ke+1+Be-et)),ge+qe>=Le&&(Ke-=ge+qe-Le+4),xe=fe[Ke++],ve=fe[Ke++],Ne=fe[Ke++],S[Te]=(P[xe]+P[ve+256>>0]+P[Ne+512>>0]>>16)-128,k[Te]=(P[xe+768>>0]+P[ve+1024>>0]+P[Ne+1280>>0]>>16)-128,T[Te]=(P[xe+1280>>0]+P[ve+1536>>0]+P[Ne+1792>>0]>>16)-128;V=ee(S,c,V,e,r),H=ee(k,u,H,n,i),te=ee(T,u,te,n,i),ge+=32}ke+=8}if(b>=0){var We=[];We[1]=b+1,We[0]=(1<<b+1)-1,F(We)}return Q(65497),new Uint8Array(x)},t=t||50,function(){for(var D=String.fromCharCode,G=0;G<256;G++)j[G]=D(G)}(),e=U(N,O),n=U(M,K),r=U(z,L),i=U(W,Z),function(){for(var D=1,G=2,V=1;V<=15;V++){for(var H=D;H<G;H++)h[32767+H]=V,d[32767+H]=[],d[32767+H][1]=V,d[32767+H][0]=H;for(var te=-(G-1);te<=-D;te++)h[32767+te]=V,d[32767+te]=[],d[32767+te][1]=V,d[32767+te][0]=G-1+te;D<<=1,G<<=1}}(),function(){for(var D=0;D<256;D++)P[D]=19595*D,P[D+256>>0]=38470*D,P[D+512>>0]=7471*D+32768,P[D+768>>0]=-11059*D,P[D+1024>>0]=-21709*D,P[D+1280>>0]=32768*D+8421375,P[D+1536>>0]=-27439*D,P[D+1792>>0]=-5329*D}(),ne(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ul(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function CT(t){function e(N){if(!N)throw Error("assert :P")}function n(N,O,z){for(var L=0;4>L;L++)if(N[O+L]!=z.charCodeAt(L))return!0;return!1}function r(N,O,z,L,M){for(var K=0;K<M;K++)N[O+K]=z[L+K]}function i(N,O,z,L){for(var M=0;M<L;M++)N[O+M]=z}function s(N){return new Int32Array(N)}function o(N,O){for(var z=[],L=0;L<N;L++)z.push(new O);return z}function a(N,O){var z=[];return function L(M,K,W){for(var Z=W[K],U=0;U<Z&&(M.push(W.length>K+1?[]:new O),!(W.length<K+1));U++)L(M[U],K+1,W)}(z,0,N),z}var l=function(){var N=this;function O(_,A){for(var B=1<<A-1>>>0;_&B;)B>>>=1;return B?(_&B-1)+B:_}function z(_,A,B,X,ie){e(!(X%B));do _[A+(X-=B)]=ie;while(0<X)}function L(_,A,B,X,ie){if(e(2328>=ie),512>=ie)var oe=s(512);else if((oe=s(ie))==null)return 0;return function(le,ce,ue,me,Ee,Fe){var ze,Oe,ot=ce,Ze=1<<ue,je=s(16),Pe=s(16);for(e(Ee!=0),e(me!=null),e(le!=null),e(0<ue),Oe=0;Oe<Ee;++Oe){if(15<me[Oe])return 0;++je[me[Oe]]}if(je[0]==Ee)return 0;for(Pe[1]=0,ze=1;15>ze;++ze){if(je[ze]>1<<ze)return 0;Pe[ze+1]=Pe[ze]+je[ze]}for(Oe=0;Oe<Ee;++Oe)ze=me[Oe],0<me[Oe]&&(Fe[Pe[ze]++]=Oe);if(Pe[15]==1)return(me=new M).g=0,me.value=Fe[0],z(le,ot,1,Ze,me),Ze;var rt,nt=-1,st=Ze-1,Lt=0,At=1,en=1,Tt=1<<ue;for(Oe=0,ze=1,Ee=2;ze<=ue;++ze,Ee<<=1){if(At+=en<<=1,0>(en-=je[ze]))return 0;for(;0<je[ze];--je[ze])(me=new M).g=ze,me.value=Fe[Oe++],z(le,ot+Lt,Ee,Tt,me),Lt=O(Lt,ze)}for(ze=ue+1,Ee=2;15>=ze;++ze,Ee<<=1){if(At+=en<<=1,0>(en-=je[ze]))return 0;for(;0<je[ze];--je[ze]){if(me=new M,(Lt&st)!=nt){for(ot+=Tt,rt=1<<(nt=ze)-ue;15>nt&&!(0>=(rt-=je[nt]));)++nt,rt<<=1;Ze+=Tt=1<<(rt=nt-ue),le[ce+(nt=Lt&st)].g=rt+ue,le[ce+nt].value=ot-ce-nt}me.g=ze-ue,me.value=Fe[Oe++],z(le,ot+(Lt>>ue),Ee,Tt,me),Lt=O(Lt,ze)}}return At!=2*Pe[15]-1?0:Ze}(_,A,B,X,ie,oe)}function M(){this.value=this.g=0}function K(){this.value=this.g=0}function W(){this.G=o(5,M),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ti,K)}function Z(_,A,B,X){e(_!=null),e(A!=null),e(2147483648>X),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=A,_.pa=B,_.Jd=A,_.Yc=B+X,_.Zc=4<=X?B+X-4+1:B,ge(_)}function U(_,A){for(var B=0;0<A--;)B|=ve(_,128)<<A;return B}function F(_,A){var B=U(_,A);return xe(_)?-B:B}function J(_,A,B,X){var ie,oe=0;for(e(_!=null),e(A!=null),e(4294967288>X),_.Sb=X,_.Ra=0,_.u=0,_.h=0,4<X&&(X=4),ie=0;ie<X;++ie)oe+=A[B+ie]<<8*ie;_.Ra=oe,_.bb=X,_.oa=A,_.pa=B}function Q(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Lu-8>>>0,++_.bb,_.u-=8;V(_)&&(_.h=1,_.u=0)}function ee(_,A){if(e(0<=A),!_.h&&A<=Ou){var B=G(_)&Du[A];return _.u+=A,Q(_),B}return _.h=1,_.u=0}function ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(_){return _.Ra>>>(_.u&Lu-1)>>>0}function V(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Lu}function H(_,A){_.u=A,_.h=V(_)}function te(_){_.u>=Mu&&(e(_.u>=Mu),Q(_))}function ge(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function xe(_){return U(_,1)}function ve(_,A){var B=_.Ca;0>_.b&&ge(_);var X=_.b,ie=B*A>>>8,oe=(_.I>>>X>ie)+0;for(oe?(B-=ie,_.I-=ie+1<<X>>>0):B=ie+1,X=B,ie=0;256<=X;)ie+=8,X>>=8;return X=7^ie+Gi[X],_.b-=X,_.Ca=(B<<X)-1,oe}function Ne(_,A,B){_[A+0]=B>>24&255,_[A+1]=B>>16&255,_[A+2]=B>>8&255,_[A+3]=B>>0&255}function He(_,A){return _[A+0]<<0|_[A+1]<<8}function Ke(_,A){return He(_,A)|_[A+2]<<16}function qe(_,A){return He(_,A)|He(_,A+2)<<16}function Be(_,A){var B=1<<A;return e(_!=null),e(0<A),_.X=s(B),_.X==null?0:(_.Mb=32-A,_.Xa=A,1)}function Te(_,A){e(_!=null),e(A!=null),e(_.Xa==A.Xa),r(A.X,0,_.X,0,1<<A.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Ge(_,A,B,X){e(B!=null),e(X!=null);var ie=B[0],oe=X[0];return ie==0&&(ie=(_*oe+A/2)/A),oe==0&&(oe=(A*ie+_/2)/_),0>=ie||0>=oe?0:(B[0]=ie,X[0]=oe,1)}function et(_,A){return _+(1<<A)-1>>>A}function Le(_,A){return((4278255360&_)+(4278255360&A)>>>0&4278255360)+((16711935&_)+(16711935&A)>>>0&16711935)>>>0}function ke(_,A){N[A]=function(B,X,ie,oe,le,ce,ue){var me;for(me=0;me<le;++me){var Ee=N[_](ce[ue+me-1],ie,oe+me);ce[ue+me]=Le(B[X+me],Ee)}}}function We(){this.ud=this.hd=this.jd=0}function at(_,A){return((4278124286&(_^A))>>>1)+(_&A)>>>0}function xt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function _t(_,A){return xt(_+(_-A+.5>>1))}function Pt(_,A,B){return Math.abs(A-B)-Math.abs(_-B)}function Vt(_,A,B,X,ie,oe,le){for(X=oe[le-1],B=0;B<ie;++B)oe[le+B]=X=Le(_[A+B],X)}function Xt(_,A,B,X,ie){var oe;for(oe=0;oe<B;++oe){var le=_[A+oe],ce=le>>8&255,ue=16711935&(ue=(ue=16711935&le)+((ce<<16)+ce));X[ie+oe]=(4278255360&le)+ue>>>0}}function Bt(_,A){A.jd=_>>0&255,A.hd=_>>8&255,A.ud=_>>16&255}function It(_,A,B,X,ie,oe){var le;for(le=0;le<X;++le){var ce=A[B+le],ue=ce>>>8,me=ce,Ee=255&(Ee=(Ee=ce>>>16)+((_.jd<<24>>24)*(ue<<24>>24)>>>5));me=255&(me=(me=me+((_.hd<<24>>24)*(ue<<24>>24)>>>5))+((_.ud<<24>>24)*(Ee<<24>>24)>>>5)),ie[oe+le]=(4278255360&ce)+(Ee<<16)+me}}function Ft(_,A,B,X,ie){N[A]=function(oe,le,ce,ue,me,Ee,Fe,ze,Oe){for(ue=Fe;ue<ze;++ue)for(Fe=0;Fe<Oe;++Fe)me[Ee++]=ie(ce[X(oe[le++])])},N[_]=function(oe,le,ce,ue,me,Ee,Fe){var ze=8>>oe.b,Oe=oe.Ea,ot=oe.K[0],Ze=oe.w;if(8>ze)for(oe=(1<<oe.b)-1,Ze=(1<<ze)-1;le<ce;++le){var je,Pe=0;for(je=0;je<Oe;++je)je&oe||(Pe=X(ue[me++])),Ee[Fe++]=ie(ot[Pe&Ze]),Pe>>=ze}else N["VP8LMapColor"+B](ue,me,ot,Ze,Ee,Fe,le,ce,Oe)}}function dt(_,A,B,X,ie){for(B=A+B;A<B;){var oe=_[A++];X[ie++]=oe>>16&255,X[ie++]=oe>>8&255,X[ie++]=oe>>0&255}}function Tn(_,A,B,X,ie){for(B=A+B;A<B;){var oe=_[A++];X[ie++]=oe>>16&255,X[ie++]=oe>>8&255,X[ie++]=oe>>0&255,X[ie++]=oe>>24&255}}function sn(_,A,B,X,ie){for(B=A+B;A<B;){var oe=(le=_[A++])>>16&240|le>>12&15,le=le>>0&240|le>>28&15;X[ie++]=oe,X[ie++]=le}}function Wn(_,A,B,X,ie){for(B=A+B;A<B;){var oe=(le=_[A++])>>16&248|le>>13&7,le=le>>5&224|le>>3&31;X[ie++]=oe,X[ie++]=le}}function hn(_,A,B,X,ie){for(B=A+B;A<B;){var oe=_[A++];X[ie++]=oe>>0&255,X[ie++]=oe>>8&255,X[ie++]=oe>>16&255}}function jn(_,A,B,X,ie,oe){if(oe==0)for(B=A+B;A<B;)Ne(X,((oe=_[A++])[0]>>24|oe[1]>>8&65280|oe[2]<<8&16711680|oe[3]<<24)>>>0),ie+=32;else r(X,ie,_,A,B)}function Wr(_,A){N[A][0]=N[_+"0"],N[A][1]=N[_+"1"],N[A][2]=N[_+"2"],N[A][3]=N[_+"3"],N[A][4]=N[_+"4"],N[A][5]=N[_+"5"],N[A][6]=N[_+"6"],N[A][7]=N[_+"7"],N[A][8]=N[_+"8"],N[A][9]=N[_+"9"],N[A][10]=N[_+"10"],N[A][11]=N[_+"11"],N[A][12]=N[_+"12"],N[A][13]=N[_+"13"],N[A][14]=N[_+"0"],N[A][15]=N[_+"0"]}function yn(_){return _==zu||_==Lc||_==wf||_==bf}function Fr(){this.eb=[],this.size=this.A=this.fb=0}function Nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Fr,this.f.kb=new Nn,this.sd=null}function pn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rt(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function nn(_,A){var B=_.T,X=A.ba.f.RGBA,ie=X.eb,oe=X.fb+_.ka*X.A,le=xs[A.ba.S],ce=_.y,ue=_.O,me=_.f,Ee=_.N,Fe=_.ea,ze=_.W,Oe=A.cc,ot=A.dc,Ze=A.Mc,je=A.Nc,Pe=_.ka,rt=_.ka+_.T,nt=_.U,st=nt+1>>1;for(Pe==0?le(ce,ue,null,null,me,Ee,Fe,ze,me,Ee,Fe,ze,ie,oe,null,null,nt):(le(A.ec,A.fc,ce,ue,Oe,ot,Ze,je,me,Ee,Fe,ze,ie,oe-X.A,ie,oe,nt),++B);Pe+2<rt;Pe+=2)Oe=me,ot=Ee,Ze=Fe,je=ze,Ee+=_.Rc,ze+=_.Rc,oe+=2*X.A,le(ce,(ue+=2*_.fa)-_.fa,ce,ue,Oe,ot,Ze,je,me,Ee,Fe,ze,ie,oe-X.A,ie,oe,nt);return ue+=_.fa,_.j+rt<_.o?(r(A.ec,A.fc,ce,ue,nt),r(A.cc,A.dc,me,Ee,st),r(A.Mc,A.Nc,Fe,ze,st),B--):1&rt||le(ce,ue,null,null,me,Ee,Fe,ze,me,Ee,Fe,ze,ie,oe+X.A,null,null,nt),B}function rr(_,A,B){var X=_.F,ie=[_.J];if(X!=null){var oe=_.U,le=A.ba.S,ce=le==vf||le==wf;A=A.ba.f.RGBA;var ue=[0],me=_.ka;ue[0]=_.T,_.Kb&&(me==0?--ue[0]:(--me,ie[0]-=_.width),_.j+_.ka+_.T==_.o&&(ue[0]=_.o-_.j-me));var Ee=A.eb;me=A.fb+me*A.A,_=Oc(X,ie[0],_.width,oe,ue,Ee,me+(ce?0:3),A.A),e(B==ue),_&&yn(le)&&wa(Ee,me,ce,oe,ue,A.A)}return 0}function xn(_){var A=_.ma,B=A.ba.S,X=11>B,ie=B==Bl||B==xf||B==vf||B==cr||B==12||yn(B);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!ju(A.Oa,_,ie?11:12))return 0;if(ie&&yn(B)&&mt(),_.da)alert("todo:use_scaling");else{if(X){if(A.Ib=Rt,_.Kb){if(B=_.U+1>>1,A.memory=s(_.U+2*B),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+_.U,A.Mc=A.cc,A.Nc=A.dc+B,A.Ib=nn,mt()}}else alert("todo:EmitYUV");ie&&(A.Jb=rr,X&&Re())}if(X&&!bi){for(_=0;256>_;++_)vs[_]=89858*(_-128)+Vo>>Za,ws[_]=-22014*(_-128)+Vo,Wu[_]=-45773*(_-128),Fc[_]=113618*(_-128)+Vo>>Za;for(_=Qn;_<sr;++_)A=76283*(_-16)+Vo>>Za,Jh[_-Qn]=$s(A,255),P1[_-Qn]=$s(A+8>>4,15);bi=1}return 1}function On(_){var A=_.ma,B=_.U,X=_.T;return e(!(1&_.ka)),0>=B||0>=X?0:(B=A.Ib(_,A),A.Jb!=null&&A.Jb(_,A,B),A.Dc+=B,1)}function Sr(_){_.ma.memory=null}function jt(_,A,B,X){return ee(_,8)!=47?0:(A[0]=ee(_,14)+1,B[0]=ee(_,14)+1,X[0]=ee(_,1),ee(_,3)!=0?0:!_.h)}function pe(_,A){if(4>_)return _+1;var B=_-2>>1;return(2+(1&_)<<B)+ee(A,B)+1}function Qe(_,A){return 120<A?A-120:1<=(B=((B=T2[A-1])>>4)*_+(8-(15&B)))?B:1;var B}function vt(_,A,B){var X=G(B),ie=_[A+=255&X].g-8;return 0<ie&&(H(B,B.u+8),X=G(B),A+=_[A].value,A+=X&(1<<ie)-1),H(B,B.u+_[A].g),_[A].value}function $t(_,A,B){return B.g+=_.g,B.value+=_.value<<A>>>0,e(8>=B.g),_.g}function Et(_,A,B){var X=_.xc;return e((A=X==0?0:_.vc[_.md*(B>>X)+(A>>X)])<_.Wb),_.Ya[A]}function re(_,A,B,X){var ie=_.ab,oe=_.c*A,le=_.C;A=le+A;var ce=B,ue=X;for(X=_.Ta,B=_.Ua;0<ie--;){var me=_.gc[ie],Ee=le,Fe=A,ze=ce,Oe=ue,ot=(ue=X,ce=B,me.Ea);switch(e(Ee<Fe),e(Fe<=me.nc),me.hc){case 2:Hh(ze,Oe,(Fe-Ee)*ot,ue,ce);break;case 0:var Ze=Ee,je=Fe,Pe=ue,rt=ce,nt=(Tt=me).Ea;Ze==0&&(jc(ze,Oe,null,null,1,Pe,rt),Vt(ze,Oe+1,0,0,nt-1,Pe,rt+1),Oe+=nt,rt+=nt,++Ze);for(var st=1<<Tt.b,Lt=st-1,At=et(nt,Tt.b),en=Tt.K,Tt=Tt.w+(Ze>>Tt.b)*At;Ze<je;){var Bn=en,Un=Tt,Mn=1;for(Ka(ze,Oe,Pe,rt-nt,1,Pe,rt);Mn<nt;){var _n=(Mn&~Lt)+st;_n>nt&&(_n=nt),(0,ya[Bn[Un++]>>8&15])(ze,Oe+ +Mn,Pe,rt+Mn-nt,_n-Mn,Pe,rt+Mn),Mn=_n}Oe+=nt,rt+=nt,++Ze&Lt||(Tt+=At)}Fe!=me.nc&&r(ue,ce-ot,ue,ce+(Fe-Ee-1)*ot,ot);break;case 1:for(ot=ze,je=Oe,nt=(ze=me.Ea)-(rt=ze&~(Pe=(Oe=1<<me.b)-1)),Ze=et(ze,me.b),st=me.K,me=me.w+(Ee>>me.b)*Ze;Ee<Fe;){for(Lt=st,At=me,en=new We,Tt=je+rt,Bn=je+ze;je<Tt;)Bt(Lt[At++],en),Ws(en,ot,je,Oe,ue,ce),je+=Oe,ce+=Oe;je<Bn&&(Bt(Lt[At++],en),Ws(en,ot,je,nt,ue,ce),je+=nt,ce+=nt),++Ee&Pe||(me+=Ze)}break;case 3:if(ze==ue&&Oe==ce&&0<me.b){for(je=ue,ze=ot=ce+(Fe-Ee)*ot-(rt=(Fe-Ee)*et(me.Ea,me.b)),Oe=ue,Pe=ce,Ze=[],rt=(nt=rt)-1;0<=rt;--rt)Ze[rt]=Oe[Pe+rt];for(rt=nt-1;0<=rt;--rt)je[ze+rt]=Ze[rt];ms(me,Ee,Fe,ue,ot,ue,ce)}else ms(me,Ee,Fe,ze,Oe,ue,ce)}ce=X,ue=B}ue!=B&&r(X,B,ce,ue,oe)}function ye(_,A){var B=_.V,X=_.Ba+_.c*_.C,ie=A-_.C;if(e(A<=_.l.o),e(16>=ie),0<ie){var oe=_.l,le=_.Ta,ce=_.Ua,ue=oe.width;if(re(_,ie,B,X),ie=ce=[ce],e((B=_.C)<(X=A)),e(oe.v<oe.va),X>oe.o&&(X=oe.o),B<oe.j){var me=oe.j-B;B=oe.j,ie[0]+=me*ue}if(B>=X?B=0:(ie[0]+=4*oe.v,oe.ka=B-oe.j,oe.U=oe.va-oe.v,oe.T=X-B,B=1),B){if(ce=ce[0],11>(B=_.ca).S){var Ee=B.f.RGBA,Fe=(X=B.S,ie=oe.U,oe=oe.T,me=Ee.eb,Ee.A),ze=oe;for(Ee=Ee.fb+_.Ma*Ee.A;0<ze--;){var Oe=le,ot=ce,Ze=ie,je=me,Pe=Ee;switch(X){case Gh:ao(Oe,ot,Ze,je,Pe);break;case Bl:Xa(Oe,ot,Ze,je,Pe);break;case zu:Xa(Oe,ot,Ze,je,Pe),wa(je,Pe,0,Ze,1,0);break;case C1:Iu(Oe,ot,Ze,je,Pe);break;case xf:jn(Oe,ot,Ze,je,Pe,1);break;case Lc:jn(Oe,ot,Ze,je,Pe,1),wa(je,Pe,0,Ze,1,0);break;case vf:jn(Oe,ot,Ze,je,Pe,0);break;case wf:jn(Oe,ot,Ze,je,Pe,0),wa(je,Pe,1,Ze,1,0);break;case cr:xa(Oe,ot,Ze,je,Pe);break;case bf:xa(Oe,ot,Ze,je,Pe),Dc(je,Pe,Ze,1,0);break;case Kh:Ya(Oe,ot,Ze,je,Pe);break;default:e(0)}ce+=ue,Ee+=Fe}_.Ma+=oe}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=B.height)}}_.C=A,e(_.C<=_.i)}function de(_){var A;if(0<_.ua)return 0;for(A=0;A<_.Wb;++A){var B=_.Ya[A].G,X=_.Ya[A].H;if(0<B[1][X[1]+0].g||0<B[2][X[2]+0].g||0<B[3][X[3]+0].g)return 0}return 1}function he(_,A,B,X,ie,oe){if(_.Z!=0){var le=_.qd,ce=_.rd;for(e(Ei[_.Z]!=null);A<B;++A)Ei[_.Z](le,ce,X,ie,X,ie,oe),le=X,ce=ie,ie+=oe;_.qd=le,_.rd=ce}}function we(_,A){var B=_.l.ma,X=B.Z==0||B.Z==1?_.l.j:_.C;if(X=_.C<X?X:_.C,e(A<=_.l.o),A>X){var ie=_.l.width,oe=B.ca,le=B.tb+ie*X,ce=_.V,ue=_.Ba+_.c*X,me=_.gc;e(_.ab==1),e(me[0].hc==3),qh(me[0],X,A,ce,ue,oe,le),he(B,X,A,oe,le,ie)}_.C=_.Ma=A}function be(_,A,B,X,ie,oe,le){var ce=_.$/X,ue=_.$%X,me=_.m,Ee=_.s,Fe=B+_.$,ze=Fe;ie=B+X*ie;var Oe=B+X*oe,ot=280+Ee.ua,Ze=_.Pb?ce:16777216,je=0<Ee.ua?Ee.Wa:null,Pe=Ee.wc,rt=Fe<Oe?Et(Ee,ue,ce):null;e(_.C<oe),e(Oe<=ie);var nt=!1;e:for(;;){for(;nt||Fe<Oe;){var st=0;if(ce>=Ze){var Lt=Fe-B;e((Ze=_).Pb),Ze.wd=Ze.m,Ze.xd=Lt,0<Ze.s.ua&&Te(Ze.s.Wa,Ze.s.vb),Ze=ce+Yh}if(ue&Pe||(rt=Et(Ee,ue,ce)),e(rt!=null),rt.Qb&&(A[Fe]=rt.qb,nt=!0),!nt)if(te(me),rt.jc){st=me,Lt=A;var At=Fe,en=rt.pd[G(st)&ti-1];e(rt.jc),256>en.g?(H(st,st.u+en.g),Lt[At]=en.value,st=0):(H(st,st.u+en.g-256),e(256<=en.value),st=en.value),st==0&&(nt=!0)}else st=vt(rt.G[0],rt.H[0],me);if(me.h)break;if(nt||256>st){if(!nt)if(rt.nd)A[Fe]=(rt.qb|st<<8)>>>0;else{if(te(me),nt=vt(rt.G[1],rt.H[1],me),te(me),Lt=vt(rt.G[2],rt.H[2],me),At=vt(rt.G[3],rt.H[3],me),me.h)break;A[Fe]=(At<<24|nt<<16|st<<8|Lt)>>>0}if(nt=!1,++Fe,++ue>=X&&(ue=0,++ce,le!=null&&ce<=oe&&!(ce%16)&&le(_,ce),je!=null))for(;ze<Fe;)st=A[ze++],je.X[(506832829*st&4294967295)>>>je.Mb]=st}else if(280>st){if(st=pe(st-256,me),Lt=vt(rt.G[4],rt.H[4],me),te(me),Lt=Qe(X,Lt=pe(Lt,me)),me.h)break;if(Fe-B<Lt||ie-Fe<st)break e;for(At=0;At<st;++At)A[Fe+At]=A[Fe+At-Lt];for(Fe+=st,ue+=st;ue>=X;)ue-=X,++ce,le!=null&&ce<=oe&&!(ce%16)&&le(_,ce);if(e(Fe<=ie),ue&Pe&&(rt=Et(Ee,ue,ce)),je!=null)for(;ze<Fe;)st=A[ze++],je.X[(506832829*st&4294967295)>>>je.Mb]=st}else{if(!(st<ot))break e;for(nt=st-280,e(je!=null);ze<Fe;)st=A[ze++],je.X[(506832829*st&4294967295)>>>je.Mb]=st;st=Fe,e(!(nt>>>(Lt=je).Xa)),A[st]=Lt.X[nt],nt=!0}nt||e(me.h==V(me))}if(_.Pb&&me.h&&Fe<ie)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Te(_.s.vb,_.s.Wa);else{if(me.h)break e;le!=null&&le(_,ce>oe?oe:ce),_.a=0,_.$=Fe-B}return 1}return _.a=3,0}function Ue(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var A=_.Wa;A!=null&&(A.X=null),_.vb=null,e(_!=null)}function Ye(){var _=new z0;return _==null?null:(_.a=0,_.xb=Uu,Wr("Predictor","VP8LPredictors"),Wr("Predictor","VP8LPredictors_C"),Wr("PredictorAdd","VP8LPredictorsAdd"),Wr("PredictorAdd","VP8LPredictorsAdd_C"),Hh=Xt,Ws=It,ao=dt,Xa=Tn,xa=sn,Ya=Wn,Iu=hn,N.VP8LMapColor32b=mf,N.VP8LMapColor8b=gf,_)}function Me(_,A,B,X,ie){var oe=1,le=[_],ce=[A],ue=X.m,me=X.s,Ee=null,Fe=0;e:for(;;){if(B)for(;oe&&ee(ue,1);){var ze=le,Oe=ce,ot=X,Ze=1,je=ot.m,Pe=ot.gc[ot.ab],rt=ee(je,2);if(ot.Oc&1<<rt)oe=0;else{switch(ot.Oc|=1<<rt,Pe.hc=rt,Pe.Ea=ze[0],Pe.nc=Oe[0],Pe.K=[null],++ot.ab,e(4>=ot.ab),rt){case 0:case 1:Pe.b=ee(je,3)+2,Ze=Me(et(Pe.Ea,Pe.b),et(Pe.nc,Pe.b),0,ot,Pe.K),Pe.K=Pe.K[0];break;case 3:var nt,st=ee(je,8)+1,Lt=16<st?0:4<st?1:2<st?2:3;if(ze[0]=et(Pe.Ea,Lt),Pe.b=Lt,nt=Ze=Me(st,1,0,ot,Pe.K)){var At,en=st,Tt=Pe,Bn=1<<(8>>Tt.b),Un=s(Bn);if(Un==null)nt=0;else{var Mn=Tt.K[0],_n=Tt.w;for(Un[0]=Tt.K[0][0],At=1;At<1*en;++At)Un[At]=Le(Mn[_n+At],Un[At-1]);for(;At<4*Bn;++At)Un[At]=0;Tt.K[0]=null,Tt.K[0]=Un,nt=1}}Ze=nt;break;case 2:break;default:e(0)}oe=Ze}}if(le=le[0],ce=ce[0],oe&&ee(ue,1)&&!(oe=1<=(Fe=ee(ue,4))&&11>=Fe)){X.a=3;break e}var er;if(er=oe)t:{var or,mn,Ar,Ji=X,Br=le,ni=ce,Gn=Fe,Ai=B,Ti=Ji.m,Tr=Ji.s,ri=[null],_i=1,bs=0,ho=A1[Gn];n:for(;;){if(Ai&&ee(Ti,1)){var jr=ee(Ti,3)+2,qr=et(Br,jr),Vs=et(ni,jr),Wl=qr*Vs;if(!Me(qr,Vs,0,Ji,ri))break n;for(ri=ri[0],Tr.xc=jr,or=0;or<Wl;++or){var el=ri[or]>>8&65535;ri[or]=el,el>=_i&&(_i=el+1)}}if(Ti.h)break n;for(mn=0;5>mn;++mn){var Kn=Mc[mn];!mn&&0<Gn&&(Kn+=1<<Gn),bs<Kn&&(bs=Kn)}var Sa=o(_i*ho,M),Zh=_i,J0=o(Zh,W);if(J0==null)var po=null;else e(65536>=Zh),po=J0;var mo=s(bs);if(po==null||mo==null||Sa==null){Ji.a=1;break n}var Bc=Sa;for(or=Ar=0;or<_i;++or){var go=po[or],tl=go.G,Uc=go.H,Vu=0,Hs=1,Hu=0;for(mn=0;5>mn;++mn){Kn=Mc[mn],tl[mn]=Bc,Uc[mn]=Ar,!mn&&0<Gn&&(Kn+=1<<Gn);i:{var Vl,nl=Kn,qu=Ji,ka=mo,O1=Bc,Z0=Ar,gr=0,Ho=qu.m,Q0=ee(Ho,1);if(i(ka,0,0,nl),Q0){var em=ee(Ho,1)+1,Qh=ee(Ho,1),ep=ee(Ho,Qh==0?1:8);ka[ep]=1,em==2&&(ka[ep=ee(Ho,8)]=1);var Na=1}else{var wr=s(19),Gr=ee(Ho,4)+4;if(19<Gr){qu.a=3;var Ur=0;break i}for(Vl=0;Vl<Gr;++Vl)wr[A2[Vl]]=ee(Ho,3);var Gu=void 0,rl=void 0,Ku=qu,L2=wr,ii=nl,tp=ka,Cf=0,Ca=Ku.m,qo=8,qs=o(128,M);r:for(;L(qs,0,7,L2,19);){if(ee(Ca,1)){var Ef=2+2*ee(Ca,3);if((Gu=2+ee(Ca,Ef))>ii)break r}else Gu=ii;for(rl=0;rl<ii&&Gu--;){te(Ca);var np=qs[0+(127&G(Ca))];H(Ca,Ca.u+np.g);var Hl=np.value;if(16>Hl)tp[rl++]=Hl,Hl!=0&&(qo=Hl);else{var L1=Hl==16,tm=Hl-16,M1=Xh[tm],nm=ee(Ca,_f[tm])+M1;if(rl+nm>ii)break r;for(var I1=L1?qo:0;0<nm--;)tp[rl++]=I1}}Cf=1;break r}Cf||(Ku.a=3),Na=Cf}(Na=Na&&!Ho.h)&&(gr=L(O1,Z0,8,ka,nl)),Na&&gr!=0?Ur=gr:(qu.a=3,Ur=0)}if(Ur==0)break n;if(Hs&&E1[mn]==1&&(Hs=Bc[Ar].g==0),Vu+=Bc[Ar].g,Ar+=Ur,3>=mn){var Xu,rp=mo[0];for(Xu=1;Xu<Kn;++Xu)mo[Xu]>rp&&(rp=mo[Xu]);Hu+=rp}}if(go.nd=Hs,go.Qb=0,Hs&&(go.qb=(tl[3][Uc[3]+0].value<<24|tl[1][Uc[1]+0].value<<16|tl[2][Uc[2]+0].value)>>>0,Vu==0&&256>tl[0][Uc[0]+0].value&&(go.Qb=1,go.qb+=tl[0][Uc[0]+0].value<<8)),go.jc=!go.Qb&&6>Hu,go.jc){var Af,Gs=go;for(Af=0;Af<ti;++Af){var il=Af,Go=Gs.pd[il],$c=Gs.G[0][Gs.H[0]+il];256<=$c.value?(Go.g=$c.g+256,Go.value=$c.value):(Go.g=0,Go.value=0,il>>=$t($c,8,Go),il>>=$t(Gs.G[1][Gs.H[1]+il],16,Go),il>>=$t(Gs.G[2][Gs.H[2]+il],0,Go),$t(Gs.G[3][Gs.H[3]+il],24,Go))}}}Tr.vc=ri,Tr.Wb=_i,Tr.Ya=po,Tr.yc=Sa,er=1;break t}er=0}if(!(oe=er)){X.a=3;break e}if(0<Fe){if(me.ua=1<<Fe,!Be(me.Wa,Fe)){X.a=1,oe=0;break e}}else me.ua=0;var ip=X,sp=le,R1=ce,op=ip.s,ap=op.xc;if(ip.c=sp,ip.i=R1,op.md=et(sp,ap),op.wc=ap==0?-1:(1<<ap)-1,B){X.xb=_a;break e}if((Ee=s(le*ce))==null){X.a=1,oe=0;break e}oe=(oe=be(X,Ee,0,le,ce,ce,null))&&!ue.h;break e}return oe?(ie!=null?ie[0]=Ee:(e(Ee==null),e(B)),X.$=0,B||Ue(me)):Ue(me),oe}function Ie(_,A){var B=_.c*_.i,X=B+A+16*A;return e(_.c<=A),_.V=s(X),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+B+A,1)}function $e(_,A){var B=_.C,X=A-B,ie=_.V,oe=_.Ba+_.c*B;for(e(A<=_.l.o);0<X;){var le=16<X?16:X,ce=_.l.ma,ue=_.l.width,me=ue*le,Ee=ce.ca,Fe=ce.tb+ue*B,ze=_.Ta,Oe=_.Ua;re(_,le,ie,oe),B0(ze,Oe,Ee,Fe,me),he(ce,B,B+le,Ee,Fe,ue),X-=le,ie+=le*_.c,B+=le}e(B==A),_.C=_.Ma=A}function ut(){this.ub=this.yd=this.td=this.Rb=0}function wt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function bt(){this.Yb=function(){var _=[];return function A(B,X,ie){for(var oe=ie[X],le=0;le<oe&&(B.push(ie.length>X+1?[]:0),!(ie.length<X+1));le++)A(B[le],X+1,ie)}(_,0,[3,11]),_}()}function gt(){this.jb=s(3),this.Wc=a([4,8],bt),this.Xc=a([4,17],bt)}function dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function zn(){this.ld=this.La=this.dd=this.tc=0}function Zn(){this.Na=this.la=0}function kr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Oo(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ua(){this.uc=this.M=this.Nb=0,this.wa=Array(new zn),this.Y=0,this.ya=Array(new Oo),this.aa=0,this.l=new da}function Bs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Vr(){this.cb=this.a=0,this.sc="",this.m=new ne,this.Od=new ut,this.Kc=new wt,this.ed=new dn,this.Qa=new Dt,this.Ic=this.$c=this.Aa=0,this.D=new ua,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ne),this.ia=0,this.pb=o(4,kr),this.Pa=new gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bs),this.Hd=0,this.rb=Array(new Zn),this.sb=0,this.wa=Array(new zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Oo),this.L=this.aa=0,this.gd=a([4,2],zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function da(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Nr(){var _=new Vr;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Ic||(Ic=xc)),_}function zr(_,A,B){return _.a==0&&(_.a=A,_.sc=B,_.cb=0),0}function Fh(_,A,B){return 3<=B&&_[A+0]==157&&_[A+1]==1&&_[A+2]==42}function zh(_,A){if(_==null)return 0;if(_.a=0,_.sc="OK",A==null)return zr(_,2,"null VP8Io passed to VP8GetHeaders()");var B=A.data,X=A.w,ie=A.ha;if(4>ie)return zr(_,7,"Truncated header.");var oe=B[X+0]|B[X+1]<<8|B[X+2]<<16,le=_.Od;if(le.Rb=!(1&oe),le.td=oe>>1&7,le.yd=oe>>4&1,le.ub=oe>>5,3<le.td)return zr(_,3,"Incorrect keyframe parameters.");if(!le.yd)return zr(_,4,"Frame not displayable.");X+=3,ie-=3;var ce=_.Kc;if(le.Rb){if(7>ie)return zr(_,7,"cannot parse picture header");if(!Fh(B,X,ie))return zr(_,3,"Bad code word");ce.c=16383&(B[X+4]<<8|B[X+3]),ce.Td=B[X+4]>>6,ce.i=16383&(B[X+6]<<8|B[X+5]),ce.Ud=B[X+6]>>6,X+=7,ie-=7,_.za=ce.c+15>>4,_.Ub=ce.i+15>>4,A.width=ce.c,A.height=ce.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((oe=_.Pa).jb,0,255,oe.jb.length),e((oe=_.Qa)!=null),oe.Cb=0,oe.Bb=0,oe.Fb=1,i(oe.Zb,0,0,oe.Zb.length),i(oe.Lb,0,0,oe.Lb)}if(le.ub>ie)return zr(_,7,"bad partition length");Z(oe=_.m,B,X,le.ub),X+=le.ub,ie-=le.ub,le.Rb&&(ce.Ld=xe(oe),ce.Kd=xe(oe)),ce=_.Qa;var ue,me=_.Pa;if(e(oe!=null),e(ce!=null),ce.Cb=xe(oe),ce.Cb){if(ce.Bb=xe(oe),xe(oe)){for(ce.Fb=xe(oe),ue=0;4>ue;++ue)ce.Zb[ue]=xe(oe)?F(oe,7):0;for(ue=0;4>ue;++ue)ce.Lb[ue]=xe(oe)?F(oe,6):0}if(ce.Bb)for(ue=0;3>ue;++ue)me.jb[ue]=xe(oe)?U(oe,8):255}else ce.Bb=0;if(oe.Ka)return zr(_,3,"cannot parse segment header");if((ce=_.ed).zd=xe(oe),ce.Tb=U(oe,6),ce.wb=U(oe,3),ce.Pc=xe(oe),ce.Pc&&xe(oe)){for(me=0;4>me;++me)xe(oe)&&(ce.vd[me]=F(oe,6));for(me=0;4>me;++me)xe(oe)&&(ce.od[me]=F(oe,6))}if(_.L=ce.Tb==0?0:ce.zd?1:2,oe.Ka)return zr(_,3,"cannot parse filter header");var Ee=ie;if(ie=ue=X,X=ue+Ee,ce=Ee,_.Xb=(1<<U(_.m,2))-1,Ee<3*(me=_.Xb))B=7;else{for(ue+=3*me,ce-=3*me,Ee=0;Ee<me;++Ee){var Fe=B[ie+0]|B[ie+1]<<8|B[ie+2]<<16;Fe>ce&&(Fe=ce),Z(_.Jc[+Ee],B,ue,Fe),ue+=Fe,ce-=Fe,ie+=3}Z(_.Jc[+me],B,ue,ce),B=ue<X?0:5}if(B!=0)return zr(_,B,"cannot parse partitions");for(B=U(ue=_.m,7),ie=xe(ue)?F(ue,4):0,X=xe(ue)?F(ue,4):0,ce=xe(ue)?F(ue,4):0,me=xe(ue)?F(ue,4):0,ue=xe(ue)?F(ue,4):0,Ee=_.Qa,Fe=0;4>Fe;++Fe){if(Ee.Cb){var ze=Ee.Zb[Fe];Ee.Fb||(ze+=B)}else{if(0<Fe){_.pb[Fe]=_.pb[0];continue}ze=B}var Oe=_.pb[Fe];Oe.Sc[0]=Bu[$s(ze+ie,127)],Oe.Sc[1]=Sf[$s(ze+0,127)],Oe.Eb[0]=2*Bu[$s(ze+X,127)],Oe.Eb[1]=101581*Sf[$s(ze+ce,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=Bu[$s(ze+me,117)],Oe.Qc[1]=Sf[$s(ze+ue,127)],Oe.lc=ze+ue}if(!le.Rb)return zr(_,4,"Not a key frame.");for(xe(oe),le=_.Pa,B=0;4>B;++B){for(ie=0;8>ie;++ie)for(X=0;3>X;++X)for(ce=0;11>ce;++ce)me=ve(oe,P2[B][ie][X][ce])?U(oe,8):j1[B][ie][X][ce],le.Wc[B][ie].Yb[X][ce]=me;for(ie=0;17>ie;++ie)le.Xc[B][ie]=le.Wc[B][K0[ie]]}return _.kc=xe(oe),_.kc&&(_.Bd=U(oe,8)),_.cb=1}function xc(_,A,B,X,ie,oe,le){var ce=A[ie].Yb[B];for(B=0;16>ie;++ie){if(!ve(_,ce[B+0]))return ie;for(;!ve(_,ce[B+1]);)if(ce=A[++ie].Yb[0],B=0,ie==16)return 16;var ue=A[ie+1].Yb;if(ve(_,ce[B+2])){var me=_,Ee=0;if(ve(me,(ze=ce)[(Fe=B)+3]))if(ve(me,ze[Fe+6])){for(ce=0,Fe=2*(Ee=ve(me,ze[Fe+8]))+(ze=ve(me,ze[Fe+9+Ee])),Ee=0,ze=q0[Fe];ze[ce];++ce)Ee+=Ee+ve(me,ze[ce]);Ee+=3+(8<<Fe)}else ve(me,ze[Fe+7])?(Ee=7+2*ve(me,165),Ee+=ve(me,145)):Ee=5+ve(me,159);else Ee=ve(me,ze[Fe+4])?3+ve(me,ze[Fe+5]):2;ce=ue[2]}else Ee=1,ce=ue[1];ue=le+G0[ie],0>(me=_).b&&ge(me);var Fe,ze=me.b,Oe=(Fe=me.Ca>>1)-(me.I>>ze)>>31;--me.b,me.Ca+=Oe,me.Ca|=1,me.I-=(Fe+1&Oe)<<ze,oe[ue]=((Ee^Oe)-Oe)*X[(0<ie)+0]}return 16}function Al(_){var A=_.rb[_.sb-1];A.la=0,A.Na=0,i(_.zc,0,0,_.zc.length),_.ja=0}function vc(_,A){if(_==null)return 0;if(A==null)return zr(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!zh(_,A))return 0;if(e(_.cb),A.ac==null||A.ac(A)){A.ob&&(_.L=0);var B=zc[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=A.v-B>>4,_.zb=A.j-B>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=A.o+15+B>>4,_.Hb=A.va+15+B>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var X=_.ed;for(B=0;4>B;++B){var ie;if(_.Qa.Cb){var oe=_.Qa.Lb[B];_.Qa.Fb||(oe+=X.Tb)}else oe=X.Tb;for(ie=0;1>=ie;++ie){var le=_.gd[B][ie],ce=oe;if(X.Pc&&(ce+=X.vd[0],ie&&(ce+=X.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var ue=ce;0<X.wb&&(ue=4<X.wb?ue>>2:ue>>1)>9-X.wb&&(ue=9-X.wb),1>ue&&(ue=1),le.dd=ue,le.tc=2*ce+ue,le.ld=40<=ce?2:15<=ce?1:0}else le.tc=0;le.La=ie}}}B=0}else zr(_,6,"Frame setup failed"),B=_.a;if(B=B==0){if(B){_.$c=0,0<_.Aa||(_.Ic=Qa);e:{B=_.Ic,X=4*(ue=_.za);var me=32*ue,Ee=ue+1,Fe=0<_.L?ue*(0<_.Aa?2:1):0,ze=(_.Aa==2?2:1)*ue;if((le=X+832+(ie=3*(16*B+zc[_.L])/2*me)+(oe=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=le)B=0;else{if(le>_.Vb){if(_.Vb=0,_.Ec=s(le),_.Fc=0,_.Ec==null){B=zr(_,1,"no memory during frame initialization.");break e}_.Vb=le}le=_.Ec,ce=_.Fc,_.Ac=le,_.Bc=ce,ce+=X,_.Gd=o(me,Bs),_.Hd=0,_.rb=o(Ee+1,Zn),_.sb=1,_.wa=Fe?o(Fe,zn):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=ue),e(!0),_.oc=le,_.pc=ce,ce+=832,_.ya=o(ze,Oo),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=ue),_.R=16*ue,_.B=8*ue,ue=(me=zc[_.L])*_.R,me=me/2*_.B,_.sa=le,_.ta=ce+ue,_.qa=_.sa,_.ra=_.ta+16*B*_.R+me,_.Ha=_.qa,_.Ia=_.ra+8*B*_.B+me,_.$c=0,ce+=ie,_.mb=oe?le:null,_.nb=oe?ce:null,e(ce+oe<=_.Fc+_.Vb),Al(_),i(_.Ac,_.Bc,0,X),B=1}}if(B){if(A.ka=0,A.y=_.sa,A.O=_.ta,A.f=_.qa,A.N=_.ra,A.ea=_.Ha,A.Vd=_.Ia,A.fa=_.R,A.Rc=_.B,A.F=null,A.J=0,!H0){for(B=-255;255>=B;++B)U0[255+B]=0>B?-B:B;for(B=-1020;1020>=B;++B)$0[1020+B]=-128>B?-128:127<B?127:B;for(B=-112;112>=B;++B)W0[112+B]=-16>B?-16:15<B?15:B;for(B=-255;510>=B;++B)V0[255+B]=0>B?0:255<B?255:B;H0=1}$o=Vn,Ru=of,lo=Tl,co=R0,va=xu,Ki=sf,Fl=Nu,Pc=ei,Ja=Cc,zl=df,yf=Ol,wi=Ll,Wo=Ec,qn=Cu,ir=Io,Ir=Ro,Rr=Fo,gs=Wh,fo[0]=ma,fo[1]=Bh,fo[2]=Sc,fo[3]=pa,fo[4]=lf,fo[5]=wu,fo[6]=Pl,fo[7]=bu,fo[8]=$h,fo[9]=_u,Yi[0]=_c,Yi[1]=Uh,Yi[2]=fa,Yi[3]=bc,Yi[4]=Cr,Yi[5]=ha,Yi[6]=Lo,ys[0]=Us,ys[1]=af,ys[2]=F0,ys[3]=qa,ys[4]=kc,ys[5]=Su,ys[6]=cf,B=1}else B=0}B&&(B=function(Oe,ot){for(Oe.M=0;Oe.M<Oe.Va;++Oe.M){var Ze,je=Oe.Jc[Oe.M&Oe.Xb],Pe=Oe.m,rt=Oe;for(Ze=0;Ze<rt.za;++Ze){var nt=Pe,st=rt,Lt=st.Ac,At=st.Bc+4*Ze,en=st.zc,Tt=st.ya[st.aa+Ze];if(st.Qa.Bb?Tt.$b=ve(nt,st.Pa.jb[0])?2+ve(nt,st.Pa.jb[2]):ve(nt,st.Pa.jb[1]):Tt.$b=0,st.kc&&(Tt.Ad=ve(nt,st.Bd)),Tt.Za=!ve(nt,145)+0,Tt.Za){var Bn=Tt.Ob,Un=0;for(st=0;4>st;++st){var Mn,_n=en[0+st];for(Mn=0;4>Mn;++Mn){_n=j2[Lt[At+Mn]][_n];for(var er=T1[ve(nt,_n[0])];0<er;)er=T1[2*er+ve(nt,_n[er])];_n=-er,Lt[At+Mn]=_n}r(Bn,Un,Lt,At,4),Un+=4,en[0+st]=_n}}else _n=ve(nt,156)?ve(nt,128)?1:3:ve(nt,163)?2:0,Tt.Ob[0]=_n,i(Lt,At,_n,4),i(en,0,_n,4);Tt.Dd=ve(nt,142)?ve(nt,114)?ve(nt,183)?1:3:2:0}if(rt.m.Ka)return zr(Oe,7,"Premature end-of-partition0 encountered.");for(;Oe.ja<Oe.za;++Oe.ja){if(rt=je,nt=(Pe=Oe).rb[Pe.sb-1],Lt=Pe.rb[Pe.sb+Pe.ja],Ze=Pe.ya[Pe.aa+Pe.ja],At=Pe.kc?Ze.Ad:0)nt.la=Lt.la=0,Ze.Za||(nt.Na=Lt.Na=0),Ze.Hc=0,Ze.Gc=0,Ze.ia=0;else{var or,mn;if(nt=Lt,Lt=rt,At=Pe.Pa.Xc,en=Pe.ya[Pe.aa+Pe.ja],Tt=Pe.pb[en.$b],st=en.ad,Bn=0,Un=Pe.rb[Pe.sb-1],_n=Mn=0,i(st,Bn,0,384),en.Za)var Ar=0,Ji=At[3];else{er=s(16);var Br=nt.Na+Un.Na;if(Br=Ic(Lt,At[1],Br,Tt.Eb,0,er,0),nt.Na=Un.Na=(0<Br)+0,1<Br)$o(er,0,st,Bn);else{var ni=er[0]+3>>3;for(er=0;256>er;er+=16)st[Bn+er]=ni}Ar=1,Ji=At[0]}var Gn=15&nt.la,Ai=15&Un.la;for(er=0;4>er;++er){var Ti=1&Ai;for(ni=mn=0;4>ni;++ni)Gn=Gn>>1|(Ti=(Br=Ic(Lt,Ji,Br=Ti+(1&Gn),Tt.Sc,Ar,st,Bn))>Ar)<<7,mn=mn<<2|(3<Br?3:1<Br?2:st[Bn+0]!=0),Bn+=16;Gn>>=4,Ai=Ai>>1|Ti<<7,Mn=(Mn<<8|mn)>>>0}for(Ji=Gn,Ar=Ai>>4,or=0;4>or;or+=2){for(mn=0,Gn=nt.la>>4+or,Ai=Un.la>>4+or,er=0;2>er;++er){for(Ti=1&Ai,ni=0;2>ni;++ni)Br=Ti+(1&Gn),Gn=Gn>>1|(Ti=0<(Br=Ic(Lt,At[2],Br,Tt.Qc,0,st,Bn)))<<3,mn=mn<<2|(3<Br?3:1<Br?2:st[Bn+0]!=0),Bn+=16;Gn>>=2,Ai=Ai>>1|Ti<<5}_n|=mn<<4*or,Ji|=Gn<<4<<or,Ar|=(240&Ai)<<or}nt.la=Ji,Un.la=Ar,en.Hc=Mn,en.Gc=_n,en.ia=43690&_n?0:Tt.ia,At=!(Mn|_n)}if(0<Pe.L&&(Pe.wa[Pe.Y+Pe.ja]=Pe.gd[Ze.$b][Ze.Za],Pe.wa[Pe.Y+Pe.ja].La|=!At),rt.Ka)return zr(Oe,7,"Premature end-of-file encountered.")}if(Al(Oe),Pe=ot,rt=1,Ze=(je=Oe).D,nt=0<je.L&&je.M>=je.zb&&je.M<=je.Va,je.Aa==0)e:{if(Ze.M=je.M,Ze.uc=nt,Tu(je,Ze),rt=1,Ze=(mn=je.D).Nb,nt=(_n=zc[je.L])*je.R,Lt=_n/2*je.B,er=16*Ze*je.R,ni=8*Ze*je.B,At=je.sa,en=je.ta-nt+er,Tt=je.qa,st=je.ra-Lt+ni,Bn=je.Ha,Un=je.Ia-Lt+ni,Ai=(Gn=mn.M)==0,Mn=Gn>=je.Va-1,je.Aa==2&&Tu(je,mn),mn.uc)for(Ti=(Br=je).D.M,e(Br.D.uc),mn=Br.yb;mn<Br.Hb;++mn){Ar=mn,Ji=Ti;var Tr=(ri=(Kn=Br).D).Nb;or=Kn.R;var ri=ri.wa[ri.Y+Ar],_i=Kn.sa,bs=Kn.ta+16*Tr*or+16*Ar,ho=ri.dd,jr=ri.tc;if(jr!=0)if(e(3<=jr),Kn.L==1)0<Ar&&Ir(_i,bs,or,jr+4),ri.La&&gs(_i,bs,or,jr),0<Ji&&ir(_i,bs,or,jr+4),ri.La&&Rr(_i,bs,or,jr);else{var qr=Kn.B,Vs=Kn.qa,Wl=Kn.ra+8*Tr*qr+8*Ar,el=Kn.Ha,Kn=Kn.Ia+8*Tr*qr+8*Ar;Tr=ri.ld,0<Ar&&(Pc(_i,bs,or,jr+4,ho,Tr),zl(Vs,Wl,el,Kn,qr,jr+4,ho,Tr)),ri.La&&(wi(_i,bs,or,jr,ho,Tr),qn(Vs,Wl,el,Kn,qr,jr,ho,Tr)),0<Ji&&(Fl(_i,bs,or,jr+4,ho,Tr),Ja(Vs,Wl,el,Kn,qr,jr+4,ho,Tr)),ri.La&&(yf(_i,bs,or,jr,ho,Tr),Wo(Vs,Wl,el,Kn,qr,jr,ho,Tr))}}if(je.ia&&alert("todo:DitherRow"),Pe.put!=null){if(mn=16*Gn,Gn=16*(Gn+1),Ai?(Pe.y=je.sa,Pe.O=je.ta+er,Pe.f=je.qa,Pe.N=je.ra+ni,Pe.ea=je.Ha,Pe.W=je.Ia+ni):(mn-=_n,Pe.y=At,Pe.O=en,Pe.f=Tt,Pe.N=st,Pe.ea=Bn,Pe.W=Un),Mn||(Gn-=_n),Gn>Pe.o&&(Gn=Pe.o),Pe.F=null,Pe.J=null,je.Fa!=null&&0<je.Fa.length&&mn<Gn&&(Pe.J=hf(je,Pe,mn,Gn-mn),Pe.F=je.mb,Pe.F==null&&Pe.F.length==0)){rt=zr(je,3,"Could not decode alpha data.");break e}mn<Pe.j&&(_n=Pe.j-mn,mn=Pe.j,e(!(1&_n)),Pe.O+=je.R*_n,Pe.N+=je.B*(_n>>1),Pe.W+=je.B*(_n>>1),Pe.F!=null&&(Pe.J+=Pe.width*_n)),mn<Gn&&(Pe.O+=Pe.v,Pe.N+=Pe.v>>1,Pe.W+=Pe.v>>1,Pe.F!=null&&(Pe.J+=Pe.v),Pe.ka=mn-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=Gn-mn,rt=Pe.put(Pe))}Ze+1!=je.Ic||Mn||(r(je.sa,je.ta-nt,At,en+16*je.R,nt),r(je.qa,je.ra-Lt,Tt,st+8*je.B,Lt),r(je.Ha,je.Ia-Lt,Bn,Un+8*je.B,Lt))}if(!rt)return zr(Oe,6,"Output aborted.")}return 1}(_,A)),A.bc!=null&&A.bc(A),B&=1}return B?(_.cb=0,B):0}function fs(_,A,B,X,ie){ie=_[A+B+32*X]+(ie>>3),_[A+B+32*X]=-256&ie?0>ie?0:255:ie}function yu(_,A,B,X,ie,oe){fs(_,A,0,B,X+ie),fs(_,A,1,B,X+oe),fs(_,A,2,B,X-oe),fs(_,A,3,B,X-ie)}function hs(_){return(20091*_>>16)+_}function wc(_,A,B,X){var ie,oe=0,le=s(16);for(ie=0;4>ie;++ie){var ce=_[A+0]+_[A+8],ue=_[A+0]-_[A+8],me=(35468*_[A+4]>>16)-hs(_[A+12]),Ee=hs(_[A+4])+(35468*_[A+12]>>16);le[oe+0]=ce+Ee,le[oe+1]=ue+me,le[oe+2]=ue-me,le[oe+3]=ce-Ee,oe+=4,A++}for(ie=oe=0;4>ie;++ie)ce=(_=le[oe+0]+4)+le[oe+8],ue=_-le[oe+8],me=(35468*le[oe+4]>>16)-hs(le[oe+12]),fs(B,X,0,0,ce+(Ee=hs(le[oe+4])+(35468*le[oe+12]>>16))),fs(B,X,1,0,ue+me),fs(B,X,2,0,ue-me),fs(B,X,3,0,ce-Ee),oe++,X+=32}function sf(_,A,B,X){var ie=_[A+0]+4,oe=35468*_[A+4]>>16,le=hs(_[A+4]),ce=35468*_[A+1]>>16;yu(B,X,0,ie+le,_=hs(_[A+1]),ce),yu(B,X,1,ie+oe,_,ce),yu(B,X,2,ie-oe,_,ce),yu(B,X,3,ie-le,_,ce)}function of(_,A,B,X,ie){wc(_,A,B,X),ie&&wc(_,A+16,B,X+4)}function Tl(_,A,B,X){Ru(_,A+0,B,X,1),Ru(_,A+32,B,X+128,1)}function R0(_,A,B,X){var ie;for(_=_[A+0]+4,ie=0;4>ie;++ie)for(A=0;4>A;++A)fs(B,X,A,ie,_)}function xu(_,A,B,X){_[A+0]&&co(_,A+0,B,X),_[A+16]&&co(_,A+16,B,X+4),_[A+32]&&co(_,A+32,B,X+128),_[A+48]&&co(_,A+48,B,X+128+4)}function Vn(_,A,B,X){var ie,oe=s(16);for(ie=0;4>ie;++ie){var le=_[A+0+ie]+_[A+12+ie],ce=_[A+4+ie]+_[A+8+ie],ue=_[A+4+ie]-_[A+8+ie],me=_[A+0+ie]-_[A+12+ie];oe[0+ie]=le+ce,oe[8+ie]=le-ce,oe[4+ie]=me+ue,oe[12+ie]=me-ue}for(ie=0;4>ie;++ie)le=(_=oe[0+4*ie]+3)+oe[3+4*ie],ce=oe[1+4*ie]+oe[2+4*ie],ue=oe[1+4*ie]-oe[2+4*ie],me=_-oe[3+4*ie],B[X+0]=le+ce>>3,B[X+16]=me+ue>>3,B[X+32]=le-ce>>3,B[X+48]=me-ue>>3,X+=64}function vu(_,A,B){var X,ie=A-32,oe=Xi,le=255-_[ie-1];for(X=0;X<B;++X){var ce,ue=oe,me=le+_[A-1];for(ce=0;ce<B;++ce)_[A+ce]=ue[me+_[ie+ce]];A+=32}}function Bh(_,A){vu(_,A,4)}function af(_,A){vu(_,A,8)}function Uh(_,A){vu(_,A,16)}function fa(_,A){var B;for(B=0;16>B;++B)r(_,A+32*B,_,A-32,16)}function bc(_,A){var B;for(B=16;0<B;--B)i(_,A,_[A-1],16),A+=32}function jl(_,A,B){var X;for(X=0;16>X;++X)i(A,B+32*X,_,16)}function _c(_,A){var B,X=16;for(B=0;16>B;++B)X+=_[A-1+32*B]+_[A+B-32];jl(X>>5,_,A)}function Cr(_,A){var B,X=8;for(B=0;16>B;++B)X+=_[A-1+32*B];jl(X>>4,_,A)}function ha(_,A){var B,X=8;for(B=0;16>B;++B)X+=_[A+B-32];jl(X>>4,_,A)}function Lo(_,A){jl(128,_,A)}function cn(_,A,B){return _+2*A+B+2>>2}function Sc(_,A){var B,X=A-32;for(X=new Uint8Array([cn(_[X-1],_[X+0],_[X+1]),cn(_[X+0],_[X+1],_[X+2]),cn(_[X+1],_[X+2],_[X+3]),cn(_[X+2],_[X+3],_[X+4])]),B=0;4>B;++B)r(_,A+32*B,X,0,X.length)}function pa(_,A){var B=_[A-1],X=_[A-1+32],ie=_[A-1+64],oe=_[A-1+96];Ne(_,A+0,16843009*cn(_[A-1-32],B,X)),Ne(_,A+32,16843009*cn(B,X,ie)),Ne(_,A+64,16843009*cn(X,ie,oe)),Ne(_,A+96,16843009*cn(ie,oe,oe))}function ma(_,A){var B,X=4;for(B=0;4>B;++B)X+=_[A+B-32]+_[A-1+32*B];for(X>>=3,B=0;4>B;++B)i(_,A+32*B,X,4)}function lf(_,A){var B=_[A-1+0],X=_[A-1+32],ie=_[A-1+64],oe=_[A-1-32],le=_[A+0-32],ce=_[A+1-32],ue=_[A+2-32],me=_[A+3-32];_[A+0+96]=cn(X,ie,_[A-1+96]),_[A+1+96]=_[A+0+64]=cn(B,X,ie),_[A+2+96]=_[A+1+64]=_[A+0+32]=cn(oe,B,X),_[A+3+96]=_[A+2+64]=_[A+1+32]=_[A+0+0]=cn(le,oe,B),_[A+3+64]=_[A+2+32]=_[A+1+0]=cn(ce,le,oe),_[A+3+32]=_[A+2+0]=cn(ue,ce,le),_[A+3+0]=cn(me,ue,ce)}function Pl(_,A){var B=_[A+1-32],X=_[A+2-32],ie=_[A+3-32],oe=_[A+4-32],le=_[A+5-32],ce=_[A+6-32],ue=_[A+7-32];_[A+0+0]=cn(_[A+0-32],B,X),_[A+1+0]=_[A+0+32]=cn(B,X,ie),_[A+2+0]=_[A+1+32]=_[A+0+64]=cn(X,ie,oe),_[A+3+0]=_[A+2+32]=_[A+1+64]=_[A+0+96]=cn(ie,oe,le),_[A+3+32]=_[A+2+64]=_[A+1+96]=cn(oe,le,ce),_[A+3+64]=_[A+2+96]=cn(le,ce,ue),_[A+3+96]=cn(ce,ue,ue)}function wu(_,A){var B=_[A-1+0],X=_[A-1+32],ie=_[A-1+64],oe=_[A-1-32],le=_[A+0-32],ce=_[A+1-32],ue=_[A+2-32],me=_[A+3-32];_[A+0+0]=_[A+1+64]=oe+le+1>>1,_[A+1+0]=_[A+2+64]=le+ce+1>>1,_[A+2+0]=_[A+3+64]=ce+ue+1>>1,_[A+3+0]=ue+me+1>>1,_[A+0+96]=cn(ie,X,B),_[A+0+64]=cn(X,B,oe),_[A+0+32]=_[A+1+96]=cn(B,oe,le),_[A+1+32]=_[A+2+96]=cn(oe,le,ce),_[A+2+32]=_[A+3+96]=cn(le,ce,ue),_[A+3+32]=cn(ce,ue,me)}function bu(_,A){var B=_[A+0-32],X=_[A+1-32],ie=_[A+2-32],oe=_[A+3-32],le=_[A+4-32],ce=_[A+5-32],ue=_[A+6-32],me=_[A+7-32];_[A+0+0]=B+X+1>>1,_[A+1+0]=_[A+0+64]=X+ie+1>>1,_[A+2+0]=_[A+1+64]=ie+oe+1>>1,_[A+3+0]=_[A+2+64]=oe+le+1>>1,_[A+0+32]=cn(B,X,ie),_[A+1+32]=_[A+0+96]=cn(X,ie,oe),_[A+2+32]=_[A+1+96]=cn(ie,oe,le),_[A+3+32]=_[A+2+96]=cn(oe,le,ce),_[A+3+64]=cn(le,ce,ue),_[A+3+96]=cn(ce,ue,me)}function _u(_,A){var B=_[A-1+0],X=_[A-1+32],ie=_[A-1+64],oe=_[A-1+96];_[A+0+0]=B+X+1>>1,_[A+2+0]=_[A+0+32]=X+ie+1>>1,_[A+2+32]=_[A+0+64]=ie+oe+1>>1,_[A+1+0]=cn(B,X,ie),_[A+3+0]=_[A+1+32]=cn(X,ie,oe),_[A+3+32]=_[A+1+64]=cn(ie,oe,oe),_[A+3+64]=_[A+2+64]=_[A+0+96]=_[A+1+96]=_[A+2+96]=_[A+3+96]=oe}function $h(_,A){var B=_[A-1+0],X=_[A-1+32],ie=_[A-1+64],oe=_[A-1+96],le=_[A-1-32],ce=_[A+0-32],ue=_[A+1-32],me=_[A+2-32];_[A+0+0]=_[A+2+32]=B+le+1>>1,_[A+0+32]=_[A+2+64]=X+B+1>>1,_[A+0+64]=_[A+2+96]=ie+X+1>>1,_[A+0+96]=oe+ie+1>>1,_[A+3+0]=cn(ce,ue,me),_[A+2+0]=cn(le,ce,ue),_[A+1+0]=_[A+3+32]=cn(B,le,ce),_[A+1+32]=_[A+3+64]=cn(X,B,le),_[A+1+64]=_[A+3+96]=cn(ie,X,B),_[A+1+96]=cn(oe,ie,X)}function F0(_,A){var B;for(B=0;8>B;++B)r(_,A+32*B,_,A-32,8)}function qa(_,A){var B;for(B=0;8>B;++B)i(_,A,_[A-1],8),A+=32}function Mo(_,A,B){var X;for(X=0;8>X;++X)i(A,B+32*X,_,8)}function Us(_,A){var B,X=8;for(B=0;8>B;++B)X+=_[A+B-32]+_[A-1+32*B];Mo(X>>4,_,A)}function Su(_,A){var B,X=4;for(B=0;8>B;++B)X+=_[A+B-32];Mo(X>>3,_,A)}function kc(_,A){var B,X=4;for(B=0;8>B;++B)X+=_[A-1+32*B];Mo(X>>3,_,A)}function cf(_,A){Mo(128,_,A)}function Dl(_,A,B){var X=_[A-B],ie=_[A+0],oe=3*(ie-X)+ba[1020+_[A-2*B]-_[A+B]],le=Fu[112+(oe+4>>3)];_[A-B]=Xi[255+X+Fu[112+(oe+3>>3)]],_[A+0]=Xi[255+ie-le]}function Nc(_,A,B,X){var ie=_[A+0],oe=_[A+B];return uo[255+_[A-2*B]-_[A-B]]>X||uo[255+oe-ie]>X}function ku(_,A,B,X){return 4*uo[255+_[A-B]-_[A+0]]+uo[255+_[A-2*B]-_[A+B]]<=X}function uf(_,A,B,X,ie){var oe=_[A-3*B],le=_[A-2*B],ce=_[A-B],ue=_[A+0],me=_[A+B],Ee=_[A+2*B],Fe=_[A+3*B];return 4*uo[255+ce-ue]+uo[255+le-me]>X?0:uo[255+_[A-4*B]-oe]<=ie&&uo[255+oe-le]<=ie&&uo[255+le-ce]<=ie&&uo[255+Fe-Ee]<=ie&&uo[255+Ee-me]<=ie&&uo[255+me-ue]<=ie}function Io(_,A,B,X){var ie=2*X+1;for(X=0;16>X;++X)ku(_,A+X,B,ie)&&Dl(_,A+X,B)}function Ro(_,A,B,X){var ie=2*X+1;for(X=0;16>X;++X)ku(_,A+X*B,1,ie)&&Dl(_,A+X*B,1)}function Fo(_,A,B,X){var ie;for(ie=3;0<ie;--ie)Io(_,A+=4*B,B,X)}function Wh(_,A,B,X){var ie;for(ie=3;0<ie;--ie)Ro(_,A+=4,B,X)}function zo(_,A,B,X,ie,oe,le,ce){for(oe=2*oe+1;0<ie--;){if(uf(_,A,B,oe,le))if(Nc(_,A,B,ce))Dl(_,A,B);else{var ue=_,me=A,Ee=B,Fe=ue[me-2*Ee],ze=ue[me-Ee],Oe=ue[me+0],ot=ue[me+Ee],Ze=ue[me+2*Ee],je=27*(rt=ba[1020+3*(Oe-ze)+ba[1020+Fe-ot]])+63>>7,Pe=18*rt+63>>7,rt=9*rt+63>>7;ue[me-3*Ee]=Xi[255+ue[me-3*Ee]+rt],ue[me-2*Ee]=Xi[255+Fe+Pe],ue[me-Ee]=Xi[255+ze+je],ue[me+0]=Xi[255+Oe-je],ue[me+Ee]=Xi[255+ot-Pe],ue[me+2*Ee]=Xi[255+Ze-rt]}A+=X}}function ps(_,A,B,X,ie,oe,le,ce){for(oe=2*oe+1;0<ie--;){if(uf(_,A,B,oe,le))if(Nc(_,A,B,ce))Dl(_,A,B);else{var ue=_,me=A,Ee=B,Fe=ue[me-Ee],ze=ue[me+0],Oe=ue[me+Ee],ot=Fu[112+((Ze=3*(ze-Fe))+4>>3)],Ze=Fu[112+(Ze+3>>3)],je=ot+1>>1;ue[me-2*Ee]=Xi[255+ue[me-2*Ee]+je],ue[me-Ee]=Xi[255+Fe+Ze],ue[me+0]=Xi[255+ze-ot],ue[me+Ee]=Xi[255+Oe-je]}A+=X}}function Nu(_,A,B,X,ie,oe){zo(_,A,B,1,16,X,ie,oe)}function ei(_,A,B,X,ie,oe){zo(_,A,1,B,16,X,ie,oe)}function Ol(_,A,B,X,ie,oe){var le;for(le=3;0<le;--le)ps(_,A+=4*B,B,1,16,X,ie,oe)}function Ll(_,A,B,X,ie,oe){var le;for(le=3;0<le;--le)ps(_,A+=4,1,B,16,X,ie,oe)}function Cc(_,A,B,X,ie,oe,le,ce){zo(_,A,ie,1,8,oe,le,ce),zo(B,X,ie,1,8,oe,le,ce)}function df(_,A,B,X,ie,oe,le,ce){zo(_,A,1,ie,8,oe,le,ce),zo(B,X,1,ie,8,oe,le,ce)}function Ec(_,A,B,X,ie,oe,le,ce){ps(_,A+4*ie,ie,1,8,oe,le,ce),ps(B,X+4*ie,ie,1,8,oe,le,ce)}function Cu(_,A,B,X,ie,oe,le,ce){ps(_,A+4,1,ie,8,oe,le,ce),ps(B,X+4,1,ie,8,oe,le,ce)}function ga(){this.ba=new vr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ml(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Eu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vh(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new M}function z0(){this.xb=this.a=0,this.l=new da,this.ca=new vr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vh,this.ab=0,this.gc=o(4,Eu),this.Oc=0}function Au(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new da,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ga(_,A,B,X,ie,oe,le){for(_=_==null?0:_[A+0],A=0;A<le;++A)ie[oe+A]=_+B[X+A]&255,_=ie[oe+A]}function ff(_,A,B,X,ie,oe,le){var ce;if(_==null)Ga(null,null,B,X,ie,oe,le);else for(ce=0;ce<le;++ce)ie[oe+ce]=_[A+ce]+B[X+ce]&255}function Il(_,A,B,X,ie,oe,le){if(_==null)Ga(null,null,B,X,ie,oe,le);else{var ce,ue=_[A+0],me=ue,Ee=ue;for(ce=0;ce<le;++ce)me=Ee+(ue=_[A+ce])-me,Ee=B[X+ce]+(-256&me?0>me?0:255:me)&255,me=ue,ie[oe+ce]=Ee}}function hf(_,A,B,X){var ie=A.width,oe=A.o;if(e(_!=null&&A!=null),0>B||0>=X||B+X>oe)return null;if(!_.Cc){if(_.ga==null){var le;if(_.ga=new Au,(le=_.ga==null)||(le=A.width*A.o,e(_.Gb.length==0),_.Gb=s(le),_.Uc=0,_.Gb==null?le=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,le=1),le=!le),!le){le=_.ga;var ce=_.Fa,ue=_.P,me=_.qc,Ee=_.mb,Fe=_.nb,ze=ue+1,Oe=me-1,ot=le.l;if(e(ce!=null&&Ee!=null&&A!=null),Ei[0]=null,Ei[1]=Ga,Ei[2]=ff,Ei[3]=Il,le.ca=Ee,le.tb=Fe,le.c=A.width,le.i=A.height,e(0<le.c&&0<le.i),1>=me)A=0;else if(le.$a=ce[ue+0]>>0&3,le.Z=ce[ue+0]>>2&3,le.Lc=ce[ue+0]>>4&3,ue=ce[ue+0]>>6&3,0>le.$a||1<le.$a||4<=le.Z||1<le.Lc||ue)A=0;else if(ot.put=On,ot.ac=xn,ot.bc=Sr,ot.ma=le,ot.width=A.width,ot.height=A.height,ot.Da=A.Da,ot.v=A.v,ot.va=A.va,ot.j=A.j,ot.o=A.o,le.$a)e:{e(le.$a==1),A=Ye();t:for(;;){if(A==null){A=0;break e}if(e(le!=null),le.mc=A,A.c=le.c,A.i=le.i,A.l=le.l,A.l.ma=le,A.l.width=le.c,A.l.height=le.i,A.a=0,J(A.m,ce,ze,Oe),!Me(le.c,le.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&de(A.s)?(le.ic=1,ce=A.c*A.i,A.Ta=null,A.Ua=0,A.V=s(ce),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(le.ic=0,A=Ie(A,le.c)),!A))break t;A=1;break e}le.mc=null,A=0}else A=Oe>=le.c*le.i;le=!A}if(le)return null;_.ga.Lc!=1?_.Ga=0:X=oe-B}e(_.ga!=null),e(B+X<=oe);e:{if(A=(ce=_.ga).c,oe=ce.l.o,ce.$a==0){if(ze=_.rc,Oe=_.Vc,ot=_.Fa,ue=_.P+1+B*A,me=_.mb,Ee=_.nb+B*A,e(ue<=_.P+_.qc),ce.Z!=0)for(e(Ei[ce.Z]!=null),le=0;le<X;++le)Ei[ce.Z](ze,Oe,ot,ue,me,Ee,A),ze=me,Oe=Ee,Ee+=A,ue+=A;else for(le=0;le<X;++le)r(me,Ee,ot,ue,A),ze=me,Oe=Ee,Ee+=A,ue+=A;_.rc=ze,_.Vc=Oe}else{if(e(ce.mc!=null),A=B+X,e((le=ce.mc)!=null),e(A<=le.i),le.C>=A)A=1;else if(ce.ic||Re(),ce.ic){ce=le.V,ze=le.Ba,Oe=le.c;var Ze=le.i,je=(ot=1,ue=le.$/Oe,me=le.$%Oe,Ee=le.m,Fe=le.s,le.$),Pe=Oe*Ze,rt=Oe*A,nt=Fe.wc,st=je<rt?Et(Fe,me,ue):null;e(je<=Pe),e(A<=Ze),e(de(Fe));t:for(;;){for(;!Ee.h&&je<rt;){if(me&nt||(st=Et(Fe,me,ue)),e(st!=null),te(Ee),256>(Ze=vt(st.G[0],st.H[0],Ee)))ce[ze+je]=Ze,++je,++me>=Oe&&(me=0,++ue<=A&&!(ue%16)&&we(le,ue));else{if(!(280>Ze)){ot=0;break t}Ze=pe(Ze-256,Ee);var Lt,At=vt(st.G[4],st.H[4],Ee);if(te(Ee),!(je>=(At=Qe(Oe,At=pe(At,Ee)))&&Pe-je>=Ze)){ot=0;break t}for(Lt=0;Lt<Ze;++Lt)ce[ze+je+Lt]=ce[ze+je+Lt-At];for(je+=Ze,me+=Ze;me>=Oe;)me-=Oe,++ue<=A&&!(ue%16)&&we(le,ue);je<rt&&me&nt&&(st=Et(Fe,me,ue))}e(Ee.h==V(Ee))}we(le,ue>A?A:ue);break t}!ot||Ee.h&&je<Pe?(ot=0,le.a=Ee.h?5:3):le.$=je,A=ot}else A=be(le,le.V,le.Ba,le.c,le.i,A,$e);if(!A){X=0;break e}}B+X>=oe&&(_.Cc=1),X=1}if(!X)return null;if(_.Cc&&((X=_.ga)!=null&&(X.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+B*ie}function I(_,A,B,X,ie,oe){for(;0<ie--;){var le,ce=_,ue=A+(B?1:0),me=_,Ee=A+(B?0:3);for(le=0;le<X;++le){var Fe=me[Ee+4*le];Fe!=255&&(Fe*=32897,ce[ue+4*le+0]=ce[ue+4*le+0]*Fe>>23,ce[ue+4*le+1]=ce[ue+4*le+1]*Fe>>23,ce[ue+4*le+2]=ce[ue+4*le+2]*Fe>>23)}A+=oe}}function se(_,A,B,X,ie){for(;0<X--;){var oe;for(oe=0;oe<B;++oe){var le=_[A+2*oe+0],ce=15&(me=_[A+2*oe+1]),ue=4369*ce,me=(240&me|me>>4)*ue>>16;_[A+2*oe+0]=(240&le|le>>4)*ue>>16&240|(15&le|le<<4)*ue>>16>>4&15,_[A+2*oe+1]=240&me|ce}A+=ie}}function _e(_,A,B,X,ie,oe,le,ce){var ue,me,Ee=255;for(me=0;me<ie;++me){for(ue=0;ue<X;++ue){var Fe=_[A+ue];oe[le+4*ue]=Fe,Ee&=Fe}A+=B,le+=ce}return Ee!=255}function Ce(_,A,B,X,ie){var oe;for(oe=0;oe<ie;++oe)B[X+oe]=_[A+oe]>>8}function Re(){wa=I,Dc=se,Oc=_e,B0=Ce}function tt(_,A,B){N[_]=function(X,ie,oe,le,ce,ue,me,Ee,Fe,ze,Oe,ot,Ze,je,Pe,rt,nt){var st,Lt=nt-1>>1,At=ce[ue+0]|me[Ee+0]<<16,en=Fe[ze+0]|Oe[ot+0]<<16;e(X!=null);var Tt=3*At+en+131074>>2;for(A(X[ie+0],255&Tt,Tt>>16,Ze,je),oe!=null&&(Tt=3*en+At+131074>>2,A(oe[le+0],255&Tt,Tt>>16,Pe,rt)),st=1;st<=Lt;++st){var Bn=ce[ue+st]|me[Ee+st]<<16,Un=Fe[ze+st]|Oe[ot+st]<<16,Mn=At+Bn+en+Un+524296,_n=Mn+2*(Bn+en)>>3;Tt=_n+At>>1,At=(Mn=Mn+2*(At+Un)>>3)+Bn>>1,A(X[ie+2*st-1],255&Tt,Tt>>16,Ze,je+(2*st-1)*B),A(X[ie+2*st-0],255&At,At>>16,Ze,je+(2*st-0)*B),oe!=null&&(Tt=Mn+en>>1,At=_n+Un>>1,A(oe[le+2*st-1],255&Tt,Tt>>16,Pe,rt+(2*st-1)*B),A(oe[le+2*st+0],255&At,At>>16,Pe,rt+(2*st+0)*B)),At=Bn,en=Un}1&nt||(Tt=3*At+en+131074>>2,A(X[ie+nt-1],255&Tt,Tt>>16,Ze,je+(nt-1)*B),oe!=null&&(Tt=3*en+At+131074>>2,A(oe[le+nt-1],255&Tt,Tt>>16,Pe,rt+(nt-1)*B)))}}function mt(){xs[Gh]=D2,xs[Bl]=Ul,xs[C1]=O2,xs[xf]=$u,xs[vf]=Rc,xs[cr]=kf,xs[Kh]=X0,xs[zu]=Ul,xs[Lc]=$u,xs[wf]=Rc,xs[bf]=kf}function Ot(_){return _&-16384?0>_?0:255:_>>$l}function Qt(_,A){return Ot((19077*_>>8)+(26149*A>>8)-14234)}function vn(_,A,B){return Ot((19077*_>>8)-(6419*A>>8)-(13320*B>>8)+8708)}function Sn(_,A){return Ot((19077*_>>8)+(33050*A>>8)-17685)}function Ln(_,A,B,X,ie){X[ie+0]=Qt(_,B),X[ie+1]=vn(_,A,B),X[ie+2]=Sn(_,A)}function Er(_,A,B,X,ie){X[ie+0]=Sn(_,A),X[ie+1]=vn(_,A,B),X[ie+2]=Qt(_,B)}function Mr(_,A,B,X,ie){var oe=vn(_,A,B);A=oe<<3&224|Sn(_,A)>>3,X[ie+0]=248&Qt(_,B)|oe>>5,X[ie+1]=A}function Hr(_,A,B,X,ie){var oe=240&Sn(_,A)|15;X[ie+0]=240&Qt(_,B)|vn(_,A,B)>>4,X[ie+1]=oe}function Ci(_,A,B,X,ie){X[ie+0]=255,Ln(_,A,B,X,ie+1)}function fi(_,A,B,X,ie){Er(_,A,B,X,ie),X[ie+3]=255}function Bo(_,A,B,X,ie){Ln(_,A,B,X,ie),X[ie+3]=255}function $s(_,A){return 0>_?0:_>A?A:_}function Uo(_,A,B){N[_]=function(X,ie,oe,le,ce,ue,me,Ee,Fe){for(var ze=Ee+(-2&Fe)*B;Ee!=ze;)A(X[ie+0],oe[le+0],ce[ue+0],me,Ee),A(X[ie+1],oe[le+0],ce[ue+0],me,Ee+B),ie+=2,++le,++ue,Ee+=2*B;1&Fe&&A(X[ie+0],oe[le+0],ce[ue+0],me,Ee)}}function Rl(_,A,B){return B==0?_==0?A==0?6:5:A==0?4:0:B}function pf(_,A,B,X,ie){switch(_>>>30){case 3:Ru(A,B,X,ie,0);break;case 2:Ki(A,B,X,ie);break;case 1:co(A,B,X,ie)}}function Tu(_,A){var B,X,ie=A.M,oe=A.Nb,le=_.oc,ce=_.pc+40,ue=_.oc,me=_.pc+584,Ee=_.oc,Fe=_.pc+600;for(B=0;16>B;++B)le[ce+32*B-1]=129;for(B=0;8>B;++B)ue[me+32*B-1]=129,Ee[Fe+32*B-1]=129;for(0<ie?le[ce-1-32]=ue[me-1-32]=Ee[Fe-1-32]=129:(i(le,ce-32-1,127,21),i(ue,me-32-1,127,9),i(Ee,Fe-32-1,127,9)),X=0;X<_.za;++X){var ze=A.ya[A.aa+X];if(0<X){for(B=-1;16>B;++B)r(le,ce+32*B-4,le,ce+32*B+12,4);for(B=-1;8>B;++B)r(ue,me+32*B-4,ue,me+32*B+4,4),r(Ee,Fe+32*B-4,Ee,Fe+32*B+4,4)}var Oe=_.Gd,ot=_.Hd+X,Ze=ze.ad,je=ze.Hc;if(0<ie&&(r(le,ce-32,Oe[ot].y,0,16),r(ue,me-32,Oe[ot].f,0,8),r(Ee,Fe-32,Oe[ot].ea,0,8)),ze.Za){var Pe=le,rt=ce-32+16;for(0<ie&&(X>=_.za-1?i(Pe,rt,Oe[ot].y[15],4):r(Pe,rt,Oe[ot+1].y,0,4)),B=0;4>B;B++)Pe[rt+128+B]=Pe[rt+256+B]=Pe[rt+384+B]=Pe[rt+0+B];for(B=0;16>B;++B,je<<=2)Pe=le,rt=ce+Y0[B],fo[ze.Ob[B]](Pe,rt),pf(je,Ze,16*+B,Pe,rt)}else if(Pe=Rl(X,ie,ze.Ob[0]),Yi[Pe](le,ce),je!=0)for(B=0;16>B;++B,je<<=2)pf(je,Ze,16*+B,le,ce+Y0[B]);for(B=ze.Gc,Pe=Rl(X,ie,ze.Dd),ys[Pe](ue,me),ys[Pe](Ee,Fe),je=Ze,Pe=ue,rt=me,255&(ze=B>>0)&&(170&ze?lo(je,256,Pe,rt):va(je,256,Pe,rt)),ze=Ee,je=Fe,255&(B>>=8)&&(170&B?lo(Ze,320,ze,je):va(Ze,320,ze,je)),ie<_.Ub-1&&(r(Oe[ot].y,0,le,ce+480,16),r(Oe[ot].f,0,ue,me+224,8),r(Oe[ot].ea,0,Ee,Fe+224,8)),B=8*oe*_.B,Oe=_.sa,ot=_.ta+16*X+16*oe*_.R,Ze=_.qa,ze=_.ra+8*X+B,je=_.Ha,Pe=_.Ia+8*X+B,B=0;16>B;++B)r(Oe,ot+B*_.R,le,ce+32*B,16);for(B=0;8>B;++B)r(Ze,ze+B*_.B,ue,me+32*B,8),r(je,Pe+B*_.B,Ee,Fe+32*B,8)}}function Ac(_,A,B,X,ie,oe,le,ce,ue){var me=[0],Ee=[0],Fe=0,ze=ue!=null?ue.kd:0,Oe=ue??new Ml;if(_==null||12>B)return 7;Oe.data=_,Oe.w=A,Oe.ha=B,A=[A],B=[B],Oe.gb=[Oe.gb];e:{var ot=A,Ze=B,je=Oe.gb;if(e(_!=null),e(Ze!=null),e(je!=null),je[0]=0,12<=Ze[0]&&!n(_,ot[0],"RIFF")){if(n(_,ot[0]+8,"WEBP")){je=3;break e}var Pe=qe(_,ot[0]+4);if(12>Pe||4294967286<Pe){je=3;break e}if(ze&&Pe>Ze[0]-8){je=7;break e}je[0]=Pe,ot[0]+=12,Ze[0]-=12}je=0}if(je!=0)return je;for(Pe=0<Oe.gb[0],B=B[0];;){e:{var rt=_;Ze=A,je=B;var nt=me,st=Ee,Lt=ot=[0];if((Tt=Fe=[Fe])[0]=0,8>je[0])je=7;else{if(!n(rt,Ze[0],"VP8X")){if(qe(rt,Ze[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var At=qe(rt,Ze[0]+8),en=1+Ke(rt,Ze[0]+12);if(2147483648<=en*(rt=1+Ke(rt,Ze[0]+15))){je=3;break e}Lt!=null&&(Lt[0]=At),nt!=null&&(nt[0]=en),st!=null&&(st[0]=rt),Ze[0]+=18,je[0]-=18,Tt[0]=1}je=0}}if(Fe=Fe[0],ot=ot[0],je!=0)return je;if(Ze=!!(2&ot),!Pe&&Fe)return 3;if(oe!=null&&(oe[0]=!!(16&ot)),le!=null&&(le[0]=Ze),ce!=null&&(ce[0]=0),le=me[0],ot=Ee[0],Fe&&Ze&&ue==null){je=0;break}if(4>B){je=7;break}if(Pe&&Fe||!Pe&&!Fe&&!n(_,A[0],"ALPH")){B=[B],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{At=_,je=A,Pe=B;var Tt=Oe.gb;nt=Oe.na,st=Oe.P,Lt=Oe.Sa,en=22,e(At!=null),e(Pe!=null),rt=je[0];var Bn=Pe[0];for(e(nt!=null),e(Lt!=null),nt[0]=null,st[0]=null,Lt[0]=0;;){if(je[0]=rt,Pe[0]=Bn,8>Bn){je=7;break e}var Un=qe(At,rt+4);if(4294967286<Un){je=3;break e}var Mn=8+Un+1&-2;if(en+=Mn,0<Tt&&en>Tt){je=3;break e}if(!n(At,rt,"VP8 ")||!n(At,rt,"VP8L")){je=0;break e}if(Bn[0]<Mn){je=7;break e}n(At,rt,"ALPH")||(nt[0]=At,st[0]=rt+8,Lt[0]=Un),rt+=Mn,Bn-=Mn}}if(B=B[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],je!=0)break}B=[B],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(Tt=_,je=A,Pe=B,nt=Oe.gb[0],st=Oe.Ja,Lt=Oe.xa,At=je[0],rt=!n(Tt,At,"VP8 "),en=!n(Tt,At,"VP8L"),e(Tt!=null),e(Pe!=null),e(st!=null),e(Lt!=null),8>Pe[0])je=7;else{if(rt||en){if(Tt=qe(Tt,At+4),12<=nt&&Tt>nt-12){je=3;break e}if(ze&&Tt>Pe[0]-8){je=7;break e}st[0]=Tt,je[0]+=8,Pe[0]-=8,Lt[0]=en}else Lt[0]=5<=Pe[0]&&Tt[At+0]==47&&!(Tt[At+4]>>5),st[0]=Pe[0];je=0}if(B=B[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],A=A[0],je!=0)break;if(4294967286<Oe.Ja)return 3;if(ce==null||Ze||(ce[0]=Oe.xa?2:1),le=[le],ot=[ot],Oe.xa){if(5>B){je=7;break}ce=le,ze=ot,Ze=oe,_==null||5>B?_=0:5<=B&&_[A+0]==47&&!(_[A+4]>>5)?(Pe=[0],Tt=[0],nt=[0],J(st=new D,_,A,B),jt(st,Pe,Tt,nt)?(ce!=null&&(ce[0]=Pe[0]),ze!=null&&(ze[0]=Tt[0]),Ze!=null&&(Ze[0]=nt[0]),_=1):_=0):_=0}else{if(10>B){je=7;break}ce=ot,_==null||10>B||!Fh(_,A+3,B-3)?_=0:(ze=_[A+0]|_[A+1]<<8|_[A+2]<<16,Ze=16383&(_[A+7]<<8|_[A+6]),_=16383&(_[A+9]<<8|_[A+8]),1&ze||3<(ze>>1&7)||!(ze>>4&1)||ze>>5>=Oe.Ja||!Ze||!_?_=0:(le&&(le[0]=Ze),ce&&(ce[0]=_),_=1))}if(!_||(le=le[0],ot=ot[0],Fe&&(me[0]!=le||Ee[0]!=ot)))return 3;ue!=null&&(ue[0]=Oe,ue.offset=A-ue.w,e(4294967286>A-ue.w),e(ue.offset==ue.ha-B));break}return je==0||je==7&&Fe&&ue==null?(oe!=null&&(oe[0]|=Oe.na!=null&&0<Oe.na.length),X!=null&&(X[0]=le),ie!=null&&(ie[0]=ot),0):je}function ju(_,A,B){var X=A.width,ie=A.height,oe=0,le=0,ce=X,ue=ie;if(A.Da=_!=null&&0<_.Da,A.Da&&(ce=_.cd,ue=_.bd,oe=_.v,le=_.j,11>B||(oe&=-2,le&=-2),0>oe||0>le||0>=ce||0>=ue||oe+ce>X||le+ue>ie))return 0;if(A.v=oe,A.j=le,A.va=oe+ce,A.o=le+ue,A.U=ce,A.T=ue,A.da=_!=null&&0<_.da,A.da){if(!Ge(ce,ue,B=[_.ib],oe=[_.hb]))return 0;A.ib=B[0],A.hb=oe[0]}return A.ob=_!=null&&_.ob,A.Kb=_==null||!_.Sd,A.da&&(A.ob=A.ib<3*X/4&&A.hb<3*ie/4,A.Kb=0),1}function Pu(_){if(_==null)return 2;if(11>_.S){var A=_.f.RGBA;A.fb+=(_.height-1)*A.A,A.A=-A.A}else A=_.f.kb,_=_.height,A.O+=(_-1)*A.fa,A.fa=-A.fa,A.N+=(_-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(_-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(_-1)*A.lb,A.lb=-A.lb);return 0}function Tc(_,A,B,X){if(X==null||0>=_||0>=A)return 2;if(B!=null){if(B.Da){var ie=B.cd,oe=B.bd,le=-2&B.v,ce=-2&B.j;if(0>le||0>ce||0>=ie||0>=oe||le+ie>_||ce+oe>A)return 2;_=ie,A=oe}if(B.da){if(!Ge(_,A,ie=[B.ib],oe=[B.hb]))return 2;_=ie[0],A=oe[0]}}X.width=_,X.height=A;e:{var ue=X.width,me=X.height;if(_=X.S,0>=ue||0>=me||!(_>=Gh&&13>_))_=2;else{if(0>=X.Rd&&X.sd==null){le=oe=ie=A=0;var Ee=(ce=ue*Nf[_])*me;if(11>_||(oe=(me+1)/2*(A=(ue+1)/2),_==12&&(le=(ie=ue)*me)),(me=s(Ee+2*oe+le))==null){_=1;break e}X.sd=me,11>_?((ue=X.f.RGBA).eb=me,ue.fb=0,ue.A=ce,ue.size=Ee):((ue=X.f.kb).y=me,ue.O=0,ue.fa=ce,ue.Fd=Ee,ue.f=me,ue.N=0+Ee,ue.Ab=A,ue.Cd=oe,ue.ea=me,ue.W=0+Ee+oe,ue.Db=A,ue.Ed=oe,_==12&&(ue.F=me,ue.J=0+Ee+2*oe),ue.Tc=le,ue.lb=ie)}if(A=1,ie=X.S,oe=X.width,le=X.height,ie>=Gh&&13>ie)if(11>ie)_=X.f.RGBA,A&=(ce=Math.abs(_.A))*(le-1)+oe<=_.size,A&=ce>=oe*Nf[ie],A&=_.eb!=null;else{_=X.f.kb,ce=(oe+1)/2,Ee=(le+1)/2,ue=Math.abs(_.fa),me=Math.abs(_.Ab);var Fe=Math.abs(_.Db),ze=Math.abs(_.lb),Oe=ze*(le-1)+oe;A&=ue*(le-1)+oe<=_.Fd,A&=me*(Ee-1)+ce<=_.Cd,A=(A&=Fe*(Ee-1)+ce<=_.Ed)&ue>=oe&me>=ce&Fe>=ce,A&=_.y!=null,A&=_.f!=null,A&=_.ea!=null,ie==12&&(A&=ze>=oe,A&=Oe<=_.Tc,A&=_.F!=null)}else A=0;_=A?0:2}}return _!=0||B!=null&&B.fd&&(_=Pu(X)),_}var ti=64,Du=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ou=24,Lu=32,Mu=8,Gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ke("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(_){return _},N.Predictor2=function(_,A,B){return A[B+0]},N.Predictor3=function(_,A,B){return A[B+1]},N.Predictor4=function(_,A,B){return A[B-1]},N.Predictor5=function(_,A,B){return at(at(_,A[B+1]),A[B+0])},N.Predictor6=function(_,A,B){return at(_,A[B-1])},N.Predictor7=function(_,A,B){return at(_,A[B+0])},N.Predictor8=function(_,A,B){return at(A[B-1],A[B+0])},N.Predictor9=function(_,A,B){return at(A[B+0],A[B+1])},N.Predictor10=function(_,A,B){return at(at(_,A[B-1]),at(A[B+0],A[B+1]))},N.Predictor11=function(_,A,B){var X=A[B+0];return 0>=Pt(X>>24&255,_>>24&255,(A=A[B-1])>>24&255)+Pt(X>>16&255,_>>16&255,A>>16&255)+Pt(X>>8&255,_>>8&255,A>>8&255)+Pt(255&X,255&_,255&A)?X:_},N.Predictor12=function(_,A,B){var X=A[B+0];return(xt((_>>24&255)+(X>>24&255)-((A=A[B-1])>>24&255))<<24|xt((_>>16&255)+(X>>16&255)-(A>>16&255))<<16|xt((_>>8&255)+(X>>8&255)-(A>>8&255))<<8|xt((255&_)+(255&X)-(255&A)))>>>0},N.Predictor13=function(_,A,B){var X=A[B-1];return(_t((_=at(_,A[B+0]))>>24&255,X>>24&255)<<24|_t(_>>16&255,X>>16&255)<<16|_t(_>>8&255,X>>8&255)<<8|_t(_>>0&255,X>>0&255))>>>0};var jc=N.PredictorAdd0;N.PredictorAdd1=Vt,ke("Predictor2","PredictorAdd2"),ke("Predictor3","PredictorAdd3"),ke("Predictor4","PredictorAdd4"),ke("Predictor5","PredictorAdd5"),ke("Predictor6","PredictorAdd6"),ke("Predictor7","PredictorAdd7"),ke("Predictor8","PredictorAdd8"),ke("Predictor9","PredictorAdd9"),ke("Predictor10","PredictorAdd10"),ke("Predictor11","PredictorAdd11"),ke("Predictor12","PredictorAdd12"),ke("Predictor13","PredictorAdd13");var Ka=N.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Hh,ms=N.ColorIndexInverseTransform,mf=N.MapARGB,qh=N.VP8LColorIndexInverseTransformAlpha,gf=N.MapAlpha,ya=N.VP8LPredictorsAdd=[];ya.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Ws,ao,Xa,xa,Ya,Iu,$o,Ru,Ki,lo,co,va,Fl,Pc,Ja,zl,yf,wi,Wo,qn,ir,Ir,Rr,gs,wa,Dc,Oc,B0,U0=s(511),$0=s(2041),W0=s(225),V0=s(767),H0=0,ba=$0,Fu=W0,Xi=V0,uo=U0,Gh=0,Bl=1,C1=2,xf=3,vf=4,cr=5,Kh=6,zu=7,Lc=8,wf=9,bf=10,_f=[2,3,7],Xh=[3,3,11],Mc=[280,256,256,256,40],E1=[0,1,1,1,0],A2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],T2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],A1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yh=8,Bu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ic=null,q0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],G0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],T1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],j1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],j2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],P2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],K0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Yi=[],fo=[],ys=[],_a=1,Uu=2,Ei=[],xs=[];tt("UpsampleRgbLinePair",Ln,3),tt("UpsampleBgrLinePair",Er,3),tt("UpsampleRgbaLinePair",Bo,4),tt("UpsampleBgraLinePair",fi,4),tt("UpsampleArgbLinePair",Ci,4),tt("UpsampleRgba4444LinePair",Hr,2),tt("UpsampleRgb565LinePair",Mr,2);var D2=N.UpsampleRgbLinePair,O2=N.UpsampleBgrLinePair,Ul=N.UpsampleRgbaLinePair,$u=N.UpsampleBgraLinePair,Rc=N.UpsampleArgbLinePair,kf=N.UpsampleRgba4444LinePair,X0=N.UpsampleRgb565LinePair,Za=16,Vo=1<<Za-1,Qn=-227,sr=482,$l=6,bi=0,vs=s(256),Fc=s(256),Wu=s(256),ws=s(256),Jh=s(sr-Qn),P1=s(sr-Qn);Uo("YuvToRgbRow",Ln,3),Uo("YuvToBgrRow",Er,3),Uo("YuvToRgbaRow",Bo,4),Uo("YuvToBgraRow",fi,4),Uo("YuvToArgbRow",Ci,4),Uo("YuvToRgba4444Row",Hr,2),Uo("YuvToRgb565Row",Mr,2);var Y0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zc=[0,2,8],D1=[8,7,6,4,4,2,2,2,1,1,1,1],Qa=1;this.WebPDecodeRGBA=function(_,A,B,X,ie){var oe=Bl,le=new ga,ce=new vr;le.ba=ce,ce.S=oe,ce.width=[ce.width],ce.height=[ce.height];var ue=ce.width,me=ce.height,Ee=new pn;if(Ee==null||_==null)var Fe=2;else e(Ee!=null),Fe=Ac(_,A,B,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(Fe!=0?ue=0:(ue!=null&&(ue[0]=Ee.width[0]),me!=null&&(me[0]=Ee.height[0]),ue=1),ue){ce.width=ce.width[0],ce.height=ce.height[0],X!=null&&(X[0]=ce.width),ie!=null&&(ie[0]=ce.height);e:{if(X=new da,(ie=new Ml).data=_,ie.w=A,ie.ha=B,ie.kd=1,A=[0],e(ie!=null),((_=Ac(ie.data,ie.w,ie.ha,null,null,null,A,null,ie))==0||_==7)&&A[0]&&(_=4),(A=_)==0){if(e(le!=null),X.data=ie.data,X.w=ie.w+ie.offset,X.ha=ie.ha-ie.offset,X.put=On,X.ac=xn,X.bc=Sr,X.ma=le,ie.xa){if((_=Ye())==null){le=1;break e}if(function(ze,Oe){var ot=[0],Ze=[0],je=[0];t:for(;;){if(ze==null)return 0;if(Oe==null)return ze.a=2,0;if(ze.l=Oe,ze.a=0,J(ze.m,Oe.data,Oe.w,Oe.ha),!jt(ze.m,ot,Ze,je)){ze.a=3;break t}if(ze.xb=Uu,Oe.width=ot[0],Oe.height=Ze[0],!Me(ot[0],Ze[0],1,ze,null))break t;return 1}return e(ze.a!=0),0}(_,X)){if(X=(A=Tc(X.width,X.height,le.Oa,le.ba))==0){t:{X=_;n:for(;;){if(X==null){X=0;break t}if(e(X.s.yc!=null),e(X.s.Ya!=null),e(0<X.s.Wb),e((B=X.l)!=null),e((ie=B.ma)!=null),X.xb!=0){if(X.ca=ie.ba,X.tb=ie.tb,e(X.ca!=null),!ju(ie.Oa,B,xf)){X.a=2;break n}if(!Ie(X,B.width)||B.da)break n;if((B.da||yn(X.ca.S))&&Re(),11>X.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),X.ca.f.kb.F!=null&&Re()),X.Pb&&0<X.s.ua&&X.s.vb.X==null&&!Be(X.s.vb,X.s.Wa.Xa)){X.a=1;break n}X.xb=0}if(!be(X,X.V,X.Ba,X.c,X.i,B.o,ye))break n;ie.Dc=X.Ma,X=1;break t}e(X.a!=0),X=0}X=!X}X&&(A=_.a)}else A=_.a}else{if((_=new Nr)==null){le=1;break e}if(_.Fa=ie.na,_.P=ie.P,_.qc=ie.Sa,zh(_,X)){if((A=Tc(X.width,X.height,le.Oa,le.ba))==0){if(_.Aa=0,B=le.Oa,e((ie=_)!=null),B!=null){if(0<(ue=0>(ue=B.Md)?0:100<ue?255:255*ue/100)){for(me=Ee=0;4>me;++me)12>(Fe=ie.pb[me]).lc&&(Fe.ia=ue*D1[0>Fe.lc?0:Fe.lc]>>3),Ee|=Fe.ia;Ee&&(alert("todo:VP8InitRandom"),ie.ia=1)}ie.Ga=B.Id,100<ie.Ga?ie.Ga=100:0>ie.Ga&&(ie.Ga=0)}vc(_,X)||(A=_.a)}}else A=_.a}A==0&&le.Oa!=null&&le.Oa.fd&&(A=Pu(le.ba))}le=A}oe=le!=0?null:11>oe?ce.f.RGBA.eb:ce.f.kb.y}else oe=null;return oe};var Nf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,O){for(var z="",L=0;L<4;L++)z+=String.fromCharCode(N[O++]);return z}function u(N,O){return(N[O+0]<<0|N[O+1]<<8|N[O+2]<<16)>>>0}function d(N,O){return(N[O+0]<<0|N[O+1]<<8|N[O+2]<<16|N[O+3]<<24)>>>0}new l;var h=[0],p=[0],y=[],x=new l,v=t,b=function(N,O){var z={},L=0,M=!1,K=0,W=0;if(z.frames=[],!function(G,V,H,te){for(var ge=0;ge<te;ge++)if(G[V+ge]!=H.charCodeAt(ge))return!0;return!1}(N,O,"RIFF",4)){var Z,U;for(d(N,O+=4),O+=8;O<N.length;){var F=c(N,O),J=d(N,O+=4);O+=4;var Q=J+(1&J);switch(F){case"VP8 ":case"VP8L":z.frames[L]===void 0&&(z.frames[L]={}),(D=z.frames[L]).src_off=M?W:O-8,D.src_size=K+J+8,L++,M&&(M=!1,K=0,W=0);break;case"VP8X":(D=z.header={}).feature_flags=N[O];var ee=O+4;D.canvas_width=1+u(N,ee),ee+=3,D.canvas_height=1+u(N,ee),ee+=3;break;case"ALPH":M=!0,K=Q+8,W=O-8;break;case"ANIM":(D=z.header).bgcolor=d(N,O),ee=O+4,D.loop_count=(Z=N)[(U=ee)+0]<<0|Z[U+1]<<8,ee+=2;break;case"ANMF":var ne,D;(D=z.frames[L]={}).offset_x=2*u(N,O),O+=3,D.offset_y=2*u(N,O),O+=3,D.width=1+u(N,O),O+=3,D.height=1+u(N,O),O+=3,D.duration=u(N,O),O+=3,ne=N[O++],D.dispose=1&ne,D.blend=ne>>1&1}F!="ANMF"&&(O+=Q)}return z}}(v,0);b.response=v,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,k=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],p=[S.canvas_width];for(var T=0;T<k.length&&k[T].blend!=0;T++);}var j=k[0],P=x.WebPDecodeRGBA(v,j.src_off,j.src_size,p,h);j.rgba=P,j.imgwidth=p[0],j.imgheight=h[0];for(var C=0;C<p[0]*h[0]*4;C++)y[C]=P[C];return this.width=p,this.height=h,this.data=y,this}(function(t){var e=function(){return typeof w_=="function"},n=function(h,p,y,x){var v=4,b=o;switch(x){case t.image_compression.FAST:v=1,b=s;break;case t.image_compression.MEDIUM:v=6,b=a;break;case t.image_compression.SLOW:v=9,b=l}h=r(h,p,y,b);var S=w_(h,{level:v});return t.__addimage__.arrayBufferToBinaryString(S)},r=function(h,p,y,x){for(var v,b,S,k=h.length/p,T=new Uint8Array(h.length+k),j=u(),P=0;P<k;P+=1){if(S=P*p,v=h.subarray(S,S+p),x)T.set(x(v,y,b),S+P);else{for(var C,N=j.length,O=[];C<N;C+=1)O[C]=j[C](v,y,b);var z=d(O.concat());T.set(O[z],S+P)}b=v}return T},i=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var y,x=[],v=h.length;x[0]=1;for(var b=0;b<v;b+=1)y=h[b-p]||0,x[b+1]=h[b]-y+256&255;return x},o=function(h,p,y){var x,v=[],b=h.length;v[0]=2;for(var S=0;S<b;S+=1)x=y&&y[S]||0,v[S+1]=h[S]-x+256&255;return v},a=function(h,p,y){var x,v,b=[],S=h.length;b[0]=3;for(var k=0;k<S;k+=1)x=h[k-p]||0,v=y&&y[k]||0,b[k+1]=h[k]+256-(x+v>>>1)&255;return b},l=function(h,p,y){var x,v,b,S,k=[],T=h.length;k[0]=4;for(var j=0;j<T;j+=1)x=h[j-p]||0,v=y&&y[j]||0,b=y&&y[j-p]||0,S=c(x,v,b),k[j+1]=h[j]-S+256&255;return k},c=function(h,p,y){if(h===p&&p===y)return h;var x=Math.abs(p-y),v=Math.abs(h-y),b=Math.abs(h+p-y-y);return x<=v&&x<=b?h:v<=b?p:y},u=function(){return[i,s,o,a,l]},d=function(h){var p=h.map(function(y){return y.reduce(function(x,v){return x+Math.abs(v)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(h,p,y,x){var v,b,S,k,T,j,P,C,N,O,z,L,M,K,W,Z=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(S=new Kse(h)).imgData,b=S.bits,v=S.colorSpace,T=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){N=(C=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,z=new Uint8Array(N*S.colors),O=new Uint8Array(N);var F,J=S.pixelBitlength-S.bits;for(K=0,W=0;K<N;K++){for(M=C[K],F=0;F<J;)z[W++]=M>>>F&255,F+=S.bits;O[K]=M>>>F&255}}if(S.bits===16){N=(C=new Uint32Array(S.decodePixels().buffer)).length,z=new Uint8Array(N*(32/S.pixelBitlength)*S.colors),O=new Uint8Array(N*(32/S.pixelBitlength)),L=S.colors>1,K=0,W=0;for(var Q=0;K<N;)M=C[K++],z[W++]=M>>>0&255,L&&(z[W++]=M>>>16&255,M=C[K++],z[W++]=M>>>0&255),O[Q++]=M>>>16&255;b=8}x!==t.image_compression.NONE&&e()?(h=n(z,S.width*S.colors,S.colors,x),P=n(O,S.width,1,x)):(h=z,P=O,Z=void 0)}if(S.colorType===3&&(v=this.color_spaces.INDEXED,j=S.palette,S.transparency.indexed)){var ee=S.transparency.indexed,ne=0;for(K=0,N=ee.length;K<N;++K)ne+=ee[K];if((ne/=255)===N-1&&ee.indexOf(0)!==-1)k=[ee.indexOf(0)];else if(ne!==N){for(C=S.decodePixels(),O=new Uint8Array(C.length),K=0,N=C.length;K<N;K++)O[K]=ee[C[K]];P=n(O,S.width,1)}}var D=function(G){var V;switch(G){case t.image_compression.FAST:V=11;break;case t.image_compression.MEDIUM:V=13;break;case t.image_compression.SLOW:V=14;break;default:V=12}return V}(x);return Z===this.decode.FLATE_DECODE&&(U="/Predictor "+D+" "),U+="/Colors "+T+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:y,data:h,index:p,filter:Z,decodeParameters:U,transparency:k,palette:j,sMask:P,predictor:D,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:v}}}})(ln.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new Xse(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new $b(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(ln.API),ul.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ul.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){yr.log("bit decode error:"+n)}},ul.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},ul.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},ul.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ul.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},ul.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},ul.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},ul.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},ul.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new ul(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new $b(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(ln.API),CT.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new CT(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new $b(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(ln.API),ln.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],p=r[c+3];s[a++]=u,s[a++]=d,s[a++]=h,o[l++]=p}var y=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ln.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cp=ln.API,Dy=Cp.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,p=t.length,y=0,x=a[0]||l,v=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(h=d&&Jn(c[r])==="object"&&!isNaN(parseInt(c[r][y],10))?c[r][y]/u:0,v.push((a[r]||x)/l+h)),y=r;return v},_T=Cp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Cp.processArabic&&(t=Cp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Dy.apply(this,arguments).reduce(function(s,o){return s+o},0)},ST=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},kT=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],d=[u],h=n.textIndent||0,p=0,y=0,x=t.split(" "),v=Dy.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),S=[];x.map(function(T){(T=T.split(/\s*\n/)).length>1?S=S.concat(T.map(function(j,P){return(P&&j.length?`
`:"")+j})):S.push(T[0])}),x=S,l=_T.apply(this,[b,n])}for(s=0,o=x.length;s<o;s++){var k=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),k=1),h+p+(y=(i=Dy.apply(this,[r,n])).reduce(function(T,j){return T+j},0))>e||k){if(y>e){for(a=ST.apply(this,[r,i,e-(h+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);y=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(T,j){return T+j},0)}else u=[r];d.push(u),h=y+l,p=v}else u.push(r),h+=p+y,p=v}return c=l?function(T,j){return(j?b:"")+T.join(" ")}:function(T){return T.join(" ")},d.map(c)},Cp.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(kT.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,p,y,x,v=["{"];for(var b in d){if(h=d[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=s(b).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof h=="number")h<0?(y=s(h).slice(3),x="-"):(y=s(h).slice(2),x=""),y=x+y.slice(0,-1)+r[y.slice(-1)];else{if(Jn(h)!=="object")throw new Error("Don't know what to do with value type "+Jn(h)+".");y=o(h)}v.push(p+y)}return v.push("}"),v.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,y,x,v={},b=1,S=v,k=[],T="",j="",P=d.length-1,C=1;C<P;C+=1)(x=d[C])=="'"?h?(y=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(k.push([S,y]),S={},y=void 0):x=="}"?((p=k.pop())[0][p[1]]=S,y=void 0,S=p[0]):x=="-"?b=-1:y===void 0?n.hasOwnProperty(x)?(T+=n[x],y=parseInt(T,16)*b,b=1,T=""):T+=x:n.hasOwnProperty(x)?(j+=n[x],S[y]=parseInt(j,16)*b,b=1,y=void 0,j=""):j+=x;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,p=u.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var y=c.Unicode[h.postScriptName];y&&(h.metadata.Unicode.encoding=y,h.encoding=y.codePages[0])}])}(ln.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Qm(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ln),function(t){function e(){return(fn.canvg?Promise.resolve(fn.canvg):uu(()=>import("./index.es-BDK2nriX.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ln.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(y){return y.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),ln.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ln.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(y,x){var v,b=!1;for(v=0;v<y.length;v+=1)y[v]===x&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(d=0;d<p;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Jn(t)==="object"){for(i in t)if(s=t[i],h(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&h(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?x.push("/"+y+" /"+n[y].value):x.push("/"+y+" "+n[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ln.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(s).sort(function(p,y){return p-y})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",y=0;y<h.length;y++)p+=String.fromCharCode(h[y]);var x=c();u({data:p,addLength1:!0,objectId:x}),l("endobj");var v=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Mp(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var S=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Mp(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Mp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",p=0;p<d.length;p++)h+=String.fromCharCode(d[p]);var y=c();u({data:h,addLength1:!0,objectId:y}),l("endobj");var x=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var v=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Mp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Mp(a.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,p=d.activeFontKey,y=d.fonts,x=p,v="",b=0,S="",k=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(S=a,x=p,Array.isArray(a)&&(S=a[0]),b=0;b<S.length;b+=1)y[x].metadata.hasOwnProperty("cmap")&&(o=y[x].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),o||S[b].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?v+=S[b]:v+="";var T="";return parseInt(x.slice(1))<14||k==="WinAnsiEncoding"?T=h(v,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(T=n(v,y[x])),d.isHex=!0,{text:T,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(ln),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ln.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,k=0;this.__bidiEngine__={};var T=function(L){var M=L.charCodeAt(),K=M>>8,W=x[K];return W!==void 0?d[256*W+(255&M)]:K===252||K===253?"AL":b.test(K)?"L":K===8?"R":"N"},j=function(L){for(var M,K=0;K<L.length;K++){if((M=T(L.charAt(K)))==="L")return!1;if(M==="R")return!0}return!1},P=function(L,M,K,W){var Z,U,F,J,Q=M[W];switch(Q){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(Q="AN");break;case"AL":S=!0,Q="R";break;case"WS":Q="N";break;case"CS":W<1||W+1>=M.length||(Z=K[W-1])!=="EN"&&Z!=="AN"||(U=M[W+1])!=="EN"&&U!=="AN"?Q="N":S&&(U="AN"),Q=U===Z?U:"N";break;case"ES":Q=(Z=W>0?K[W-1]:"B")==="EN"&&W+1<M.length&&M[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&K[W-1]==="EN"){Q="EN";break}if(S){Q="N";break}for(F=W+1,J=M.length;F<J&&M[F]==="ET";)F++;Q=F<J&&M[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=M.length,F=W+1;F<J&&M[F]==="NSM";)F++;if(F<J){var ee=L[W],ne=ee>=1425&&ee<=2303||ee===64286;if(Z=M[F],ne&&(Z==="R"||Z==="AL")){Q="R";break}}}Q=W<1||(Z=M[W-1])==="B"?"N":K[W-1];break;case"B":S=!1,i=!0,Q=k;break;case"S":s=!0,Q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":Q="N"}return Q},C=function(L,M,K){var W=L.split("");return K&&N(W,K,{hiLevel:k}),W.reverse(),M&&M.reverse(),W.join("")},N=function(L,M,K){var W,Z,U,F,J,Q=-1,ee=L.length,ne=0,D=[],G=k?p:h,V=[];for(S=!1,i=!1,s=!1,Z=0;Z<ee;Z++)V[Z]=T(L[Z]);for(U=0;U<ee;U++){if(J=ne,D[U]=P(L,V,D,U),W=240&(ne=G[J][y[D[U]]]),ne&=15,M[U]=F=G[ne][5],W>0)if(W===16){for(Z=Q;Z<U;Z++)M[Z]=1;Q=-1}else Q=-1;if(G[ne][6])Q===-1&&(Q=U);else if(Q>-1){for(Z=Q;Z<U;Z++)M[Z]=F;Q=-1}V[U]==="B"&&(M[U]=0),K.hiLevel|=F}s&&function(H,te,ge){for(var xe=0;xe<ge;xe++)if(H[xe]==="S"){te[xe]=k;for(var ve=xe-1;ve>=0&&H[ve]==="WS";ve--)te[ve]=k}}(V,M,ee)},O=function(L,M,K,W,Z){if(!(Z.hiLevel<L)){if(L===1&&k===1&&!i)return M.reverse(),void(K&&K.reverse());for(var U,F,J,Q,ee=M.length,ne=0;ne<ee;){if(W[ne]>=L){for(J=ne+1;J<ee&&W[J]>=L;)J++;for(Q=ne,F=J-1;Q<F;Q++,F--)U=M[Q],M[Q]=M[F],M[F]=U,K&&(U=K[Q],K[Q]=K[F],K[F]=U);ne=J}ne++}}},z=function(L,M,K){var W=L.split(""),Z={hiLevel:k};return K||(K=[]),N(W,K,Z),function(U,F,J){if(J.hiLevel!==0&&u)for(var Q,ee=0;ee<U.length;ee++)F[ee]===1&&(Q=v.indexOf(U[ee]))>=0&&(U[ee]=v[Q+1])}(W,K,Z),O(2,W,M,K,Z),O(1,W,M,K,Z),W.join("")};return this.__bidiEngine__.doBidiReorder=function(L,M,K){if(function(Z,U){if(U)for(var F=0;F<Z.length;F++)U[F]=F;a===void 0&&(a=j(Z)),c===void 0&&(c=j(Z))}(L,M),o||!l||c)if(o&&l&&a^c)k=a?1:0,L=C(L,M,K);else if(!o&&l&&c)k=a?1:0,L=z(L,M,K),L=C(L,M);else if(!o||a||l||c){if(o&&!l&&a^c)L=C(L,M),a?(k=0,L=z(L,M,K)):(k=1,L=z(L,M,K),L=C(L,M));else if(o&&a&&!l&&c)k=1,L=z(L,M,K),L=C(L,M);else if(!o&&!l&&a^c){var W=u;a?(k=1,L=z(L,M,K),k=0,u=!1,L=z(L,M,K),u=W):(k=0,L=z(L,M,K),L=C(L,M),k=1,u=!1,L=z(L,M,K),u=W,L=C(L,M))}}else k=0,L=z(L,M,K);else k=a?1:0,L=z(L,M,K);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,l=L.isOutputVisual,a=L.isInputRtl,c=L.isOutputRtl,u=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ln),ln.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Gd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new uoe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Yse(this.contents),this.head=new Zse(this),this.name=new roe(this),this.cmap=new BM(this),this.toUnicode={},this.hhea=new Qse(this),this.maxp=new ioe(this),this.hmtx=new soe(this),this.post=new toe(this),this.os2=new eoe(this),this.loca=new coe(this),this.glyf=new ooe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var El,Gd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),Yse=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,d,h,p,y,x;for(x in p=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),o=Math.floor(d/l),u=16*p-d,(i=new Gd).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(o),i.writeShort(u),s=16*p,c=i.pos+s,a=null,y=[],n)for(h=n[x],i.writeString(x),i.writeInt(t(h)),i.writeInt(c),i.writeInt(h.length),y=y.concat(h),x==="head"&&(a=c),c+=h.length;c%4;)y.push(0),c++;return i.write(y),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=UM.call(n);n.length%4;)n.push(0);for(s=new Gd(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Jse={}.hasOwnProperty,yc=function(t,e){for(var n in e)Jse.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};El=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Zse=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Gd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),ET=function(){function t(e,n){var r,i,s,o,a,l,c,u,d,h,p,y,x,v,b,S,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),h=p/2,e.pos+=6,s=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),e.pos+=2,x=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),c=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),u=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),i=(this.length-e.pos+this.offset)/2,a=function(){var T,j;for(j=[],l=T=0;0<=i?T<i:T>i;l=0<=i?++T:--T)j.push(e.readUInt16());return j}(),l=b=0,k=s.length;b<k;l=++b)for(v=s[l],r=S=y=x[l];y<=v?S<=v:S>=v;r=y<=v?++S:--S)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-y)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,p,y,x,v,b,S,k,T,j,P,C,N,O,z,L,M,K,W,Z,U,F,J,Q,ee,ne,D,G,V,H,te,ge,xe,ve,Ne,He,Ke;switch(W=new Gd,o=Object.keys(e).sort(function(qe,Be){return qe-Be}),n){case"macroman":for(x=0,v=function(){var qe=[];for(y=0;y<256;++y)qe.push(0);return qe}(),S={0:0},s={},Z=0,Q=o.length;Z<Q;Z++)S[ve=e[i=o[Z]]]==null&&(S[ve]=++x),s[i]={old:e[i],new:S[e[i]]},v[i]=S[e[i]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(v),{charMap:s,subtable:W.data,maxGlyphID:x+1};case"unicode":for(M=[],d=[],k=0,S={},r={},b=c=null,U=0,ee=o.length;U<ee;U++)S[j=e[i=o[U]]]==null&&(S[j]=++k),r[i]={old:j,new:S[j]},a=S[j]-i,b!=null&&a===c||(b&&d.push(b),M.push(i),c=a),b=i;for(b&&d.push(b),d.push(65535),M.push(65535),z=2*(O=M.length),N=2*Math.pow(Math.log(O)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,C=2*O-N,l=[],P=[],p=[],y=F=0,ne=M.length;F<ne;y=++F){if(L=M[y],u=d[y],L===65535){l.push(0),P.push(0);break}if(L-(K=r[L].new)>=32768)for(l.push(0),P.push(2*(p.length+O-y)),i=J=L;L<=u?J<=u:J>=u;i=L<=u?++J:--J)p.push(r[i].new);else l.push(K-L),P.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*O+2*p.length),W.writeUInt16(0),W.writeUInt16(z),W.writeUInt16(N),W.writeUInt16(h),W.writeUInt16(C),ge=0,D=d.length;ge<D;ge++)i=d[ge],W.writeUInt16(i);for(W.writeUInt16(0),xe=0,G=M.length;xe<G;xe++)i=M[xe],W.writeUInt16(i);for(Ne=0,V=l.length;Ne<V;Ne++)a=l[Ne],W.writeUInt16(a);for(He=0,H=P.length;He<H;He++)T=P[He],W.writeUInt16(T);for(Ke=0,te=p.length;Ke<te;Ke++)x=p[Ke],W.writeUInt16(x);return{charMap:r,subtable:W.data,maxGlyphID:k+1}}},t}(),BM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new ET(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=ET.encode(n,r),(s=new Gd).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Qse=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),eoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),toe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),noe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},roe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,u,d,h,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,h=i.length;d<h;o=++d)s=i[o],n.pos=s.offset,u=n.readString(s.length),a=new noe(u,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ioe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),soe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(n.readInt16());return d}(),this.widths=(function(){var u,d,h,p;for(p=[],u=0,d=(h=this.metrics).length;u<d;u++)o=h[u],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),UM=[].slice,ooe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,u,d,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Gd(r.read(s))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new loe(l,u,h,c,d):new aoe(l,a,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),aoe=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),loe=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Gd(UM.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),coe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yc(e,El),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*i.length),d=0;d<i.length;++d)u[4*d+3]=255&i[d],u[4*d+2]=(65280&i[d])>>8,u[4*d+1]=(16711680&i[d])>>16,u[4*d]=(4278190080&i[d])>>24;return u},e}(),uoe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,p,y,x,v,b;for(i in r=BM.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},b=r.charMap)p[(l=b[i]).old]=l.new;for(y in h=r.maxGlyphID,o)y in p||(p[y]=h++);return u=function(S){var k,T;for(k in T={},S)T[S[k]]=k;return T}(p),d=Object.keys(u).sort(function(S,k){return S-k}),x=function(){var S,k,T;for(T=[],S=0,k=d.length;S<k;S++)a=d[S],T.push(u[a]);return T}(),s=this.font.glyf.encode(o,x,p),c=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();ln.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const doe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:$se,AcroFormAppearance:Ht,AcroFormButton:Ni,AcroFormCheckBox:ng,AcroFormChoiceField:dh,AcroFormComboBox:hh,AcroFormEditBox:eg,AcroFormListBox:fh,AcroFormPasswordField:rg,AcroFormPushButton:tg,AcroFormRadioButton:ph,AcroFormTextField:Rd,GState:Hg,ShadingPattern:xd,TilingPattern:nh,default:ln,jsPDF:ln},Symbol.toStringTag,{value:"Module"}));var px={exports:{}};const foe=AP(doe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var AT=px.exports,TT;function hoe(){return TT||(TT=1,function(t,e){(function(r,i){t.exports=i(function(){try{return foe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof AT<"u"?AT:typeof window<"u"?window:typeof self<"u"?self:WF,function(n){return function(){var r={172:function(a,l){var c=this&&this.__extends||function(){var h=function(p,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,v){x.__proto__=v}||function(x,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(x[b]=v[b])},h(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");h(p,y);function x(){this.constructor=p}p.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function h(p,y,x){this.table=y,this.pageNumber=y.pageNumber,this.pageCount=this.pageNumber,this.settings=y.settings,this.cursor=x,this.doc=p.getDocument()}return h}();l.HookData=u;var d=function(h){c(p,h);function p(y,x,v,b,S,k){var T=h.call(this,y,x,k)||this;return T.cell=v,T.row=b,T.column=S,T.section=b.section,T}return p}(u);l.CellHookData=d},340:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),d=c(136),h=c(744),p=c(776),y=c(664),x=c(972);function v(b){b.API.autoTable=function(){for(var S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var T;S.length===1?T=S[0]:(console.error("Use of deprecated autoTable initiation"),T=S[2]||{},T.columns=S[0],T.body=S[1]);var j=(0,p.parseInput)(this,T),P=(0,x.createTable)(this,j);return(0,y.drawTable)(this,P),this},b.API.lastAutoTable=!1,b.API.previousAutoTable=!1,b.API.autoTable.previous=!1,b.API.autoTableText=function(S,k,T,j){(0,d.default)(S,k,T,j,this)},b.API.autoTableSetDefaults=function(S){return h.DocHandler.setDefaults(S,this),this},b.autoTableSetDefaults=function(S,k){h.DocHandler.setDefaults(S,k)},b.API.autoTableHtmlToJson=function(S,k){var T;if(k===void 0&&(k=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var j=new h.DocHandler(this),P=(0,u.parseHtml)(j,S,window,k,!1),C=P.head,N=P.body,O=((T=C[0])===null||T===void 0?void 0:T.map(function(z){return z.content}))||[];return{columns:O,rows:N,data:N}},b.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var S=this.lastAutoTable;return S&&S.finalY?S.finalY:0},b.API.autoTableAddPageContent=function(S){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),b.API.autoTable.globalDefaults||(b.API.autoTable.globalDefaults={}),b.API.autoTable.globalDefaults.addPageContent=S,this},b.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=v},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,d,h,p,y){p=p||{};var x=1.15,v=y.internal.scaleFactor,b=y.internal.getFontSize()/v,S=y.getLineHeightFactor?y.getLineHeightFactor():x,k=b*S,T=/\r\n|\r|\n/g,j="",P=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(j=typeof u=="string"?u.split(T):u,P=j.length||1),h+=b*(2-x),p.valign==="middle"?h-=P/2*k:p.valign==="bottom"&&(h-=P*k),p.halign==="center"||p.halign==="right"){var C=b;if(p.halign==="center"&&(C*=.5),j&&P>=1){for(var N=0;N<j.length;N++)y.text(j[N],d-y.getStringUnitWidth(j[N])*C,h),h+=k;return y}d-=y.getStringUnitWidth(u)*C}return p.halign==="justify"?y.text(u,d,h,{maxWidth:p.maxWidth||100,align:"justify"}):y.text(u,d,h),y}l.default=c},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(y,x,v){v.applyStyles(x,!0);var b=Array.isArray(y)?y:[y],S=b.map(function(k){return v.getTextWidth(k)}).reduce(function(k,T){return Math.max(k,T)},0);return S}l.getStringWidth=c;function u(y,x,v,b){var S=x.settings.tableLineWidth,k=x.settings.tableLineColor;y.applyStyles({lineWidth:S,lineColor:k});var T=d(S,!1);T&&y.rect(v.x,v.y,x.getWidth(y.pageSize().width),b.y-v.y,T)}l.addTableBorder=u;function d(y,x){var v=y>0,b=x||x===0;return v&&b?"DF":v?"S":b?"F":null}l.getFillStyle=d;function h(y,x){var v,b,S,k;if(y=y||x,Array.isArray(y)){if(y.length>=4)return{top:y[0],right:y[1],bottom:y[2],left:y[3]};if(y.length===3)return{top:y[0],right:y[1],bottom:y[2],left:y[1]};if(y.length===2)return{top:y[0],right:y[1],bottom:y[0],left:y[1]};y.length===1?y=y[0]:y=x}return typeof y=="object"?(typeof y.vertical=="number"&&(y.top=y.vertical,y.bottom=y.vertical),typeof y.horizontal=="number"&&(y.right=y.horizontal,y.left=y.horizontal),{left:(v=y.left)!==null&&v!==void 0?v:x,top:(b=y.top)!==null&&b!==void 0?b:x,right:(S=y.right)!==null&&S!==void 0?S:x,bottom:(k=y.bottom)!==null&&k!==void 0?k:x}):(typeof y!="number"&&(y=x),{top:y,right:y,bottom:y,left:y})}l.parseSpacing=h;function p(y,x){var v=h(x.settings.margin,0);return y.pageSize().width-(v.left+v.right)}l.getPageAvailableWidth=p},796:function(a,l){var c=this&&this.__extends||function(){var p=function(y,x){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(v[S]=b[S])},p(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");p(y,x);function v(){this.constructor=y}y.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(p){c(y,p);function y(x){var v=p.call(this)||this;return v._element=x,v}return y}(Array);l.HtmlRowInput=u;function d(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=d;function h(p){var y={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return y[p]}l.getTheme=h},903:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function d(v,b,S,k,T){var j={},P=1.3333333333333333,C=p(b,function(Q){return T.getComputedStyle(Q).backgroundColor});C!=null&&(j.fillColor=C);var N=p(b,function(Q){return T.getComputedStyle(Q).color});N!=null&&(j.textColor=N);var O=x(k,S);O&&(j.cellPadding=O);var z="borderTopColor",L=P*S,M=k.borderTopWidth;if(k.borderBottomWidth===M&&k.borderRightWidth===M&&k.borderLeftWidth===M){var K=(parseFloat(M)||0)/L;K&&(j.lineWidth=K)}else j.lineWidth={top:(parseFloat(k.borderTopWidth)||0)/L,right:(parseFloat(k.borderRightWidth)||0)/L,bottom:(parseFloat(k.borderBottomWidth)||0)/L,left:(parseFloat(k.borderLeftWidth)||0)/L},j.lineWidth.top||(j.lineWidth.right?z="borderRightColor":j.lineWidth.bottom?z="borderBottomColor":j.lineWidth.left&&(z="borderLeftColor"));var W=p(b,function(Q){return T.getComputedStyle(Q)[z]});W!=null&&(j.lineColor=W);var Z=["left","right","center","justify"];Z.indexOf(k.textAlign)!==-1&&(j.halign=k.textAlign),Z=["middle","bottom","top"],Z.indexOf(k.verticalAlign)!==-1&&(j.valign=k.verticalAlign);var U=parseInt(k.fontSize||"");isNaN(U)||(j.fontSize=U/P);var F=h(k);F&&(j.fontStyle=F);var J=(k.fontFamily||"").toLowerCase();return v.indexOf(J)!==-1&&(j.font=J),j}l.parseCss=d;function h(v){var b="";return(v.fontWeight==="bold"||v.fontWeight==="bolder"||parseInt(v.fontWeight)>=700)&&(b="bold"),(v.fontStyle==="italic"||v.fontStyle==="oblique")&&(b+="italic"),b}function p(v,b){var S=y(v,b);if(!S)return null;var k=S.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!k||!Array.isArray(k))return null;var T=[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])],j=parseInt(k[4]);return j===0||isNaN(T[0])||isNaN(T[1])||isNaN(T[2])?null:T}function y(v,b){var S=b(v);return S==="rgba(0, 0, 0, 0)"||S==="transparent"||S==="initial"||S==="inherit"?v.parentElement==null?null:y(v.parentElement,b):S}function x(v,b){var S=[v.paddingTop,v.paddingRight,v.paddingBottom,v.paddingLeft],k=96/(72/b),T=(parseInt(v.lineHeight)-parseInt(v.fontSize))/b/2,j=S.map(function(C){return parseInt(C||"0")/k}),P=(0,u.parseSpacing)(j,0);return T>P.top&&(P.top=T),T>P.bottom&&(P.bottom=T),P}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function d(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return d.setDefaults=function(h,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=h:c=h},d.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},d.prototype.applyStyles=function(h,p){var y,x,v;p===void 0&&(p=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var b=this.jsPDFDocument.internal.getFont(),S=b.fontStyle,k=b.fontName;if(h.font&&(k=h.font),h.fontStyle){S=h.fontStyle;var T=this.getFontList()[k];T&&T.indexOf(S)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(T[0]),S=T[0])}if(this.jsPDFDocument.setFont(k,S),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!p){var j=d.unifyColor(h.fillColor);j&&(y=this.jsPDFDocument).setFillColor.apply(y,j),j=d.unifyColor(h.textColor),j&&(x=this.jsPDFDocument).setTextColor.apply(x,j),j=d.unifyColor(h.lineColor),j&&(v=this.jsPDFDocument).setDrawColor.apply(v,j),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},d.prototype.splitTextToSize=function(h,p,y){return this.jsPDFDocument.splitTextToSize(h,p,y)},d.prototype.rect=function(h,p,y,x,v){return this.jsPDFDocument.rect(h,p,y,x,v)},d.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},d.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},d.prototype.getDocument=function(){return this.jsPDFDocument},d.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},d.prototype.addPage=function(){return this.jsPDFDocument.addPage()},d.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},d.prototype.getGlobalOptions=function(){return c||{}},d.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},d.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},d.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},d.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},d.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},d.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},d}();l.DocHandler=u},4:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),d=c(796);function h(x,v,b,S,k){var T,j;S===void 0&&(S=!1),k===void 0&&(k=!1);var P;typeof v=="string"?P=b.document.querySelector(v):P=v;var C=Object.keys(x.getFontList()),N=x.scaleFactor(),O=[],z=[],L=[];if(!P)return console.error("Html table could not be found with input: ",v),{head:O,body:z,foot:L};for(var M=0;M<P.rows.length;M++){var K=P.rows[M],W=(j=(T=K==null?void 0:K.parentElement)===null||T===void 0?void 0:T.tagName)===null||j===void 0?void 0:j.toLowerCase(),Z=p(C,N,b,K,S,k);Z&&(W==="thead"?O.push(Z):W==="tfoot"?L.push(Z):z.push(Z))}return{head:O,body:z,foot:L}}l.parseHtml=h;function p(x,v,b,S,k,T){for(var j=new d.HtmlRowInput(S),P=0;P<S.cells.length;P++){var C=S.cells[P],N=b.getComputedStyle(C);if(k||N.display!=="none"){var O=void 0;T&&(O=(0,u.parseCss)(x,C,v,N,b)),j.push({rowSpan:C.rowSpan,colSpan:C.colSpan,styles:O,_element:C,content:y(C)})}}var z=b.getComputedStyle(S);if(j.length>0&&(k||z.display!=="none"))return j}function y(x){var v=x.cloneNode(!0);return v.innerHTML=v.innerHTML.replace(/\n/g,"").replace(/ +/g," "),v.innerHTML=v.innerHTML.split(/<br.*?>/).map(function(b){return b.trim()}).join(`
`),v.innerText||v.textContent||""}},776:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),d=c(356),h=c(420),p=c(744),y=c(792);function x(P,C){var N=new p.DocHandler(P),O=N.getDocumentOptions(),z=N.getGlobalOptions();(0,y.default)(N,z,O,C);var L=(0,d.assign)({},z,O,C),M;typeof window<"u"&&(M=window);var K=v(z,O,C),W=b(z,O,C),Z=S(N,L),U=T(N,L,M);return{id:C.tableId,content:U,hooks:W,styles:K,settings:Z}}l.parseInput=x;function v(P,C,N){for(var O={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},z=function(W){if(W==="columnStyles"){var Z=P[W],U=C[W],F=N[W];O.columnStyles=(0,d.assign)({},Z,U,F)}else{var J=[P,C,N],Q=J.map(function(ee){return ee[W]||{}});O[W]=(0,d.assign)({},Q[0],Q[1],Q[2])}},L=0,M=Object.keys(O);L<M.length;L++){var K=M[L];z(K)}return O}function b(P,C,N){for(var O=[P,C,N],z={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},L=0,M=O;L<M.length;L++){var K=M[L];K.didParseCell&&z.didParseCell.push(K.didParseCell),K.willDrawCell&&z.willDrawCell.push(K.willDrawCell),K.didDrawCell&&z.didDrawCell.push(K.didDrawCell),K.willDrawPage&&z.willDrawPage.push(K.willDrawPage),K.didDrawPage&&z.didDrawPage.push(K.didDrawPage)}return z}function S(P,C){var N,O,z,L,M,K,W,Z,U,F,J,Q,ee=(0,h.parseSpacing)(C.margin,40/P.scaleFactor()),ne=(N=k(P,C.startY))!==null&&N!==void 0?N:ee.top,D;C.showFoot===!0?D="everyPage":C.showFoot===!1?D="never":D=(O=C.showFoot)!==null&&O!==void 0?O:"everyPage";var G;C.showHead===!0?G="everyPage":C.showHead===!1?G="never":G=(z=C.showHead)!==null&&z!==void 0?z:"everyPage";var V=(L=C.useCss)!==null&&L!==void 0?L:!1,H=C.theme||(V?"plain":"striped"),te=!!C.horizontalPageBreak,ge=(M=C.horizontalPageBreakRepeat)!==null&&M!==void 0?M:null;return{includeHiddenHtml:(K=C.includeHiddenHtml)!==null&&K!==void 0?K:!1,useCss:V,theme:H,startY:ne,margin:ee,pageBreak:(W=C.pageBreak)!==null&&W!==void 0?W:"auto",rowPageBreak:(Z=C.rowPageBreak)!==null&&Z!==void 0?Z:"auto",tableWidth:(U=C.tableWidth)!==null&&U!==void 0?U:"auto",showHead:G,showFoot:D,tableLineWidth:(F=C.tableLineWidth)!==null&&F!==void 0?F:0,tableLineColor:(J=C.tableLineColor)!==null&&J!==void 0?J:200,horizontalPageBreak:te,horizontalPageBreakRepeat:ge,horizontalPageBreakBehaviour:(Q=C.horizontalPageBreakBehaviour)!==null&&Q!==void 0?Q:"afterAllRows"}}function k(P,C){var N=P.getLastAutoTable(),O=P.scaleFactor(),z=P.pageNumber(),L=!1;if(N&&N.startPageNumber){var M=N.startPageNumber+N.pageNumber-1;L=M===z}return typeof C=="number"?C:(C==null||C===!1)&&L&&(N==null?void 0:N.finalY)!=null?N.finalY+20/O:null}function T(P,C,N){var O=C.head||[],z=C.body||[],L=C.foot||[];if(C.html){var M=C.includeHiddenHtml;if(N){var K=(0,u.parseHtml)(P,C.html,N,M,C.useCss)||{};O=K.head||O,z=K.body||O,L=K.foot||O}else console.error("Cannot parse html in non browser environment")}var W=C.columns||j(O,z,L);return{columns:W,head:O,body:z,foot:L}}function j(P,C,N){var O=P[0]||C[0]||N[0]||[],z=[];return Object.keys(O).filter(function(L){return L!=="_element"}).forEach(function(L){var M=1,K;Array.isArray(O)?K=O[parseInt(L)]:K=O[L],typeof K=="object"&&!Array.isArray(K)&&(M=(K==null?void 0:K.colSpan)||1);for(var W=0;W<M;W++){var Z=void 0;Array.isArray(O)?Z=z.length:Z=L+(W>0?"_".concat(W):"");var U={dataKey:Z};z.push(U)}}),z}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(d,h,p,y){for(var x=function(k){k&&typeof k!="object"&&console.error("The options parameter should be of type object, is: "+typeof k),typeof k.extendWidth<"u"&&(k.tableWidth=k.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof k.margins<"u"&&(typeof k.margin>"u"&&(k.margin=k.margins),console.error("Use of deprecated option: margins, use margin instead.")),k.startY&&typeof k.startY!="number"&&(console.error("Invalid value for startY option",k.startY),delete k.startY),!k.didDrawPage&&(k.afterPageContent||k.beforePageContent||k.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),k.didDrawPage=function(L){d.applyStyles(d.userStyles),k.beforePageContent&&k.beforePageContent(L),d.applyStyles(d.userStyles),k.afterPageContent&&k.afterPageContent(L),d.applyStyles(d.userStyles),k.afterPageAdd&&L.pageNumber>1&&L.afterPageAdd(L),d.applyStyles(d.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(L){k[L]&&console.error('The "'.concat(L,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(L){var M=L[0],K=L[1];k[K]&&(console.error("Use of deprecated option ".concat(K,". Use ").concat(M," instead")),k[M]=k[K])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(L){var M=typeof L=="string"?L:L[0],K=typeof L=="string"?L:L[1];typeof k[M]<"u"&&(typeof k.styles[K]>"u"&&(k.styles[K]=k[M]),console.error("Use of deprecated option: "+M+", use the style "+K+" instead."))});for(var T=0,j=["styles","bodyStyles","headStyles","footStyles"];T<j.length;T++){var P=j[T];u(k[P]||{})}for(var C=k.columnStyles||{},N=0,O=Object.keys(C);N<O.length;N++){var z=O[N];u(C[z]||{})}},v=0,b=[h,p,y];v<b.length;v++){var S=b[v];x(S)}}l.default=c;function u(d){d.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),d.minCellHeight||(d.minCellHeight=d.rowHeight)):d.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),d.cellWidth||(d.cellWidth=d.columnWidth))}},260:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),d=c(172),h=c(420),p=function(){function b(S,k){this.pageNumber=1,this.pageCount=1,this.id=S.id,this.settings=S.settings,this.styles=S.styles,this.hooks=S.hooks,this.columns=k.columns,this.head=k.head,this.body=k.body,this.foot=k.foot}return b.prototype.getHeadHeight=function(S){return this.head.reduce(function(k,T){return k+T.getMaxCellHeight(S)},0)},b.prototype.getFootHeight=function(S){return this.foot.reduce(function(k,T){return k+T.getMaxCellHeight(S)},0)},b.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},b.prototype.callCellHooks=function(S,k,T,j,P,C){for(var N=0,O=k;N<O.length;N++){var z=O[N],L=new d.CellHookData(S,this,T,j,P,C),M=z(L)===!1;if(T.text=Array.isArray(T.text)?T.text:[T.text],M)return!1}return!0},b.prototype.callEndPageHooks=function(S,k){S.applyStyles(S.userStyles);for(var T=0,j=this.hooks.didDrawPage;T<j.length;T++){var P=j[T];P(new d.HookData(S,this,k))}},b.prototype.callWillDrawPageHooks=function(S,k){for(var T=0,j=this.hooks.willDrawPage;T<j.length;T++){var P=j[T];P(new d.HookData(S,this,k))}},b.prototype.getWidth=function(S){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var k=this.columns.reduce(function(j,P){return j+P.wrappedWidth},0);return k}else{var T=this.settings.margin;return S-T.left-T.right}},b}();l.Table=p;var y=function(){function b(S,k,T,j,P){P===void 0&&(P=!1),this.height=0,this.raw=S,S instanceof u.HtmlRowInput&&(this.raw=S._element,this.element=S._element),this.index=k,this.section=T,this.cells=j,this.spansMultiplePages=P}return b.prototype.getMaxCellHeight=function(S){var k=this;return S.reduce(function(T,j){var P;return Math.max(T,((P=k.cells[j.index])===null||P===void 0?void 0:P.height)||0)},0)},b.prototype.hasRowSpan=function(S){var k=this;return S.filter(function(T){var j=k.cells[T.index];return j?j.rowSpan>1:!1}).length>0},b.prototype.canEntireRowFit=function(S,k){return this.getMaxCellHeight(k)<=S},b.prototype.getMinimumRowHeight=function(S,k){var T=this;return S.reduce(function(j,P){var C=T.cells[P.index];if(!C)return 0;var N=k.getLineHeight(C.styles.fontSize),O=C.padding("vertical"),z=O+N;return z>j?z:j},0)},b}();l.Row=y;var x=function(){function b(S,k,T){var j,P;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=k,this.section=T,this.raw=S;var C=S;S!=null&&typeof S=="object"&&!Array.isArray(S)?(this.rowSpan=S.rowSpan||1,this.colSpan=S.colSpan||1,C=(P=(j=S.content)!==null&&j!==void 0?j:S.title)!==null&&P!==void 0?P:S,S._element&&(this.raw=S._element)):(this.rowSpan=1,this.colSpan=1);var N=C!=null?""+C:"",O=/\r\n|\r|\n/g;this.text=N.split(O)}return b.prototype.getTextPos=function(){var S;if(this.styles.valign==="top")S=this.y+this.padding("top");else if(this.styles.valign==="bottom")S=this.y+this.height-this.padding("bottom");else{var k=this.height-this.padding("vertical");S=this.y+k/2+this.padding("top")}var T;if(this.styles.halign==="right")T=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var j=this.width-this.padding("horizontal");T=this.x+j/2+this.padding("left")}else T=this.x+this.padding("left");return{x:T,y:S}},b.prototype.getContentHeight=function(S,k){k===void 0&&(k=1.15);var T=Array.isArray(this.text)?this.text.length:1,j=this.styles.fontSize/S*k,P=T*j+this.padding("vertical");return Math.max(P,this.styles.minCellHeight)},b.prototype.padding=function(S){var k=(0,h.parseSpacing)(this.styles.cellPadding,0);return S==="vertical"?k.top+k.bottom:S==="horizontal"?k.left+k.right:k[S]},b}();l.Cell=x;var v=function(){function b(S,k,T){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=S,this.raw=k,this.index=T}return b.prototype.getMaxCustomCellWidth=function(S){for(var k=0,T=0,j=S.allRows();T<j.length;T++){var P=j[T],C=P.cells[this.index];C&&typeof C.styles.cellWidth=="number"&&(k=Math.max(k,C.styles.cellWidth))}return k},b}();l.Column=v},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,d,h,p,y){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var x=Object(u),v=1;v<arguments.length;v++){var b=arguments[v];if(b!=null)for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(x[S]=b[S])}return x}l.assign=c},972:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),d=c(260),h=c(324),p=c(796),y=c(356);function x(P,C){var N=new u.DocHandler(P),O=v(C,N.scaleFactor()),z=new d.Table(C,O);return(0,h.calculateWidths)(N,z),N.applyStyles(N.userStyles),z}l.createTable=x;function v(P,C){var N=P.content,O=T(N.columns);if(N.head.length===0){var z=S(O,"head");z&&N.head.push(z)}if(N.foot.length===0){var z=S(O,"foot");z&&N.foot.push(z)}var L=P.settings.theme,M=P.styles;return{columns:O,head:b("head",N.head,O,M,L,C),body:b("body",N.body,O,M,L,C),foot:b("foot",N.foot,O,M,L,C)}}function b(P,C,N,O,z,L){var M={},K=C.map(function(W,Z){for(var U=0,F={},J=0,Q=0,ee=0,ne=N;ee<ne.length;ee++){var D=ne[ee];if(M[D.index]==null||M[D.index].left===0)if(Q===0){var G=void 0;Array.isArray(W)?G=W[D.index-J-U]:G=W[D.dataKey];var V={};typeof G=="object"&&!Array.isArray(G)&&(V=(G==null?void 0:G.styles)||{});var H=j(P,D,Z,z,O,L,V),te=new d.Cell(G,H,P);F[D.dataKey]=te,F[D.index]=te,Q=te.colSpan-1,M[D.index]={left:te.rowSpan-1,times:Q}}else Q--,J++;else M[D.index].left--,Q=M[D.index].times,U++}return new d.Row(W,Z,P,F)});return K}function S(P,C){var N={};return P.forEach(function(O){if(O.raw!=null){var z=k(C,O.raw);z!=null&&(N[O.dataKey]=z)}}),Object.keys(N).length>0?N:null}function k(P,C){if(P==="head"){if(typeof C=="object")return C.header||C.title||null;if(typeof C=="string"||typeof C=="number")return C}else if(P==="foot"&&typeof C=="object")return C.footer;return null}function T(P){return P.map(function(C,N){var O,z,L;return typeof C=="object"?L=(z=(O=C.dataKey)!==null&&O!==void 0?O:C.key)!==null&&z!==void 0?z:N:L=N,new d.Column(L,C,N)})}function j(P,C,N,O,z,L,M){var K=(0,p.getTheme)(O),W;P==="head"?W=z.headStyles:P==="body"?W=z.bodyStyles:P==="foot"&&(W=z.footStyles);var Z=(0,y.assign)({},K.table,K[P],z.styles,W),U=z.columnStyles[C.dataKey]||z.columnStyles[C.index]||{},F=P==="body"?U:{},J=P==="body"&&N%2===0?(0,y.assign)({},K.alternateRow,z.alternateRowStyles):{},Q=(0,p.defaultStyles)(L),ee=(0,y.assign)({},Q,Z,J,F);return(0,y.assign)(ee,M)}},664:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),d=c(260),h=c(744),p=c(356),y=c(136),x=c(224);function v(U,F){var J=F.settings,Q=J.startY,ee=J.margin,ne={x:ee.left,y:Q},D=F.getHeadHeight(F.columns)+F.getFootHeight(F.columns),G=Q+ee.bottom+D;if(J.pageBreak==="avoid"){var V=F.body,H=V.reduce(function(xe,ve){return xe+ve.height},0);G+=H}var te=new h.DocHandler(U);(J.pageBreak==="always"||J.startY!=null&&G>te.pageSize().height)&&(Z(te),ne.y=ee.top),F.callWillDrawPageHooks(te,ne);var ge=(0,p.assign)({},ne);F.startPageNumber=te.pageNumber(),J.horizontalPageBreak?b(te,F,ge,ne):(te.applyStyles(te.userStyles),(J.showHead==="firstPage"||J.showHead==="everyPage")&&F.head.forEach(function(xe){return z(te,F,xe,ne,F.columns)}),te.applyStyles(te.userStyles),F.body.forEach(function(xe,ve){var Ne=ve===F.body.length-1;O(te,F,xe,Ne,ge,ne,F.columns)}),te.applyStyles(te.userStyles),(J.showFoot==="lastPage"||J.showFoot==="everyPage")&&F.foot.forEach(function(xe){return z(te,F,xe,ne,F.columns)})),(0,u.addTableBorder)(te,F,ge,ne),F.callEndPageHooks(te,ne),F.finalY=ne.y,U.lastAutoTable=F,U.previousAutoTable=F,U.autoTable&&(U.autoTable.previous=F),te.applyStyles(te.userStyles)}l.drawTable=v;function b(U,F,J,Q){var ee=(0,x.calculateAllColumnsCanFitInPage)(U,F),ne=F.settings;if(ne.horizontalPageBreakBehaviour==="afterAllRows")ee.forEach(function(H,te){U.applyStyles(U.userStyles),te>0?W(U,F,J,Q,H.columns,!0):S(U,F,Q,H.columns),k(U,F,J,Q,H.columns),j(U,F,Q,H.columns)});else for(var D=-1,G=ee[0],V=function(){var H=D;if(G){U.applyStyles(U.userStyles);var te=G.columns;D>=0?W(U,F,J,Q,te,!0):S(U,F,Q,te),H=T(U,F,D+1,Q,te),j(U,F,Q,te)}var ge=H-D;ee.slice(1).forEach(function(xe){U.applyStyles(U.userStyles),W(U,F,J,Q,xe.columns,!0),T(U,F,D+1,Q,xe.columns,ge),j(U,F,Q,xe.columns)}),D=H};D<F.body.length-1;)V()}function S(U,F,J,Q){var ee=F.settings;U.applyStyles(U.userStyles),(ee.showHead==="firstPage"||ee.showHead==="everyPage")&&F.head.forEach(function(ne){return z(U,F,ne,J,Q)})}function k(U,F,J,Q,ee){U.applyStyles(U.userStyles),F.body.forEach(function(ne,D){var G=D===F.body.length-1;O(U,F,ne,G,J,Q,ee)})}function T(U,F,J,Q,ee,ne){U.applyStyles(U.userStyles),ne=ne??F.body.length;var D=Math.min(J+ne,F.body.length),G=-1;return F.body.slice(J,D).forEach(function(V,H){var te=J+H===F.body.length-1,ge=K(U,F,te,Q);V.canEntireRowFit(ge,ee)&&(z(U,F,V,Q,ee),G=J+H)}),G}function j(U,F,J,Q){var ee=F.settings;U.applyStyles(U.userStyles),(ee.showFoot==="lastPage"||ee.showFoot==="everyPage")&&F.foot.forEach(function(ne){return z(U,F,ne,J,Q)})}function P(U,F,J){var Q=J.getLineHeight(U.styles.fontSize),ee=U.padding("vertical"),ne=Math.floor((F-ee)/Q);return Math.max(0,ne)}function C(U,F,J,Q){var ee={};U.spansMultiplePages=!0,U.height=0;for(var ne=0,D=0,G=J.columns;D<G.length;D++){var V=G[D],H=U.cells[V.index];if(H){Array.isArray(H.text)||(H.text=[H.text]);var te=new d.Cell(H.raw,H.styles,H.section);te=(0,p.assign)(te,H),te.text=[];var ge=P(H,F,Q);H.text.length>ge&&(te.text=H.text.splice(ge,H.text.length));var xe=Q.scaleFactor(),ve=Q.getLineHeightFactor();H.contentHeight=H.getContentHeight(xe,ve),H.contentHeight>=F&&(H.contentHeight=F,te.styles.minCellHeight-=F),H.contentHeight>U.height&&(U.height=H.contentHeight),te.contentHeight=te.getContentHeight(xe,ve),te.contentHeight>ne&&(ne=te.contentHeight),ee[V.index]=te}}var Ne=new d.Row(U.raw,-1,U.section,ee,!0);Ne.height=ne;for(var He=0,Ke=J.columns;He<Ke.length;He++){var V=Ke[He],te=Ne.cells[V.index];te&&(te.height=Ne.height);var H=U.cells[V.index];H&&(H.height=U.height)}return Ne}function N(U,F,J,Q){var ee=U.pageSize().height,ne=Q.settings.margin,D=ne.top+ne.bottom,G=ee-D;F.section==="body"&&(G-=Q.getHeadHeight(Q.columns)+Q.getFootHeight(Q.columns));var V=F.getMinimumRowHeight(Q.columns,U),H=V<J;if(V>G)return console.error("Will not be able to print row ".concat(F.index," correctly since it's minimum height is larger than page height")),!0;if(!H)return!1;var te=F.hasRowSpan(Q.columns),ge=F.getMaxCellHeight(Q.columns)>G;return ge?(te&&console.error("The content of row ".concat(F.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||Q.settings.rowPageBreak==="avoid")}function O(U,F,J,Q,ee,ne,D){var G=K(U,F,Q,ne);if(J.canEntireRowFit(G,D))z(U,F,J,ne,D);else if(N(U,J,G,F)){var V=C(J,G,F,U);z(U,F,J,ne,D),W(U,F,ee,ne,D),O(U,F,V,Q,ee,ne,D)}else W(U,F,ee,ne,D),O(U,F,J,Q,ee,ne,D)}function z(U,F,J,Q,ee){Q.x=F.settings.margin.left;for(var ne=0,D=ee;ne<D.length;ne++){var G=D[ne],V=J.cells[G.index];if(!V){Q.x+=G.width;continue}U.applyStyles(V.styles),V.x=Q.x,V.y=Q.y;var H=F.callCellHooks(U,F.hooks.willDrawCell,V,J,G,Q);if(H===!1){Q.x+=G.width;continue}L(U,V,Q);var te=V.getTextPos();(0,y.default)(V.text,te.x,te.y,{halign:V.styles.halign,valign:V.styles.valign,maxWidth:Math.ceil(V.width-V.padding("left")-V.padding("right"))},U.getDocument()),F.callCellHooks(U,F.hooks.didDrawCell,V,J,G,Q),Q.x+=G.width}Q.y+=J.height}function L(U,F,J){var Q=F.styles;if(U.getDocument().setFillColor(U.getDocument().getFillColor()),typeof Q.lineWidth=="number"){var ee=(0,u.getFillStyle)(Q.lineWidth,Q.fillColor);ee&&U.rect(F.x,J.y,F.width,F.height,ee)}else typeof Q.lineWidth=="object"&&(Q.fillColor&&U.rect(F.x,J.y,F.width,F.height,"F"),M(U,F,J,Q.lineWidth))}function M(U,F,J,Q){var ee,ne,D,G;Q.top&&(ee=J.x,ne=J.y,D=J.x+F.width,G=J.y,Q.right&&(D+=.5*Q.right),Q.left&&(ee-=.5*Q.left),V(Q.top,ee,ne,D,G)),Q.bottom&&(ee=J.x,ne=J.y+F.height,D=J.x+F.width,G=J.y+F.height,Q.right&&(D+=.5*Q.right),Q.left&&(ee-=.5*Q.left),V(Q.bottom,ee,ne,D,G)),Q.left&&(ee=J.x,ne=J.y,D=J.x,G=J.y+F.height,Q.top&&(ne-=.5*Q.top),Q.bottom&&(G+=.5*Q.bottom),V(Q.left,ee,ne,D,G)),Q.right&&(ee=J.x+F.width,ne=J.y,D=J.x+F.width,G=J.y+F.height,Q.top&&(ne-=.5*Q.top),Q.bottom&&(G+=.5*Q.bottom),V(Q.right,ee,ne,D,G));function V(H,te,ge,xe,ve){U.getDocument().setLineWidth(H),U.getDocument().line(te,ge,xe,ve,"S")}}function K(U,F,J,Q){var ee=F.settings.margin.bottom,ne=F.settings.showFoot;return(ne==="everyPage"||ne==="lastPage"&&J)&&(ee+=F.getFootHeight(F.columns)),U.pageSize().height-Q.y-ee}function W(U,F,J,Q,ee,ne){ee===void 0&&(ee=[]),ne===void 0&&(ne=!1),U.applyStyles(U.userStyles),F.settings.showFoot==="everyPage"&&!ne&&F.foot.forEach(function(G){return z(U,F,G,Q,ee)}),F.callEndPageHooks(U,Q);var D=F.settings.margin;(0,u.addTableBorder)(U,F,J,Q),Z(U),F.pageNumber++,F.pageCount++,Q.x=D.left,Q.y=D.top,J.y=D.top,F.callWillDrawPageHooks(U,Q),F.settings.showHead==="everyPage"&&(F.head.forEach(function(G){return z(U,F,G,Q,ee)}),U.applyStyles(U.userStyles))}l.addPage=W;function Z(U){var F=U.pageNumber();U.setPage(F+1);var J=U.pageNumber();return J===F?(U.addPage(),!0):!1}},224:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function d(p,y,x){var v;x===void 0&&(x={});var b=(0,u.getPageAvailableWidth)(p,y),S=new Map,k=[],T=[],j=[];y.settings.horizontalPageBreakRepeat,Array.isArray(y.settings.horizontalPageBreakRepeat)?j=y.settings.horizontalPageBreakRepeat:(typeof y.settings.horizontalPageBreakRepeat=="string"||typeof y.settings.horizontalPageBreakRepeat=="number")&&(j=[y.settings.horizontalPageBreakRepeat]),j.forEach(function(O){var z=y.columns.find(function(L){return L.dataKey===O||L.index===O});z&&!S.has(z.index)&&(S.set(z.index,!0),k.push(z.index),T.push(y.columns[z.index]),b-=z.wrappedWidth)});for(var P=!0,C=(v=x==null?void 0:x.start)!==null&&v!==void 0?v:0;C<y.columns.length;){if(S.has(C)){C++;continue}var N=y.columns[C].wrappedWidth;if(P||b>=N)P=!1,k.push(C),T.push(y.columns[C]),b-=N;else break;C++}return{colIndexes:k,columns:T,lastIndex:C-1}}function h(p,y){for(var x=[],v=0;v<y.columns.length;v++){var b=d(p,y,{start:v});b.columns.length&&(x.push(b),v=b.lastIndex)}return x}l.calculateAllColumnsCanFitInPage=h},324:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function d(k,T){h(k,T);var j=[],P=0;T.columns.forEach(function(N){var O=N.getMaxCustomCellWidth(T);O?N.width=O:(N.width=N.wrappedWidth,j.push(N)),P+=N.width});var C=T.getWidth(k.pageSize().width)-P;C&&(C=p(j,C,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),C&&(C=p(j,C,function(N){return N.minWidth})),C=Math.abs(C),!T.settings.horizontalPageBreak&&C>.1/k.scaleFactor()&&(C=C<1?C:Math.round(C),console.warn("Of the table content, ".concat(C," units width could not fit page"))),x(T),v(T,k),y(T)}l.calculateWidths=d;function h(k,T){var j=k.scaleFactor(),P=T.settings.horizontalPageBreak,C=(0,u.getPageAvailableWidth)(k,T);T.allRows().forEach(function(N){for(var O=0,z=T.columns;O<z.length;O++){var L=z[O],M=N.cells[L.index];if(M){var K=T.hooks.didParseCell;T.callCellHooks(k,K,M,N,L,null);var W=M.padding("horizontal");M.contentWidth=(0,u.getStringWidth)(M.text,M.styles,k)+W;var Z=(0,u.getStringWidth)(M.text.join(" ").split(/[^\S\u00A0]+/),M.styles,k);if(M.minReadableWidth=Z+M.padding("horizontal"),typeof M.styles.cellWidth=="number")M.minWidth=M.styles.cellWidth,M.wrappedWidth=M.styles.cellWidth;else if(M.styles.cellWidth==="wrap"||P===!0)M.contentWidth>C?(M.minWidth=C,M.wrappedWidth=C):(M.minWidth=M.contentWidth,M.wrappedWidth=M.contentWidth);else{var U=10/j;M.minWidth=M.styles.minCellWidth||U,M.wrappedWidth=M.contentWidth,M.minWidth>M.wrappedWidth&&(M.wrappedWidth=M.minWidth)}}}}),T.allRows().forEach(function(N){for(var O=0,z=T.columns;O<z.length;O++){var L=z[O],M=N.cells[L.index];if(M&&M.colSpan===1)L.wrappedWidth=Math.max(L.wrappedWidth,M.wrappedWidth),L.minWidth=Math.max(L.minWidth,M.minWidth),L.minReadableWidth=Math.max(L.minReadableWidth,M.minReadableWidth);else{var K=T.styles.columnStyles[L.dataKey]||T.styles.columnStyles[L.index]||{},W=K.cellWidth||K.minCellWidth;W&&typeof W=="number"&&(L.minWidth=W,L.wrappedWidth=W)}M&&(M.colSpan>1&&!L.minWidth&&(L.minWidth=M.minWidth),M.colSpan>1&&!L.wrappedWidth&&(L.wrappedWidth=M.minWidth))}})}function p(k,T,j){for(var P=T,C=k.reduce(function(U,F){return U+F.wrappedWidth},0),N=0;N<k.length;N++){var O=k[N],z=O.wrappedWidth/C,L=P*z,M=O.width+L,K=j(O),W=M<K?K:M;T-=W-O.width,O.width=W}if(T=Math.round(T*1e10)/1e10,T){var Z=k.filter(function(U){return T<0?U.width>j(U):!0});Z.length&&(T=p(Z,T,j))}return T}l.resizeColumns=p;function y(k){for(var T={},j=1,P=k.allRows(),C=0;C<P.length;C++)for(var N=P[C],O=0,z=k.columns;O<z.length;O++){var L=z[O],M=T[L.index];if(j>1)j--,delete N.cells[L.index];else if(M)M.cell.height+=N.height,j=M.cell.colSpan,delete N.cells[L.index],M.left--,M.left<=1&&delete T[L.index];else{var K=N.cells[L.index];if(!K)continue;if(K.height=N.height,K.rowSpan>1){var W=P.length-C,Z=K.rowSpan>W?W:K.rowSpan;T[L.index]={cell:K,left:Z,row:N}}}}}function x(k){for(var T=k.allRows(),j=0;j<T.length;j++)for(var P=T[j],C=null,N=0,O=0,z=0;z<k.columns.length;z++){var L=k.columns[z];if(O-=1,O>1&&k.columns[z+1])N+=L.width,delete P.cells[L.index];else if(C){var M=C;delete P.cells[L.index],C=null,M.width=L.width+N}else{var M=P.cells[L.index];if(!M)continue;if(O=M.colSpan,N=0,M.colSpan>1){C=M,N+=L.width;continue}M.width=L.width+N}}}function v(k,T){for(var j={count:0,height:0},P=0,C=k.allRows();P<C.length;P++){for(var N=C[P],O=0,z=k.columns;O<z.length;O++){var L=z[O],M=N.cells[L.index];if(M){T.applyStyles(M.styles,!0);var K=M.width-M.padding("horizontal");if(M.styles.overflow==="linebreak")M.text=T.splitTextToSize(M.text,K+1/T.scaleFactor(),{fontSize:M.styles.fontSize});else if(M.styles.overflow==="ellipsize")M.text=b(M.text,K,M.styles,T,"...");else if(M.styles.overflow==="hidden")M.text=b(M.text,K,M.styles,T,"");else if(typeof M.styles.overflow=="function"){var W=M.styles.overflow(M.text,K);typeof W=="string"?M.text=[W]:M.text=W}M.contentHeight=M.getContentHeight(T.scaleFactor(),T.getLineHeightFactor());var Z=M.contentHeight/M.rowSpan;M.rowSpan>1&&j.count*j.height<Z*M.rowSpan?j={height:Z,count:M.rowSpan}:j&&j.count>0&&j.height>Z&&(Z=j.height),Z>N.height&&(N.height=Z)}}j.count--}}function b(k,T,j,P,C){return k.map(function(N){return S(N,T,j,P,C)})}l.ellipsize=b;function S(k,T,j,P,C){var N=1e4*P.scaleFactor();if(T=Math.ceil(T*N)/N,T>=(0,u.getStringWidth)(k,j,P))return k;for(;T<(0,u.getStringWidth)(k+C,j,P)&&!(k.length<=1);)k=k.substring(0,k.length-1);return k.trim()+C}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),c=s(776),u=s(664),d=s(972),h=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return h.Table}});var p=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var y=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return y.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return y.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return y.Row}});function x(T){(0,l.default)(T)}a.applyPlugin=x;function v(T,j){var P=(0,c.parseInput)(T,j),C=(0,d.createTable)(T,P);(0,u.drawTable)(T,C)}function b(T,j){var P=(0,c.parseInput)(T,j);return(0,d.createTable)(T,P)}a.__createTable=b;function S(T,j){(0,u.drawTable)(T,j)}a.__drawTable=S;try{var k=s(964);k.jsPDF&&(k=k.jsPDF),x(k)}catch{}a.default=v}(),o}()})}(px)),px.exports}hoe();const Oy=({icon:t,title:e,value:n,description:r,trend:i,percentage:s})=>g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(t,{className:"w-6 h-6 text-gray-500 mr-3"}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:e}),g.jsx("div",{className:"text-2xl font-semibold",children:n})]})]}),i&&s&&g.jsxs("div",{className:`flex items-center ${i==="up"?"text-green-500":"text-red-500"}`,children:[g.jsx(J_,{className:`w-4 h-4 ${i==="down"&&"rotate-180"}`}),g.jsxs("span",{className:"text-sm ml-1",children:[s,"%"]})]})]}),g.jsx("p",{className:"mt-2 text-sm text-gray-500",children:r})]}),poe=()=>{const[t,e]=Y.useState("30days"),[n,r]=Y.useState({activeRentals:0,monthlyRentals:0,avgDuration:0,totalRevenue:0,popularEquipment:[],monthlyStats:[],equipmentCategories:[],overdueRentals:[],topCustomers:[]}),[i,s]=Y.useState(!0),[o,a]=Y.useState(null);Y.useEffect(()=>{l()},[t]);const l=async()=>{try{s(!0);const{data:d,error:h}=await lt.rpc("get_rental_statistics",{p_date_range:t});if(h)throw h;r({activeRentals:(d==null?void 0:d.activeRentals)||0,monthlyRentals:(d==null?void 0:d.monthlyRentals)||0,avgDuration:(d==null?void 0:d.avgDuration)||0,totalRevenue:(d==null?void 0:d.totalRevenue)||0,popularEquipment:(d==null?void 0:d.popularEquipment)||[],monthlyStats:(d==null?void 0:d.monthlyStats)||[],equipmentCategories:(d==null?void 0:d.equipmentCategories)||[],overdueRentals:(d==null?void 0:d.overdueRentals)||[],topCustomers:(d==null?void 0:d.topCustomers)||[]}),a(null)}catch(d){console.error("Error loading statistics:",d),a("Nie udało się załadować statystyk")}finally{s(!1)}},c=()=>{const d=new ln;d.setFontSize(20),d.text("Raport statystyk wypożyczeń",20,20),d.setFontSize(12),d.text(`Wygenerowano: ${new Date().toLocaleString("pl-PL")}`,20,30),d.setFontSize(14),d.text("Główne wskaźniki:",20,45);const h=[["Aktywne wypożyczenia",n.activeRentals.toString()],["Wypożyczenia w tym miesiącu",n.monthlyRentals.toString()],["Średni czas wypożyczenia",`${n.avgDuration.toFixed(1)} dni`],["Całkowity przychód",`${n.totalRevenue.toFixed(2)} zł`]];d.autoTable({startY:50,head:[["Wskaźnik","Wartość"]],body:h,theme:"grid"}),d.text("Najpopularniejszy sprzęt:",20,d.lastAutoTable.finalY+15);const p=n.popularEquipment.map(y=>[y.name,y.count.toString(),`${y.percentage}%`]);d.autoTable({startY:d.lastAutoTable.finalY+20,head:[["Nazwa","Liczba wypożyczeń","Udział"]],body:p,theme:"grid"}),d.save("raport-wypozyczen.pdf")},u=()=>{const d=[["Raport statystyk wypożyczeń"],["Wygenerowano:",new Date().toLocaleString("pl-PL")],[],["Główne wskaźniki"],["Aktywne wypożyczenia",n.activeRentals],["Wypożyczenia w tym miesiącu",n.monthlyRentals],["Średni czas wypożyczenia",n.avgDuration.toFixed(1)],["Całkowity przychód",n.totalRevenue.toFixed(2)],[],["Najpopularniejszy sprzęt"],["Nazwa","Liczba wypożyczeń","Udział %"],...n.popularEquipment.map(y=>[y.name,y.count,y.percentage])].map(y=>y.join(",")).join(`
`),h=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download="raport-wypozyczen.csv",document.body.appendChild(p),p.click(),document.body.removeChild(p)};return i?g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):o?g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 flex items-center",children:[g.jsx(uc,{className:"w-5 h-5 mr-2"}),g.jsx("p",{children:o})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Statystyki wypożyczeń"}),g.jsxs("select",{value:t,onChange:d=>e(d.target.value),className:"px-4 py-2 border rounded-lg",children:[g.jsx("option",{value:"7days",children:"Ostatnie 7 dni"}),g.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),g.jsx("option",{value:"90days",children:"Ostatnie 90 dni"}),g.jsx("option",{value:"12months",children:"Ostatnie 12 miesięcy"})]})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs("button",{onClick:c,className:"flex items-center px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:[g.jsx(dz,{className:"w-5 h-5 mr-2"}),"PDF"]}),g.jsxs("button",{onClick:u,className:"flex items-center px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:[g.jsx(Nh,{className:"w-5 h-5 mr-2"}),"CSV"]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsx(Oy,{icon:ta,title:"Aktywne wypożyczenia",value:n.activeRentals,description:"Obecnie wypożyczony sprzęt",trend:"up",percentage:8}),g.jsx(Oy,{icon:dc,title:"Wypożyczenia w tym miesiącu",value:n.monthlyRentals,description:"Wzrost o 15% m/m",trend:"up",percentage:15}),g.jsx(Oy,{icon:dc,title:"Średni czas wypożyczenia",value:`${n.avgDuration.toFixed(1)} dni`,description:"Średnia z ostatnich 30 dni"}),g.jsx(Oy,{icon:Lv,title:"Całkowity przychód",value:`${n.totalRevenue.toFixed(2)} zł`,description:"W wybranym okresie",trend:"up",percentage:12})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Liczba wypożyczeń w czasie"}),g.jsx(WP,{className:"w-5 h-5 text-gray-400"})]}),g.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Wykres będzie dostępny wkrótce"})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Podział na kategorie sprzętu"}),g.jsx(wz,{className:"w-5 h-5 text-gray-400"})]}),g.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Wykres będzie dostępny wkrótce"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Najpopularniejszy sprzęt"}),g.jsx("div",{className:"space-y-4",children:n.popularEquipment.map((d,h)=>g.jsxs("div",{className:"flex items-center",children:[g.jsxs("div",{className:"w-8 text-sm text-gray-500",children:[h+1,"."]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),g.jsxs("div",{className:"text-sm text-gray-500",children:[d.count," wypożyczeń"]})]}),g.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:`${d.percentage}%`}})})]},h))})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Najczęściej wypożyczający klienci"}),g.jsx("div",{className:"space-y-4",children:n.topCustomers.map((d,h)=>g.jsxs("div",{className:"flex items-center",children:[g.jsxs("div",{className:"w-8 text-sm text-gray-500",children:[h+1,"."]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),g.jsxs("div",{className:"text-sm text-gray-500",children:[d.rentals," wypożyczeń, ",d.totalValue," zł"]})]})]},h))})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Przeterminowane wypożyczenia"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Klient"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sprzęt"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data zwrotu"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opóźnienie (dni)"})]})}),g.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.overdueRentals.map((d,h)=>g.jsxs("tr",{children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.customerName}),g.jsx("div",{className:"text-sm text-gray-500",children:d.customerPhone})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm text-gray-900",children:d.equipmentName})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm text-gray-900",children:new Date(d.returnDate).toLocaleDateString()})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-medium text-red-600",children:d.daysOverdue})})]},h)),n.overdueRentals.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Brak przeterminowanych wypożyczeń"})})]})]})})]})]})},moe=async(t,e=2,n=1e3)=>{let r=null;for(let i=0;i<=e;i++)try{return await t()}catch(s){console.warn(`Próba ${i+1}/${e+1} nie powiodła się:`,s),r=s,i<e&&await new Promise(o=>setTimeout(o,n))}throw r},goe=()=>{var Sr,jt;const{id:t}=q_(),e=kl(),n=mu(),[r,i]=Y.useState(null),[s,o]=Y.useState(!0),[a,l]=Y.useState(null),[c,u]=Y.useState(""),[d,h]=Y.useState(!1),[p,y]=Y.useState([]),[x]=Y.useState([{id:"pending",label:"Oczekujące",color:"bg-yellow-100 text-yellow-800",icon:cz},{id:"confirmed",label:"Potwierdzone",color:"bg-green-100 text-green-800",icon:zd},{id:"picked_up",label:"Odebrane",color:"bg-blue-100 text-blue-800",icon:ta},{id:"completed",label:"Zakończone",color:"bg-indigo-100 text-indigo-800",icon:zd},{id:"cancelled",label:"Anulowane",color:"bg-red-100 text-red-800",icon:h5},{id:"archived",label:"Historyczne",color:"bg-gray-100 text-gray-800",icon:pz}]),[v,b]=Y.useState(!1),[S,k]=Y.useState({start_date:"",end_date:"",start_time:"08:00",end_time:"18:00"}),[T,j]=Y.useState([]),[P,C]=Y.useState([]),[N,O]=Y.useState(""),[z,L]=Y.useState(!1),[M,K]=Y.useState([{id:"gas",name:"Butla gazowa",price:50,quantity:0},{id:"vacuum",name:"Odkurzacz do żyrafy",price:25,quantity:0},{id:"powder",name:"Proszek piorący Kärcher 100g",price:10,quantity:0},{id:"scaffold",name:"RUSZTOWANIE",price:100,quantity:0},{id:"disc",name:"Tarcza do gipsu",price:15,quantity:0},{id:"drill152",name:"Wiertło do wiertnicy 152 mm",price:40,quantity:0},{id:"drill202",name:"Wiertło do wiertnicy 202 mm",price:80,quantity:0},{id:"drill82",name:"Wiertło do wiertnicy 82, 112, 132 mm",price:30,quantity:0}]),[W,Z]=Y.useState(""),[U,F]=Y.useState([]),[J,Q]=Y.useState(!1),[ee,ne]=Y.useState({id:"",first_name:"",last_name:"",email:"",phone:"",company_name:"",company_nip:"",street:"",city:"",postal_code:"",notes:""}),[D,G]=Y.useState(!1),[V,H]=Y.useState(!1),[te,ge]=Y.useState(""),[xe,ve]=Y.useState(()=>null),[Ne,He]=Y.useState([]),[Ke,qe]=Y.useState(!1),[Be,Te]=Y.useState({amount:0,payment_type:"advance",payment_method:"cash",notes:""}),[fe,Ge]=Y.useState([]),[et,Le]=Y.useState(!1),[ke,We]=Y.useState({equipment_id:"",description:"",category:"mechanical",priority:"important",is_customer_fault:!1,images:[]}),[at,xt]=Y.useState(!1),[_t,Pt]=Y.useState("");Y.useEffect(()=>{if(hn(),Wn(),r){const pe=new Date(r.start_date),Qe=new Date(r.end_date);k({start_date:pe.toISOString().split("T")[0],end_date:Qe.toISOString().split("T")[0],start_time:pe.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",hour12:!1}),end_time:Qe.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",hour12:!1})}),xt(!!r.customer.company_name),ne({id:r.customer.id,first_name:r.customer.first_name,last_name:r.customer.last_name,email:r.customer.email,phone:r.customer.phone,company_name:r.customer.company_name||"",company_nip:r.customer.company_nip||"",street:r.customer.street||"",city:r.customer.city||"",postal_code:r.customer.postal_code||"",notes:""}),r.items&&C(r.items.map(vt=>({id:vt.id||`temp-${Math.random().toString(36).substring(2,9)}`,name:vt.equipment_name,quantity:vt.quantity,price:vt.price_per_day,deposit:vt.deposit})))}},[t]),Y.useEffect(()=>{if(r){const pe=new Date(r.start_date),Qe=new Date(r.end_date);k({start_date:pe.toISOString().split("T")[0],end_date:Qe.toISOString().split("T")[0],start_time:pe.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",hour12:!1}),end_time:Qe.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",hour12:!1})}),xt(!!r.customer.company_name),ne({id:r.customer.id,first_name:r.customer.first_name,last_name:r.customer.last_name,email:r.customer.email,phone:r.customer.phone,company_name:r.customer.company_name||"",company_nip:r.customer.company_nip||"",street:r.customer.street||"",city:r.customer.city||"",postal_code:r.customer.postal_code||"",notes:""})}},[r]),Y.useEffect(()=>{(async()=>{try{const{data:Qe,error:vt}=await lt.from("equipment").select("*").order("name");if(vt)throw vt;Qe&&j(Qe)}catch(Qe){console.error("Error loading equipment:",Qe)}})()},[]),Y.useEffect(()=>{W.length>=3?(async()=>{try{const{data:Qe,error:vt}=await lt.from("customers").select("*").or(`first_name.ilike.%${W}%,last_name.ilike.%${W}%,email.ilike.%${W}%,phone.ilike.%${W}%`).limit(5);if(vt)throw vt;Qe&&(F(Qe),Q(!0))}catch(Qe){console.error("Error searching customers:",Qe)}})():Q(!1)},[W]);const Vt=pe=>{O(pe.target.value),L(!0)},Xt=pe=>{const Qe=P.findIndex(vt=>vt.id===pe.id);if(Qe>=0){const vt=[...P];vt[Qe].quantity+=1,C(vt)}else C([...P,{id:pe.id,name:pe.name,quantity:1,price:pe.price,deposit:pe.deposit}]);O(""),L(!1)},Bt=pe=>{ge("Czy na pewno chcesz usunąć ten produkt z rezerwacji?"),ve(()=>()=>{C(P.filter(Qe=>Qe.id!==pe)),H(!1)}),H(!0)},It=(pe,Qe)=>{const vt=P.find(Et=>Et.id===pe);if(Qe<0&&vt&&vt.quantity+Qe<=0){ge("Czy na pewno chcesz usunąć ten produkt z rezerwacji?"),ve(()=>()=>{const Et=P.map(re=>{if(re.id===pe){const ye=Math.max(0,re.quantity+Qe);return{...re,quantity:ye}}return re}).filter(re=>re.quantity>0);C(Et),H(!1)}),H(!0);return}const $t=P.map(Et=>{if(Et.id===pe){const re=Math.max(0,Et.quantity+Qe);return{...Et,quantity:re}}return Et}).filter(Et=>Et.quantity>0);C($t)},Ft=(pe,Qe)=>{const vt=M.find(Et=>Et.id===pe);if(Qe<0&&vt&&vt.quantity===1){ge("Czy na pewno chcesz usunąć tę usługę dodatkową?"),ve(()=>()=>{const Et=M.map(re=>{if(re.id===pe){const ye=Math.max(0,re.quantity+Qe);return{...re,quantity:ye}}return re});K(Et),H(!1)}),H(!0);return}const $t=M.map(Et=>{if(Et.id===pe){const re=Math.max(0,Et.quantity+Qe);return{...Et,quantity:re}}return Et});K($t)},dt=pe=>{ne({id:pe.id,first_name:pe.first_name,last_name:pe.last_name,email:pe.email,phone:pe.phone,company_name:pe.company_name||"",company_nip:pe.company_nip||"",street:pe.street||"",city:pe.city||"",postal_code:pe.postal_code||"",notes:ee.notes}),Z(`${pe.first_name} ${pe.last_name}`),Q(!1)},Tn=async()=>{if(!ee.first_name||!ee.last_name){alert("Proszę podać imię i nazwisko klienta");return}try{const{data:pe,error:Qe}=await lt.from("customers").insert({first_name:ee.first_name,last_name:ee.last_name,email:ee.email,phone:ee.phone,company_name:ee.company_name||null,company_nip:ee.company_nip||null,street:ee.street||null,city:ee.city||null,postal_code:ee.postal_code||null}).select().single();if(Qe)throw Qe;pe&&(Z(`${pe.first_name} ${pe.last_name}`),G(!1))}catch(pe){console.error("Error adding customer:",pe),alert("Wystąpił błąd podczas dodawania klienta")}},sn=()=>{const pe=P.reduce((vt,$t)=>vt+$t.price*$t.quantity,0),Qe=M.reduce((vt,$t)=>vt+$t.price*$t.quantity,0);return pe+Qe},Wn=async()=>{try{const{data:pe,error:Qe}=await lt.from("reservation_notes").select("*").eq("reservation_id",t).order("created_at",{ascending:!1});if(Qe)throw Qe;y(pe||[])}catch(pe){console.error("Error loading comments:",pe),l("Nie udało się załadować komentarzy")}},hn=async()=>{try{const{data:pe,error:Qe}=await lt.from("admin_reservations_view").select("*").eq("id",t).single();if(!Qe&&pe){i(pe),o(!1);return}console.error("Error loading from view, trying direct tables:",Qe);const{data:vt,error:$t}=await lt.from("reservations").select(`
          id,
          status,
          start_date,
          end_date,
          start_time,
          end_time,
          total_price,
          customers (
            id,
            first_name,
            last_name,
            email,
            phone,
            company_name,
            company_nip,
            street,
            city,
            postal_code
          ),
          reservation_items (
            id,
            equipment_id,
            equipment:equipment (
              id,
              name,
              price_per_day,
              deposit
            ),
            quantity
          )
        `).eq("id",t).single();if($t){console.error("Error loading reservation details:",$t),l("Nie udało się załadować szczegółów rezerwacji"),o(!1);return}if(vt){const Et=vt,re=Et.customers||{},ye={id:Et.id,status:Et.status||"pending",start_date:Et.start_date,end_date:Et.end_date,total_price:Et.total_price||0,customer:{id:re.id||"",first_name:re.first_name||"",last_name:re.last_name||"",email:re.email||"",phone:re.phone||"",company_name:re.company_name||"",company_nip:re.company_nip||"",street:re.street||"",city:re.city||"",postal_code:re.postal_code||""},items:Array.isArray(Et.reservation_items)?Et.reservation_items.map(de=>{var he,we,be;return{id:de.id,equipment_name:((he=de.equipment)==null?void 0:he.name)||"Nieznany sprzęt",quantity:de.quantity||1,price_per_day:((we=de.equipment)==null?void 0:we.price_per_day)||0,deposit:((be=de.equipment)==null?void 0:be.deposit)||0}}):[],history:[],reservation:{id:Et.id,start_date:Et.start_date,end_date:Et.end_date,start_time:Et.start_time||"08:00",end_time:Et.end_time||"18:00"}};i(ye)}}catch(pe){console.error("Error loading customer details:",pe),l("Nie udało się załadować szczegółów klienta")}finally{o(!1)}},jn=async pe=>{try{h(!0);const{error:Qe}=await lt.rpc("update_reservation_status",{p_reservation_id:t,p_new_status:pe,p_comment:`Status zmieniony na: ${pe}`});if(Qe)throw Qe;await hn()}catch(Qe){console.error("Error updating status:",Qe),l("Nie udało się zaktualizować statusu")}finally{h(!1)}},Wr=async pe=>{if(pe.preventDefault(),!!c.trim())try{h(!0);const{error:Qe}=await lt.from("reservation_notes").insert({reservation_id:t,content:c});if(Qe)throw Qe;u(""),await Wn()}catch(Qe){console.error("Error adding comment:",Qe),l("Nie udało się dodać komentarza")}finally{h(!1)}},yn=async()=>{try{const{data:pe,error:Qe}=await lt.from("profiles").select("id").limit(1);return Qe?(console.error("Błąd połączenia z Supabase:",Qe),!1):!0}catch(pe){return console.error("Błąd połączenia z Supabase:",pe),!1}},Fr=async()=>{if(!r||!v)return;if(!await yn()){alert("Brak połączenia z bazą danych. Sprawdź połączenie internetowe i spróbuj ponownie.");return}const Qe=S.start_time.split(":").map(Number),vt=S.end_time.split(":").map(Number),$t=new Date(S.start_date),Et=new Date(S.end_date),re=$t.getDay()===6||Et.getDay()===6;if(Qe[0]<8||re&&Qe[0]>=13||!re&&Qe[0]>=16){alert("Godziny rozpoczęcia muszą być między 8:00 a 16:00 w dni robocze lub 8:00 a 13:00 w soboty");return}if(vt[0]<8||re&&vt[0]>13||!re&&vt[0]>16){alert("Godziny zakończenia muszą być między 8:00 a 16:00 w dni robocze lub 8:00 a 13:00 w soboty");return}h(!0);let ye=!1;try{if(!t){alert("Brak identyfikatora rezerwacji");return}if(console.log("ID rezerwacji:",t),!ee.id){alert("Brak wybranego klienta. Proszę wybrać klienta przed zapisem."),console.log("Brak ID klienta:",ee);return}const de=new Date(`${S.start_date}T${S.start_time}`),he=new Date(`${S.end_date}T${S.end_time}`);if(isNaN(de.getTime())||isNaN(he.getTime())){alert("Nieprawidłowy format daty lub godziny"),console.error("Nieprawidłowe daty:",S);return}let we=!0;try{const Ye=await moe(async()=>await lt.from("reservations").update({start_date:S.start_date,end_date:S.end_date,start_time:S.start_time,end_time:S.end_time,status:S.status||(r?r.status:"pending")}).eq("id",t));Ye.error&&(console.error("Błąd aktualizacji rezerwacji:",Ye.error),alert(`Nie udało się zaktualizować rezerwacji: ${Ye.error.message}`),we=!1,ye=!0)}catch(Ye){console.error("Wyjątek podczas aktualizacji rezerwacji:",Ye),we=!1,ye=!0}let be=!0;if(ee.id)try{const Ye={first_name:ee.first_name,last_name:ee.last_name,email:ee.email,phone:ee.phone},{error:Me}=await lt.from("customers").update(Ye).eq("id",ee.id);if(Me)console.error("Błąd aktualizacji podstawowych danych klienta:",Me),be=!1,ye=!0;else{try{const Ie={company_name:ee.company_name||null,company_nip:ee.company_nip||null},{error:$e}=await lt.from("customers").update(Ie).eq("id",ee.id);$e&&console.warn("Błąd aktualizacji danych firmowych:",$e)}catch(Ie){console.warn("Wyjątek podczas aktualizacji danych firmowych:",Ie)}try{const Ie={street:ee.street||null,city:ee.city||null,postal_code:ee.postal_code||null},{error:$e}=await lt.from("customers").update(Ie).eq("id",ee.id);$e&&console.warn("Błąd aktualizacji danych adresowych (prawdopodobnie brak kolumn):",$e)}catch(Ie){console.warn("Wyjątek podczas aktualizacji danych adresowych:",Ie)}}}catch(Ye){console.error("Wyjątek podczas aktualizacji klienta:",Ye),be=!1,ye=!0}let Ue=!0;try{const Ye=M.filter(Me=>Me.quantity>0);if(Ye.length>0){const{error:Me}=await lt.from("reservation_additional_services").select("id").limit(1);if(Me)console.warn("Tabela usług dodatkowych nie istnieje, pomijam aktualizację:",Me);else for(const Ie of Ye)try{const{data:$e,error:ut}=await lt.from("reservation_additional_services").select("*").eq("reservation_id",t).eq("service_id",Ie.id).maybeSingle();if(ut){console.warn("Błąd sprawdzania usług dodatkowych:",ut);continue}if($e){const{error:wt}=await lt.from("reservation_additional_services").update({quantity:Ie.quantity}).eq("id",$e.id);wt&&console.warn("Błąd aktualizacji usługi dodatkowej:",wt)}else{const{error:wt}=await lt.from("reservation_additional_services").insert({reservation_id:t,service_id:Ie.id,quantity:Ie.quantity,price:Ie.price});wt&&console.warn("Błąd dodawania usługi dodatkowej:",wt)}}catch($e){console.warn("Błąd przy aktualizacji usługi dodatkowej:",$e)}}}catch(Ye){console.warn("Błąd przy przetwarzaniu usług dodatkowych:",Ye),Ue=!1}await hn(),b(!1),Pt(ye?"Zmiany zostały częściowo zapisane. Niektóre operacje nie powiodły się.":"Zmiany zostały zapisane pomyślnie."),setTimeout(()=>{Pt("")},3e3)}catch(de){console.error("Błąd podczas zapisywania zmian:",de),alert(`Wystąpił błąd podczas zapisywania zmian: ${de instanceof Error?de.message:String(de)}`)}finally{h(!1)}};Y.useEffect(()=>{t&&Nn()},[t]),Y.useEffect(()=>{t&&pn()},[t]),Y.useEffect(()=>{t&&vr()},[t]);const Nn=async()=>{try{const{data:pe,error:Qe}=await lt.from("payments").select("*").eq("reservation_id",t).order("created_at",{ascending:!1});if(Qe){console.error("Error loading payments:",Qe),He([]);return}pe&&He(pe)}catch(pe){console.error("Error loading payments:",pe),He([])}},vr=async()=>{try{const{data:pe,error:Qe}=await lt.from("reservation_additional_services").select("*").eq("reservation_id",t);if(Qe){console.error("Error loading additional services:",Qe);return}if(pe&&pe.length>0){const vt=M.map($t=>{const Et=pe.find(re=>re.service_id===$t.id);return Et?{...$t,quantity:Et.quantity}:$t});K(vt)}}catch(pe){console.error("Error loading additional services:",pe)}},pn=async()=>{try{const{data:pe,error:Qe}=await lt.from("issues").select("*").eq("reservation_id",t).order("reported_at",{ascending:!1});if(Qe){console.error("Error loading issues:",Qe),Ge([]);return}pe&&Ge(pe)}catch(pe){console.error("Error loading issues:",pe),Ge([])}},tn=async()=>{if(Be.amount<=0){alert("Kwota płatności musi być większa od zera");return}try{h(!0);const{data:pe,error:Qe}=await lt.from("payments").insert({reservation_id:t,amount:Be.amount,payment_type:Be.payment_type,payment_method:Be.payment_method,status:"completed",notes:Be.notes,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select();if(Qe)throw Qe;Te({amount:0,payment_type:"advance",payment_method:"cash",notes:""}),qe(!1),await Nn(),await lt.from("reservation_history").insert({reservation_id:t,changed_at:new Date().toISOString(),previous_status:(r==null?void 0:r.status)||"",new_status:(r==null?void 0:r.status)||"",comment:`Dodano płatność: ${Be.amount} zł (${Be.payment_type})`,changed_by:"Administrator"})}catch(pe){console.error("Error adding payment:",pe),alert("Wystąpił błąd podczas dodawania płatności")}finally{h(!1)}},Rt=async()=>{if(!ke.equipment_id||!ke.description){alert("Proszę wypełnić wszystkie wymagane pola");return}try{h(!0);const pe=[];if(ke.images.length>0)for(const Et of ke.images){const re=`${t}/${Date.now()}_${Et.name}`,{data:ye,error:de}=await lt.storage.from("issue_images").upload(re,Et);if(de)throw de;const{data:he}=await lt.storage.from("issue_images").getPublicUrl(re);he&&pe.push(he.publicUrl)}const Qe=P.find(Et=>Et.id===ke.equipment_id),{data:vt,error:$t}=await lt.from("issues").insert({reservation_id:t,equipment_id:ke.equipment_id,equipment_name:(Qe==null?void 0:Qe.name)||"Nieznany sprzęt",description:ke.description,category:ke.category,priority:ke.priority,status:"reported",reported_at:new Date().toISOString(),is_customer_fault:ke.is_customer_fault,images:pe}).select();if($t)throw $t;We({equipment_id:"",description:"",category:"mechanical",priority:"important",is_customer_fault:!1,images:[]}),Le(!1),await pn(),await lt.from("reservation_history").insert({reservation_id:t,changed_at:new Date().toISOString(),previous_status:(r==null?void 0:r.status)||"",new_status:(r==null?void 0:r.status)||"",comment:`Zgłoszono usterkę: ${ke.description}`,changed_by:"Administrator"})}catch(pe){console.error("Error adding issue:",pe),alert("Wystąpił błąd podczas zgłaszania usterki")}finally{h(!1)}},nn=async(pe,Qe)=>{try{h(!0);const{error:vt}=await lt.from("issues").update({status:Qe,...Qe==="resolved"?{resolved_at:new Date().toISOString()}:{}}).eq("id",pe);if(vt)throw vt;await pn()}catch(vt){console.error("Error updating issue status:",vt),alert("Wystąpił błąd podczas aktualizacji statusu usterki")}finally{h(!1)}},rr=pe=>{if(pe.target.files&&pe.target.files.length>0){const Qe=Array.from(pe.target.files);We(vt=>({...vt,images:[...vt.images,...Qe]}))}},xn=pe=>{We(Qe=>({...Qe,images:Qe.images.filter((vt,$t)=>$t!==pe)}))},On=pe=>{const vt=pe.target.value.replace(/[^0-9]/g,"").slice(0,10);let $t=vt;vt.length>3&&($t=vt.slice(0,3)+"-"+vt.slice(3)),vt.length>6&&($t=$t.slice(0,7)+"-"+$t.slice(7)),vt.length>8&&($t=$t.slice(0,10)+"-"+$t.slice(10)),ne({...ee,company_nip:$t})};return s?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):r?g.jsxs("div",{className:"p-6",children:[g.jsxs("button",{onClick:()=>{var pe;(pe=n.state)!=null&&pe.from?e(n.state.from):e(-1)},className:"mb-6 flex items-center text-gray-600 hover:text-gray-900",children:[g.jsx(u5,{className:"w-5 h-5 mr-2"}),"Powrót do listy"]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Status rezerwacji"}),g.jsx("div",{className:"flex items-center space-x-2",children:g.jsx($P,{className:"w-6 h-6 text-gray-400"})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(pe=>{const Qe=pe.icon,vt=(r==null?void 0:r.status)===pe.id;return g.jsxs("button",{onClick:()=>jn(pe.id),disabled:d||(r==null?void 0:r.status)===pe.id,className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${vt?`${pe.color} ring-2 ring-offset-2 ring-${pe.color.split(" ")[0]}`:`hover:${pe.color} bg-white border border-gray-200`}`,children:[g.jsx(Qe,{className:`w-4 h-4 mr-1.5 ${vt?"":"text-gray-400"}`}),pe.label]},pe.id)})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[g.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dane klienta"}),g.jsx(bx,{className:"w-6 h-6 text-gray-400"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Imię i nazwisko"}),g.jsxs("p",{className:"font-medium",children:[r.customer.first_name," ",r.customer.last_name]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),g.jsx("p",{className:"font-medium",children:r.customer.email})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Telefon"}),g.jsx("p",{className:"font-medium",children:r.customer.phone})]}),r.customer.street&&g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Adres"}),g.jsx("p",{className:"font-medium",children:r.customer.street})]}),r.customer.city&&r.customer.postal_code&&g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Miasto i kod pocztowy"}),g.jsxs("p",{className:"font-medium",children:[r.customer.postal_code," ",r.customer.city]})]}),r.customer.company_name&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"pt-4 border-t",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Nazwa firmy"}),g.jsx("p",{className:"font-medium",children:r.customer.company_name})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"NIP"}),g.jsx("p",{className:"font-medium",children:r.customer.company_nip})]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Szczegóły rezerwacji"}),g.jsx(dc,{className:"w-6 h-6 text-gray-400"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),g.jsx("div",{className:"mt-2",children:((Sr=x.find(pe=>pe.id===r.status))==null?void 0:Sr.label)||r.status})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Data rozpoczęcia"}),g.jsx("p",{className:"font-medium",children:new Date(r.start_date).toLocaleDateString("pl-PL")}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Godzina"}),g.jsx("p",{className:"font-medium",children:new Date(r.start_date).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Data zakończenia"}),g.jsx("p",{className:"font-medium",children:new Date(r.end_date).toLocaleDateString("pl-PL")}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Godzina"}),g.jsx("p",{className:"font-medium",children:new Date(r.end_date).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:"pt-4 border-t",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Całkowita wartość"}),g.jsxs("p",{className:"text-xl font-bold text-solrent-orange",children:[r.total_price," zł"]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Zarezerwowany sprzęt"}),g.jsx(ta,{className:"w-6 h-6 text-gray-400"})]}),g.jsx("div",{className:"space-y-4",children:(jt=r.items)==null?void 0:jt.map((pe,Qe)=>g.jsxs("div",{className:"flex justify-between items-start pb-4 border-b last:border-0",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:pe.equipment_name}),g.jsxs("p",{className:"text-sm text-gray-500",children:["Ilość: ",pe.quantity]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"font-medium",children:[pe.price_per_day," zł/dzień"]}),pe.deposit>0&&g.jsxs("p",{className:"text-sm text-orange-600",children:["Kaucja: ",pe.deposit," zł"]})]})]},Qe))})]}),r.additional_services&&r.additional_services.length>0&&g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usługi dodatkowe"}),g.jsx(ta,{className:"w-6 h-6 text-gray-400"})]}),g.jsx("div",{className:"space-y-4",children:r.additional_services.map((pe,Qe)=>g.jsxs("div",{className:"flex justify-between items-start pb-4 border-b last:border-0",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:pe.name}),g.jsxs("p",{className:"text-sm text-gray-500",children:["Ilość: ",pe.quantity]})]}),g.jsx("div",{className:"text-right",children:g.jsxs("p",{className:"font-medium",children:[pe.price," zł"]})})]},Qe))})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Komentarze"}),g.jsx(XN,{className:"w-6 h-6 text-gray-400"})]}),g.jsx("div",{className:"space-y-4",children:p.length>0?p.map((pe,Qe)=>g.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[g.jsx("p",{className:"text-sm text-gray-500",children:new Date(pe.created_at).toLocaleString("pl-PL")}),g.jsx("p",{className:"mt-1",children:pe.content})]},Qe)):g.jsx("p",{className:"text-gray-500 text-center",children:"Brak komentarzy"})})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Historia płatności"}),g.jsx(uz,{className:"w-6 h-6 text-gray-400"})]}),g.jsx("div",{className:"space-y-4",children:Ne.length>0?Ne.map((pe,Qe)=>g.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"font-medium",children:[pe.amount," zł",g.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${pe.status==="completed"?"bg-green-100 text-green-800":pe.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:pe.status==="completed"?"Zrealizowana":pe.status==="pending"?"Oczekująca":"Anulowana"})]}),g.jsx("p",{className:"text-sm text-gray-500",children:new Date(pe.created_at).toLocaleDateString("pl-PL")}),g.jsxs("p",{className:"text-sm mt-1",children:["Typ: ",pe.payment_type==="deposit"?"Kaucja":pe.payment_type==="advance"?"Zaliczka":pe.payment_type==="full_payment"?"Pełna płatność":"Dopłata"]})]}),g.jsx("div",{className:"text-right",children:g.jsxs("p",{className:"text-sm",children:["Metoda: ",pe.payment_method==="cash"?"Gotówka":pe.payment_method==="transfer"?"Przelew":pe.payment_method==="online"?"Online":"BLIK"]})})]}),pe.notes&&g.jsx("p",{className:"mt-2 text-sm text-gray-600 border-t pt-2",children:pe.notes})]},pe.id)):g.jsx("p",{className:"text-gray-500 text-center",children:"Brak historii płatności"})}),g.jsx("button",{onClick:()=>qe(!0),className:"mt-4 w-full py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Dodaj płatność"})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usterki i serwis"}),g.jsx(Cz,{className:"w-6 h-6 text-gray-400"})]}),g.jsx("div",{className:"space-y-4",children:fe.length>0?fe.map(pe=>g.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:pe.equipment_name}),g.jsx("p",{className:"text-sm text-gray-500",children:new Date(pe.reported_at).toLocaleDateString("pl-PL")}),g.jsx("p",{className:"mt-1",children:pe.description})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${pe.status==="resolved"?"bg-green-100 text-green-800":pe.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:pe.status==="resolved"?"Rozwiązane":pe.status==="in_progress"?"W trakcie":"Zgłoszone"}),g.jsxs("p",{className:"text-sm mt-1",children:["Kategoria: ",pe.category==="mechanical"?"Mechaniczna":pe.category==="electrical"?"Elektryczna":pe.category==="cosmetic"?"Kosmetyczna":"Inna"]}),g.jsxs("p",{className:"text-sm",children:["Priorytet: ",pe.priority==="critical"?"Krytyczny":pe.priority==="important"?"Ważny":"Niski"]})]})]}),pe.images&&pe.images.length>0&&g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:pe.images.map((Qe,vt)=>g.jsx("a",{href:Qe,target:"_blank",rel:"noopener noreferrer",className:"block w-16 h-16 rounded overflow-hidden",children:g.jsx("img",{src:Qe,alt:`Zdjęcie usterki ${vt+1}`,className:"w-full h-full object-cover"})},vt))}),pe.status!=="resolved"&&g.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[pe.status==="reported"&&g.jsx("button",{onClick:()=>nn(pe.id,"in_progress"),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-lg text-sm hover:bg-blue-200",children:"Rozpocznij naprawę"}),g.jsx("button",{onClick:()=>nn(pe.id,"resolved"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-lg text-sm hover:bg-green-200",children:"Oznacz jako naprawione"})]})]},pe.id)):g.jsx("p",{className:"text-gray-500 text-center",children:"Brak zgłoszonych usterek"})}),g.jsx("button",{onClick:()=>Le(!0),className:"mt-4 w-full py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Zgłoś usterkę"})]})]}),g.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Termin rezerwacji"}),g.jsx(ww,{className:"w-6 h-6 text-gray-400"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[g.jsx(ww,{className:"w-4 h-4"})," Data rozpoczęcia"]}),g.jsx("input",{type:"date",id:"start_date",value:S.start_date,onChange:pe=>k({...S,start_date:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"start_time",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[g.jsx(KN,{className:"w-4 h-4"})," Godzina rozpoczęcia"]}),g.jsx("input",{type:"time",id:"start_time",value:S.start_time,onChange:pe=>{const Qe=pe.target.value,[vt]=Qe.split(":").map(Number),Et=new Date(S.start_date).getDay()===6;vt>=8&&(Et&&vt<13||!Et&&vt<16)?k({...S,start_time:Qe}):alert("Godziny rozpoczęcia muszą być między 8:00 a 16:00 w dni robocze lub 8:00 a 13:00 w soboty")},min:"08:00",max:S.start_date&&new Date(S.start_date).getDay()===6?"13:00":"16:00",step:"1800",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[g.jsx(ww,{className:"w-4 h-4"})," Data zakończenia"]}),g.jsx("input",{type:"date",id:"end_date",value:S.end_date,onChange:pe=>k({...S,end_date:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"end_time",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[g.jsx(KN,{className:"w-4 h-4"})," Godzina zakończenia"]}),g.jsx("input",{type:"time",id:"end_time",value:S.end_time,onChange:pe=>{const Qe=pe.target.value,[vt]=Qe.split(":").map(Number),Et=new Date(S.end_date).getDay()===6;vt>=8&&(Et&&vt<=13||!Et&&vt<=16)?k({...S,end_time:Qe}):alert("Godziny zakończenia muszą być między 8:00 a 16:00 w dni robocze lub 8:00 a 13:00 w soboty")},min:"08:00",max:S.end_date&&new Date(S.end_date).getDay()===6?"13:00":"16:00",step:"1800",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v})]})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:Fr,disabled:d||!S.start_date||!S.end_date||!v,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zapisywanie...":"Zapisz zmiany"})})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Szczegóły"}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("button",{onClick:()=>b(!v),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${v?"bg-gray-200 text-gray-700":"bg-solrent-orange text-white hover:bg-orange-700"}`,children:v?"Anuluj edycję":"Edytuj dane"}),v&&g.jsx("button",{onClick:Fr,disabled:d,className:"px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zapisywanie...":"Zapisz zmiany"}),g.jsx(ta,{className:"w-6 h-6 text-gray-400"})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{htmlFor:"product_search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Produkt"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",id:"product_search",placeholder:"Wyszukaj produkt...",value:N,onChange:Vt,onFocus:()=>L(!0),className:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"}),g.jsx(Y_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),z&&g.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[T.filter(pe=>pe.name.toLowerCase().includes(N.toLowerCase())).map(pe=>g.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>Xt(pe),children:g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:pe.name}),g.jsxs("span",{className:"text-solrent-orange font-medium",children:[pe.price," zł/dzień"]})]})},pe.id)),T.filter(pe=>pe.name.toLowerCase().includes(N.toLowerCase())).length===0&&g.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Brak wyników"})]})]}),g.jsxs("div",{className:"mt-4 space-y-3",children:[P.map(pe=>g.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:pe.name}),g.jsxs("p",{className:"text-sm text-gray-600",children:[pe.price," zł/dzień"]})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("button",{onClick:()=>It(pe.id,-1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:g.jsx(f5,{className:"w-4 h-4"})}),g.jsx("span",{className:"w-6 text-center",children:pe.quantity}),g.jsx("button",{onClick:()=>It(pe.id,1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:g.jsx(ic,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>Bt(pe.id),className:"p-1 rounded-full bg-red-100 text-red-600 hover:bg-red-200",children:g.jsx(h5,{className:"w-4 h-4"})})]})]},pe.id)),P.length===0&&g.jsx("p",{className:"text-gray-500 text-center py-2",children:"Brak wybranych produktów"})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dane klienta"}),g.jsxs("button",{onClick:()=>G(!0),className:"text-sm text-solrent-orange hover:text-orange-700 flex items-center",children:[g.jsx(Z_,{className:"w-4 h-4 mr-1"}),"Dodaj nowego klienta"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imię i nazwisko"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",id:"customer_search",placeholder:"Wyszukaj klienta...",value:W,onChange:pe=>Z(pe.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v}),J&&U.length>0&&g.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:U.map(pe=>g.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>dt(pe),children:g.jsxs("div",{children:[g.jsxs("span",{className:"font-medium",children:[pe.first_name," ",pe.last_name]}),g.jsx("p",{className:"text-sm text-gray-600",children:pe.email})]})},pe.id))})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),g.jsx("input",{type:"email",id:"customer_email",value:ee.email,onChange:pe=>ne({...ee,email:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),g.jsx("input",{type:"tel",id:"customer_phone",value:ee.phone,onChange:pe=>ne({...ee,phone:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ulica i numer"}),g.jsx("input",{type:"text",id:"customer_street",value:ee.street,onChange:pe=>ne({...ee,street:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto"}),g.jsx("input",{type:"text",id:"customer_city",value:ee.city,onChange:pe=>ne({...ee,city:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy"}),g.jsx("input",{type:"text",id:"customer_postal_code",value:ee.postal_code,onChange:pe=>ne({...ee,postal_code:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"flex items-center space-x-2",children:[g.jsx("input",{type:"checkbox",checked:at,onChange:pe=>xt(pe.target.checked),className:"rounded text-solrent-orange focus:ring-solrent-orange",disabled:!v}),g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Klient firmowy"})]})})]})]}),at&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_company_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa firmy"}),g.jsx("input",{type:"text",id:"customer_company_name",value:ee.company_name,onChange:pe=>ne({...ee,company_name:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_company_nip",className:"block text-sm font-medium text-gray-700 mb-1",children:"NIP"}),g.jsx("input",{type:"text",id:"customer_company_nip",value:ee.company_nip,onChange:On,placeholder:"XXX-XXX-XX-XX",maxLength:13,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ulica i numer"}),g.jsx("input",{type:"text",id:"customer_street",value:ee.street,onChange:pe=>ne({...ee,street:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto"}),g.jsx("input",{type:"text",id:"customer_city",value:ee.city,onChange:pe=>ne({...ee,city:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy"}),g.jsx("input",{type:"text",id:"customer_postal_code",value:ee.postal_code,onChange:pe=>ne({...ee,postal_code:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"customer_notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notatki"}),g.jsx("textarea",{id:"customer_notes",rows:3,placeholder:"Dodatkowe informacje...",value:ee.notes,onChange:pe=>ne({...ee,notes:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Przypomnienia o rezerwacji"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Wyślij SMS potwierdzający rezerwację"})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Wyślij przypomnienie SMS"})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Wyślij przypomnienie SMS o zakończeniu"})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Wyślij SMS z podziękowaniem"})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2",defaultChecked:!0}),g.jsx("span",{className:"text-sm text-gray-700",children:"Wyślij e-mail potwierdzający rezerwację"})]})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Usługi dodatkowe"}),g.jsx("button",{onClick:()=>b(!v),className:`px-2 py-1 rounded-lg text-xs font-medium transition-colors ${v?"bg-gray-200 text-gray-700":"bg-solrent-orange text-white hover:bg-orange-700"}`,children:v?"Anuluj edycję":"Edytuj dane"})]}),g.jsx("div",{className:"space-y-3",children:M.map(pe=>g.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:pe.name}),g.jsxs("p",{className:"text-sm text-gray-600",children:[pe.price," zł"]})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("button",{onClick:()=>Ft(pe.id,-1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",disabled:pe.quantity===0||!v,children:g.jsx(f5,{className:"w-4 h-4"})}),g.jsx("span",{className:"w-6 text-center",children:pe.quantity}),g.jsx("button",{onClick:()=>Ft(pe.id,1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",disabled:!v,children:g.jsx(ic,{className:"w-4 h-4"})})]})]},pe.id))})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-gray-700",children:"Suma brutto:"}),g.jsxs("span",{className:"font-bold text-solrent-orange",children:[sn()," zł"]})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:Fr,disabled:d||!S.start_date||!S.end_date||!v,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zapisywanie...":"Zapisz zmiany"})})]})]}),D&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dodaj nowego klienta"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imię*"}),g.jsx("input",{type:"text",id:"new_first_name",value:ee.first_name,onChange:pe=>ne({...ee,first_name:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwisko*"}),g.jsx("input",{type:"text",id:"new_last_name",value:ee.last_name,onChange:pe=>ne({...ee,last_name:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),g.jsx("input",{type:"email",id:"new_email",value:ee.email,onChange:pe=>ne({...ee,email:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),g.jsx("input",{type:"tel",id:"new_phone",value:ee.phone,onChange:pe=>ne({...ee,phone:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ulica i numer"}),g.jsx("input",{type:"text",id:"new_street",value:ee.street,onChange:pe=>ne({...ee,street:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto"}),g.jsx("input",{type:"text",id:"new_city",value:ee.city,onChange:pe=>ne({...ee,city:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy"}),g.jsx("input",{type:"text",id:"new_postal_code",value:ee.postal_code,onChange:pe=>ne({...ee,postal_code:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_company_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa firmy"}),g.jsx("input",{type:"text",id:"new_company_name",value:ee.company_name,onChange:pe=>ne({...ee,company_name:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new_company_nip",className:"block text-sm font-medium text-gray-700 mb-1",children:"NIP"}),g.jsx("input",{type:"text",id:"new_company_nip",value:ee.company_nip,onChange:pe=>ne({...ee,company_nip:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]})]}),g.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[g.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),g.jsx("button",{onClick:Tn,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Dodaj klienta"})]})]})}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dodaj komentarz"}),g.jsx(XN,{className:"w-6 h-6 text-gray-400"})]}),g.jsxs("form",{onSubmit:Wr,className:"mb-6",children:[g.jsx("textarea",{value:c,onChange:pe=>u(pe.target.value),placeholder:"Dodaj komentarz...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3,disabled:d}),g.jsx("button",{type:"submit",disabled:d||!c.trim(),className:"mt-2 w-full py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Dodaj komentarz"})]})]})]})]}),Ke&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dodaj płatność"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"payment_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kwota*"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"number",id:"payment_amount",value:Be.amount,onChange:pe=>Te({...Be,amount:parseFloat(pe.target.value)}),className:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",min:"0",step:"0.01",required:!0}),g.jsx(VP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"payment_type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Typ płatności*"}),g.jsxs("select",{id:"payment_type",value:Be.payment_type,onChange:pe=>Te({...Be,payment_type:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[g.jsx("option",{value:"advance",children:"Zaliczka"}),g.jsx("option",{value:"deposit",children:"Kaucja"}),g.jsx("option",{value:"full_payment",children:"Pełna płatność"}),g.jsx("option",{value:"additional",children:"Dopłata"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"payment_method",className:"block text-sm font-medium text-gray-700 mb-1",children:"Metoda płatności*"}),g.jsxs("select",{id:"payment_method",value:Be.payment_method,onChange:pe=>Te({...Be,payment_method:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[g.jsx("option",{value:"cash",children:"Gotówka"}),g.jsx("option",{value:"transfer",children:"Przelew"}),g.jsx("option",{value:"online",children:"Płatność online"}),g.jsx("option",{value:"blik",children:"BLIK"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"payment_notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notatki"}),g.jsx("textarea",{id:"payment_notes",value:Be.notes,onChange:pe=>Te({...Be,notes:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3})]})]}),g.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[g.jsx("button",{onClick:()=>qe(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),g.jsx("button",{onClick:tn,disabled:d||Be.amount<=0,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Dodawanie...":"Dodaj płatność"})]})]})}),et&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-h-[90vh] overflow-y-auto",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Zgłoś usterkę"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"issue_equipment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sprzęt*"}),g.jsxs("select",{id:"issue_equipment",value:ke.equipment_id,onChange:pe=>We({...ke,equipment_id:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[g.jsx("option",{value:"",children:"Wybierz sprzęt"}),P.map(pe=>g.jsxs("option",{value:pe.id,children:[pe.name," (x",pe.quantity,")"]},pe.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"issue_category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategoria*"}),g.jsxs("select",{id:"issue_category",value:ke.category,onChange:pe=>We({...ke,category:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[g.jsx("option",{value:"mechanical",children:"Mechaniczna"}),g.jsx("option",{value:"electrical",children:"Elektryczna"}),g.jsx("option",{value:"cosmetic",children:"Kosmetyczna"}),g.jsx("option",{value:"other",children:"Inna"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"issue_priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorytet*"}),g.jsxs("select",{id:"issue_priority",value:ke.priority,onChange:pe=>We({...ke,priority:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[g.jsx("option",{value:"critical",children:"Krytyczny"}),g.jsx("option",{value:"important",children:"Ważny"}),g.jsx("option",{value:"minor",children:"Niski"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"issue_description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opis usterki*"}),g.jsx("textarea",{id:"issue_description",value:ke.description,onChange:pe=>We({...ke,description:pe.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3,required:!0})]}),g.jsx("div",{children:g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:ke.is_customer_fault,onChange:pe=>We({...ke,is_customer_fault:pe.target.checked}),className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Wina klienta"})]})}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zdjęcia usterki"}),g.jsx("div",{className:"mt-1 flex items-center",children:g.jsxs("label",{className:"flex items-center justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 focus:outline-none",children:[g.jsxs("span",{className:"flex flex-col items-center space-y-2",children:[g.jsx(az,{className:"w-6 h-6 text-gray-400"}),g.jsx("span",{className:"font-medium text-sm text-gray-600",children:"Kliknij, aby dodać zdjęcia"})]}),g.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:rr})]})}),ke.images.length>0&&g.jsxs("div",{className:"mt-3",children:[g.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Wybrane zdjęcia (",ke.images.length,"):"]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:ke.images.map((pe,Qe)=>g.jsxs("div",{className:"relative w-16 h-16 rounded overflow-hidden",children:[g.jsx("img",{src:URL.createObjectURL(pe),alt:`Zdjęcie ${Qe+1}`,className:"w-full h-full object-cover"}),g.jsx("button",{type:"button",onClick:()=>xn(Qe),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center",children:"×"})]},Qe))})]})]})]}),g.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[g.jsx("button",{onClick:()=>Le(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),g.jsx("button",{onClick:Rt,disabled:d||!ke.equipment_id||!ke.description,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zgłaszanie...":"Zgłoś usterkę"})]})]})}),V&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Potwierdzenie"}),g.jsx("p",{className:"mb-6",children:te}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),g.jsx("button",{onClick:()=>xe&&xe(),className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Potwierdź"})]})]})})]}):g.jsxs("div",{className:"p-6",children:[g.jsxs("button",{onClick:()=>e(-1),className:"mb-6 flex items-center text-gray-600 hover:text-gray-900",children:[g.jsx(u5,{className:"w-5 h-5 mr-2"}),"Powrót do listy"]}),g.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center",children:[g.jsx(uc,{className:"w-5 h-5 mr-2"}),g.jsx("span",{children:"Nie znaleziono szczegółów klienta"})]})]})},yoe=()=>{var V,H,te,ge,xe,ve,Ne,He,Ke,qe,Be,Te,fe,Ge,et,Le;const{id:t}=q_(),e=kl(),[n,r]=Y.useState(null),[i,s]=Y.useState(!0),[o,a]=Y.useState(null),[l,c]=Y.useState("overview"),[u,d]=Y.useState(!1),[h,p]=Y.useState(""),[y,x]=Y.useState("30days"),[v,b]=Y.useState(!1),[S,k]=Y.useState(null),[T,j]=Y.useState(!1),[P,C]=Y.useState(!1),[N,O]=Y.useState(""),[z,L]=Y.useState({}),[M,K]=Y.useState([]),[W,Z]=Y.useState(!1);Y.useEffect(()=>{J()},[t]),Y.useEffect(()=>{n&&k({company_street:n.company_street||"",company_postal_code:n.company_postal_code||"",company_city:n.company_city||"",company_name:n.company_name||"",company_nip:n.company_nip||""})},[n]);const U=()=>{const ke={};return S!=null&&S.company_nip&&!S.company_nip.match(/^\d{3}-\d{3}-\d{2}-\d{2}$/)&&(ke.company_nip="Nieprawidłowy format NIP (XXX-XXX-XX-XX)"),S!=null&&S.company_postal_code&&!S.company_postal_code.match(/^\d{2}-\d{3}$/)&&(ke.company_postal_code="Nieprawidłowy format kodu pocztowego (XX-XXX)"),L(ke),Object.keys(ke).length===0},F=async()=>{if(S){if(!U()){a("Proszę poprawić błędy w formularzu");return}try{const{error:ke}=await lt.from("customers").update(S).eq("id",t);if(ke)throw ke;await J(),b(!1),a(null)}catch(ke){console.error("Error updating customer:",ke),a("Nie udało się zapisać zmian")}}};Y.useEffect(()=>{n&&(k({first_name:n.first_name,last_name:n.last_name,email:n.email,phone:n.phone,status:n.status||"active",company_name:n.company_name,company_nip:n.company_nip,company_street:n.company_street,company_postal_code:n.company_postal_code,company_city:n.company_city}),Z(!!n.company_name))},[n]);const J=async()=>{try{s(!0);const{data:ke,error:We}=await lt.from("customers").select(`
          *,
          profile:customer_profiles!left(*),
          activities:customer_activities(
            id,
            type:activity_type,
            description,
            created_at,
            amount,
            tags:customer_activity_tags(
              tag:customer_tags(*)
            )
          ),
          rentals:reservations(
            id,
            start_date,
            end_date,
            total_price,
            status,
            items:reservation_items(
              equipment:equipment(name),
              quantity
            )
          )
        `).eq("id",t).single();if(We)throw We;r(ke),a(null)}catch(ke){console.error("Error loading customer profile:",ke),a("Nie udało się załadować profilu klienta")}finally{s(!1)}},Q=async()=>{var ke;if(h.trim())try{const{error:We}=await lt.from("customer_activities").insert({customer_id:t,activity_type:"note",description:h,created_by:(ke=(await lt.auth.getUser()).data.user)==null?void 0:ke.id});if(We)throw We;p(""),J()}catch(We){console.error("Error saving note:",We),a("Nie udało się zapisać notatki")}},ee=()=>{n&&k({first_name:n.first_name,last_name:n.last_name,email:n.email,phone:n.phone,company_street:n.company_street||"",company_postal_code:n.company_postal_code||"",company_city:n.company_city||"",company_name:n.company_name||"",company_nip:n.company_nip||""}),b(!1),L({})},ne=async()=>{try{const{error:ke}=await lt.from("customers").delete().eq("id",t);if(ke)throw ke;e("/admin/panel/customers",{replace:!0,state:{message:"Klient został pomyślnie usunięty"}})}catch(ke){console.error("Error deleting customer:",ke),a("Nie udało się usunąć klienta"),j(!1)}},D=async()=>{try{const{error:ke}=await lt.rpc("block_customer",{p_customer_id:t,p_reason:N});if(ke)throw ke;C(!1),O(""),J()}catch(ke){console.error("Error blocking customer:",ke),a("Nie udało się zablokować klienta")}},G=async()=>{try{const{error:ke}=await lt.rpc("unblock_customer",{p_customer_id:t});if(ke)throw ke;J()}catch(ke){console.error("Error unblocking customer:",ke),a("Nie udało się odblokować klienta")}};return i?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):n?g.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:v?g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:(S==null?void 0:S.first_name)||"",onChange:ke=>k(We=>({...We,first_name:ke.target.value})),className:"px-3 py-1.5 border rounded-lg",placeholder:"Imię"}),g.jsx("input",{type:"text",value:(S==null?void 0:S.last_name)||"",onChange:ke=>k(We=>({...We,last_name:ke.target.value})),className:"px-3 py-1.5 border rounded-lg",placeholder:"Nazwisko"})]}):`${n.first_name} ${n.last_name}`}),g.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[g.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${((V=n.profile)==null?void 0:V.lead_status)==="hot"?"bg-red-100 text-red-800":((H=n.profile)==null?void 0:H.lead_status)==="warm"?"bg-yellow-100 text-yellow-800":((te=n.profile)==null?void 0:te.lead_status)==="converted"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:((ge=n.profile)==null?void 0:ge.lead_status)==="hot"?"Gorący lead":((xe=n.profile)==null?void 0:xe.lead_status)==="warm"?"Zainteresowany":((ve=n.profile)==null?void 0:ve.lead_status)==="converted"?"Klient":"Nowy"}),g.jsxs("span",{className:"text-sm text-gray-500",children:["Klient od: ",new Date(n.created_at).toLocaleDateString()]})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>v?ee():b(!0),className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-1.5",children:v?g.jsxs(g.Fragment,{children:[g.jsx(cu,{className:"w-4 h-4"}),"Anuluj"]}):g.jsxs(g.Fragment,{children:[g.jsx(_0,{className:"w-4 h-4"}),"Edytuj"]})}),v&&g.jsxs("button",{onClick:F,className:"px-3 py-1.5 text-sm bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-1.5",children:[g.jsx(X_,{className:"w-4 h-4"}),"Zapisz"]}),g.jsxs("button",{className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-1.5 text-yellow-600 border-yellow-200 hover:bg-yellow-50",onClick:()=>n.status==="inactive"?G():C(!0),children:[g.jsx(oz,{className:"w-4 h-4"}),n.status==="inactive"?"Odblokuj":"Zablokuj"]}),g.jsxs("button",{onClick:()=>j(!0),className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-1.5 text-red-600 border-red-200 hover:bg-red-50 transition-colors",children:[g.jsx(sc,{className:"w-4 h-4"}),"Usuń"]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dane kontaktowe"}),v&&g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",checked:W,onChange:ke=>Z(ke.target.checked),className:"rounded border-gray-300 text-solrent-orange focus:ring-solrent-orange"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Klient firmowy"})]})}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"flex items-center gap-3",children:g.jsxs("div",{className:"flex items-center gap-3 w-full",children:[g.jsx(Bd,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),v?g.jsx("input",{type:"email",value:(S==null?void 0:S.email)||"",onChange:ke=>k(We=>({...We,email:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Email"}):g.jsx("span",{children:n.email})]})}),z.email&&g.jsx("p",{className:"text-sm text-red-600 ml-8",children:z.email}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex items-center gap-3 w-full",children:[g.jsx(wd,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),v?g.jsx("input",{type:"tel",value:(S==null?void 0:S.phone)||"",onChange:ke=>k(We=>({...We,phone:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg"}):g.jsx("span",{children:n.phone})]}),z.phone&&g.jsx("p",{className:"text-sm text-red-600 ml-8",children:z.phone})]}),z.phone&&g.jsx("p",{className:"text-sm text-red-600 ml-8",children:z.phone}),n.company_name&&g.jsxs("div",{className:"pt-4 border-t",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx(G_,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),v?g.jsx("input",{type:"text",value:(S==null?void 0:S.company_name)||"",onChange:ke=>k(We=>({...We,company_name:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Nazwa firmy"}):g.jsx("span",{className:"font-medium",children:n.company_name})]}),g.jsx("div",{className:"text-sm text-gray-600 ml-8 space-y-1",children:v?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"mb-2",children:g.jsx("input",{type:"text",value:(S==null?void 0:S.company_nip)||"",onChange:ke=>k(We=>({...We,company_nip:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"NIP"})}),z.company_nip&&g.jsx("p",{className:"text-sm text-red-600",children:z.company_nip}),z.company_nip&&g.jsx("p",{className:"text-sm text-red-600",children:z.company_nip}),g.jsx("div",{className:"mb-2",children:g.jsx("input",{type:"text",value:(S==null?void 0:S.company_street)||"",onChange:ke=>k(We=>({...We,company_street:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Ulica i numer"})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx("input",{type:"text",value:(S==null?void 0:S.company_postal_code)||"",onChange:ke=>k(We=>({...We,company_postal_code:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Kod pocztowy"}),g.jsx("input",{type:"text",value:(S==null?void 0:S.company_city)||"",onChange:ke=>k(We=>({...We,company_city:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Miejscowość"})]}),z.company_postal_code&&g.jsx("p",{className:"text-sm text-red-600",children:z.company_postal_code}),z.company_postal_code&&g.jsx("p",{className:"text-sm text-red-600",children:z.company_postal_code})]}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{children:["NIP: ",n.company_nip]}),g.jsx("p",{children:n.company_street}),g.jsxs("p",{children:[n.company_postal_code," ",n.company_city]})]})})]}),g.jsxs("div",{className:"pt-4 border-t",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx(kz,{className:"w-5 h-5 text-gray-400"}),g.jsx("span",{className:"font-medium",children:"Tagi"})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[(He=(Ne=n.profile)==null?void 0:Ne.tags)==null?void 0:He.map(ke=>g.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:ke},ke)),g.jsx("button",{className:"px-2 py-1 border border-dashed border-gray-300 rounded-full text-sm text-gray-500 hover:border-gray-400",children:"+ Dodaj tag"})]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Wskaźniki"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Wartość wypożyczeń"}),g.jsxs("div",{className:"mt-1 flex items-end gap-2",children:[g.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(qe=(Ke=n.profile)==null?void 0:Ke.lifetime_value)==null?void 0:qe.toFixed(2)," zł"]}),g.jsxs("div",{className:"text-sm text-green-600 flex items-center",children:[g.jsx(wx,{className:"w-4 h-4"}),"12%"]})]})]}),g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Liczba wypożyczeń"}),g.jsxs("div",{className:"mt-1 flex items-end gap-2",children:[g.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((Be=n.profile)==null?void 0:Be.total_rentals)||0}),g.jsxs("div",{className:"text-sm text-green-600 flex items-center",children:[g.jsx(wx,{className:"w-4 h-4"}),"8%"]})]})]}),g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Średni czas wynajmu"}),g.jsx("div",{className:"mt-1 flex items-end gap-2",children:g.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(fe=(Te=n.profile)==null?void 0:Te.avg_rental_duration)==null?void 0:fe.toFixed(1)," dni"]})})]}),g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Ostatnia aktywność"}),g.jsx("div",{className:"mt-1",children:g.jsx("div",{className:"text-sm font-medium text-gray-900",children:(Ge=n.profile)!=null&&Ge.last_contact_date?new Date(n.profile.last_contact_date).toLocaleDateString():"Brak"})})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Notatki"}),g.jsx("button",{onClick:()=>d(!u),className:"text-gray-400 hover:text-gray-600",children:g.jsx(Zc,{className:`w-5 h-5 transform transition-transform ${u?"rotate-180":""}`})})]}),g.jsx(fc,{children:u&&g.jsxs(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-4",children:[g.jsx("textarea",{value:h,onChange:ke=>p(ke.target.value),placeholder:"Dodaj notatkę...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3}),g.jsx("button",{onClick:Q,disabled:!h.trim(),className:"w-full px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Zapisz notatkę"}),g.jsx("div",{className:"space-y-3 mt-4",children:(et=n.activities)==null?void 0:et.filter(ke=>ke.type==="note").map(ke=>g.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[g.jsx("p",{className:"text-sm text-gray-900",children:ke.description}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(ke.created_at).toLocaleString()})]},ke.id))})]})})]}),g.jsxs("div",{className:"lg:col-span-3 bg-white rounded-lg shadow overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Historia wypożyczeń"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{value:y,onChange:ke=>x(ke.target.value),className:"px-3 py-1.5 border rounded-lg text-sm",children:[g.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),g.jsx("option",{value:"90days",children:"Ostatnie 90 dni"}),g.jsx("option",{value:"12months",children:"Ostatnie 12 miesięcy"}),g.jsx("option",{value:"all",children:"Wszystkie"})]}),g.jsxs("button",{className:"px-3 py-1.5 border rounded-lg text-sm hover:bg-gray-50 flex items-center gap-1.5",children:[g.jsx(Nh,{className:"w-4 h-4"}),"Eksportuj"]})]})]})}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sprzęt"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wartość"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Le=n.rentals)==null?void 0:Le.map(ke=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm text-gray-900",children:new Date(ke.start_date).toLocaleDateString()}),g.jsx("div",{className:"text-sm text-gray-500",children:new Date(ke.end_date).toLocaleDateString()})]}),g.jsx("td",{className:"px-6 py-4",children:g.jsx("div",{className:"text-sm text-gray-900",children:ke.items.map(We=>g.jsxs("div",{children:[We.equipment.name," (x",We.quantity,")"]},We.equipment.name))})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ke.status==="completed"?"bg-green-100 text-green-800":ke.status==="cancelled"?"bg-red-100 text-red-800":ke.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:ke.status==="completed"?"Zakończone":ke.status==="cancelled"?"Anulowane":ke.status==="pending"?"Oczekujące":"W trakcie"})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[ke.total_price.toFixed(2)," zł"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:g.jsx("button",{onClick:()=>e(`/admin/panel/reservations/${ke.id}`),className:"text-indigo-600 hover:text-indigo-900",children:"Szczegóły"})})]},ke.id))})]})})]})]}),T&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Czy na pewno chcesz usunąć tego klienta?"}),g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[g.jsx("p",{className:"text-red-800 font-medium mb-2",children:"UWAGA:"}),g.jsx("p",{className:"text-red-700 text-sm",children:"Ta operacja jest nieodwracalna. Wszystkie dane klienta, włącznie z historią transakcji, zostaną trwale usunięte bez możliwości przywrócenia."})]}),g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Anuluj"}),g.jsx("button",{onClick:ne,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Tak, usuń"})]})]})})}),P&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Czy na pewno chcesz zablokować tego klienta?"}),g.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[g.jsx("p",{className:"text-yellow-800 font-medium mb-2",children:"UWAGA:"}),g.jsx("p",{className:"text-yellow-700 text-sm",children:"Zablokowany klient nie będzie mógł tworzyć nowych rezerwacji. Istniejące rezerwacje pozostaną bez zmian."})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Powód blokady"}),g.jsx("textarea",{value:N,onChange:ke=>O(ke.target.value),className:"w-full px-3 py-2 border rounded-lg",rows:3,placeholder:"Podaj powód blokady..."})]}),g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx("button",{onClick:()=>{C(!1),O("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Anuluj"}),g.jsx("button",{onClick:D,disabled:!N.trim(),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Zablokuj"})]})]})})}),o&&g.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center",children:[g.jsx(uc,{className:"w-5 h-5 mr-2"}),g.jsx("span",{children:o})]})]}):g.jsx("div",{className:"p-6",children:g.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center",children:[g.jsx(uc,{className:"w-5 h-5 mr-2"}),g.jsx("span",{children:"Nie znaleziono profilu klienta"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var cv={};cv.version="0.18.5";var $M=1252,xoe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],WM=function(t){xoe.indexOf(t)!=-1&&($M=t)};function voe(){WM(1252)}var qg=function(t){WM(t)};function woe(){qg(1200),voe()}var Ly=function(e){return String.fromCharCode(e)},jT=function(e){return String.fromCharCode(e)},PT,Nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Gg(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),s=n>>2,r=t.charCodeAt(c++),o=(n&3)<<4|r>>4,i=t.charCodeAt(c++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=Nd.charAt(s)+Nd.charAt(o)+Nd.charAt(a)+Nd.charAt(l);return e}function hu(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=Nd.indexOf(t.charAt(c++)),o=Nd.indexOf(t.charAt(c++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=Nd.indexOf(t.charAt(c++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=Nd.indexOf(t.charAt(c++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var tr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),gu=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function bh(t){return tr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function DT(t){return tr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var yl=function(e){return tr?gu(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function g2(t){if(typeof ArrayBuffer>"u")return yl(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function v1(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function boe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var as=tr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:gu(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function _oe(t){for(var e=[],n=0,r=t.length+250,i=bh(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=bh(65535),r=65530)}return e.push(i.slice(0,n)),as(e)}var ig=/\u0000/g,My=/[\u0001-\u0006]/g;function Yp(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function vl(t,e){var n=""+t;return n.length>=e?n:Jr("0",e-n.length)+n}function G4(t,e){var n=""+t;return n.length>=e?n:Jr(" ",e-n.length)+n}function uv(t,e){var n=""+t;return n.length>=e?n:n+Jr(" ",e-n.length)}function Soe(t,e){var n=""+Math.round(t);return n.length>=e?n:Jr("0",e-n.length)+n}function koe(t,e){var n=""+t;return n.length>=e?n:Jr("0",e-n.length)+n}var OT=Math.pow(2,32);function Ep(t,e){if(t>OT||t<-OT)return Soe(t,e);var n=Math.round(t);return koe(n,e)}function dv(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var LT=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Wb=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Noe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},MT={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Coe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function fv(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,c=0,u=0,d=Math.floor(i);c<e&&(d=Math.floor(i),a=d*o+s,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=o,o=a,l=c,c=u;if(u>e&&(c>e?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var h=Math.floor(r*a/u);return[h,r*a-h*u,u]}function Iy(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=Ooe(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var VM=new Date(1899,11,31,0,0,0),Eoe=VM.getTime(),Aoe=new Date(1900,2,1,0,0,0);function HM(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Aoe&&(n+=24*60*60*1e3),(n-(Eoe+(t.getTimezoneOffset()-VM.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function K4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Toe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function joe(t){var e=t<0?12:11,n=K4(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function Poe(t){var e=K4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Doe(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=joe(t):e===10?n=t.toFixed(10).substr(0,12):n=Poe(t),K4(Toe(n.toUpperCase()))}function E_(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Doe(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Kd(14,HM(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Ooe(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Loe(t,e,n,r){var i="",s=0,o=0,a=n.y,l,c=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return Wb[n.m-1][1];case 5:return Wb[n.m-1][0];default:return Wb[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return LT[n.q][0];default:return LT[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?vl(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=vl(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var u=c>0?vl(l,c):"";return u}function Cd(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var qM=/%/g;function Moe(t,e,n){var r=e.replace(qM,""),i=e.length-r.length;return ou(t,r,n*Math.pow(10,2*i))+Jr("%",i)}function Ioe(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return ou(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function GM(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+GM(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var KM=/# (\?+)( ?)\/( ?)(\d+)/;function Roe(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Jr(" ",t[1].length+1+t[4].length):G4(o,t[1].length)+t[2]+"/"+t[3]+vl(a,t[4].length))}function Foe(t,e,n){return n+(e===0?"":""+e)+Jr(" ",t[1].length+2+t[4].length)}var XM=/^#*0*\.([0#]+)/,YM=/\).*[0#]/,JM=/\(###\) ###\\?-####/;function Js(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function IT(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function RT(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function zoe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Boe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Da(t,e,n){if(t.charCodeAt(0)===40&&!e.match(YM)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Da("n",r,n):"("+Da("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Ioe(t,e,n);if(e.indexOf("%")!==-1)return Moe(t,e,n);if(e.indexOf("E")!==-1)return GM(e,n);if(e.charCodeAt(0)===36)return"$"+Da(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+Ep(l,e.length);if(e.match(/^[#?]+$/))return i=Ep(n,0),i==="0"&&(i=""),i.length>e.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(KM))return Roe(s,l,c);if(e.match(/^#+0+$/))return c+Ep(l,e.length-e.indexOf("0"));if(s=e.match(XM))return i=IT(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Js(s[1])).replace(/\.$/,"."+Js(s[1])).replace(/\.(\d*)$/,function(y,x){return"."+x+Jr("0",Js(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+IT(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Cd(Ep(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Da(t,e,-n):Cd(""+(Math.floor(n)+zoe(n,s[1].length)))+"."+vl(RT(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Da(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Yp(Da(t,e.replace(/[\\-]/g,""),n)),o=0,Yp(Yp(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(JM))return i=Da(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=fv(l,Math.pow(10,o)-1,!1),i=""+c,u=ou("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=uv(a[2],o),u.length<s[4].length&&(u=Js(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=fv(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?G4(a[1],o)+s[2]+"/"+s[3]+uv(a[2],o):Jr(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Ep(n,0),e.length<=i.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,h=e.length-i.length-d;return Js(e.substr(0,d)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=RT(n,s[1].length),n<0?"-"+Da(t,e,-n):Cd(Boe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?vl(0,3-y.length):"")+y})+"."+vl(o,s[1].length);switch(e){case"###,##0.00":return Da(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var p=Cd(Ep(l,0));return p!=="0"?c+p:"";case"###,###.00":return Da(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Da(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Uoe(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return ou(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function $oe(t,e,n){var r=e.replace(qM,""),i=e.length-r.length;return ou(t,r,n*Math.pow(10,2*i))+Jr("%",i)}function ZM(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ZM(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Yl(t,e,n){if(t.charCodeAt(0)===40&&!e.match(YM)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Yl("n",r,n):"("+Yl("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Uoe(t,e,n);if(e.indexOf("%")!==-1)return $oe(t,e,n);if(e.indexOf("E")!==-1)return ZM(e,n);if(e.charCodeAt(0)===36)return"$"+Yl(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+vl(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(KM))return Foe(s,l,c);if(e.match(/^#+0+$/))return c+vl(l,e.length-e.indexOf("0"));if(s=e.match(XM))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Js(s[1])).replace(/\.$/,"."+Js(s[1])),i=i.replace(/\.(\d*)$/,function(y,x){return"."+x+Jr("0",Js(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Cd(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Yl(t,e,-n):Cd(""+n)+"."+Jr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Yl(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Yp(Yl(t,e.replace(/[\\-]/g,""),n)),o=0,Yp(Yp(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(JM))return i=Yl(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=fv(l,Math.pow(10,o)-1,!1),i=""+c,u=ou("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=uv(a[2],o),u.length<s[4].length&&(u=Js(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=fv(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?G4(a[1],o)+s[2]+"/"+s[3]+uv(a[2],o):Jr(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,h=e.length-i.length-d;return Js(e.substr(0,d)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Yl(t,e,-n):Cd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?vl(0,3-y.length):"")+y})+"."+vl(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Cd(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return Yl(t,e.slice(0,e.lastIndexOf(".")),n)+Js(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ou(t,e,n){return(n|0)===n?Yl(t,e,n):Da(t,e,n)}function Woe(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var QM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function eI(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":dv(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(QM))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Voe(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",c,u,d,h="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!dv(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(d=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++o;break;case"\\":var p=t.charAt(++o),y=p==="("||p===")"?p:"t";i[i.length]={t:y,v:p},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(c==null&&(c=Iy(e,n,t.charAt(o+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Iy(e,n),c==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=h),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"上":var x={t:a,v:a};if(c==null&&(c=Iy(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",h="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):t.substr(o,5).toUpperCase()==="上午/下午"?(c!=null&&(x.v=c.H>=12?"下午":"上午"),x.t="T",o+=5,h="h"):(x.t="t",++o),c==null&&x.t==="T")return"";i[i.length]=x,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(QM)){if(c==null&&(c=Iy(e,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",eI(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var v=0,b=0,S;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=h,l="h",v<1&&(v=1);break;case"s":(S=i[o].v.match(/\.0+$/))&&(b=Math.max(b,S[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=i[o].t;break;case"m":l==="s"&&(i[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&i[o].v.match(/[Hh]/)&&(v=1),v<2&&i[o].v.match(/[Mm]/)&&(v=2),v<3&&i[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var k="",T;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=Loe(i[o].t.charCodeAt(0),i[o].v,c,b),i[o].t="t";break;case"n":case"?":for(T=o+1;i[T]!=null&&((a=i[T].t)==="?"||a==="D"||(a===" "||a==="t")&&i[T+1]!=null&&(i[T+1].t==="?"||i[T+1].t==="t"&&i[T+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[T].v==="/"||i[T].v===" "&&i[T+1]!=null&&i[T+1].t=="?"));)i[o].v+=i[T].v,i[T]={v:"",t:";"},++T;k+=i[o].v,o=T-1;break;case"G":i[o].t="t",i[o].v=E_(e,n);break}var j="",P,C;if(k.length>0){k.charCodeAt(0)==40?(P=e<0&&k.charCodeAt(0)===45?-e:e,C=ou("n",k,P)):(P=e<0&&r>1?-e:e,C=ou("n",k,P),P<0&&i[0]&&i[0].t=="t"&&(C=C.substr(1),i[0].v="-"+i[0].v)),T=C.length-1;var N=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){N=o;break}var O=i.length;if(N===i.length&&C.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(T>=i[o].v.length-1?(T-=i[o].v.length,i[o].v=C.substr(T+1,i[o].v.length)):T<0?i[o].v="":(i[o].v=C.substr(0,T+1),T=-1),i[o].t="t",O=o);T>=0&&O<i.length&&(i[O].v=C.substr(0,T+1)+i[O].v)}else if(N!==i.length&&C.indexOf("E")===-1){for(T=C.indexOf(".")-1,o=N;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")-1:i[o].v.length-1,j=i[o].v.substr(u+1);u>=0;--u)T>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(j=C.charAt(T--)+j);i[o].v=j,i[o].t="t",O=o}for(T>=0&&O<i.length&&(i[O].v=C.substr(0,T+1)+i[O].v),T=C.indexOf(".")+1,o=N;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==N)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")+1:0,j=i[o].v.substr(0,u);u<i[o].v.length;++u)T<C.length&&(j+=C.charAt(T++));i[o].v=j,i[o].t="t",O=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(P=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=ou(i[o].t,i[o].v,P),i[o].t="t");var z="";for(o=0;o!==i.length;++o)i[o]!=null&&(z+=i[o].v);return z}var FT=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function zT(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function Hoe(t,e){var n=Woe(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(FT),a=n[1].match(FT);return zT(e,o)?[r,n[0]]:zT(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function Kd(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:Qr)[t],r==null&&(r=n.table&&n.table[MT[t]]||Qr[MT[t]]),r==null&&(r=Coe[t]||"General");break}if(dv(r,0))return E_(e,n);e instanceof Date&&(e=HM(e,n.date1904));var i=Hoe(r,e);if(dv(i[1]))return E_(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Voe(i[1],e,n,i[0])}function tI(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(Qr[n]==null){e<0&&(e=n);continue}if(Qr[n]==t){e=n;break}}e<0&&(e=391)}return Qr[e]=t,e}function y2(t){for(var e=0;e!=392;++e)t[e]!==void 0&&tI(t[e],e)}function x2(){Qr=Noe()}var nI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qoe(t){var e=typeof t=="number"?Qr[t]:t;return e=e.replace(nI,"(\\d+)"),new RegExp("^"+e+"$")}function Goe(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(nI)||[]).forEach(function(d,h){var p=parseInt(n[h+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":o=p;break;case"s":l=p;break;case"m":o>=0?a=p:i=p;break}}),l>=0&&a==-1&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var Koe=function(){var t={};t.version="1.2.0";function e(){for(var C=0,N=new Array(256),O=0;O!=256;++O)C=O,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,N[O]=C;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(C){var N=0,O=0,z=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)L[z]=C[z];for(z=0;z!=256;++z)for(O=C[z],N=256+z;N<4096;N+=256)O=L[N]=O>>>8^C[O&255];var M=[];for(z=1;z!=16;++z)M[z-1]=typeof Int32Array<"u"?L.subarray(z*256,z*256+256):L.slice(z*256,z*256+256);return M}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],p=i[8],y=i[9],x=i[10],v=i[11],b=i[12],S=i[13],k=i[14];function T(C,N){for(var O=N^-1,z=0,L=C.length;z<L;)O=O>>>8^n[(O^C.charCodeAt(z++))&255];return~O}function j(C,N){for(var O=N^-1,z=C.length-15,L=0;L<z;)O=k[C[L++]^O&255]^S[C[L++]^O>>8&255]^b[C[L++]^O>>16&255]^v[C[L++]^O>>>24]^x[C[L++]]^y[C[L++]]^p[C[L++]]^h[C[L++]]^d[C[L++]]^u[C[L++]]^c[C[L++]]^l[C[L++]]^a[C[L++]]^o[C[L++]]^s[C[L++]]^n[C[L++]];for(z+=15;L<z;)O=O>>>8^n[(O^C[L++])&255];return~O}function P(C,N){for(var O=N^-1,z=0,L=C.length,M=0,K=0;z<L;)M=C.charCodeAt(z++),M<128?O=O>>>8^n[(O^M)&255]:M<2048?(O=O>>>8^n[(O^(192|M>>6&31))&255],O=O>>>8^n[(O^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,K=C.charCodeAt(z++)&1023,O=O>>>8^n[(O^(240|M>>8&7))&255],O=O>>>8^n[(O^(128|M>>2&63))&255],O=O>>>8^n[(O^(128|K>>6&15|(M&3)<<4))&255],O=O>>>8^n[(O^(128|K&63))&255]):(O=O>>>8^n[(O^(224|M>>12&15))&255],O=O>>>8^n[(O^(128|M>>6&63))&255],O=O>>>8^n[(O^(128|M&63))&255]);return~O}return t.table=n,t.bstr=T,t.buf=j,t.str=P,t}(),mr=function(){var e={};e.version="1.2.1";function n(re,ye){for(var de=re.split("/"),he=ye.split("/"),we=0,be=0,Ue=Math.min(de.length,he.length);we<Ue;++we){if(be=de[we].length-he[we].length)return be;if(de[we]!=he[we])return de[we]<he[we]?-1:1}return de.length-he.length}function r(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:r(re.slice(0,-1));var ye=re.lastIndexOf("/");return ye===-1?re:re.slice(0,ye+1)}function i(re){if(re.charAt(re.length-1)=="/")return i(re.slice(0,-1));var ye=re.lastIndexOf("/");return ye===-1?re:re.slice(ye+1)}function s(re,ye){typeof ye=="string"&&(ye=new Date(ye));var de=ye.getHours();de=de<<6|ye.getMinutes(),de=de<<5|ye.getSeconds()>>>1,re.write_shift(2,de);var he=ye.getFullYear()-1980;he=he<<4|ye.getMonth()+1,he=he<<5|ye.getDate(),re.write_shift(2,he)}function o(re){var ye=re.read_shift(2)&65535,de=re.read_shift(2)&65535,he=new Date,we=de&31;de>>>=5;var be=de&15;de>>>=4,he.setMilliseconds(0),he.setFullYear(de+1980),he.setMonth(be-1),he.setDate(we);var Ue=ye&31;ye>>>=5;var Ye=ye&63;return ye>>>=6,he.setHours(ye),he.setMinutes(Ye),he.setSeconds(Ue<<1),he}function a(re){Jo(re,0);for(var ye={},de=0;re.l<=re.length-4;){var he=re.read_shift(2),we=re.read_shift(2),be=re.l+we,Ue={};switch(he){case 21589:de=re.read_shift(1),de&1&&(Ue.mtime=re.read_shift(4)),we>5&&(de&2&&(Ue.atime=re.read_shift(4)),de&4&&(Ue.ctime=re.read_shift(4))),Ue.mtime&&(Ue.mt=new Date(Ue.mtime*1e3));break}re.l=be,ye[he]=Ue}return ye}var l;function c(){return l||(l={})}function u(re,ye){if(re[0]==80&&re[1]==75)return Nn(re,ye);if((re[0]|32)==109&&(re[1]|32)==105)return Sr(re,ye);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var de=3,he=512,we=0,be=0,Ue=0,Ye=0,Me=0,Ie=[],$e=re.slice(0,512);Jo($e,0);var ut=d($e);switch(de=ut[0],de){case 3:he=512;break;case 4:he=4096;break;case 0:if(ut[1]==0)return Nn(re,ye);default:throw new Error("Major Version: Expected 3 or 4 saw "+de)}he!==512&&($e=re.slice(0,he),Jo($e,28));var wt=re.slice(0,he);h($e,de);var Dt=$e.read_shift(4,"i");if(de===3&&Dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Dt);$e.l+=4,Ue=$e.read_shift(4,"i"),$e.l+=4,$e.chk("00100000","Mini Stream Cutoff Size: "),Ye=$e.read_shift(4,"i"),we=$e.read_shift(4,"i"),Me=$e.read_shift(4,"i"),be=$e.read_shift(4,"i");for(var bt=-1,gt=0;gt<109&&(bt=$e.read_shift(4,"i"),!(bt<0));++gt)Ie[gt]=bt;var dn=p(re,he);v(Me,be,dn,he,Ie);var zn=S(dn,Ue,Ie,he);zn[Ue].name="!Directory",we>0&&Ye!==K&&(zn[Ye].name="!MiniFAT"),zn[Ie[0]].name="!FAT",zn.fat_addrs=Ie,zn.ssz=he;var Zn={},kr=[],Oo=[],ua=[];k(Ue,zn,dn,kr,we,Zn,Oo,Ye),y(Oo,ua,kr),kr.shift();var Bs={FileIndex:Oo,FullPaths:ua};return ye&&ye.raw&&(Bs.raw={header:wt,sectors:dn}),Bs}function d(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(W,"Header Signature: "),re.l+=16;var ye=re.read_shift(2,"u");return[re.read_shift(2,"u"),ye]}function h(re,ye){var de=9;switch(re.l+=2,de=re.read_shift(2)){case 9:if(ye!=3)throw new Error("Sector Shift: Expected 9 saw "+de);break;case 12:if(ye!=4)throw new Error("Sector Shift: Expected 12 saw "+de);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+de)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function p(re,ye){for(var de=Math.ceil(re.length/ye)-1,he=[],we=1;we<de;++we)he[we-1]=re.slice(we*ye,(we+1)*ye);return he[de-1]=re.slice(de*ye),he}function y(re,ye,de){for(var he=0,we=0,be=0,Ue=0,Ye=0,Me=de.length,Ie=[],$e=[];he<Me;++he)Ie[he]=$e[he]=he,ye[he]=de[he];for(;Ye<$e.length;++Ye)he=$e[Ye],we=re[he].L,be=re[he].R,Ue=re[he].C,Ie[he]===he&&(we!==-1&&Ie[we]!==we&&(Ie[he]=Ie[we]),be!==-1&&Ie[be]!==be&&(Ie[he]=Ie[be])),Ue!==-1&&(Ie[Ue]=he),we!==-1&&he!=Ie[he]&&(Ie[we]=Ie[he],$e.lastIndexOf(we)<Ye&&$e.push(we)),be!==-1&&he!=Ie[he]&&(Ie[be]=Ie[he],$e.lastIndexOf(be)<Ye&&$e.push(be));for(he=1;he<Me;++he)Ie[he]===he&&(be!==-1&&Ie[be]!==be?Ie[he]=Ie[be]:we!==-1&&Ie[we]!==we&&(Ie[he]=Ie[we]));for(he=1;he<Me;++he)if(re[he].type!==0){if(Ye=he,Ye!=Ie[Ye])do Ye=Ie[Ye],ye[he]=ye[Ye]+"/"+ye[he];while(Ye!==0&&Ie[Ye]!==-1&&Ye!=Ie[Ye]);Ie[he]=-1}for(ye[0]+="/",he=1;he<Me;++he)re[he].type!==2&&(ye[he]+="/")}function x(re,ye,de){for(var he=re.start,we=re.size,be=[],Ue=he;de&&we>0&&Ue>=0;)be.push(ye.slice(Ue*M,Ue*M+M)),we-=M,Ue=Yf(de,Ue*4);return be.length===0?it(0):as(be).slice(0,re.size)}function v(re,ye,de,he,we){var be=K;if(re===K){if(ye!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var Ue=de[re],Ye=(he>>>2)-1;if(!Ue)return;for(var Me=0;Me<Ye&&(be=Yf(Ue,Me*4))!==K;++Me)we.push(be);v(Yf(Ue,he-4),ye-1,de,he,we)}}function b(re,ye,de,he,we){var be=[],Ue=[];we||(we=[]);var Ye=he-1,Me=0,Ie=0;for(Me=ye;Me>=0;){we[Me]=!0,be[be.length]=Me,Ue.push(re[Me]);var $e=de[Math.floor(Me*4/he)];if(Ie=Me*4&Ye,he<4+Ie)throw new Error("FAT boundary crossed: "+Me+" 4 "+he);if(!re[$e])break;Me=Yf(re[$e],Ie)}return{nodes:be,data:GT([Ue])}}function S(re,ye,de,he){var we=re.length,be=[],Ue=[],Ye=[],Me=[],Ie=he-1,$e=0,ut=0,wt=0,Dt=0;for($e=0;$e<we;++$e)if(Ye=[],wt=$e+ye,wt>=we&&(wt-=we),!Ue[wt]){Me=[];var bt=[];for(ut=wt;ut>=0;){bt[ut]=!0,Ue[ut]=!0,Ye[Ye.length]=ut,Me.push(re[ut]);var gt=de[Math.floor(ut*4/he)];if(Dt=ut*4&Ie,he<4+Dt)throw new Error("FAT boundary crossed: "+ut+" 4 "+he);if(!re[gt]||(ut=Yf(re[gt],Dt),bt[ut]))break}be[wt]={nodes:Ye,data:GT([Me])}}return be}function k(re,ye,de,he,we,be,Ue,Ye){for(var Me=0,Ie=he.length?2:0,$e=ye[re].data,ut=0,wt=0,Dt;ut<$e.length;ut+=128){var bt=$e.slice(ut,ut+128);Jo(bt,64),wt=bt.read_shift(2),Dt=Q4(bt,0,wt-Ie),he.push(Dt);var gt={name:Dt,type:bt.read_shift(1),color:bt.read_shift(1),L:bt.read_shift(4,"i"),R:bt.read_shift(4,"i"),C:bt.read_shift(4,"i"),clsid:bt.read_shift(16),state:bt.read_shift(4,"i"),start:0,size:0},dn=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);dn!==0&&(gt.ct=T(bt,bt.l-8));var zn=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);zn!==0&&(gt.mt=T(bt,bt.l-8)),gt.start=bt.read_shift(4,"i"),gt.size=bt.read_shift(4,"i"),gt.size<0&&gt.start<0&&(gt.size=gt.type=0,gt.start=K,gt.name=""),gt.type===5?(Me=gt.start,we>0&&Me!==K&&(ye[Me].name="!StreamData")):gt.size>=4096?(gt.storage="fat",ye[gt.start]===void 0&&(ye[gt.start]=b(de,gt.start,ye.fat_addrs,ye.ssz)),ye[gt.start].name=gt.name,gt.content=ye[gt.start].data.slice(0,gt.size)):(gt.storage="minifat",gt.size<0?gt.size=0:Me!==K&&gt.start!==K&&ye[Me]&&(gt.content=x(gt,ye[Me].data,(ye[Ye]||{}).data))),gt.content&&Jo(gt.content,0),be[Dt]=gt,Ue.push(gt)}}function T(re,ye){return new Date((Qo(re,ye+4)/1e7*Math.pow(2,32)+Qo(re,ye)/1e7-11644473600)*1e3)}function j(re,ye){return c(),u(l.readFileSync(re),ye)}function P(re,ye){var de=ye&&ye.type;switch(de||tr&&Buffer.isBuffer(re)&&(de="buffer"),de||"base64"){case"file":return j(re,ye);case"base64":return u(yl(hu(re)),ye);case"binary":return u(yl(re),ye)}return u(re,ye)}function C(re,ye){var de=ye||{},he=de.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=he+"/",re.FileIndex[0]={name:he,type:5}),de.CLSID&&(re.FileIndex[0].clsid=de.CLSID),N(re)}function N(re){var ye="Sh33tJ5";if(!mr.find(re,"/"+ye)){var de=it(4);de[0]=55,de[1]=de[3]=50,de[2]=54,re.FileIndex.push({name:ye,type:2,content:de,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+ye),O(re)}}function O(re,ye){C(re);for(var de=!1,he=!1,we=re.FullPaths.length-1;we>=0;--we){var be=re.FileIndex[we];switch(be.type){case 0:he?de=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:he=!0,isNaN(be.R*be.L*be.C)&&(de=!0),be.R>-1&&be.L>-1&&be.R==be.L&&(de=!0);break;default:de=!0;break}}if(!(!de&&!ye)){var Ue=new Date(1987,1,19),Ye=0,Me=Object.create?Object.create(null):{},Ie=[];for(we=0;we<re.FullPaths.length;++we)Me[re.FullPaths[we]]=!0,re.FileIndex[we].type!==0&&Ie.push([re.FullPaths[we],re.FileIndex[we]]);for(we=0;we<Ie.length;++we){var $e=r(Ie[we][0]);he=Me[$e],he||(Ie.push([$e,{name:i($e).replace("/",""),type:1,clsid:U,ct:Ue,mt:Ue,content:null}]),Me[$e]=!0)}for(Ie.sort(function(Dt,bt){return n(Dt[0],bt[0])}),re.FullPaths=[],re.FileIndex=[],we=0;we<Ie.length;++we)re.FullPaths[we]=Ie[we][0],re.FileIndex[we]=Ie[we][1];for(we=0;we<Ie.length;++we){var ut=re.FileIndex[we],wt=re.FullPaths[we];if(ut.name=i(wt).replace("/",""),ut.L=ut.R=ut.C=-(ut.color=1),ut.size=ut.content?ut.content.length:0,ut.start=0,ut.clsid=ut.clsid||U,we===0)ut.C=Ie.length>1?1:-1,ut.size=0,ut.type=5;else if(wt.slice(-1)=="/"){for(Ye=we+1;Ye<Ie.length&&r(re.FullPaths[Ye])!=wt;++Ye);for(ut.C=Ye>=Ie.length?-1:Ye,Ye=we+1;Ye<Ie.length&&r(re.FullPaths[Ye])!=r(wt);++Ye);ut.R=Ye>=Ie.length?-1:Ye,ut.type=1}else r(re.FullPaths[we+1]||"")==r(wt)&&(ut.R=we+1),ut.type=2}}}function z(re,ye){var de=ye||{};if(de.fileType=="mad")return jt(re,de);switch(O(re),de.fileType){case"zip":return pn(re,de)}var he=function(Dt){for(var bt=0,gt=0,dn=0;dn<Dt.FileIndex.length;++dn){var zn=Dt.FileIndex[dn];if(zn.content){var Zn=zn.content.length;Zn>0&&(Zn<4096?bt+=Zn+63>>6:gt+=Zn+511>>9)}}for(var kr=Dt.FullPaths.length+3>>2,Oo=bt+7>>3,ua=bt+127>>7,Bs=Oo+gt+kr+ua,Vr=Bs+127>>7,da=Vr<=109?0:Math.ceil((Vr-109)/127);Bs+Vr+da+127>>7>Vr;)da=++Vr<=109?0:Math.ceil((Vr-109)/127);var Nr=[1,da,Vr,ua,kr,gt,bt,0];return Dt.FileIndex[0].size=bt<<6,Nr[7]=(Dt.FileIndex[0].start=Nr[0]+Nr[1]+Nr[2]+Nr[3]+Nr[4]+Nr[5])+(Nr[6]+7>>3),Nr}(re),we=it(he[7]<<9),be=0,Ue=0;{for(be=0;be<8;++be)we.write_shift(1,Z[be]);for(be=0;be<8;++be)we.write_shift(2,0);for(we.write_shift(2,62),we.write_shift(2,3),we.write_shift(2,65534),we.write_shift(2,9),we.write_shift(2,6),be=0;be<3;++be)we.write_shift(2,0);for(we.write_shift(4,0),we.write_shift(4,he[2]),we.write_shift(4,he[0]+he[1]+he[2]+he[3]-1),we.write_shift(4,0),we.write_shift(4,4096),we.write_shift(4,he[3]?he[0]+he[1]+he[2]-1:K),we.write_shift(4,he[3]),we.write_shift(-4,he[1]?he[0]-1:K),we.write_shift(4,he[1]),be=0;be<109;++be)we.write_shift(-4,be<he[2]?he[1]+be:-1)}if(he[1])for(Ue=0;Ue<he[1];++Ue){for(;be<236+Ue*127;++be)we.write_shift(-4,be<he[2]?he[1]+be:-1);we.write_shift(-4,Ue===he[1]-1?K:Ue+1)}var Ye=function(Dt){for(Ue+=Dt;be<Ue-1;++be)we.write_shift(-4,be+1);Dt&&(++be,we.write_shift(-4,K))};for(Ue=be=0,Ue+=he[1];be<Ue;++be)we.write_shift(-4,F.DIFSECT);for(Ue+=he[2];be<Ue;++be)we.write_shift(-4,F.FATSECT);Ye(he[3]),Ye(he[4]);for(var Me=0,Ie=0,$e=re.FileIndex[0];Me<re.FileIndex.length;++Me)$e=re.FileIndex[Me],$e.content&&(Ie=$e.content.length,!(Ie<4096)&&($e.start=Ue,Ye(Ie+511>>9)));for(Ye(he[6]+7>>3);we.l&511;)we.write_shift(-4,F.ENDOFCHAIN);for(Ue=be=0,Me=0;Me<re.FileIndex.length;++Me)$e=re.FileIndex[Me],$e.content&&(Ie=$e.content.length,!(!Ie||Ie>=4096)&&($e.start=Ue,Ye(Ie+63>>6)));for(;we.l&511;)we.write_shift(-4,F.ENDOFCHAIN);for(be=0;be<he[4]<<2;++be){var ut=re.FullPaths[be];if(!ut||ut.length===0){for(Me=0;Me<17;++Me)we.write_shift(4,0);for(Me=0;Me<3;++Me)we.write_shift(4,-1);for(Me=0;Me<12;++Me)we.write_shift(4,0);continue}$e=re.FileIndex[be],be===0&&($e.start=$e.size?$e.start-1:K);var wt=be===0&&de.root||$e.name;if(Ie=2*(wt.length+1),we.write_shift(64,wt,"utf16le"),we.write_shift(2,Ie),we.write_shift(1,$e.type),we.write_shift(1,$e.color),we.write_shift(-4,$e.L),we.write_shift(-4,$e.R),we.write_shift(-4,$e.C),$e.clsid)we.write_shift(16,$e.clsid,"hex");else for(Me=0;Me<4;++Me)we.write_shift(4,0);we.write_shift(4,$e.state||0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,$e.start),we.write_shift(4,$e.size),we.write_shift(4,0)}for(be=1;be<re.FileIndex.length;++be)if($e=re.FileIndex[be],$e.size>=4096)if(we.l=$e.start+1<<9,tr&&Buffer.isBuffer($e.content))$e.content.copy(we,we.l,0,$e.size),we.l+=$e.size+511&-512;else{for(Me=0;Me<$e.size;++Me)we.write_shift(1,$e.content[Me]);for(;Me&511;++Me)we.write_shift(1,0)}for(be=1;be<re.FileIndex.length;++be)if($e=re.FileIndex[be],$e.size>0&&$e.size<4096)if(tr&&Buffer.isBuffer($e.content))$e.content.copy(we,we.l,0,$e.size),we.l+=$e.size+63&-64;else{for(Me=0;Me<$e.size;++Me)we.write_shift(1,$e.content[Me]);for(;Me&63;++Me)we.write_shift(1,0)}if(tr)we.l=we.length;else for(;we.l<we.length;)we.write_shift(1,0);return we}function L(re,ye){var de=re.FullPaths.map(function(Me){return Me.toUpperCase()}),he=de.map(function(Me){var Ie=Me.split("/");return Ie[Ie.length-(Me.slice(-1)=="/"?2:1)]}),we=!1;ye.charCodeAt(0)===47?(we=!0,ye=de[0].slice(0,-1)+ye):we=ye.indexOf("/")!==-1;var be=ye.toUpperCase(),Ue=we===!0?de.indexOf(be):he.indexOf(be);if(Ue!==-1)return re.FileIndex[Ue];var Ye=!be.match(My);for(be=be.replace(ig,""),Ye&&(be=be.replace(My,"!")),Ue=0;Ue<de.length;++Ue)if((Ye?de[Ue].replace(My,"!"):de[Ue]).replace(ig,"")==be||(Ye?he[Ue].replace(My,"!"):he[Ue]).replace(ig,"")==be)return re.FileIndex[Ue];return null}var M=64,K=-2,W="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",F={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:K,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function J(re,ye,de){c();var he=z(re,de);l.writeFileSync(ye,he)}function Q(re){for(var ye=new Array(re.length),de=0;de<re.length;++de)ye[de]=String.fromCharCode(re[de]);return ye.join("")}function ee(re,ye){var de=z(re,ye);switch(ye&&ye.type||"buffer"){case"file":return c(),l.writeFileSync(ye.filename,de),de;case"binary":return typeof de=="string"?de:Q(de);case"base64":return Gg(typeof de=="string"?de:Q(de));case"buffer":if(tr)return Buffer.isBuffer(de)?de:gu(de);case"array":return typeof de=="string"?yl(de):de}return de}var ne;function D(re){try{var ye=re.InflateRaw,de=new ye;if(de._processChunk(new Uint8Array([3,0]),de._finishFlushFlag),de.bytesRead)ne=re;else throw new Error("zlib does not expose bytesRead")}catch(he){console.error("cannot use native zlib: "+(he.message||he))}}function G(re,ye){if(!ne)return yn(re,ye);var de=ne.InflateRaw,he=new de,we=he._processChunk(re.slice(re.l),he._finishFlushFlag);return re.l+=he.bytesRead,we}function V(re){return ne?ne.deflateRawSync(re):Ft(re)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function xe(re){var ye=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(ye>>16|ye>>8|ye)&255}for(var ve=typeof Uint8Array<"u",Ne=ve?new Uint8Array(256):[],He=0;He<256;++He)Ne[He]=xe(He);function Ke(re,ye){var de=Ne[re&255];return ye<=8?de>>>8-ye:(de=de<<8|Ne[re>>8&255],ye<=16?de>>>16-ye:(de=de<<8|Ne[re>>16&255],de>>>24-ye))}function qe(re,ye){var de=ye&7,he=ye>>>3;return(re[he]|(de<=6?0:re[he+1]<<8))>>>de&3}function Be(re,ye){var de=ye&7,he=ye>>>3;return(re[he]|(de<=5?0:re[he+1]<<8))>>>de&7}function Te(re,ye){var de=ye&7,he=ye>>>3;return(re[he]|(de<=4?0:re[he+1]<<8))>>>de&15}function fe(re,ye){var de=ye&7,he=ye>>>3;return(re[he]|(de<=3?0:re[he+1]<<8))>>>de&31}function Ge(re,ye){var de=ye&7,he=ye>>>3;return(re[he]|(de<=1?0:re[he+1]<<8))>>>de&127}function et(re,ye,de){var he=ye&7,we=ye>>>3,be=(1<<de)-1,Ue=re[we]>>>he;return de<8-he||(Ue|=re[we+1]<<8-he,de<16-he)||(Ue|=re[we+2]<<16-he,de<24-he)||(Ue|=re[we+3]<<24-he),Ue&be}function Le(re,ye,de){var he=ye&7,we=ye>>>3;return he<=5?re[we]|=(de&7)<<he:(re[we]|=de<<he&255,re[we+1]=(de&7)>>8-he),ye+3}function ke(re,ye,de){var he=ye&7,we=ye>>>3;return de=(de&1)<<he,re[we]|=de,ye+1}function We(re,ye,de){var he=ye&7,we=ye>>>3;return de<<=he,re[we]|=de&255,de>>>=8,re[we+1]=de,ye+8}function at(re,ye,de){var he=ye&7,we=ye>>>3;return de<<=he,re[we]|=de&255,de>>>=8,re[we+1]=de&255,re[we+2]=de>>>8,ye+16}function xt(re,ye){var de=re.length,he=2*de>ye?2*de:ye+5,we=0;if(de>=ye)return re;if(tr){var be=DT(he);if(re.copy)re.copy(be);else for(;we<re.length;++we)be[we]=re[we];return be}else if(ve){var Ue=new Uint8Array(he);if(Ue.set)Ue.set(re);else for(;we<de;++we)Ue[we]=re[we];return Ue}return re.length=he,re}function _t(re){for(var ye=new Array(re),de=0;de<re;++de)ye[de]=0;return ye}function Pt(re,ye,de){var he=1,we=0,be=0,Ue=0,Ye=0,Me=re.length,Ie=ve?new Uint16Array(32):_t(32);for(be=0;be<32;++be)Ie[be]=0;for(be=Me;be<de;++be)re[be]=0;Me=re.length;var $e=ve?new Uint16Array(Me):_t(Me);for(be=0;be<Me;++be)Ie[we=re[be]]++,he<we&&(he=we),$e[be]=0;for(Ie[0]=0,be=1;be<=he;++be)Ie[be+16]=Ye=Ye+Ie[be-1]<<1;for(be=0;be<Me;++be)Ye=re[be],Ye!=0&&($e[be]=Ie[Ye+16]++);var ut=0;for(be=0;be<Me;++be)if(ut=re[be],ut!=0)for(Ye=Ke($e[be],he)>>he-ut,Ue=(1<<he+4-ut)-1;Ue>=0;--Ue)ye[Ye|Ue<<ut]=ut&15|be<<4;return he}var Vt=ve?new Uint16Array(512):_t(512),Xt=ve?new Uint16Array(32):_t(32);if(!ve){for(var Bt=0;Bt<512;++Bt)Vt[Bt]=0;for(Bt=0;Bt<32;++Bt)Xt[Bt]=0}(function(){for(var re=[],ye=0;ye<32;ye++)re.push(5);Pt(re,Xt,32);var de=[];for(ye=0;ye<=143;ye++)de.push(8);for(;ye<=255;ye++)de.push(9);for(;ye<=279;ye++)de.push(7);for(;ye<=287;ye++)de.push(8);Pt(de,Vt,288)})();var It=function(){for(var ye=ve?new Uint8Array(32768):[],de=0,he=0;de<ge.length-1;++de)for(;he<ge[de+1];++he)ye[he]=de;for(;he<32768;++he)ye[he]=29;var we=ve?new Uint8Array(259):[];for(de=0,he=0;de<te.length-1;++de)for(;he<te[de+1];++he)we[he]=de;function be(Ye,Me){for(var Ie=0;Ie<Ye.length;){var $e=Math.min(65535,Ye.length-Ie),ut=Ie+$e==Ye.length;for(Me.write_shift(1,+ut),Me.write_shift(2,$e),Me.write_shift(2,~$e&65535);$e-- >0;)Me[Me.l++]=Ye[Ie++]}return Me.l}function Ue(Ye,Me){for(var Ie=0,$e=0,ut=ve?new Uint16Array(32768):[];$e<Ye.length;){var wt=Math.min(65535,Ye.length-$e);if(wt<10){for(Ie=Le(Me,Ie,+($e+wt==Ye.length)),Ie&7&&(Ie+=8-(Ie&7)),Me.l=Ie/8|0,Me.write_shift(2,wt),Me.write_shift(2,~wt&65535);wt-- >0;)Me[Me.l++]=Ye[$e++];Ie=Me.l*8;continue}Ie=Le(Me,Ie,+($e+wt==Ye.length)+2);for(var Dt=0;wt-- >0;){var bt=Ye[$e];Dt=(Dt<<5^bt)&32767;var gt=-1,dn=0;if((gt=ut[Dt])&&(gt|=$e&-32768,gt>$e&&(gt-=32768),gt<$e))for(;Ye[gt+dn]==Ye[$e+dn]&&dn<250;)++dn;if(dn>2){bt=we[dn],bt<=22?Ie=We(Me,Ie,Ne[bt+1]>>1)-1:(We(Me,Ie,3),Ie+=5,We(Me,Ie,Ne[bt-23]>>5),Ie+=3);var zn=bt<8?0:bt-4>>2;zn>0&&(at(Me,Ie,dn-te[bt]),Ie+=zn),bt=ye[$e-gt],Ie=We(Me,Ie,Ne[bt]>>3),Ie-=3;var Zn=bt<4?0:bt-2>>1;Zn>0&&(at(Me,Ie,$e-gt-ge[bt]),Ie+=Zn);for(var kr=0;kr<dn;++kr)ut[Dt]=$e&32767,Dt=(Dt<<5^Ye[$e])&32767,++$e;wt-=dn-1}else bt<=143?bt=bt+48:Ie=ke(Me,Ie,1),Ie=We(Me,Ie,Ne[bt]),ut[Dt]=$e&32767,++$e}Ie=We(Me,Ie,0)-1}return Me.l=(Ie+7)/8|0,Me.l}return function(Me,Ie){return Me.length<8?be(Me,Ie):Ue(Me,Ie)}}();function Ft(re){var ye=it(50+Math.floor(re.length*1.1)),de=It(re,ye);return ye.slice(0,de)}var dt=ve?new Uint16Array(32768):_t(32768),Tn=ve?new Uint16Array(32768):_t(32768),sn=ve?new Uint16Array(128):_t(128),Wn=1,hn=1;function jn(re,ye){var de=fe(re,ye)+257;ye+=5;var he=fe(re,ye)+1;ye+=5;var we=Te(re,ye)+4;ye+=4;for(var be=0,Ue=ve?new Uint8Array(19):_t(19),Ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Me=1,Ie=ve?new Uint8Array(8):_t(8),$e=ve?new Uint8Array(8):_t(8),ut=Ue.length,wt=0;wt<we;++wt)Ue[H[wt]]=be=Be(re,ye),Me<be&&(Me=be),Ie[be]++,ye+=3;var Dt=0;for(Ie[0]=0,wt=1;wt<=Me;++wt)$e[wt]=Dt=Dt+Ie[wt-1]<<1;for(wt=0;wt<ut;++wt)(Dt=Ue[wt])!=0&&(Ye[wt]=$e[Dt]++);var bt=0;for(wt=0;wt<ut;++wt)if(bt=Ue[wt],bt!=0){Dt=Ne[Ye[wt]]>>8-bt;for(var gt=(1<<7-bt)-1;gt>=0;--gt)sn[Dt|gt<<bt]=bt&7|wt<<3}var dn=[];for(Me=1;dn.length<de+he;)switch(Dt=sn[Ge(re,ye)],ye+=Dt&7,Dt>>>=3){case 16:for(be=3+qe(re,ye),ye+=2,Dt=dn[dn.length-1];be-- >0;)dn.push(Dt);break;case 17:for(be=3+Be(re,ye),ye+=3;be-- >0;)dn.push(0);break;case 18:for(be=11+Ge(re,ye),ye+=7;be-- >0;)dn.push(0);break;default:dn.push(Dt),Me<Dt&&(Me=Dt);break}var zn=dn.slice(0,de),Zn=dn.slice(de);for(wt=de;wt<286;++wt)zn[wt]=0;for(wt=he;wt<30;++wt)Zn[wt]=0;return Wn=Pt(zn,dt,286),hn=Pt(Zn,Tn,30),ye}function Wr(re,ye){if(re[0]==3&&!(re[1]&3))return[bh(ye),2];for(var de=0,he=0,we=DT(ye||1<<18),be=0,Ue=we.length>>>0,Ye=0,Me=0;(he&1)==0;){if(he=Be(re,de),de+=3,he>>>1)he>>1==1?(Ye=9,Me=5):(de=jn(re,de),Ye=Wn,Me=hn);else{de&7&&(de+=8-(de&7));var Ie=re[de>>>3]|re[(de>>>3)+1]<<8;if(de+=32,Ie>0)for(!ye&&Ue<be+Ie&&(we=xt(we,be+Ie),Ue=we.length);Ie-- >0;)we[be++]=re[de>>>3],de+=8;continue}for(;;){!ye&&Ue<be+32767&&(we=xt(we,be+32767),Ue=we.length);var $e=et(re,de,Ye),ut=he>>>1==1?Vt[$e]:dt[$e];if(de+=ut&15,ut>>>=4,(ut>>>8&255)===0)we[be++]=ut;else{if(ut==256)break;ut-=257;var wt=ut<8?0:ut-4>>2;wt>5&&(wt=0);var Dt=be+te[ut];wt>0&&(Dt+=et(re,de,wt),de+=wt),$e=et(re,de,Me),ut=he>>>1==1?Xt[$e]:Tn[$e],de+=ut&15,ut>>>=4;var bt=ut<4?0:ut-2>>1,gt=ge[ut];for(bt>0&&(gt+=et(re,de,bt),de+=bt),!ye&&Ue<Dt&&(we=xt(we,Dt+100),Ue=we.length);be<Dt;)we[be]=we[be-gt],++be}}}return ye?[we,de+7>>>3]:[we.slice(0,be),de+7>>>3]}function yn(re,ye){var de=re.slice(re.l||0),he=Wr(de,ye);return re.l+=he[1],he[0]}function Fr(re,ye){if(re)typeof console<"u"&&console.error(ye);else throw new Error(ye)}function Nn(re,ye){var de=re;Jo(de,0);var he=[],we=[],be={FileIndex:he,FullPaths:we};C(be,{root:ye.root});for(var Ue=de.length-4;(de[Ue]!=80||de[Ue+1]!=75||de[Ue+2]!=5||de[Ue+3]!=6)&&Ue>=0;)--Ue;de.l=Ue+4,de.l+=4;var Ye=de.read_shift(2);de.l+=6;var Me=de.read_shift(4);for(de.l=Me,Ue=0;Ue<Ye;++Ue){de.l+=20;var Ie=de.read_shift(4),$e=de.read_shift(4),ut=de.read_shift(2),wt=de.read_shift(2),Dt=de.read_shift(2);de.l+=8;var bt=de.read_shift(4),gt=a(de.slice(de.l+ut,de.l+ut+wt));de.l+=ut+wt+Dt;var dn=de.l;de.l=bt+4,vr(de,Ie,$e,be,gt),de.l=dn}return be}function vr(re,ye,de,he,we){re.l+=2;var be=re.read_shift(2),Ue=re.read_shift(2),Ye=o(re);if(be&8257)throw new Error("Unsupported ZIP encryption");for(var Me=re.read_shift(4),Ie=re.read_shift(4),$e=re.read_shift(4),ut=re.read_shift(2),wt=re.read_shift(2),Dt="",bt=0;bt<ut;++bt)Dt+=String.fromCharCode(re[re.l++]);if(wt){var gt=a(re.slice(re.l,re.l+wt));(gt[21589]||{}).mt&&(Ye=gt[21589].mt),((we||{})[21589]||{}).mt&&(Ye=we[21589].mt)}re.l+=wt;var dn=re.slice(re.l,re.l+Ie);switch(Ue){case 8:dn=G(re,$e);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ue)}var zn=!1;be&8&&(Me=re.read_shift(4),Me==134695760&&(Me=re.read_shift(4),zn=!0),Ie=re.read_shift(4),$e=re.read_shift(4)),Ie!=ye&&Fr(zn,"Bad compressed size: "+ye+" != "+Ie),$e!=de&&Fr(zn,"Bad uncompressed size: "+de+" != "+$e),Qe(he,Dt,dn,{unsafe:!0,mt:Ye})}function pn(re,ye){var de=ye||{},he=[],we=[],be=it(1),Ue=de.compression?8:0,Ye=0,Me=0,Ie=0,$e=0,ut=0,wt=re.FullPaths[0],Dt=wt,bt=re.FileIndex[0],gt=[],dn=0;for(Me=1;Me<re.FullPaths.length;++Me)if(Dt=re.FullPaths[Me].slice(wt.length),bt=re.FileIndex[Me],!(!bt.size||!bt.content||Dt=="Sh33tJ5")){var zn=$e,Zn=it(Dt.length);for(Ie=0;Ie<Dt.length;++Ie)Zn.write_shift(1,Dt.charCodeAt(Ie)&127);Zn=Zn.slice(0,Zn.l),gt[ut]=Koe.buf(bt.content,0);var kr=bt.content;Ue==8&&(kr=V(kr)),be=it(30),be.write_shift(4,67324752),be.write_shift(2,20),be.write_shift(2,Ye),be.write_shift(2,Ue),bt.mt?s(be,bt.mt):be.write_shift(4,0),be.write_shift(-4,gt[ut]),be.write_shift(4,kr.length),be.write_shift(4,bt.content.length),be.write_shift(2,Zn.length),be.write_shift(2,0),$e+=be.length,he.push(be),$e+=Zn.length,he.push(Zn),$e+=kr.length,he.push(kr),be=it(46),be.write_shift(4,33639248),be.write_shift(2,0),be.write_shift(2,20),be.write_shift(2,Ye),be.write_shift(2,Ue),be.write_shift(4,0),be.write_shift(-4,gt[ut]),be.write_shift(4,kr.length),be.write_shift(4,bt.content.length),be.write_shift(2,Zn.length),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(4,0),be.write_shift(4,zn),dn+=be.l,we.push(be),dn+=Zn.length,we.push(Zn),++ut}return be=it(22),be.write_shift(4,101010256),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(2,ut),be.write_shift(2,ut),be.write_shift(4,dn),be.write_shift(4,$e),be.write_shift(2,0),as([as(he),as(we),be])}var tn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Rt(re,ye){if(re.ctype)return re.ctype;var de=re.name||"",he=de.match(/\.([^\.]+)$/);return he&&tn[he[1]]||ye&&(he=(de=ye).match(/[\.\\]([^\.\\])+$/),he&&tn[he[1]])?tn[he[1]]:"application/octet-stream"}function nn(re){for(var ye=Gg(re),de=[],he=0;he<ye.length;he+=76)de.push(ye.slice(he,he+76));return de.join(`\r
`)+`\r
`}function rr(re){var ye=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ie){var $e=Ie.charCodeAt(0).toString(16).toUpperCase();return"="+($e.length==1?"0"+$e:$e)});ye=ye.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ye.charAt(0)==`
`&&(ye="=0D"+ye.slice(1)),ye=ye.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var de=[],he=ye.split(`\r
`),we=0;we<he.length;++we){var be=he[we];if(be.length==0){de.push("");continue}for(var Ue=0;Ue<be.length;){var Ye=76,Me=be.slice(Ue,Ue+Ye);Me.charAt(Ye-1)=="="?Ye--:Me.charAt(Ye-2)=="="?Ye-=2:Me.charAt(Ye-3)=="="&&(Ye-=3),Me=be.slice(Ue,Ue+Ye),Ue+=Ye,Ue<be.length&&(Me+="="),de.push(Me)}}return de.join(`\r
`)}function xn(re){for(var ye=[],de=0;de<re.length;++de){for(var he=re[de];de<=re.length&&he.charAt(he.length-1)=="=";)he=he.slice(0,he.length-1)+re[++de];ye.push(he)}for(var we=0;we<ye.length;++we)ye[we]=ye[we].replace(/[=][0-9A-Fa-f]{2}/g,function(be){return String.fromCharCode(parseInt(be.slice(1),16))});return yl(ye.join(`\r
`))}function On(re,ye,de){for(var he="",we="",be="",Ue,Ye=0;Ye<10;++Ye){var Me=ye[Ye];if(!Me||Me.match(/^\s*$/))break;var Ie=Me.match(/^(.*?):\s*([^\s].*)$/);if(Ie)switch(Ie[1].toLowerCase()){case"content-location":he=Ie[2].trim();break;case"content-type":be=Ie[2].trim();break;case"content-transfer-encoding":we=Ie[2].trim();break}}switch(++Ye,we.toLowerCase()){case"base64":Ue=yl(hu(ye.slice(Ye).join("")));break;case"quoted-printable":Ue=xn(ye.slice(Ye));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+we)}var $e=Qe(re,he.slice(de.length),Ue,{unsafe:!0});be&&($e.ctype=be)}function Sr(re,ye){if(Q(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var de=ye&&ye.root||"",he=(tr&&Buffer.isBuffer(re)?re.toString("binary"):Q(re)).split(`\r
`),we=0,be="";for(we=0;we<he.length;++we)if(be=he[we],!!/^Content-Location:/i.test(be)&&(be=be.slice(be.indexOf("file")),de||(de=be.slice(0,be.lastIndexOf("/")+1)),be.slice(0,de.length)!=de))for(;de.length>0&&(de=de.slice(0,de.length-1),de=de.slice(0,de.lastIndexOf("/")+1),be.slice(0,de.length)!=de););var Ue=(he[1]||"").match(/boundary="(.*?)"/);if(!Ue)throw new Error("MAD cannot find boundary");var Ye="--"+(Ue[1]||""),Me=[],Ie=[],$e={FileIndex:Me,FullPaths:Ie};C($e);var ut,wt=0;for(we=0;we<he.length;++we){var Dt=he[we];Dt!==Ye&&Dt!==Ye+"--"||(wt++&&On($e,he.slice(ut,we),de),ut=we)}return $e}function jt(re,ye){var de=ye||{},he=de.boundary||"SheetJS";he="------="+he;for(var we=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+he.slice(2)+'"',"","",""],be=re.FullPaths[0],Ue=be,Ye=re.FileIndex[0],Me=1;Me<re.FullPaths.length;++Me)if(Ue=re.FullPaths[Me].slice(be.length),Ye=re.FileIndex[Me],!(!Ye.size||!Ye.content||Ue=="Sh33tJ5")){Ue=Ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(dn){return"_x"+dn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(dn){return"_u"+dn.charCodeAt(0).toString(16)+"_"});for(var Ie=Ye.content,$e=tr&&Buffer.isBuffer(Ie)?Ie.toString("binary"):Q(Ie),ut=0,wt=Math.min(1024,$e.length),Dt=0,bt=0;bt<=wt;++bt)(Dt=$e.charCodeAt(bt))>=32&&Dt<128&&++ut;var gt=ut>=wt*4/5;we.push(he),we.push("Content-Location: "+(de.root||"file:///C:/SheetJS/")+Ue),we.push("Content-Transfer-Encoding: "+(gt?"quoted-printable":"base64")),we.push("Content-Type: "+Rt(Ye,Ue)),we.push(""),we.push(gt?rr($e):nn($e))}return we.push(he+`--\r
`),we.join(`\r
`)}function pe(re){var ye={};return C(ye,re),ye}function Qe(re,ye,de,he){var we=he&&he.unsafe;we||C(re);var be=!we&&mr.find(re,ye);if(!be){var Ue=re.FullPaths[0];ye.slice(0,Ue.length)==Ue?Ue=ye:(Ue.slice(-1)!="/"&&(Ue+="/"),Ue=(Ue+ye).replace("//","/")),be={name:i(ye),type:2},re.FileIndex.push(be),re.FullPaths.push(Ue),we||mr.utils.cfb_gc(re)}return be.content=de,be.size=de?de.length:0,he&&(he.CLSID&&(be.clsid=he.CLSID),he.mt&&(be.mt=he.mt),he.ct&&(be.ct=he.ct)),be}function vt(re,ye){C(re);var de=mr.find(re,ye);if(de){for(var he=0;he<re.FileIndex.length;++he)if(re.FileIndex[he]==de)return re.FileIndex.splice(he,1),re.FullPaths.splice(he,1),!0}return!1}function $t(re,ye,de){C(re);var he=mr.find(re,ye);if(he){for(var we=0;we<re.FileIndex.length;++we)if(re.FileIndex[we]==he)return re.FileIndex[we].name=i(de),re.FullPaths[we]=de,!0}return!1}function Et(re){O(re,!0)}return e.find=L,e.read=P,e.parse=u,e.write=ee,e.writeFile=J,e.utils={cfb_new:pe,cfb_add:Qe,cfb_del:vt,cfb_mov:$t,cfb_gc:Et,ReadShift:og,CheckField:wI,prep_blob:Jo,bconcat:as,use_zlib:D,_deflateRaw:Ft,_inflateRaw:yn,consts:F},e}();function Xoe(t){return typeof t=="string"?g2(t):Array.isArray(t)?boe(t):t}function w1(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=g2(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?Xg(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([Xoe(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=v1(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function ds(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function BT(t,e){for(var n=[],r=ds(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function X4(t){for(var e=[],n=ds(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function v2(t){for(var e=[],n=ds(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function Yoe(t){for(var e=[],n=ds(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var hv=new Date(1899,11,30,0,0,0);function jo(t,e){var n=t.getTime(),r=hv.getTime()+(t.getTimezoneOffset()-hv.getTimezoneOffset())*6e4;return(n-r)/(24*60*60*1e3)}var rI=new Date,Joe=hv.getTime()+(rI.getTimezoneOffset()-hv.getTimezoneOffset())*6e4,UT=rI.getTimezoneOffset();function iI(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Joe),e.getTimezoneOffset()!==UT&&e.setTime(e.getTime()+(e.getTimezoneOffset()-UT)*6e4),e}var $T=new Date("2017-02-19T19:06:09.000Z"),sI=isNaN($T.getFullYear())?new Date("2/19/17"):$T,Zoe=sI.getFullYear()==2017;function eo(t,e){var n=new Date(t);if(Zoe)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(sI.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function w2(t,e){if(tr&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return n[s]||s})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Po(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Po(t[n]));return e}function Jr(t,e){for(var n="";n.length<e;)n+=t;return n}function au(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var Qoe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Kg(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Qoe.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function An(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return tr?r=gu(n):r=_oe(n),mr.utils.cfb_add(t,e,r)}mr.utils.cfb_add(t,e,n)}else t.file(e,n)}function Y4(){return mr.utils.cfb_new()}var vi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,eae={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},J4=X4(eae),Z4=/[&<>'"]/g,tae=/[\u0000-\u0008\u000b-\u001f]/g;function hr(t){var e=t+"";return e.replace(Z4,function(n){return J4[n]}).replace(tae,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function WT(t){return hr(t).replace(/ /g,"_x0020_")}var oI=/[\u0000-\u001f]/g;function nae(t){var e=t+"";return e.replace(Z4,function(n){return J4[n]}).replace(/\n/g,"<br/>").replace(oI,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function rae(t){var e=t+"";return e.replace(Z4,function(n){return J4[n]}).replace(oI,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function iae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function sae(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Vb(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function VT(t){var e=bh(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function HT(t){return gu(t,"binary").toString("utf8")}var Ry="foo bar bazâð£",sg=tr&&(HT(Ry)==Vb(Ry)&&HT||VT(Ry)==Vb(Ry)&&VT)||Vb,Xg=tr?function(t){return gu(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},oae=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}}(),aI=/(^\s|\s$|\n)/;function ls(t,e){return"<"+t+(e.match(aI)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Yg(t){return ds(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function kt(t,e,n){return"<"+t+(n!=null?Yg(n):"")+(e!=null?(e.match(aI)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function A_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function aae(t,e){switch(typeof t){case"string":var n=kt("vt:lpwstr",hr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return kt((t|0)==t?"vt:i4":"vt:r8",hr(String(t)));case"boolean":return kt("vt:bool",t?"true":"false")}if(t instanceof Date)return kt("vt:filetime",A_(t));throw new Error("Unable to serialize "+t)}var Ri={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},D0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Zo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function lae(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function cae(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var qT=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},GT=tr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:gu(e)})):qT(t)}:qT,KT=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(Om(t,i)));return r.join("").replace(ig,"")},Q4=tr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(ig,""):KT(t,e,n)}:KT,XT=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},lI=tr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):XT(t,e,n)}:XT,YT=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(Ip(t,i)));return r.join("")},b1=tr?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):YT(e,n,r)}:YT,cI=function(t,e){var n=Qo(t,e);return n>0?b1(t,e+4,e+4+n-1):""},uI=cI,dI=function(t,e){var n=Qo(t,e);return n>0?b1(t,e+4,e+4+n-1):""},fI=dI,hI=function(t,e){var n=2*Qo(t,e);return n>0?b1(t,e+4,e+4+n-1):""},pI=hI,mI=function(e,n){var r=Qo(e,n);return r>0?Q4(e,n+4,n+4+r):""},gI=mI,yI=function(t,e){var n=Qo(t,e);return n>0?b1(t,e+4,e+4+n):""},xI=yI,vI=function(t,e){return lae(t,e)},pv=vI,ek=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};tr&&(uI=function(e,n){if(!Buffer.isBuffer(e))return cI(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},fI=function(e,n){if(!Buffer.isBuffer(e))return dI(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},pI=function(e,n){if(!Buffer.isBuffer(e))return hI(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},gI=function(e,n){if(!Buffer.isBuffer(e))return mI(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},xI=function(e,n){if(!Buffer.isBuffer(e))return yI(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},pv=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):vI(e,n)},ek=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ip=function(t,e){return t[e]},Om=function(t,e){return t[e+1]*256+t[e]},uae=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Qo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Yf=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},dae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function og(t,e){var n="",r,i,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,tr&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(Om(this,c)),c+=2;t*=2;break;case"utf8":n=b1(this,this.l,this.l+t);break;case"utf16le":t*=2,n=Q4(this,this.l,this.l+t);break;case"wstr":return og.call(this,t,"dbcs");case"lpstr-ansi":n=uI(this,this.l),t=4+Qo(this,this.l);break;case"lpstr-cp":n=fI(this,this.l),t=4+Qo(this,this.l);break;case"lpwstr":n=pI(this,this.l),t=4+2*Qo(this,this.l);break;case"lpp4":t=4+Qo(this,this.l),n=gI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Qo(this,this.l),n=xI(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Ip(this,this.l+t++))!==0;)s.push(Ly(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=Om(this,this.l+t))!==0;)s.push(Ly(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Ip(this,c),this.l=c+1,a=og.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Ly(Om(this,c))),c+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Ip(this,c),this.l=c+1,a=og.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Ly(Ip(this,c))),c+=1}n=s.join("");break;default:switch(t){case 1:return r=Ip(this,this.l),this.l++,r;case 2:return r=(e==="i"?uae:Om)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Yf:dae)(this,this.l),this.l+=4,r):(i=Qo(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=pv(this,this.l):i=pv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=lI(this,this.l,t);break}}return this.l+=t,n}var fae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},hae=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},pae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function mae(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)pae(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,fae(this,e,this.l);break;case 8:if(r=8,n==="f"){cae(this,e,this.l);break}case 16:break;case-4:r=4,hae(this,e,this.l);break}return this.l+=r,this}function wI(t,e){var n=lI(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Jo(t,e){t.l=e,t.read_shift=og,t.chk=wI,t.write_shift=mae}function mc(t,e){t.l+=e}function it(t){var e=bh(t);return Jo(e,0),e}function Ao(){var t=[],e=tr?256:2048,n=function(c){var u=it(c);return Jo(u,0),u},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),as(t)},a=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:t}}function ct(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=lhe[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&ek(n)&&t.push(n)}}function ag(t,e,n){var r=Po(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function JT(t,e,n){var r=Po(t);return r.s=ag(r.s,e.s,n),r.e=ag(r.e,e.s,n),r}function lg(t,e){if(t.cRel&&t.c<0)for(t=Po(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Po(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=pr(t);return!t.cRel&&t.cRel!=null&&(n=xae(n)),!t.rRel&&t.rRel!=null&&(n=gae(n)),n}function Hb(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Is(t.s.c)+":"+(t.e.cRel?"":"$")+Is(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+us(t.s.r)+":"+(t.e.rRel?"":"$")+us(t.e.r):lg(t.s,e.biff)+":"+lg(t.e,e.biff)}function tk(t){return parseInt(yae(t),10)-1}function us(t){return""+(t+1)}function gae(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yae(t){return t.replace(/\$(\d+)$/,"$1")}function nk(t){for(var e=vae(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function Is(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function xae(t){return t.replace(/^([A-Z])/,"$$$1")}function vae(t){return t.replace(/^\$([A-Z])/,"$1")}function wae(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function zi(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function pr(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function ca(t){var e=t.indexOf(":");return e==-1?{s:zi(t),e:zi(t)}:{s:zi(t.slice(0,e)),e:zi(t.slice(e+1))}}function xi(t,e){return typeof e>"u"||typeof e=="number"?xi(t.s,t.e):(typeof t!="string"&&(t=pr(t)),typeof e!="string"&&(e=pr(e)),t==e?t:t+":"+e)}function Lr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function ZT(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Kd(t.z,n?jo(e):e)}catch{}try{return t.w=Kd((t.XF||{}).numFmtId||(n?14:0),n?jo(e):e)}catch{return""+e}}function pu(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?_1[t.v]||t.v:e==null?ZT(t,t.v):ZT(t,e))}function Ph(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function bI(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,s=t||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?zi(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Lr(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[d].length;++h)if(!(typeof e[d][h]>"u")){var p={v:e[d][h]},y=o+d,x=a+h;if(c.s.r>y&&(c.s.r=y),c.s.c>x&&(c.s.c=x),c.e.r<y&&(c.e.r=y),c.e.c<x&&(c.e.c=x),e[d][h]&&typeof e[d][h]=="object"&&!Array.isArray(e[d][h])&&!(e[d][h]instanceof Date))p=e[d][h];else if(Array.isArray(p.v)&&(p.f=e[d][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||Qr[14],r.cellDates?(p.t="d",p.w=Kd(p.z,jo(p.v))):(p.t="n",p.v=jo(p.v),p.w=Kd(p.z,p.v))):p.t="s";if(i)s[y]||(s[y]=[]),s[y][x]&&s[y][x].z&&(p.z=s[y][x].z),s[y][x]=p;else{var v=pr({c:x,r:y});s[v]&&s[v].z&&(p.z=s[v].z),s[v]=p}}}return c.s.c<1e7&&(s["!ref"]=xi(c)),s}function O0(t,e){return bI(null,t,e)}function bae(t){return t.read_shift(4,"i")}function bl(t,e){return e||(e=it(4)),e.write_shift(4,t),e}function Rs(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Bi(t,e){var n=!1;return e==null&&(n=!0,e=it(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function _ae(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Sae(t,e){return e||(e=it(4)),e.write_shift(2,0),e.write_shift(2,0),e}function rk(t,e){var n=t.l,r=t.read_shift(1),i=Rs(t),s=[],o={t:i,h:i};if((r&1)!==0){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(_ae(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function kae(t,e){var n=!1;return e==null&&(n=!0,e=it(15+4*t.t.length)),e.write_shift(1,0),Bi(t.t,e),n?e.slice(0,e.l):e}var Nae=rk;function Cae(t,e){var n=!1;return e==null&&(n=!0,e=it(23+4*t.t.length)),e.write_shift(1,1),Bi(t.t,e),e.write_shift(4,1),Sae({},e),n?e.slice(0,e.l):e}function Ha(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Dh(t,e){return e==null&&(e=it(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Oh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Lh(t,e){return e==null&&(e=it(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Eae=Rs,_I=Bi;function ik(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function mv(t,e){var n=!1;return e==null&&(n=!0,e=it(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var Aae=Rs,T_=ik,sk=mv;function SI(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?pv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Yf(e,0)>>2;return n?i/100:i}function kI(t,e){e==null&&(e=it(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function NI(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Tae(t,e){return e||(e=it(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Mh=NI,L0=Tae;function M0(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function _h(t,e){return(e||it(8)).write_shift(8,t,"f")}function jae(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=zae[i];c&&(e.rgb=cj(c));break;case 2:e.rgb=cj([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function gv(t,e){if(e||(e=it(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Pae(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function Dae(t,e){e||(e=it(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var CI=2,Yo=3,Fy=11,yv=19,zy=64,Oae=65,Lae=71,Mae=4108,Iae=4126,rs=80,QT={1:{n:"CodePage",t:CI},2:{n:"Category",t:rs},3:{n:"PresentationFormat",t:rs},4:{n:"ByteCount",t:Yo},5:{n:"LineCount",t:Yo},6:{n:"ParagraphCount",t:Yo},7:{n:"SlideCount",t:Yo},8:{n:"NoteCount",t:Yo},9:{n:"HiddenCount",t:Yo},10:{n:"MultimediaClipCount",t:Yo},11:{n:"ScaleCrop",t:Fy},12:{n:"HeadingPairs",t:Mae},13:{n:"TitlesOfParts",t:Iae},14:{n:"Manager",t:rs},15:{n:"Company",t:rs},16:{n:"LinksUpToDate",t:Fy},17:{n:"CharacterCount",t:Yo},19:{n:"SharedDoc",t:Fy},22:{n:"HyperlinksChanged",t:Fy},23:{n:"AppVersion",t:Yo,p:"version"},24:{n:"DigSig",t:Oae},26:{n:"ContentType",t:rs},27:{n:"ContentStatus",t:rs},28:{n:"Language",t:rs},29:{n:"Version",t:rs},255:{},2147483648:{n:"Locale",t:yv},2147483651:{n:"Behavior",t:yv},1919054434:{}},ej={1:{n:"CodePage",t:CI},2:{n:"Title",t:rs},3:{n:"Subject",t:rs},4:{n:"Author",t:rs},5:{n:"Keywords",t:rs},6:{n:"Comments",t:rs},7:{n:"Template",t:rs},8:{n:"LastAuthor",t:rs},9:{n:"RevNumber",t:rs},10:{n:"EditTime",t:zy},11:{n:"LastPrinted",t:zy},12:{n:"CreatedDate",t:zy},13:{n:"ModifiedDate",t:zy},14:{n:"PageCount",t:Yo},15:{n:"WordCount",t:Yo},16:{n:"CharCount",t:Yo},17:{n:"Thumbnail",t:Lae},18:{n:"Application",t:rs},19:{n:"DocSecurity",t:Yo},255:{},2147483648:{n:"Locale",t:yv},2147483651:{n:"Behavior",t:yv},1919054434:{}};function Rae(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Fae=Rae([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),zae=Po(Fae),_1={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Bae={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},By={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function EI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function AI(t,e){var n=Yoe(Bae),r=[],i;r[r.length]=vi,r[r.length]=kt("Types",null,{xmlns:Ri.CT,"xmlns:xsd":Ri.xsd,"xmlns:xsi":Ri.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return kt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],r[r.length]=kt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:By[l][e.bookType]||By[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=kt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:By[l][e.bookType]||By[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(c){r[r.length]=kt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Yn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function TI(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Jp(t){var e=[vi,kt("Relationships",null,{xmlns:Ri.RELS})];return ds(t["!id"]).forEach(function(n){e[e.length]=kt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function dr(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[Yn.HLINK,Yn.XPATH,Yn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function Uae(t){var e=[vi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function tj(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function $ae(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Wae(t){var e=[vi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(tj(t[n][0],t[n][1])),e.push($ae("",t[n][0]));return e.push(tj("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function jI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cv.version+"</meta:generator></office:meta></office:document-meta>"}var mh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function qb(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=hr(e),r[r.length]=n?kt(t,e,n):ls(t,e))}function PI(t,e){var n=e||{},r=[vi,kt("cp:coreProperties",null,{"xmlns:cp":Ri.CORE_PROPS,"xmlns:dc":Ri.dc,"xmlns:dcterms":Ri.dcterms,"xmlns:dcmitype":Ri.dcmitype,"xmlns:xsi":Ri.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&qb("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:A_(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&qb("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:A_(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=mh.length;++s){var o=mh[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&qb(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Zp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],DI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function OI(t){var e=[],n=kt;return t||(t={}),t.Application="SheetJS",e[e.length]=vi,e[e.length]=kt("Properties",null,{xmlns:Ri.EXT_PROPS,"xmlns:vt":Ri.vt}),Zp.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=hr(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+hr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function LI(t){var e=[vi,kt("Properties",null,{xmlns:Ri.CUST_PROPS,"xmlns:vt":Ri.vt})];if(!t)return e.join("");var n=1;return ds(t).forEach(function(i){++n,e[e.length]=kt("property",aae(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:hr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var nj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Vae(t,e){var n=[];return ds(nj).map(function(r){for(var i=0;i<mh.length;++i)if(mh[i][1]==r)return mh[i];for(i=0;i<Zp.length;++i)if(Zp[i][1]==r)return Zp[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(ls(nj[r[1]]||r[1],i))}}),kt("DocumentProperties",n.join(""),{xmlns:Zo.o})}function Hae(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&ds(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<mh.length;++o)if(s==mh[o][1])return;for(o=0;o<Zp.length;++o)if(s==Zp[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(kt(WT(s),a,{"dt:dt":l}))}}),e&&ds(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(kt(WT(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+Zo.o+'">'+i.join("")+"</"+r+">"}function qae(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=it(8);return o.write_shift(4,r),o.write_shift(4,i),o}function rj(t,e){var n=it(4),r=it(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=it(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=qae(e);break;case 31:case 80:for(r=it(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return as([n,r])}var MI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Gae(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function ij(t,e,n){var r=it(8),i=[],s=[],o=8,a=0,l=it(8),c=it(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!e){c=it(8),c.write_shift(4,0),i.unshift(c);var u=[it(4)];for(u[0].write_shift(4,t.length),a=0;a<t.length;++a){var d=t[a][0];for(l=it(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=as(u),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(MI.indexOf(t[a][0])>-1||DI.indexOf(t[a][0])>-1)&&t[a][1]!=null){var h=t[a][1],p=0;if(e){p=+e[t[a][0]];var y=n[p];if(y.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}l=rj(y.t,h)}else{var v=Gae(h);v==-1&&(v=31,h=String(h)),l=rj(v,h)}s.push(l),c=it(8),c.write_shift(4,e?p:2+a),i.push(c),o+=8+l.length}var b=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,b),b+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),as([r].concat(i).concat(s))}function sj(t,e,n,r,i,s){var o=it(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,mr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=ij(t,n,r);if(a.push(l),i){var c=ij(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return as(a)}function Kae(t,e){e||(e=it(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Xae(t,e){return t.read_shift(e)===1}function Zs(t,e){return e||(e=it(2)),e.write_shift(2,+!!t),e}function II(t){return t.read_shift(2,"u")}function La(t,e){return e||(e=it(2)),e.write_shift(2,t),e}function RI(t,e,n){return n||(n=it(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function FI(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function Yae(t){var e=t.t||"",n=it(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=it(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return as(i)}function Jae(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Zae(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):Jae(t,r,n)}function Qae(t,e,n){if(n.biff>5)return Zae(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function zI(t,e,n){return n||(n=it(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function oj(t,e){e||(e=it(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function ele(t){var e=it(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),oj(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&oj(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function Sh(t,e,n,r){return r||(r=it(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function tle(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function nle(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function BI(t,e){return e||(e=it(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function ok(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=it(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function rle(t,e){var n=!e||e.biff==8,r=it(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function ile(t,e){var n=!e||e.biff>=8?2:1,r=it(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function sle(t,e){var n=it(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=Yae(t[i]);var s=as([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function ole(){var t=it(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function ale(t){var e=it(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function lle(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=it(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function cle(t,e,n,r){var i=it(10);return Sh(t,e,r,i),i.write_shift(4,n),i}function ule(t,e,n,r,i){var s=!i||i.biff==8,o=it(8+ +s+(1+s)*n.length);return Sh(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function dle(t,e,n,r){var i=n&&n.biff==5;r||(r=it(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function fle(t,e){var n=e.biff==8||!e.biff?4:2,r=it(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function aj(t,e,n,r){var i=n&&n.biff==5;r||(r=it(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function hle(t){var e=it(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function ple(t,e,n,r,i,s){var o=it(8);return Sh(t,e,r,o),RI(n,s,o),o}function mle(t,e,n,r){var i=it(14);return Sh(t,e,r,i),_h(n,i),i}function gle(t,e,n){if(n.biff<8)return yle(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(tle(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function yle(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=FI(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function xle(t){var e=it(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)BI(t[n],e);return e}function vle(t){var e=it(24),n=zi(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return as([e,ele(t[1])])}function wle(t){var e=t[1].Tooltip,n=it(10+2*(e.length+1));n.write_shift(2,2048);var r=zi(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function ble(t){return t||(t=it(4)),t.write_shift(2,1),t.write_shift(2,1),t}function _le(t,e,n){if(!n.cellStyles)return mc(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function Sle(t,e){var n=it(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function kle(t){for(var e=it(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function Nle(t,e,n){var r=it(15);return k1(r,t,e),r.write_shift(8,n,"f"),r}function Cle(t,e,n){var r=it(9);return k1(r,t,e),r.write_shift(2,n),r}var Ele=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=X4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var c=[],u=bh(1);switch(l.type){case"base64":u=yl(hu(a));break;case"binary":u=yl(a);break;case"buffer":case"array":u=a;break}Jo(u,0);var d=u.read_shift(1),h=!!(d&136),p=!1,y=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var x=0,v=521;d==2&&(x=u.read_shift(2)),u.l+=3,d!=2&&(x=u.read_shift(4)),x>1048576&&(x=1e6),d!=2&&(v=u.read_shift(2));var b=u.read_shift(2),S=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(S=t[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var k=[],T={},j=Math.min(u.length,d==2?521:v-10-(p?264:0)),P=y?32:11;u.l<j&&u[u.l]!=13;)switch(T={},T.name=PT.utils.decode(S,u.slice(u.l,u.l+P)).replace(/[\u0000\r\n].*$/g,""),u.l+=P,T.type=String.fromCharCode(u.read_shift(1)),d!=2&&!y&&(T.offset=u.read_shift(4)),T.len=u.read_shift(1),d==2&&(T.offset=u.read_shift(2)),T.dec=u.read_shift(1),T.name.length&&k.push(T),d!=2&&(u.l+=y?13:14),T.type){case"B":(!p||T.len!=8)&&l.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var C=0,N=0;for(c[0]=[],N=0;N!=k.length;++N)c[0][N]=k[N].name;for(;x-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,c[++C]=[],N=0,N=0;N!=k.length;++N){var O=u.slice(u.l,u.l+k[N].len);u.l+=k[N].len,Jo(O,0);var z=PT.utils.decode(S,O);switch(k[N].type){case"C":z.trim().length&&(c[C][N]=z.replace(/\s+$/,""));break;case"D":z.length===8?c[C][N]=new Date(+z.slice(0,4),+z.slice(4,6)-1,+z.slice(6,8)):c[C][N]=z;break;case"F":c[C][N]=parseFloat(z.trim());break;case"+":case"I":c[C][N]=y?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(z.trim().toUpperCase()){case"Y":case"T":c[C][N]=!0;break;case"N":case"F":c[C][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+z+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[C][N]="##MEMO##"+(y?parseInt(z.trim(),10):O.read_shift(4));break;case"N":z=z.replace(/\u0000/g,"").trim(),z&&z!="."&&(c[C][N]=+z||0);break;case"@":c[C][N]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":c[C][N]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":c[C][N]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][N]=-O.read_shift(-8,"f");break;case"B":if(p&&k[N].len==8){c[C][N]=O.read_shift(8,"f");break}case"G":case"P":O.l+=k[N].len;break;case"0":if(k[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[N].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=k,c}function r(a,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=O0(n(a,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function i(a,l){try{return Ph(r(a,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var c=l||{};if(+c.codepage>=0&&qg(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Ao(),d=_v(a,{header:1,raw:!0,cellDates:!0}),h=d[0],p=d.slice(1),y=a["!cols"]||[],x=0,v=0,b=0,S=1;for(x=0;x<h.length;++x){if(((y[x]||{}).DBF||{}).name){h[x]=y[x].DBF.name,++b;continue}if(h[x]!=null){if(++b,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var k=Lr(a["!ref"]),T=[],j=[],P=[];for(x=0;x<=k.e.c-k.s.c;++x){var C="",N="",O=0,z=[];for(v=0;v<p.length;++v)p[v][x]!=null&&z.push(p[v][x]);if(z.length==0||h[x]==null){T[x]="?";continue}for(v=0;v<z.length;++v){switch(typeof z[v]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=z[v]instanceof Date?"D":"C";break;default:N="C"}O=Math.max(O,String(z[v]).length),C=C&&C!=N?"C":N}O>250&&(O=250),N=((y[x]||{}).DBF||{}).type,N=="C"&&y[x].DBF.len>O&&(O=y[x].DBF.len),C=="B"&&N=="N"&&(C="N",P[x]=y[x].DBF.dec,O=y[x].DBF.len),j[x]=C=="C"||N=="N"?O:s[C]||0,S+=j[x],T[x]=C}var L=u.next(32);for(L.write_shift(4,318902576),L.write_shift(4,p.length),L.write_shift(2,296+32*b),L.write_shift(2,S),x=0;x<4;++x)L.write_shift(4,0);for(L.write_shift(4,0|(+e[$M]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var M=u.next(32),K=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,K,"sbcs"),M.write_shift(1,T[x]=="?"?"C":T[x],"sbcs"),M.write_shift(4,v),M.write_shift(1,j[x]||s[T[x]]||0),M.write_shift(1,P[x]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),v+=j[x]||s[T[x]]||0}var W=u.next(264);for(W.write_shift(4,13),x=0;x<65;++x)W.write_shift(4,0);for(x=0;x<p.length;++x){var Z=u.next(S);for(Z.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":Z.write_shift(1,p[x][v]==null?63:p[x][v]?84:70);break;case"B":Z.write_shift(8,p[x][v]||0,"f");break;case"N":var U="0";for(typeof p[x][v]=="number"&&(U=p[x][v].toFixed(P[v]||0)),b=0;b<j[v]-U.length;++b)Z.write_shift(1,32);Z.write_shift(1,U,"sbcs");break;case"D":p[x][v]?(Z.write_shift(4,("0000"+p[x][v].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(p[x][v].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+p[x][v].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var F=String(p[x][v]!=null?p[x][v]:"").slice(0,j[v]);for(Z.write_shift(1,F,"sbcs"),b=0;b<j[v]-F.length;++b)Z.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}}(),Ale=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ds(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(h,p){var y=t[p];return typeof y=="number"?jT(y):y},r=function(h,p,y){var x=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return x==59?h:jT(x)};t["|"]=254;function i(h,p){switch(p.type){case"base64":return s(hu(h),p);case"binary":return s(h,p);case"buffer":return s(tr&&Buffer.isBuffer(h)?h.toString("binary"):v1(h),p);case"array":return s(w2(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var y=h.split(/[\n\r]+/),x=-1,v=-1,b=0,S=0,k=[],T=[],j=null,P={},C=[],N=[],O=[],z=0,L;for(+p.codepage>=0&&qg(+p.codepage);b!==y.length;++b){z=0;var M=y[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),K=M.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),W=K[0],Z;if(M.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":K[1].charAt(0)=="P"&&T.push(M.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,F=!1,J=!1,Q=!1,ee=-1,ne=-1;for(S=1;S<K.length;++S)switch(K[S].charAt(0)){case"A":break;case"X":v=parseInt(K[S].slice(1))-1,F=!0;break;case"Y":for(x=parseInt(K[S].slice(1))-1,F||(v=0),L=k.length;L<=x;++L)k[L]=[];break;case"K":Z=K[S].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(au(Z))?isNaN(Kg(Z).getDate())||(Z=eo(Z)):(Z=au(Z),j!==null&&eI(j)&&(Z=iI(Z))),U=!0;break;case"E":Q=!0;var D=Cce(K[S].slice(1),{r:x,c:v});k[x][v]=[k[x][v],D];break;case"S":J=!0,k[x][v]=[k[x][v],"S5S"];break;case"G":break;case"R":ee=parseInt(K[S].slice(1))-1;break;case"C":ne=parseInt(K[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}if(U&&(k[x][v]&&k[x][v].length==2?k[x][v][0]=Z:k[x][v]=Z,j=null),J){if(Q)throw new Error("SYLK shared formula cannot have own formula");var G=ee>-1&&k[ee][ne];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");k[x][v][1]=Ece(G[1],{r:x-ee,c:v-ne})}break;case"F":var V=0;for(S=1;S<K.length;++S)switch(K[S].charAt(0)){case"X":v=parseInt(K[S].slice(1))-1,++V;break;case"Y":for(x=parseInt(K[S].slice(1))-1,L=k.length;L<=x;++L)k[L]=[];break;case"M":z=parseInt(K[S].slice(1))/20;break;case"F":break;case"G":break;case"P":j=T[parseInt(K[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=K[S].slice(1).split(" "),L=parseInt(O[0],10);L<=parseInt(O[1],10);++L)z=parseInt(O[2],10),N[L-1]=z===0?{hidden:!0}:{wch:z},ak(N[L-1]);break;case"C":v=parseInt(K[S].slice(1))-1,N[v]||(N[v]={});break;case"R":x=parseInt(K[S].slice(1))-1,C[x]||(C[x]={}),z>0?(C[x].hpt=z,C[x].hpx=HI(z)):z===0&&(C[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}V<1&&(j=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}}return C.length>0&&(P["!rows"]=C),N.length>0&&(P["!cols"]=N),p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),[k,P]}function o(h,p){var y=i(h,p),x=y[0],v=y[1],b=O0(x,p);return ds(v).forEach(function(S){b[S]=v[S]}),b}function a(h,p){return Ph(o(h,p),p)}function l(h,p,y,x){var v="C;Y"+(y+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+ck(h.f,{r:y,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function c(h,p){p.forEach(function(y,x){var v="F;W"+(x+1)+" "+(x+1)+" ";y.hidden?v+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=xv(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=vv(y.wpx)),typeof y.wch=="number"&&(v+=Math.round(y.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function u(h,p){p.forEach(function(y,x){var v="F;";y.hidden?v+="M0;":y.hpt?v+="M"+20*y.hpt+";":y.hpx&&(v+="M"+20*wv(y.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function d(h,p){var y=["ID;PWXL;N;E"],x=[],v=Lr(h["!ref"]),b,S=Array.isArray(h),k=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),h["!cols"]&&c(y,h["!cols"]),h["!rows"]&&u(y,h["!rows"]),y.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var j=v.s.c;j<=v.e.c;++j){var P=pr({r:T,c:j});b=S?(h[T]||[])[j]:h[P],!(!b||b.v==null&&(!b.f||b.F))&&x.push(l(b,h,T,j))}return y.join(k)+k+x.join(k)+k+"E"+k}return{to_workbook:a,to_sheet:o,from_sheet:d}}(),Tle=function(){function t(s,o){switch(o.type){case"base64":return e(hu(s),o);case"binary":return e(s,o);case"buffer":return e(tr&&Buffer.isBuffer(s)?s.toString("binary"):v1(s),o);case"array":return e(w2(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),l=-1,c=-1,u=0,d=[];u!==a.length;++u){if(a[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var h=a[u].trim().split(","),p=h[0],y=h[1];++u;for(var x=a[u]||"";(x.match(/["]/g)||[]).length&1&&u<a.length-1;)x+=`
`+a[++u];switch(x=x.trim(),+p){case-1:if(x==="BOT"){d[++l]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[l][c]=!0:x==="FALSE"?d[l][c]=!1:isNaN(au(y))?isNaN(Kg(y).getDate())?d[l][c]=y:d[l][c]=eo(y):d[l][c]=au(y),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[l][c++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function n(s,o){return O0(t(s,o),o)}function r(s,o){return Ph(n(s,o),o)}var i=function(){var s=function(l,c,u,d,h){l.push(c),l.push(u+","+d),l.push('"'+h.replace(/"/g,'""')+'"')},o=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Lr(l["!ref"]),d,h=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(c,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var x=pr({r:p,c:y});if(d=h?(l[p]||[])[y]:l[x],!d){o(c,1,0,"");continue}switch(d.t){case"n":var v=d.w;!v&&d.v!=null&&(v=d.v),v==null?d.f&&!d.F?o(c,1,0,"="+d.f):o(c,1,0,""):o(c,0,v,"V");break;case"b":o(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Kd(d.z||Qr[14],jo(eo(d.v)))),o(c,0,d.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var b=`\r
`,S=c.join(b);return S}}();return{to_workbook:r,to_sheet:n,from_sheet:i}}(),UI=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(d,h){for(var p=d.split(`
`),y=-1,x=-1,v=0,b=[];v!==p.length;++v){var S=p[v].trim().split(":");if(S[0]==="cell"){var k=zi(S[1]);if(b.length<=k.r)for(y=b.length;y<=k.r;++y)b[y]||(b[y]=[]);switch(y=k.r,x=k.c,S[2]){case"t":b[y][x]=t(S[3]);break;case"v":b[y][x]=+S[3];break;case"vtf":var T=S[S.length-1];case"vtc":switch(S[3]){case"nl":b[y][x]=!!+S[4];break;default:b[y][x]=+S[4];break}S[2]=="vtf"&&(b[y][x]=[b[y][x],T])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function r(d,h){return O0(n(d,h),h)}function i(d,h){return Ph(r(d,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var h=[],p=[],y,x="",v=ca(d["!ref"]),b=Array.isArray(d),S=v.s.r;S<=v.e.r;++S)for(var k=v.s.c;k<=v.e.c;++k)if(x=pr({r:S,c:k}),y=b?(d[S]||[])[k]:d[x],!(!y||y.v==null||y.t==="z")){switch(p=["cell",x,"t"],y.t){case"s":case"str":p.push(e(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=e(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var T=jo(eo(y.v));p[2]="vtc",p[3]="nd",p[4]=""+T,p[5]=y.w||Kd(y.z||Qr[14],T);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(d){return[s,o,a,o,c(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}}(),jle=function(){function t(u,d,h,p,y){y.raw?d[h][p]=u:u===""||(u==="TRUE"?d[h][p]=!0:u==="FALSE"?d[h][p]=!1:isNaN(au(u))?isNaN(Kg(u).getDate())?d[h][p]=u:d[h][p]=eo(u):d[h][p]=au(u))}function e(u,d){var h=d||{},p=[];if(!u||u.length===0)return p;for(var y=u.split(/[\r\n]/),x=y.length-1;x>=0&&y[x].length===0;)--x;for(var v=10,b=0,S=0;S<=x;++S)b=y[S].indexOf(" "),b==-1?b=y[S].length:b++,v=Math.max(v,b);for(S=0;S<=x;++S){p[S]=[];var k=0;for(t(y[S].slice(0,v).trim(),p,S,k,h),k=1;k<=(y[S].length-v)/10+1;++k)t(y[S].slice(v+(k-1)*10,v+k*10).trim(),p,S,k,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var d={},h=!1,p=0,y=0;p<u.length;++p)(y=u.charCodeAt(p))==34?h=!h:!h&&y in n&&(d[y]=(d[y]||0)+1);y=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p]);if(!y.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p])}return y.sort(function(x,v){return x[0]-v[0]||r[x[1]]-r[v[1]]}),n[y.pop()[1]]||44}function s(u,d){var h=d||{},p="",y=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=i(u.slice(0,1024)):h&&h.FS?p=h.FS:p=i(u.slice(0,1024));var v=0,b=0,S=0,k=0,T=0,j=p.charCodeAt(0),P=!1,C=0,N=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var O=h.dateNF!=null?qoe(h.dateNF):null;function z(){var L=u.slice(k,T),M={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)M.t="z";else if(h.raw)M.t="s",M.v=L;else if(L.trim().length===0)M.t="s",M.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(M.t="s",M.v=L.slice(2,-1).replace(/""/g,'"')):Ace(L)?(M.t="n",M.f=L.slice(1)):(M.t="s",M.v=L);else if(L=="TRUE")M.t="b",M.v=!0;else if(L=="FALSE")M.t="b",M.v=!1;else if(!isNaN(S=au(L)))M.t="n",h.cellText!==!1&&(M.w=L),M.v=S;else if(!isNaN(Kg(L).getDate())||O&&L.match(O)){M.z=h.dateNF||Qr[14];var K=0;O&&L.match(O)&&(L=Goe(L,h.dateNF,L.match(O)||[]),K=1),h.cellDates?(M.t="d",M.v=eo(L,K)):(M.t="n",M.v=jo(eo(L,K))),h.cellText!==!1&&(M.w=Kd(M.z,M.v instanceof Date?jo(M.v):M.v)),h.cellNF||delete M.z}else M.t="s",M.v=L;if(M.t=="z"||(h.dense?(y[v]||(y[v]=[]),y[v][b]=M):y[pr({c:b,r:v})]=M),k=T+1,N=u.charCodeAt(k),x.e.c<b&&(x.e.c=b),x.e.r<v&&(x.e.r=v),C==j)++b;else if(b=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<u.length;++T)switch(C=u.charCodeAt(T)){case 34:N===34&&(P=!P);break;case j:case 10:case 13:if(!P&&z())break e;break}return T-k>0&&z(),y["!ref"]=xi(x),y}function o(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,d):O0(e(u,d),d)}function a(u,d){var h="",p=d.type=="string"?[0,0,0,0]:$he(u,d);switch(d.type){case"base64":h=hu(u);break;case"binary":h=u;break;case"buffer":d.codepage==65001?h=u.toString("utf8"):(d.codepage,h=tr&&Buffer.isBuffer(u)?u.toString("binary"):v1(u));break;case"array":h=w2(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=sg(h.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?h=sg(h):d.type=="binary",h.slice(0,19)=="socialcalc:version:"?UI.to_sheet(d.type=="string"?h:sg(h),d):o(h,d)}function l(u,d){return Ph(a(u,d),d)}function c(u){for(var d=[],h=Lr(u["!ref"]),p,y=Array.isArray(u),x=h.s.r;x<=h.e.r;++x){for(var v=[],b=h.s.c;b<=h.e.c;++b){var S=pr({r:x,c:b});if(p=y?(u[x]||[])[b]:u[S],!p||p.v==null){v.push("          ");continue}for(var k=(p.w||(pu(p),p.w)||"").slice(0,10);k.length<10;)k+=" ";v.push(k+(b===0?" ":""))}d.push(v.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:c}}(),lj=function(){function t(D,G,V){if(D){Jo(D,D.l||0);for(var H=V.Enum||ee;D.l<D.length;){var te=D.read_shift(2),ge=H[te]||H[65535],xe=D.read_shift(2),ve=D.l+xe,Ne=ge.f&&ge.f(D,xe,V);if(D.l=ve,G(Ne,ge,te))return}}}function e(D,G){switch(G.type){case"base64":return n(yl(hu(D)),G);case"binary":return n(yl(D),G);case"buffer":case"array":return n(D,G)}throw"Unsupported type "+G.type}function n(D,G){if(!D)return D;var V=G||{},H=V.dense?[]:{},te="Sheet1",ge="",xe=0,ve={},Ne=[],He=[],Ke={s:{r:0,c:0},e:{r:0,c:0}},qe=V.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)V.Enum=ee,t(D,function(Ge,et,Le){switch(Le){case 0:V.vers=Ge,Ge>=4096&&(V.qpro=!0);break;case 6:Ke=Ge;break;case 204:Ge&&(ge=Ge);break;case 222:ge=Ge;break;case 15:case 51:V.qpro||(Ge[1].v=Ge[1].v.slice(1));case 13:case 14:case 16:Le==14&&(Ge[2]&112)==112&&(Ge[2]&15)>1&&(Ge[2]&15)<15&&(Ge[1].z=V.dateNF||Qr[14],V.cellDates&&(Ge[1].t="d",Ge[1].v=iI(Ge[1].v))),V.qpro&&Ge[3]>xe&&(H["!ref"]=xi(Ke),ve[te]=H,Ne.push(te),H=V.dense?[]:{},Ke={s:{r:0,c:0},e:{r:0,c:0}},xe=Ge[3],te=ge||"Sheet"+(xe+1),ge="");var ke=V.dense?(H[Ge[0].r]||[])[Ge[0].c]:H[pr(Ge[0])];if(ke){ke.t=Ge[1].t,ke.v=Ge[1].v,Ge[1].z!=null&&(ke.z=Ge[1].z),Ge[1].f!=null&&(ke.f=Ge[1].f);break}V.dense?(H[Ge[0].r]||(H[Ge[0].r]=[]),H[Ge[0].r][Ge[0].c]=Ge[1]):H[pr(Ge[0])]=Ge[1];break}},V);else if(D[2]==26||D[2]==14)V.Enum=ne,D[2]==14&&(V.qpro=!0,D.l=0),t(D,function(Ge,et,Le){switch(Le){case 204:te=Ge;break;case 22:Ge[1].v=Ge[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ge[3]>xe&&(H["!ref"]=xi(Ke),ve[te]=H,Ne.push(te),H=V.dense?[]:{},Ke={s:{r:0,c:0},e:{r:0,c:0}},xe=Ge[3],te="Sheet"+(xe+1)),qe>0&&Ge[0].r>=qe)break;V.dense?(H[Ge[0].r]||(H[Ge[0].r]=[]),H[Ge[0].r][Ge[0].c]=Ge[1]):H[pr(Ge[0])]=Ge[1],Ke.e.c<Ge[0].c&&(Ke.e.c=Ge[0].c),Ke.e.r<Ge[0].r&&(Ke.e.r=Ge[0].r);break;case 27:Ge[14e3]&&(He[Ge[14e3][0]]=Ge[14e3][1]);break;case 1537:He[Ge[0]]=Ge[1],Ge[0]==xe&&(te=Ge[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(H["!ref"]=xi(Ke),ve[ge||te]=H,Ne.push(ge||te),!He.length)return{SheetNames:Ne,Sheets:ve};for(var Be={},Te=[],fe=0;fe<He.length;++fe)ve[Ne[fe]]?(Te.push(He[fe]||Ne[fe]),Be[He[fe]]=ve[He[fe]]||ve[Ne[fe]]):(Te.push(He[fe]),Be[He[fe]]={"!ref":"A1"});return{SheetNames:Te,Sheets:Be}}function r(D,G){var V=G||{};if(+V.codepage>=0&&qg(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var H=Ao(),te=Lr(D["!ref"]),ge=Array.isArray(D),xe=[];Nt(H,0,s(1030)),Nt(H,6,l(te));for(var ve=Math.min(te.e.r,8191),Ne=te.s.r;Ne<=ve;++Ne)for(var He=us(Ne),Ke=te.s.c;Ke<=te.e.c;++Ke){Ne===te.s.r&&(xe[Ke]=Is(Ke));var qe=xe[Ke]+He,Be=ge?(D[Ne]||[])[Ke]:D[qe];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?Nt(H,13,p(Ne,Ke,Be.v)):Nt(H,14,x(Ne,Ke,Be.v));else{var Te=pu(Be);Nt(H,15,d(Ne,Ke,Te.slice(0,239)))}}return Nt(H,1),H.end()}function i(D,G){var V=G||{};if(+V.codepage>=0&&qg(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var H=Ao();Nt(H,0,o(D));for(var te=0,ge=0;te<D.SheetNames.length;++te)(D.Sheets[D.SheetNames[te]]||{})["!ref"]&&Nt(H,27,Q(D.SheetNames[te],ge++));var xe=0;for(te=0;te<D.SheetNames.length;++te){var ve=D.Sheets[D.SheetNames[te]];if(!(!ve||!ve["!ref"])){for(var Ne=Lr(ve["!ref"]),He=Array.isArray(ve),Ke=[],qe=Math.min(Ne.e.r,8191),Be=Ne.s.r;Be<=qe;++Be)for(var Te=us(Be),fe=Ne.s.c;fe<=Ne.e.c;++fe){Be===Ne.s.r&&(Ke[fe]=Is(fe));var Ge=Ke[fe]+Te,et=He?(ve[Be]||[])[fe]:ve[Ge];if(!(!et||et.t=="z"))if(et.t=="n")Nt(H,23,z(Be,fe,xe,et.v));else{var Le=pu(et);Nt(H,22,C(Be,fe,xe,Le.slice(0,239)))}}++xe}}return Nt(H,1),H.end()}function s(D){var G=it(2);return G.write_shift(2,D),G}function o(D){var G=it(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var V=0,H=0,te=0,ge=0;ge<D.SheetNames.length;++ge){var xe=D.SheetNames[ge],ve=D.Sheets[xe];if(!(!ve||!ve["!ref"])){++te;var Ne=ca(ve["!ref"]);V<Ne.e.r&&(V=Ne.e.r),H<Ne.e.c&&(H=Ne.e.c)}}return V>8191&&(V=8191),G.write_shift(2,V),G.write_shift(1,te),G.write_shift(1,H),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function a(D,G,V){var H={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&V.qpro?(H.s.c=D.read_shift(1),D.l++,H.s.r=D.read_shift(2),H.e.c=D.read_shift(1),D.l++,H.e.r=D.read_shift(2),H):(H.s.c=D.read_shift(2),H.s.r=D.read_shift(2),G==12&&V.qpro&&(D.l+=2),H.e.c=D.read_shift(2),H.e.r=D.read_shift(2),G==12&&V.qpro&&(D.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function l(D){var G=it(8);return G.write_shift(2,D.s.c),G.write_shift(2,D.s.r),G.write_shift(2,D.e.c),G.write_shift(2,D.e.r),G}function c(D,G,V){var H=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(H[0].c=D.read_shift(1),H[3]=D.read_shift(1),H[0].r=D.read_shift(2),D.l+=2):(H[2]=D.read_shift(1),H[0].c=D.read_shift(2),H[0].r=D.read_shift(2)),H}function u(D,G,V){var H=D.l+G,te=c(D,G,V);if(te[1].t="s",V.vers==20768){D.l++;var ge=D.read_shift(1);return te[1].v=D.read_shift(ge,"utf8"),te}return V.qpro&&D.l++,te[1].v=D.read_shift(H-D.l,"cstr"),te}function d(D,G,V){var H=it(7+V.length);H.write_shift(1,255),H.write_shift(2,G),H.write_shift(2,D),H.write_shift(1,39);for(var te=0;te<H.length;++te){var ge=V.charCodeAt(te);H.write_shift(1,ge>=128?95:ge)}return H.write_shift(1,0),H}function h(D,G,V){var H=c(D,G,V);return H[1].v=D.read_shift(2,"i"),H}function p(D,G,V){var H=it(7);return H.write_shift(1,255),H.write_shift(2,G),H.write_shift(2,D),H.write_shift(2,V,"i"),H}function y(D,G,V){var H=c(D,G,V);return H[1].v=D.read_shift(8,"f"),H}function x(D,G,V){var H=it(13);return H.write_shift(1,255),H.write_shift(2,G),H.write_shift(2,D),H.write_shift(8,V,"f"),H}function v(D,G,V){var H=D.l+G,te=c(D,G,V);if(te[1].v=D.read_shift(8,"f"),V.qpro)D.l=H;else{var ge=D.read_shift(2);T(D.slice(D.l,D.l+ge),te),D.l+=ge}return te}function b(D,G,V){var H=G&32768;return G&=-32769,G=(H?D:0)+(G>=8192?G-16384:G),(H?"":"$")+(V?Is(G):us(G))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(D,G){Jo(D,0);for(var V=[],H=0,te="",ge="",xe="",ve="";D.l<D.length;){var Ne=D[D.l++];switch(Ne){case 0:V.push(D.read_shift(8,"f"));break;case 1:ge=b(G[0].c,D.read_shift(2),!0),te=b(G[0].r,D.read_shift(2),!1),V.push(ge+te);break;case 2:{var He=b(G[0].c,D.read_shift(2),!0),Ke=b(G[0].r,D.read_shift(2),!1);ge=b(G[0].c,D.read_shift(2),!0),te=b(G[0].r,D.read_shift(2),!1),V.push(He+Ke+":"+ge+te)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(D.read_shift(2));break;case 6:{for(var qe="";Ne=D[D.l++];)qe+=String.fromCharCode(Ne);V.push('"'+qe.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ve=V.pop(),xe=V.pop(),V.push(["AND","OR"][Ne-20]+"("+xe+","+ve+")");break;default:if(Ne<32&&k[Ne])ve=V.pop(),xe=V.pop(),V.push(xe+k[Ne]+ve);else if(S[Ne]){if(H=S[Ne][1],H==69&&(H=D[D.l++]),H>V.length){console.error("WK1 bad formula parse 0x"+Ne.toString(16)+":|"+V.join("|")+"|");return}var Be=V.slice(-H);V.length-=H,V.push(S[Ne][0]+"("+Be.join(",")+")")}else return Ne<=7?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=24?console.error("WK1 unsupported op "+Ne.toString(16)):Ne<=30?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=115?console.error("WK1 unsupported function opcode "+Ne.toString(16)):console.error("WK1 unrecognized opcode "+Ne.toString(16))}}V.length==1?G[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function j(D){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=D.read_shift(2),G[3]=D[D.l++],G[0].c=D[D.l++],G}function P(D,G){var V=j(D);return V[1].t="s",V[1].v=D.read_shift(G-4,"cstr"),V}function C(D,G,V,H){var te=it(6+H.length);te.write_shift(2,D),te.write_shift(1,V),te.write_shift(1,G),te.write_shift(1,39);for(var ge=0;ge<H.length;++ge){var xe=H.charCodeAt(ge);te.write_shift(1,xe>=128?95:xe)}return te.write_shift(1,0),te}function N(D,G){var V=j(D);V[1].v=D.read_shift(2);var H=V[1].v>>1;if(V[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return V[1].v=H,V}function O(D,G){var V=j(D),H=D.read_shift(4),te=D.read_shift(4),ge=D.read_shift(2);if(ge==65535)return H===0&&te===3221225472?(V[1].t="e",V[1].v=15):H===0&&te===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var xe=ge&32768;return ge=(ge&32767)-16446,V[1].v=(1-xe*2)*(te*Math.pow(2,ge+32)+H*Math.pow(2,ge)),V}function z(D,G,V,H){var te=it(14);if(te.write_shift(2,D),te.write_shift(1,V),te.write_shift(1,G),H==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var ge=0,xe=0,ve=0,Ne=0;return H<0&&(ge=1,H=-H),xe=Math.log2(H)|0,H/=Math.pow(2,xe-31),Ne=H>>>0,(Ne&2147483648)==0&&(H/=2,++xe,Ne=H>>>0),H-=Ne,Ne|=2147483648,Ne>>>=0,H*=Math.pow(2,32),ve=H>>>0,te.write_shift(4,ve),te.write_shift(4,Ne),xe+=16383+(ge?32768:0),te.write_shift(2,xe),te}function L(D,G){var V=O(D);return D.l+=G-14,V}function M(D,G){var V=j(D),H=D.read_shift(4);return V[1].v=H>>6,V}function K(D,G){var V=j(D),H=D.read_shift(8,"f");return V[1].v=H,V}function W(D,G){var V=K(D);return D.l+=G-10,V}function Z(D,G){return D[D.l+G-1]==0?D.read_shift(G,"cstr"):""}function U(D,G){var V=D[D.l++];V>G-1&&(V=G-1);for(var H="";H.length<V;)H+=String.fromCharCode(D[D.l++]);return H}function F(D,G,V){if(!(!V.qpro||G<21)){var H=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var te=D.read_shift(G-21,"cstr");return[H,te]}}function J(D,G){for(var V={},H=D.l+G;D.l<H;){var te=D.read_shift(2);if(te==14e3){for(V[te]=[0,""],V[te][0]=D.read_shift(2);D[D.l];)V[te][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return V}function Q(D,G){var V=it(5+D.length);V.write_shift(2,14e3),V.write_shift(2,G);for(var H=0;H<D.length;++H){var te=D.charCodeAt(H);V[V.l++]=te>127?95:te}return V[V.l++]=0,V}var ee={0:{n:"BOF",f:II},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:J},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:M},38:{n:"??"},39:{n:"NUMBER27",f:K},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:F},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}(),Ple=/^\s|\s$|[\t\n\r]/;function $I(t,e){if(!e.bookSST)return"";var n=[vi];n[n.length]=kt("sst",null,{xmlns:D0[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Ple)&&(s+=' xml:space="preserve"'),s+=">"+hr(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Dle(t){return[t.read_shift(4),t.read_shift(4)]}function Ole(t,e){return e||(e=it(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Lle=kae;function Mle(t){var e=Ao();ct(e,159,Ole(t));for(var n=0;n<t.length;++n)ct(e,19,Lle(t[n]));return ct(e,160),e.end()}function Ile(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function WI(t){var e=0,n,r=Ile(t),i=r.length+1,s,o,a,l,c;for(n=bh(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=(e&16384)===0?0:1,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var Rle=function(){function t(i,s){switch(s.type){case"base64":return e(hu(i),s);case"binary":return e(i,s);case"buffer":return e(tr&&Buffer.isBuffer(i)?i.toString("binary"):v1(i),s);case"array":return e(w2(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(a)&&(a[d]=[]);for(var h=/\\\w+\b/g,p=0,y,x=-1;y=h.exec(u);){switch(y[0]){case"\\cell":var v=u.slice(p,h.lastIndex-y[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var b={v,t:"s"};Array.isArray(a)?a[d][x]=b:a[pr({r:d,c:x})]=b}break}p=h.lastIndex}x>c.e.c&&(c.e.c=x)}),a["!ref"]=xi(c),a}function n(i,s){return Ph(t(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=Lr(i["!ref"]),a,l=Array.isArray(i),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var d=pr({r:c,c:u});a=l?(i[c]||[])[u]:i[d],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(pu(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function cj(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var Fle=6,lu=Fle;function xv(t){return Math.floor((t+Math.round(128/lu)/256)*lu)}function vv(t){return Math.floor((t-5)/lu*100+.5)/100}function j_(t){return Math.round((t*lu+5)/lu*256)/256}function ak(t){t.width?(t.wpx=xv(t.width),t.wch=vv(t.wpx),t.MDW=lu):t.wpx?(t.wch=vv(t.wpx),t.width=j_(t.wch),t.MDW=lu):typeof t.wch=="number"&&(t.width=j_(t.wch),t.wpx=xv(t.width),t.MDW=lu),t.customWidth&&delete t.customWidth}var zle=96,VI=zle;function wv(t){return t*96/VI}function HI(t){return t*VI/96}function Ble(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=kt("numFmt",null,{numFmtId:r,formatCode:hr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=kt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Ule(t){var e=[];return e[e.length]=kt("cellXfs",null),t.forEach(function(n){e[e.length]=kt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=kt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function qI(t,e){var n=[vi,kt("styleSheet",null,{xmlns:D0[0],"xmlns:vt":Ri.vt})],r;return t.SSF&&(r=Ble(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Ule(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function $le(t,e){var n=t.read_shift(2),r=Rs(t);return[n,r]}function Wle(t,e,n){n||(n=it(6+4*e.length)),n.write_shift(2,t),Bi(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function Vle(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=Pae(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=jae(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Rs(t),r}function Hle(t,e){e||(e=it(25+4*32)),e.write_shift(2,t.sz*20),Dae(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),gv(t.color,e);var r=0;return r=2,e.write_shift(1,r),Bi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var qle=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Gb,Gle=mc;function uj(t,e){e||(e=it(4*3+8*7+16*1)),Gb||(Gb=X4(qle));var n=Gb[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(gv({auto:1},e),gv({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Kle(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function GI(t,e,n){n||(n=it(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function vm(t,e){return e||(e=it(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Xle=mc;function Yle(t,e){return e||(e=it(51)),e.write_shift(1,0),vm(null,e),vm(null,e),vm(null,e),vm(null,e),vm(null,e),e.length>e.l?e.slice(0,e.l):e}function Jle(t,e){return e||(e=it(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),mv(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Zle(t,e,n){var r=it(2052);return r.write_shift(4,t),mv(e,r),mv(n,r),r.length>r.l?r.slice(0,r.l):r}function Qle(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(ct(t,615,bl(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&ct(t,44,Wle(i,e[i]))}),ct(t,616))}}function ece(t){var e=1;ct(t,611,bl(e)),ct(t,43,Hle({sz:12,color:{theme:1},name:"Calibri",family:2})),ct(t,612)}function tce(t){var e=2;ct(t,603,bl(e)),ct(t,45,uj({patternType:"none"})),ct(t,45,uj({patternType:"gray125"})),ct(t,604)}function nce(t){var e=1;ct(t,613,bl(e)),ct(t,46,Yle()),ct(t,614)}function rce(t){var e=1;ct(t,626,bl(e)),ct(t,47,GI({numFmtId:0},65535)),ct(t,627)}function ice(t,e){ct(t,617,bl(e.length)),e.forEach(function(n){ct(t,47,GI(n,0))}),ct(t,618)}function sce(t){var e=1;ct(t,619,bl(e)),ct(t,48,Jle({xfId:0,name:"Normal"})),ct(t,620)}function oce(t){var e=0;ct(t,505,bl(e)),ct(t,506)}function ace(t){var e=0;ct(t,508,Zle(e,"TableStyleMedium9","PivotStyleMedium4")),ct(t,509)}function lce(t,e){var n=Ao();return ct(n,278),Qle(n,t.SSF),ece(n),tce(n),nce(n),rce(n),ice(n,e.cellXfs),sce(n),oce(n),ace(n),ct(n,279),n.end()}function KI(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[vi];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function cce(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Rs(t)}}function uce(t){var e=it(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Bi(t.name,e),e.slice(0,e.l)}function dce(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function fce(t){var e=it(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function hce(t,e){var n=it(8+2*e.length);return n.write_shift(4,t),Bi(e,n),n.slice(0,n.l)}function pce(t){return t.l+=4,t.read_shift(4)!=0}function mce(t,e){var n=it(8);return n.write_shift(4,t),n.write_shift(4,1),n}function gce(){var t=Ao();return ct(t,332),ct(t,334,bl(1)),ct(t,335,uce({name:"XLDAPR",version:12e4,flags:3496657072})),ct(t,336),ct(t,339,hce(1,"XLDAPR")),ct(t,52),ct(t,35,bl(514)),ct(t,4096,bl(0)),ct(t,4097,La(1)),ct(t,36),ct(t,53),ct(t,340),ct(t,337,mce(1)),ct(t,51,fce([[1,0]])),ct(t,338),ct(t,333),t.end()}function XI(){var t=[vi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function yce(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=pr(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Hp=1024;function YI(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[kt("xml",null,{"xmlns:v":Zo.v,"xmlns:o":Zo.o,"xmlns:x":Zo.x,"xmlns:mv":Zo.mv}).replace(/\/>/,">"),kt("o:shapelayout",kt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),kt("v:shapetype",[kt("v:stroke",null,{joinstyle:"miter"}),kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Hp<t*1e3;)Hp+=1e3;return e.forEach(function(s){var o=zi(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=kt("v:fill",l,a),u={on:"t",obscured:"t"};++Hp,i=i.concat(["<v:shape"+Yg({id:"_x0000_s"+Hp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,kt("v:shadow",null,u),kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ls("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),ls("x:AutoFill","False"),ls("x:Row",String(o.r)),ls("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function JI(t){var e=[vi,kt("comments",null,{xmlns:D0[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=hr(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=n.indexOf(hr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ls("t",hr(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(ls("t",hr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function xce(t,e,n){var r=[vi,kt("ThreadedComments",null,{xmlns:Ri.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(kt("threadedComment",ls("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function vce(t){var e=[vi,kt("personList",null,{xmlns:Ri.TCMNT,"xmlns:x":D0[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(kt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function wce(t){var e={};e.iauthor=t.read_shift(4);var n=Mh(t);return e.rfx=n.s,e.ref=pr(n.s),t.l+=16,e}function bce(t,e){return e==null&&(e=it(36)),e.write_shift(4,t[1].iauthor),L0(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var _ce=Rs;function Sce(t){return Bi(t.slice(0,54))}function kce(t){var e=Ao(),n=[];return ct(e,628),ct(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),ct(e,632,Sce(i.a)))})}),ct(e,631),ct(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var s={s:zi(r[0]),e:zi(r[0])};ct(e,635,bce([s,i])),i.t&&i.t.length>0&&ct(e,637,Cae(i)),ct(e,636),delete i.iauthor})}),ct(e,634),ct(e,629),e.end()}function Nce(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&mr.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var ZI=["xlsb","xlsm","xlam","biff8","xla"],Cce=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,l?c+=e.r:--c,i+(a?"":"$")+Is(u)+(l?"":"$")+us(c)}return function(i,s){return e=s,i.replace(t,n)}}(),lk=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ck=function(){return function(e,n){return e.replace(lk,function(r,i,s,o,a,l){var c=nk(o)-(s?0:n.c),u=tk(l)-(a?0:n.r),d=u==0?"":a?u+1:"["+u+"]",h=c==0?"":s?c+1:"["+c+"]";return i+"R"+d+"C"+h})}}();function Ece(t,e){return t.replace(lk,function(n,r,i,s,o,a){return r+(i=="$"?i+s:Is(nk(s)+e.c))+(o=="$"?o+a:us(tk(a)+e.r))})}function Ace(t){return t.length!=1}function pi(t){t.l+=1}function Xd(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function QI(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return eR(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=Xd(t),a=Xd(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function eR(t){var e=Xd(t),n=Xd(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Tce(t,e,n){if(n.biff<8)return eR(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=Xd(t),o=Xd(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function tR(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return jce(t);var r=t.read_shift(n&&n.biff==12?4:2),i=Xd(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function jce(t){var e=Xd(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function Pce(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Dce(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Oce(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function Oce(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function Lce(t,e,n){var r=(t[t.l++]&96)>>5,i=QI(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function Mce(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=QI(t,s,n);return[r,i,o]}function Ice(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Rce(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function Fce(t,e,n){var r=(t[t.l++]&96)>>5,i=Tce(t,e-1,n);return[r,i]}function zce(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function dj(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Bce(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function Uce(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function $ce(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Wce(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Vce(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function nR(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function Hce(t){return t.read_shift(2),nR(t)}function qce(t){return t.read_shift(2),nR(t)}function Gce(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=tR(t,0,n);return[r,i]}function Kce(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=Dce(t,0,n);return[r,i]}function Xce(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=tR(t,0,n);return[r,i,s]}function Yce(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[Yue[i],sR[i],r]}function Jce(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:Zce(t);return[i,(s[0]===0?sR:Xue)[s[1]]]}function Zce(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Qce(t,e,n){t.l+=n&&n.biff==2?3:4}function eue(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function tue(t){return t.l++,_1[t.read_shift(1)]}function nue(t){return t.l++,t.read_shift(2)}function rue(t){return t.l++,t.read_shift(1)!==0}function iue(t){return t.l++,M0(t)}function sue(t,e,n){return t.l++,FI(t,e-1,n)}function oue(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Xae(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=_1[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=M0(t);break;case 2:n[1]=Qae(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function aue(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?Mh:nle)(t));return i}function lue(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=oue(t,n.biff);return o}function cue(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function uue(t,e,n){if(n.biff==5)return due(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function due(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function fue(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function hue(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function pue(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function mue(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var gue=mc,yue=mc,xue=mc;function S1(t,e,n){return t.l+=2,[Pce(t)]}function uk(t){return t.l+=6,[]}var vue=S1,wue=uk,bue=uk,_ue=S1;function rR(t){return t.l+=2,[II(t),t.read_shift(2)&1]}var Sue=S1,kue=rR,Nue=uk,Cue=S1,Eue=S1,Aue=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Tue(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=Aue[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function jue(t){return t.l+=2,[t.read_shift(4)]}function Pue(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function Due(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function Oue(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Lue(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Mue(t){return t.l+=4,[0,0]}var fj={1:{n:"PtgExp",f:eue},2:{n:"PtgTbl",f:xue},3:{n:"PtgAdd",f:pi},4:{n:"PtgSub",f:pi},5:{n:"PtgMul",f:pi},6:{n:"PtgDiv",f:pi},7:{n:"PtgPower",f:pi},8:{n:"PtgConcat",f:pi},9:{n:"PtgLt",f:pi},10:{n:"PtgLe",f:pi},11:{n:"PtgEq",f:pi},12:{n:"PtgGe",f:pi},13:{n:"PtgGt",f:pi},14:{n:"PtgNe",f:pi},15:{n:"PtgIsect",f:pi},16:{n:"PtgUnion",f:pi},17:{n:"PtgRange",f:pi},18:{n:"PtgUplus",f:pi},19:{n:"PtgUminus",f:pi},20:{n:"PtgPercent",f:pi},21:{n:"PtgParen",f:pi},22:{n:"PtgMissArg",f:pi},23:{n:"PtgStr",f:sue},26:{n:"PtgSheet",f:Pue},27:{n:"PtgEndSheet",f:Due},28:{n:"PtgErr",f:tue},29:{n:"PtgBool",f:rue},30:{n:"PtgInt",f:nue},31:{n:"PtgNum",f:iue},32:{n:"PtgArray",f:zce},33:{n:"PtgFunc",f:Yce},34:{n:"PtgFuncVar",f:Jce},35:{n:"PtgName",f:cue},36:{n:"PtgRef",f:Gce},37:{n:"PtgArea",f:Lce},38:{n:"PtgMemArea",f:fue},39:{n:"PtgMemErr",f:gue},40:{n:"PtgMemNoMem",f:yue},41:{n:"PtgMemFunc",f:hue},42:{n:"PtgRefErr",f:pue},43:{n:"PtgAreaErr",f:Ice},44:{n:"PtgRefN",f:Kce},45:{n:"PtgAreaN",f:Fce},46:{n:"PtgMemAreaN",f:Oue},47:{n:"PtgMemNoMemN",f:Lue},57:{n:"PtgNameX",f:uue},58:{n:"PtgRef3d",f:Xce},59:{n:"PtgArea3d",f:Mce},60:{n:"PtgRefErr3d",f:mue},61:{n:"PtgAreaErr3d",f:Rce},255:{}},Iue={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Rue={1:{n:"PtgElfLel",f:rR},2:{n:"PtgElfRw",f:Cue},3:{n:"PtgElfCol",f:vue},6:{n:"PtgElfRwV",f:Eue},7:{n:"PtgElfColV",f:_ue},10:{n:"PtgElfRadical",f:Sue},11:{n:"PtgElfRadicalS",f:Nue},13:{n:"PtgElfColS",f:wue},15:{n:"PtgElfColSV",f:bue},16:{n:"PtgElfRadicalLel",f:kue},25:{n:"PtgList",f:Tue},29:{n:"PtgSxName",f:jue},255:{}},Fue={0:{n:"PtgAttrNoop",f:Mue},1:{n:"PtgAttrSemi",f:Vce},2:{n:"PtgAttrIf",f:$ce},4:{n:"PtgAttrChoose",f:Bce},8:{n:"PtgAttrGoto",f:Uce},16:{n:"PtgAttrSum",f:Qce},32:{n:"PtgAttrBaxcel",f:dj},33:{n:"PtgAttrBaxcel",f:dj},64:{n:"PtgAttrSpace",f:Hce},65:{n:"PtgAttrSpaceSemi",f:qce},128:{n:"PtgAttrIfError",f:Wce},255:{}};function zue(t,e,n,r){if(r.biff<8)return mc(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=lue(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=aue(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(mc(t,e)),s}function Bue(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=fj[s]||fj[Iue[s]],(s===24||s===25)&&(i=(s===24?Rue:Fue)[t[t.l+1]]),!i||!i.f?mc(t,e):o.push([i.n,i.f(t,e,n)]);return o}function Uue(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var $ue={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Wue(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function iR(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function hj(t,e,n){var r=iR(t,e,n);return r=="#REF"?r:Wue(r,n)}function m0(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,c,u,d=0,h=0,p,y="";if(!t[0]||!t[0][0])return"";for(var x=-1,v="",b=0,S=t[0].length;b<S;++b){var k=t[0][b];switch(k[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),c=a.pop(),x>=0){switch(t[0][x][1][0]){case 0:v=Jr(" ",t[0][x][1][1]);break;case 1:v=Jr("\r",t[0][x][1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}c=c+v,x=-1}a.push(c+$ue[k[0]]+l);break;case"PtgIsect":l=a.pop(),c=a.pop(),a.push(c+" "+l);break;case"PtgUnion":l=a.pop(),c=a.pop(),a.push(c+","+l);break;case"PtgRange":l=a.pop(),c=a.pop(),a.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=ag(k[1][1],o,i),a.push(lg(u,s));break;case"PtgRefN":u=n?ag(k[1][1],n,i):k[1][1],a.push(lg(u,s));break;case"PtgRef3d":d=k[1][1],u=ag(k[1][2],o,i),y=hj(r,d,i),a.push(y+"!"+lg(u,s));break;case"PtgFunc":case"PtgFuncVar":var T=k[1][0],j=k[1][1];T||(T=0),T&=127;var P=T==0?[]:a.slice(-T);a.length-=T,j==="User"&&(j=P.shift()),a.push(j+"("+P.join(",")+")");break;case"PtgBool":a.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(k[1]);break;case"PtgNum":a.push(String(k[1]));break;case"PtgStr":a.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(k[1]);break;case"PtgAreaN":p=JT(k[1][1],n?{s:n}:o,i),a.push(Hb(p,i));break;case"PtgArea":p=JT(k[1][1],o,i),a.push(Hb(p,i));break;case"PtgArea3d":d=k[1][1],p=k[1][2],y=hj(r,d,i),a.push(y+"!"+Hb(p,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=k[1][2];var C=(r.names||[])[h-1]||(r[0]||[])[h],N=C?C.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),a.push(N);break;case"PtgNameX":var O=k[1][1];h=k[1][2];var z;if(i.biff<=5)O<0&&(O=-O),r[O]&&(z=r[O][h]);else{var L="";if(((r[O]||[])[0]||[])[0]==14849||(((r[O]||[])[0]||[])[0]==1025?r[O][h]&&r[O][h].itab>0&&(L=r.SheetNames[r[O][h].itab-1]+"!"):L=r.SheetNames[h-1]+"!"),r[O]&&r[O][h])L+=r[O][h].Name;else if(r[0]&&r[0][h])L+=r[0][h].Name;else{var M=(iR(r,O,i)||"").split(";;");M[h-1]?L=M[h-1]:L+="SH33TJSERRX"}a.push(L);break}z||(z={Name:"SH33TJSERRY"}),a.push(z.Name);break;case"PtgParen":var K="(",W=")";if(x>=0){switch(v="",t[0][x][1][0]){case 2:K=Jr(" ",t[0][x][1][1])+K;break;case 3:K=Jr("\r",t[0][x][1][1])+K;break;case 4:W=Jr(" ",t[0][x][1][1])+W;break;case 5:W=Jr("\r",t[0][x][1][1])+W;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}a.push(K+a.pop()+W);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:k[1][1],r:k[1][0]};var Z={c:n.c,r:n.r};if(r.sharedf[pr(u)]){var U=r.sharedf[pr(u)];a.push(m0(U,o,Z,r,i))}else{var F=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){a.push(m0(c[1],o,Z,r,i)),F=!0;break}F||a.push(k[1])}break;case"PtgArray":a.push("{"+Uue(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var J=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&J.indexOf(t[0][b][0])==-1){k=t[0][x];var Q=!0;switch(k[1][0]){case 4:Q=!1;case 0:v=Jr(" ",k[1][1]);break;case 5:Q=!1;case 1:v=Jr("\r",k[1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}a.push((Q?v:"")+a.pop()+(Q?"":v)),x=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function Vue(t){if(t==null){var e=it(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return _h(t);return _h(0)}function Hue(t,e,n,r,i){var s=Sh(e,n,i),o=Vue(t.v),a=it(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var c=it(t.bf.length),u=0;u<t.bf.length;++u)c[u]=t.bf[u];var d=as([s,o,a,c]);return d}function b2(t,e,n){var r=t.read_shift(4),i=Bue(t,r,n),s=t.read_shift(4),o=s>0?zue(t,s,i,n):null;return[i,o]}var que=b2,_2=b2,Gue=b2,Kue=b2,Xue={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},sR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Yue={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Jue(t){var e="of:="+t.replace(lk,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Zue(t){return t.replace(/\./,"!")}var cg=typeof Map<"u";function dk(t,e,n){var r=0,i=t.length;if(n){if(cg?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=cg?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(cg?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function S2(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(lu=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=vv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=j_(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function oR(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function rf(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){tI(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Que(t,e,n){if(t&&t["!ref"]){var r=Lr(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function ede(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+xi(t[n])+'"/>';return e+"</mergeCells>"}function tde(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=Xg(hr(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),a=(a||"")+kt("outlinePr",null,c)}!s&&!a||(i[i.length]=kt("sheetPr",a,o))}var nde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],rde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function ide(t){var e={sheet:1};return nde.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),rde.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=WI(t.password).toString(16).toUpperCase()),kt("sheetProtection",null,e)}function sde(t){return oR(t),kt("pageMargins",null,t)}function ode(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=kt("col",null,S2(i,r)));return n[n.length]="</cols>",n.join("")}function ade(t,e,n,r){var i=typeof t.ref=="string"?t.ref:xi(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=ca(i);o.s.r==o.e.r&&(o.e.r=ca(e["!ref"]).e.r,i=xi(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),kt("autoFilter",null,{ref:i})}function lde(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),kt("sheetViews",kt("sheetView",null,i),{})}function cde(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=_1[t.v];break;case"d":r&&r.cellDates?i=eo(t.v,-1).toISOString():(t=Po(t),t.t="n",i=""+(t.v=jo(eo(t.v)))),typeof t.z>"u"&&(t.z=Qr[14]);break;default:i=t.v;break}var a=ls("v",hr(i)),l={r:e},c=rf(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=ls("v",""+dk(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=kt("f",hr(t.f),u)+(t.v!=null?a:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),kt("c",a,l)}function ude(t,e,n,r){var i=[],s=[],o=Lr(t["!ref"]),a="",l,c="",u=[],d=0,h=0,p=t["!rows"],y=Array.isArray(t),x={r:c},v,b=-1;for(h=o.s.c;h<=o.e.c;++h)u[h]=Is(h);for(d=o.s.r;d<=o.e.r;++d){for(s=[],c=us(d),h=o.s.c;h<=o.e.c;++h){l=u[h]+c;var S=y?(t[d]||[])[h]:t[l];S!==void 0&&(a=cde(S,l,t,e))!=null&&s.push(a)}(s.length>0||p&&p[d])&&(x={r:c},p&&p[d]&&(v=p[d],v.hidden&&(x.hidden=1),b=-1,v.hpx?b=wv(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(x.ht=b,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),i[i.length]=kt("row",s.join(""),x))}if(p)for(;d<p.length;++d)p&&p[d]&&(x={r:d+1},v=p[d],v.hidden&&(x.hidden=1),b=-1,v.hpx?b=wv(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(x.ht=b,x.customHeight=1),v.level&&(x.outlineLevel=v.level),i[i.length]=kt("row","",x));return i.join("")}function aR(t,e,n,r){var i=[vi,kt("worksheet",null,{xmlns:D0[0],"xmlns:r":Ri.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",u=Lr(c);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=xi(u)}r||(r={}),l["!comments"]=[];var d=[];tde(l,n,t,e,i),i[i.length]=kt("dimension",null,{ref:c}),i[i.length]=lde(l,e,t,n),e.sheetFormat&&(i[i.length]=kt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=ode(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=ude(l,e),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=ide(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=ade(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=ede(l["!merges"]));var h=-1,p,y=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(y=dr(r,-1,hr(x[1].Target).replace(/#.*$/,""),Yn.HLINK),p["r:id"]="rId"+y),(h=x[1].Target.indexOf("#"))>-1&&(p.location=hr(x[1].Target.slice(h+1))),x[1].Tooltip&&(p.tooltip=hr(x[1].Tooltip)),i[i.length]=kt("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=sde(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ls("ignoredErrors",kt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(y=dr(r,-1,"../drawings/drawing"+(t+1)+".xml",Yn.DRAW),i[i.length]=kt("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=d),l["!comments"].length>0&&(y=dr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Yn.VML),i[i.length]=kt("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function dde(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function fde(t,e,n){var r=it(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=wv(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var d=-1,h=-1,p=u<<10;p<u+1<<10;++p){c.c=p;var y=Array.isArray(n)?(n[c.r]||[])[c.c]:n[pr(c)];y&&(d<0&&(d=p),h=p)}d<0||(++a,r.write_shift(4,d),r.write_shift(4,h))}var x=r.l;return r.l=l,r.write_shift(4,a),r.l=x,r.length>r.l?r.slice(0,r.l):r}function hde(t,e,n,r){var i=fde(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&ct(t,0,i)}var pde=Mh,mde=L0;function gde(){}function yde(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Eae(t),n}function xde(t,e,n){n==null&&(n=it(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return gv({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),_I(t,n),n.slice(0,n.l)}function vde(t){var e=Ha(t);return[e]}function wde(t,e,n){return n==null&&(n=it(8)),Dh(e,n)}function bde(t){var e=Oh(t);return[e]}function _de(t,e,n){return n==null&&(n=it(4)),Lh(e,n)}function Sde(t){var e=Ha(t),n=t.read_shift(1);return[e,n,"b"]}function kde(t,e,n){return n==null&&(n=it(9)),Dh(e,n),n.write_shift(1,t.v?1:0),n}function Nde(t){var e=Oh(t),n=t.read_shift(1);return[e,n,"b"]}function Cde(t,e,n){return n==null&&(n=it(5)),Lh(e,n),n.write_shift(1,t.v?1:0),n}function Ede(t){var e=Ha(t),n=t.read_shift(1);return[e,n,"e"]}function Ade(t,e,n){return n==null&&(n=it(9)),Dh(e,n),n.write_shift(1,t.v),n}function Tde(t){var e=Oh(t),n=t.read_shift(1);return[e,n,"e"]}function jde(t,e,n){return n==null&&(n=it(8)),Lh(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function Pde(t){var e=Ha(t),n=t.read_shift(4);return[e,n,"s"]}function Dde(t,e,n){return n==null&&(n=it(12)),Dh(e,n),n.write_shift(4,e.v),n}function Ode(t){var e=Oh(t),n=t.read_shift(4);return[e,n,"s"]}function Lde(t,e,n){return n==null&&(n=it(8)),Lh(e,n),n.write_shift(4,e.v),n}function Mde(t){var e=Ha(t),n=M0(t);return[e,n,"n"]}function Ide(t,e,n){return n==null&&(n=it(16)),Dh(e,n),_h(t.v,n),n}function Rde(t){var e=Oh(t),n=M0(t);return[e,n,"n"]}function Fde(t,e,n){return n==null&&(n=it(12)),Lh(e,n),_h(t.v,n),n}function zde(t){var e=Ha(t),n=SI(t);return[e,n,"n"]}function Bde(t,e,n){return n==null&&(n=it(12)),Dh(e,n),kI(t.v,n),n}function Ude(t){var e=Oh(t),n=SI(t);return[e,n,"n"]}function $de(t,e,n){return n==null&&(n=it(8)),Lh(e,n),kI(t.v,n),n}function Wde(t){var e=Ha(t),n=rk(t);return[e,n,"is"]}function Vde(t){var e=Ha(t),n=Rs(t);return[e,n,"str"]}function Hde(t,e,n){return n==null&&(n=it(12+4*t.v.length)),Dh(e,n),Bi(t.v,n),n.length>n.l?n.slice(0,n.l):n}function qde(t){var e=Oh(t),n=Rs(t);return[e,n,"str"]}function Gde(t,e,n){return n==null&&(n=it(8+4*t.v.length)),Lh(e,n),Bi(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Kde(t,e,n){var r=t.l+e,i=Ha(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=_2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}function Xde(t,e,n){var r=t.l+e,i=Ha(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=_2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}function Yde(t,e,n){var r=t.l+e,i=Ha(t);i.r=n["!row"];var s=M0(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=_2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}function Jde(t,e,n){var r=t.l+e,i=Ha(t);i.r=n["!row"];var s=Rs(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=_2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}var Zde=Mh,Qde=L0;function efe(t,e){return e==null&&(e=it(4)),e.write_shift(4,t),e}function tfe(t,e){var n=t.l+e,r=Mh(t),i=ik(t),s=Rs(t),o=Rs(t),a=Rs(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function nfe(t,e){var n=it(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));L0({s:zi(t[0]),e:zi(t[0])},n),sk("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return Bi(i||"",n),Bi(t[1].Tooltip||"",n),Bi("",n),n.slice(0,n.l)}function rfe(){}function ife(t,e,n){var r=t.l+e,i=NI(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=que(t,r-t.l,n);o[1]=a}else t.l=r;return o}function sfe(t,e,n){var r=t.l+e,i=Mh(t),s=[i];if(n.cellFormula){var o=Kue(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function ofe(t,e,n){n==null&&(n=it(18));var r=S2(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var lR=["left","right","top","bottom","header","footer"];function afe(t){var e={};return lR.forEach(function(n){e[n]=M0(t)}),e}function lfe(t,e){return e==null&&(e=it(6*8)),oR(t),lR.forEach(function(n){_h(t[n],e)}),e}function cfe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function ufe(t,e,n){n==null&&(n=it(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function dfe(t){var e=it(24);return e.write_shift(4,4),e.write_shift(4,1),L0(t,e),e}function ffe(t,e){return e==null&&(e=it(16*4+2)),e.write_shift(2,t.password?WI(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function hfe(){}function pfe(){}function mfe(t,e,n,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Po(e),e.z=e.z||Qr[14],e.v=jo(eo(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:n,c:r};switch(l.s=rf(i.cellXfs,e,i),e.l&&s["!links"].push([pr(l),e.l]),e.c&&s["!comments"].push([pr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(a=dk(i.Strings,e.v,i.revStrings),l.t="s",l.v=a,o?ct(t,18,Lde(e,l)):ct(t,7,Dde(e,l))):(l.t="str",o?ct(t,17,Gde(e,l)):ct(t,6,Hde(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?ct(t,13,$de(e,l)):ct(t,2,Bde(e,l)):o?ct(t,16,Fde(e,l)):ct(t,5,Ide(e,l)),!0;case"b":return l.t="b",o?ct(t,15,Cde(e,l)):ct(t,4,kde(e,l)),!0;case"e":return l.t="e",o?ct(t,14,jde(e,l)):ct(t,3,Ade(e,l)),!0}return o?ct(t,12,_de(e,l)):ct(t,1,wde(e,l)),!0}function gfe(t,e,n,r){var i=Lr(e["!ref"]||"A1"),s,o="",a=[];ct(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=c;++u){o=us(u),hde(t,e,i,u);var d=!1;if(u<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){u===i.s.r&&(a[h]=Is(h)),s=a[h]+o;var p=l?(e[u]||[])[h]:e[s];if(!p){d=!1;continue}d=mfe(t,p,u,h,r,e,d)}}ct(t,146)}function yfe(t,e){!e||!e["!merges"]||(ct(t,177,efe(e["!merges"].length)),e["!merges"].forEach(function(n){ct(t,176,Qde(n))}),ct(t,178))}function xfe(t,e){!e||!e["!cols"]||(ct(t,390),e["!cols"].forEach(function(n,r){n&&ct(t,60,ofe(r,n))}),ct(t,391))}function vfe(t,e){!e||!e["!ref"]||(ct(t,648),ct(t,649,dfe(Lr(e["!ref"]))),ct(t,650))}function wfe(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=dr(n,-1,r[1].Target.replace(/#.*$/,""),Yn.HLINK);ct(t,494,nfe(r,i))}}),delete e["!links"]}function bfe(t,e,n,r){if(e["!comments"].length>0){var i=dr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Yn.VML);ct(t,551,sk("rId"+i)),e["!legacy"]=i}}function _fe(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:xi(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=ca(s);a.s.r==a.e.r&&(a.e.r=ca(e["!ref"]).e.r,s=xi(a));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),ct(t,161,L0(Lr(s))),ct(t,162)}}function Sfe(t,e,n){ct(t,133),ct(t,137,ufe(e,n)),ct(t,138),ct(t,134)}function kfe(t,e){e["!protect"]&&ct(t,535,ffe(e["!protect"]))}function Nfe(t,e,n,r){var i=Ao(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=Lr(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],ct(i,129),(n.vbaraw||o["!outline"])&&ct(i,147,xde(a,o["!outline"])),ct(i,148,mde(l)),Sfe(i,o,n.Workbook),xfe(i,o),gfe(i,o,t,e),kfe(i,o),_fe(i,o,n,t),yfe(i,o),wfe(i,o,r),o["!margins"]&&ct(i,476,lfe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&vfe(i,o),bfe(i,o,t,r),ct(i,130),i.end()}function Cfe(t,e){t.l+=10;var n=Rs(t);return{name:n}}var Efe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Afe(t){return!t.Workbook||!t.Workbook.WBProps?"false":sae(t.Workbook.WBProps.date1904)?"true":"false"}var Tfe="][*?/\\".split("");function cR(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return Tfe.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function jfe(t,e,n){t.forEach(function(r,i){cR(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Pfe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];jfe(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)Que(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function uR(t){var e=[vi];e[e.length]=kt("workbook",null,{xmlns:D0[0],"xmlns:r":Ri.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(Efe.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=kt("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:hr(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=kt("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=kt("definedName",hr(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Dfe(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=T_(t),n.name=Rs(t),n}function Ofe(t,e){return e||(e=it(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),sk(t.strRelID,e),Bi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Lfe(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?Rs(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function Mfe(t,e){e||(e=it(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),_I(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Ife(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=Aae(t),o=Gue(t,0,n),a=ik(t);t.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}function Rfe(t,e){ct(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};ct(t,156,Ofe(i))}ct(t,144)}function Ffe(t,e){e||(e=it(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Bi("SheetJS",e),Bi(cv.version,e),Bi(cv.version,e),Bi("7262",e),e.length>e.l?e.slice(0,e.l):e}function zfe(t,e){e||(e=it(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function Bfe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(ct(t,135),ct(t,158,zfe(i)),ct(t,136))}}function Ufe(t,e){var n=Ao();return ct(n,131),ct(n,128,Ffe()),ct(n,153,Mfe(t.Workbook&&t.Workbook.WBProps||null)),Bfe(n,t),Rfe(n,t),ct(n,132),n.end()}function $fe(t,e,n){return(e.slice(-4)===".bin"?Ufe:uR)(t)}function Wfe(t,e,n,r,i){return(e.slice(-4)===".bin"?Nfe:aR)(t,n,r,i)}function Vfe(t,e,n){return(e.slice(-4)===".bin"?lce:qI)(t,n)}function Hfe(t,e,n){return(e.slice(-4)===".bin"?Mle:$I)(t,n)}function qfe(t,e,n){return(e.slice(-4)===".bin"?kce:JI)(t)}function Gfe(t){return(t.slice(-4)===".bin"?gce:XI)()}function Kfe(t,e){var n=[];return t.Props&&n.push(Vae(t.Props,e)),t.Custprops&&n.push(Hae(t.Props,t.Custprops)),n.join("")}function Xfe(){return""}function Yfe(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(kt("NumberFormat",null,{"ss:Format":hr(Qr[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(kt("Style",s.join(""),o))}),kt("Styles",n.join(""))}function dR(t){return kt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+ck(t.Ref,{r:0,c:0})})}function Jfe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(dR(i)))}return kt("Names",n.join(""))}function Zfe(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(dR(a)))}return s.join("")}function Qfe(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(kt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(kt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(kt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(kt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ls("ProtectContents","True")),t["!protect"].objects&&i.push(ls("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ls("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ls("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ls("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":kt("WorksheetOptions",i.join(""),{xmlns:Zo.x})}function ehe(t){return t.map(function(e){var n=iae(e.t||""),r=kt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return kt("Comment",r,{"ss:Author":e.a})}).join("")}function the(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+hr(ck(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=zi(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=hr(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=hr(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",h="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",h=String(t.v);break;case"b":d="Boolean",h=t.v?"1":"0";break;case"e":d="Error",h=_1[t.v];break;case"d":d="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Qr[14]);break;case"s":d="String",h=rae(t.v||"");break}var p=rf(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+p),a["ss:Index"]=o.c+1;var y=t.v!=null?h:"",x=t.t=="z"?"":'<Data ss:Type="'+d+'">'+y+"</Data>";return(t.c||[]).length>0&&(x+=ehe(t.c)),kt("Cell",x,a)}function nhe(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=HI(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function rhe(t,e,n,r){if(!t["!ref"])return"";var i=Lr(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(v,b){ak(v);var S=!!v.width,k=S2(b,v),T={"ss:Index":b+1};S&&(T["ss:Width"]=xv(k.width)),v.hidden&&(T["ss:Hidden"]="1"),a.push(kt("Column",null,T))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var u=[nhe(c,(t["!rows"]||[])[c])],d=i.s.c;d<=i.e.c;++d){var h=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>d)&&!(s[o].s.r>c)&&!(s[o].e.c<d)&&!(s[o].e.r<c)){(s[o].s.c!=d||s[o].s.r!=c)&&(h=!0);break}if(!h){var p={r:c,c:d},y=pr(p),x=l?(t[c]||[])[d]:t[y];u.push(the(x,y,t,e,n,r,p))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function ihe(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?Zfe(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?rhe(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(Qfe(s,e,t,n)),r.join("")}function she(t,e){e||(e={}),t.SSF||(t.SSF=Po(Qr)),t.SSF&&(x2(),y2(t.SSF),e.revssf=v2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],rf(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Kfe(t,e)),n.push(Xfe()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(kt("Worksheet",ihe(r,e,t),{"ss:Name":hr(t.SheetNames[r])}));return n[2]=Yfe(t,e),n[3]=Jfe(t),vi+kt("Workbook",n.join(""),{xmlns:Zo.ss,"xmlns:o":Zo.o,"xmlns:x":Zo.x,"xmlns:ss":Zo.ss,"xmlns:dt":Zo.dt,"xmlns:html":Zo.html})}var Kb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ohe(t,e){var n=[],r=[],i=[],s=0,o,a=BT(QT,"n"),l=BT(ej,"n");if(t.Props)for(o=ds(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=ds(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var c=[];for(s=0;s<i.length;++s)MI.indexOf(i[s][0])>-1||DI.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);r.length&&mr.utils.cfb_add(e,"/SummaryInformation",sj(r,Kb.SI,l,ej)),(n.length||c.length)&&mr.utils.cfb_add(e,"/DocumentSummaryInformation",sj(n,Kb.DSI,a,QT,c.length?c:null,Kb.UDI))}function ahe(t,e){var n=e||{},r=mr.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return mr.utils.cfb_add(r,i,fR(t,n)),n.biff==8&&(t.Props||t.Custprops)&&ohe(t,r),n.biff==8&&t.vbaraw&&Nce(r,mr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var lhe={0:{f:dde},1:{f:vde},2:{f:zde},3:{f:Ede},4:{f:Sde},5:{f:Mde},6:{f:Vde},7:{f:Pde},8:{f:Jde},9:{f:Yde},10:{f:Kde},11:{f:Xde},12:{f:bde},13:{f:Ude},14:{f:Tde},15:{f:Nde},16:{f:Rde},17:{f:qde},18:{f:Ode},19:{f:rk},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Ife},40:{},42:{},43:{f:Vle},44:{f:$le},45:{f:Gle},46:{f:Xle},47:{f:Kle},48:{},49:{f:bae},50:{},51:{f:dce},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:_le},62:{f:Wde},63:{f:yce},64:{f:hfe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:mc,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:cfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:yde},148:{f:pde,p:16},151:{f:rfe},152:{},153:{f:Lfe},154:{},155:{},156:{f:Dfe},157:{},158:{},159:{T:1,f:Dle},160:{T:-1},161:{T:1,f:Mh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Zde},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:cce},336:{T:-1},337:{f:pce,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:T_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:gle},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:ife},427:{f:sfe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:afe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:gde},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:tfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:T_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:_ce},633:{T:1},634:{T:-1},635:{T:1,f:wce},636:{T:-1},637:{f:Nae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Cfe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:pfe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Nt(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&ek(n)&&t.push(n)}}function che(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return Nt(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<i;){for(u=t.next(4),u.write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function k1(t,e,n){return t||(t=it(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function uhe(t,e,n,r){var i=it(9);return k1(i,t,e),RI(n,r||"b",i),i}function dhe(t,e,n){var r=it(8+2*n.length);return k1(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function fhe(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?jo(eo(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Nt(t,2,Cle(n,r,i)):Nt(t,3,Nle(n,r,i));return;case"b":case"e":Nt(t,5,uhe(n,r,e.v,e.t));return;case"s":case"str":Nt(t,4,dhe(n,r,(e.v||"").slice(0,255)));return}Nt(t,1,k1(null,n,r))}function hhe(t,e,n,r){var i=Array.isArray(e),s=Lr(e["!ref"]||"A1"),o,a="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=xi(s)}for(var c=s.s.r;c<=s.e.r;++c){a=us(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=Is(u)),o=l[u]+a;var d=i?(e[c]||[])[u]:e[o];d&&fhe(t,d,c,u)}}}function phe(t,e){for(var n=e||{},r=Ao(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Nt(r,n.biff==4?1033:n.biff==3?521:9,ok(t,16,n)),hhe(r,t.Sheets[t.SheetNames[i]],i,n),Nt(r,10),r.end()}function mhe(t,e,n){Nt(t,49,lle({sz:12,name:"Arial"},n))}function ghe(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Nt(t,1054,dle(i,e[i],n))})}function yhe(t,e){var n=it(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Nt(t,2151,n),n=it(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),BI(Lr(e["!ref"]||"A1"),n),n.write_shift(4,4),Nt(t,2152,n)}function xhe(t,e){for(var n=0;n<16;++n)Nt(t,224,aj({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Nt(t,224,aj(r,0,e))})}function vhe(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Nt(t,440,vle(r)),r[1].Tooltip&&Nt(t,2048,wle(r))}delete e["!links"]}function whe(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&Nt(t,125,Sle(S2(i,r),i))})}}function bhe(t,e,n,r,i){var s=16+rf(i.cellXfs,e,i);if(e.v==null&&!e.bf){Nt(t,513,Sh(n,r,s));return}if(e.bf)Nt(t,6,Hue(e,n,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?jo(eo(e.v)):e.v;Nt(t,515,mle(n,r,o,s));break;case"b":case"e":Nt(t,517,ple(n,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=dk(i.Strings,e.v,i.revStrings);Nt(t,253,cle(n,r,a,s))}else Nt(t,516,ule(n,r,(e.v||"").slice(0,255),s,i));break;default:Nt(t,513,Sh(n,r,s))}}function _he(t,e,n){var r=Ao(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,u,d="",h=[],p=Lr(s["!ref"]||"A1"),y=c?65536:16384;if(p.e.c>255||p.e.r>=y){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}Nt(r,2057,ok(n,16,e)),Nt(r,13,La(1)),Nt(r,12,La(100)),Nt(r,15,Zs(!0)),Nt(r,17,Zs(!1)),Nt(r,16,_h(.001)),Nt(r,95,Zs(!0)),Nt(r,42,Zs(!1)),Nt(r,43,Zs(!1)),Nt(r,130,La(1)),Nt(r,128,hle()),Nt(r,131,Zs(!1)),Nt(r,132,Zs(!1)),c&&whe(r,s["!cols"]),Nt(r,512,fle(p,e)),c&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){d=us(x);for(var v=p.s.c;v<=p.e.c;++v){x===p.s.r&&(h[v]=Is(v)),u=h[v]+d;var b=l?(s[x]||[])[v]:s[u];b&&(bhe(r,b,x,v,e),c&&b.l&&s["!links"].push([u,b.l]))}}var S=a.CodeName||a.name||i;return c&&Nt(r,574,ale((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&Nt(r,229,xle(s["!merges"])),c&&vhe(r,s),Nt(r,442,zI(S)),c&&yhe(r,s),Nt(r,10),r.end()}function She(t,e,n){var r=Ao(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(Nt(r,2057,ok(t,5,n)),n.bookType=="xla"&&Nt(r,135),Nt(r,225,a?La(1200):null),Nt(r,193,Kae(2)),l&&Nt(r,191),l&&Nt(r,192),Nt(r,226),Nt(r,92,rle("SheetJS",n)),Nt(r,66,La(a?1200:1252)),a&&Nt(r,353,La(0)),a&&Nt(r,448),Nt(r,317,kle(t.SheetNames.length)),a&&t.vbaraw&&Nt(r,211),a&&t.vbaraw){var c=o.CodeName||"ThisWorkbook";Nt(r,442,zI(c))}Nt(r,156,La(17)),Nt(r,25,Zs(!1)),Nt(r,18,Zs(!1)),Nt(r,19,La(0)),a&&Nt(r,431,Zs(!1)),a&&Nt(r,444,La(0)),Nt(r,61,ole()),Nt(r,64,Zs(!1)),Nt(r,141,La(0)),Nt(r,34,Zs(Afe(t)=="true")),Nt(r,14,Zs(!0)),a&&Nt(r,439,Zs(!1)),Nt(r,218,La(0)),mhe(r,t,n),ghe(r,t.SSF,n),xhe(r,n),a&&Nt(r,352,Zs(!1));var u=r.end(),d=Ao();a&&Nt(d,140,ble()),a&&n.Strings&&che(d,252,sle(n.Strings)),Nt(d,10);var h=d.end(),p=Ao(),y=0,x=0;for(x=0;x<t.SheetNames.length;++x)y+=(a?12:11)+(a?2:1)*t.SheetNames[x].length;var v=u.length+y+h.length;for(x=0;x<t.SheetNames.length;++x){var b=s[x]||{};Nt(p,133,ile({pos:v,hs:b.Hidden||0,dt:0,name:t.SheetNames[x]},n)),v+=e[x].length}var S=p.end();if(y!=S.length)throw new Error("BS8 "+y+" != "+S.length);var k=[];return u.length&&k.push(u),S.length&&k.push(S),h.length&&k.push(h),as(k)}function khe(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Po(Qr)),t&&t.SSF&&(x2(),y2(t.SSF),n.revssf=v2(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,fk(n),n.cellXfs=[],rf(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=_he(i,n,t);return r.unshift(She(t,r,n)),as(r)}function fR(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=ca(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return khe(t,e);case 4:case 3:case 2:return phe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Nhe(t,e,n,r){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=pr({r:n,c:o}),d=r.dense?(t[n]||[])[o]:t[u],h=d&&d.v!=null&&(d.h||nae(d.w||(pu(d),d.w)||""))||"",p={};a>1&&(p.rowspan=a),l>1&&(p.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),p.id=(r.id||"sjs")+"-"+u,s.push(kt("td",h,p))}}var y="<tr>";return y+s.join("")+"</tr>"}var Che='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ehe="</body></html>";function Ahe(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function hR(t,e){var n=e||{},r=n.header!=null?n.header:Che,i=n.footer!=null?n.footer:Ehe,s=[r],o=ca(t["!ref"]);n.dense=Array.isArray(t),s.push(Ahe(t,o,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(Nhe(t,o,a,n));return s.push("</table>"+i),s.join("")}function pR(t,e,n){var r=n||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?zi(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var u=ca(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var d=[],h=0,p=t["!rows"]||(t["!rows"]=[]),y=0,x=0,v=0,b=0,S=0,k=0;for(t["!cols"]||(t["!cols"]=[]);y<a.length&&x<l;++y){var T=a[y];if(pj(T)){if(r.display)continue;p[x]={hidden:!0}}var j=T.children;for(v=b=0;v<j.length;++v){var P=j[v];if(!(r.display&&pj(P))){var C=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):oae(P.innerHTML),N=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<d.length;++h){var O=d[h];O.s.c==b+s&&O.s.r<x+i&&x+i<=O.e.r&&(b=O.e.c+1-s,h=-1)}k=+P.getAttribute("colspan")||1,((S=+P.getAttribute("rowspan")||1)>1||k>1)&&d.push({s:{r:x+i,c:b+s},e:{r:x+i+(S||1)-1,c:b+s+(k||1)-1}});var z={t:"s",v:C},L=P.getAttribute("data-t")||P.getAttribute("t")||"";C!=null&&(C.length==0?z.t=L||"z":r.raw||C.trim().length==0||L=="s"||(C==="TRUE"?z={t:"b",v:!0}:C==="FALSE"?z={t:"b",v:!1}:isNaN(au(C))?isNaN(Kg(C).getDate())||(z={t:"d",v:eo(C)},r.cellDates||(z={t:"n",v:jo(z.v)}),z.z=r.dateNF||Qr[14]):z={t:"n",v:au(C)})),z.z===void 0&&N!=null&&(z.z=N);var M="",K=P.getElementsByTagName("A");if(K&&K.length)for(var W=0;W<K.length&&!(K[W].hasAttribute("href")&&(M=K[W].getAttribute("href"),M.charAt(0)!="#"));++W);M&&M.charAt(0)!="#"&&(z.l={Target:M}),r.dense?(t[x+i]||(t[x+i]=[]),t[x+i][b+s]=z):t[pr({c:b+s,r:x+i})]=z,c.e.c<b+s&&(c.e.c=b+s),b+=k}}++x}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,x-1+i),t["!ref"]=xi(c),x>=l&&(t["!fullref"]=xi((c.e.r=a.length-y+x-1+i,c))),t}function mR(t,e){var n=e||{},r=n.dense?[]:{};return pR(r,t,e)}function The(t,e){return Ph(mR(t,e),e)}function pj(t){var e="",n=jhe(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function jhe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Phe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Yg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return vi+e}}(),mj=function(){var t=function(s){return hr(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,o,a){var l=[];l.push('      <table:table table:name="'+hr(o.SheetNames[a])+`" table:style-name="ta1">
`);var c=0,u=0,d=ca(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,y=Array.isArray(s);if(s["!cols"])for(u=0;u<=d.e.c;++u)l.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(c=0;c<d.s.r;++c)x=v[c]?' table:style-name="ro'+v[c].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=d.e.r;++c){for(x=v[c]?' table:style-name="ro'+v[c].ods+'"':"",l.push("        <table:table-row"+x+`>
`),u=0;u<d.s.c;++u)l.push(e);for(;u<=d.e.c;++u){var b=!1,S={},k="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>u)&&!(h[p].s.r>c)&&!(h[p].e.c<u)&&!(h[p].e.r<c)){(h[p].s.c!=u||h[p].s.r!=c)&&(b=!0),S["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,S["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(b){l.push(n);continue}var T=pr({r:c,c:u}),j=y?(s[c]||[])[u]:s[T];if(j&&j.f&&(S["table:formula"]=hr(Jue(j.f)),j.F&&j.F.slice(0,T.length)==T)){var P=ca(j.F);S["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,S["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!j){l.push(e);continue}switch(j.t){case"b":k=j.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=j.v?"true":"false";break;case"n":k=j.w||String(j.v||0),S["office:value-type"]="float",S["office:value"]=j.v||0;break;case"s":case"str":k=j.v==null?"":j.v,S["office:value-type"]="string";break;case"d":k=j.w||eo(j.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=eo(j.v).toISOString(),S["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(k);if(j.l&&j.l.Target){var N=j.l.Target;N=N.charAt(0)=="#"?"#"+Zue(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),C=kt("text:a",C,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+kt("table:table-cell",kt("text:p",C,{}),S)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var d=c["!cols"][u];if(d.width==null&&d.wpx==null&&d.wch==null)continue;ak(d),d.ods=a;var h=c["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var d=c["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var l=[vi],c=Yg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Yg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push(jI().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)l.push(r(o.Sheets[o.SheetNames[d]],o,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function gR(t,e){if(e.bookType=="fods")return mj(t,e);var n=Y4(),r="",i=[],s=[];return r="mimetype",An(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",An(n,r,mj(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",An(n,r,Phe(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",An(n,r,vi+jI()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",An(n,r,Wae(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",An(n,r,Uae(i)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function bv(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Dhe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):yl(Xg(t))}function Ohe(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function Yd(t){var e=t.reduce(function(i,s){return i+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function Lhe(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function Jg(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function ur(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Qp(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function ki(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=Jg(t,n),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);a=t.slice(l,n[0])}break;case 5:o=4,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=Jg(t,n),a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function es(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(ur(r*8+i.type)),i.type==2&&e.push(ur(i.data.length)),e.push(i.data))})}),Yd(e)}function dl(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=Jg(t,r),s=ki(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:Qp(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=ki(a.data),c=Qp(l[3][0].data);o.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=Qp(s[3][0].data)>>>0>0),n.push(o)}return n}function Ap(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:ur(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:ur(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:ur(o.data.length)}],r[2].push({data:es(o.meta),type:2})});var s=es(r);e.push(ur(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),Yd(e)}function Mhe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=Jg(e,n),i=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[n[0]],a>1&&(o|=e[n[0]+1]<<8),a>2&&(o|=e[n[0]+2]<<16),a>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=a}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var l=0,c=0;if(s==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[Yd(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=Yd(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function fl(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(Mhe(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return Yd(e)}function Tp(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=ur(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return Yd(e)}function Xb(t,e){var n=new Uint8Array(32),r=bv(n),i=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,Lhe(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,i)}function Yb(t,e){var n=new Uint8Array(32),r=bv(n),i=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,i)}function sd(t){var e=ki(t);return Jg(e[1][0].data)}function Ihe(t,e,n){var r,i,s,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&Qp(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,c=bv(t[7][0].data),u=0,d=[],h=bv(t[4][0].data),p=0,y=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}c.setUint16(x*2,u,!0),h.setUint16(x*2,p,!0);var v,b;switch(typeof e[x]){case"string":v=Xb({t:"s",v:e[x]},n),b=Yb({t:"s",v:e[x]},n);break;case"number":v=Xb({t:"n",v:e[x]},n),b=Yb({t:"n",v:e[x]},n);break;case"boolean":v=Xb({t:"b",v:e[x]},n),b=Yb({t:"b",v:e[x]},n);break;default:throw new Error("Unsupported value "+e[x])}d.push(v),u+=v.length,y.push(b),p+=b.length,++l}for(t[2][0].data=ur(l);x<t[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return t[6][0].data=Yd(d),t[3][0].data=Yd(y),l}function Rhe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=ca(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(xi(r)));var s=_v(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(G){return G.forEach(function(V){typeof V=="string"&&o.push(V)})});var a={},l=[],c=mr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(G,V){return[G,c.FullPaths[V]]}).forEach(function(G){var V=G[0],H=G[1];if(V.type==2&&V.name.match(/\.iwa/)){var te=V.content,ge=fl(te),xe=dl(ge);xe.forEach(function(ve){l.push(ve.id),a[ve.id]={deps:[],location:H,type:Qp(ve.messages[0].meta[1][0].data)}})}}),l.sort(function(G,V){return G-V});var u=l.filter(function(G){return G>1}).map(function(G){return[G,ur(G)]});c.FileIndex.map(function(G,V){return[G,c.FullPaths[V]]}).forEach(function(G){var V=G[0];if(G[1],!!V.name.match(/\.iwa/)){var H=dl(fl(V.content));H.forEach(function(te){te.messages.forEach(function(ge){u.forEach(function(xe){te.messages.some(function(ve){return Qp(ve.meta[1][0].data)!=11006&&Ohe(ve.data,xe[1])})&&a[xe[0]].deps.push(te.id)})})})}});for(var d=mr.find(c,a[1].location),h=dl(fl(d.content)),p,y=0;y<h.length;++y){var x=h[y];x.id==1&&(p=x)}var v=sd(ki(p.messages[0].data)[1][0].data);for(d=mr.find(c,a[v].location),h=dl(fl(d.content)),y=0;y<h.length;++y)x=h[y],x.id==v&&(p=x);for(v=sd(ki(p.messages[0].data)[2][0].data),d=mr.find(c,a[v].location),h=dl(fl(d.content)),y=0;y<h.length;++y)x=h[y],x.id==v&&(p=x);for(v=sd(ki(p.messages[0].data)[2][0].data),d=mr.find(c,a[v].location),h=dl(fl(d.content)),y=0;y<h.length;++y)x=h[y],x.id==v&&(p=x);var b=ki(p.messages[0].data);{b[6][0].data=ur(r.e.r+1),b[7][0].data=ur(r.e.c+1);var S=sd(b[46][0].data),k=mr.find(c,a[S].location),T=dl(fl(k.content));{for(var j=0;j<T.length&&T[j].id!=S;++j);if(T[j].id!=S)throw"Bad ColumnRowUIDMapArchive";var P=ki(T[j].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var C=0;C<=r.e.c;++C){var N=[];N[1]=N[2]=[{type:0,data:ur(C+420690)}],P[1].push({type:2,data:es(N)}),P[2].push({type:0,data:ur(C)}),P[3].push({type:0,data:ur(C)})}P[4]=[],P[5]=[],P[6]=[];for(var O=0;O<=r.e.r;++O)N=[],N[1]=N[2]=[{type:0,data:ur(O+726270)}],P[4].push({type:2,data:es(N)}),P[5].push({type:0,data:ur(O)}),P[6].push({type:0,data:ur(O)});T[j].messages[0].data=es(P)}k.content=Tp(Ap(T)),k.size=k.content.length,delete b[46];var z=ki(b[4][0].data);{z[7][0].data=ur(r.e.r+1);var L=ki(z[1][0].data),M=sd(L[2][0].data);k=mr.find(c,a[M].location),T=dl(fl(k.content));{if(T[0].id!=M)throw"Bad HeaderStorageBucket";var K=ki(T[0].messages[0].data);for(O=0;O<s.length;++O){var W=ki(K[2][0].data);W[1][0].data=ur(O),W[4][0].data=ur(s[O].length),K[2][O]={type:K[2][0].type,data:es(W)}}T[0].messages[0].data=es(K)}k.content=Tp(Ap(T)),k.size=k.content.length;var Z=sd(z[2][0].data);k=mr.find(c,a[Z].location),T=dl(fl(k.content));{if(T[0].id!=Z)throw"Bad HeaderStorageBucket";for(K=ki(T[0].messages[0].data),C=0;C<=r.e.c;++C)W=ki(K[2][0].data),W[1][0].data=ur(C),W[4][0].data=ur(r.e.r+1),K[2][C]={type:K[2][0].type,data:es(W)};T[0].messages[0].data=es(K)}k.content=Tp(Ap(T)),k.size=k.content.length;var U=sd(z[4][0].data);(function(){for(var G=mr.find(c,a[U].location),V=dl(fl(G.content)),H,te=0;te<V.length;++te){var ge=V[te];ge.id==U&&(H=ge)}var xe=ki(H.messages[0].data);{xe[3]=[];var ve=[];o.forEach(function(Ke,qe){ve[1]=[{type:0,data:ur(qe)}],ve[2]=[{type:0,data:ur(1)}],ve[3]=[{type:2,data:Dhe(Ke)}],xe[3].push({type:2,data:es(ve)})})}H.messages[0].data=es(xe);var Ne=Ap(V),He=Tp(Ne);G.content=He,G.size=G.content.length})();var F=ki(z[3][0].data);{var J=F[1][0];delete F[2];var Q=ki(J.data);{var ee=sd(Q[2][0].data);(function(){for(var G=mr.find(c,a[ee].location),V=dl(fl(G.content)),H,te=0;te<V.length;++te){var ge=V[te];ge.id==ee&&(H=ge)}var xe=ki(H.messages[0].data);{delete xe[6],delete F[7];var ve=new Uint8Array(xe[5][0].data);xe[5]=[];for(var Ne=0,He=0;He<=r.e.r;++He){var Ke=ki(ve);Ne+=Ihe(Ke,s[He],o),Ke[1][0].data=ur(He),xe[5].push({data:es(Ke),type:2})}xe[1]=[{type:0,data:ur(r.e.c+1)}],xe[2]=[{type:0,data:ur(r.e.r+1)}],xe[3]=[{type:0,data:ur(Ne)}],xe[4]=[{type:0,data:ur(r.e.r+1)}]}H.messages[0].data=es(xe);var qe=Ap(V),Be=Tp(qe);G.content=Be,G.size=G.content.length})()}J.data=es(Q)}z[3][0].data=es(F)}b[4][0].data=es(z)}p.messages[0].data=es(b);var ne=Ap(h),D=Tp(ne);return d.content=D,d.size=d.content.length,c}function Fhe(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function fk(t){Fhe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function zhe(t,e){return e.bookType=="ods"?gR(t,e):e.bookType=="numbers"?Rhe(t,e):e.bookType=="xlsb"?Bhe(t,e):Uhe(t,e)}function Bhe(t,e){Hp=1024,t&&!t.SSF&&(t.SSF=Po(Qr)),t&&t.SSF&&(x2(),y2(t.SSF),e.revssf=v2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,cg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=ZI.indexOf(e.bookType)>-1,i=EI();fk(e=e||{});var s=Y4(),o="",a=0;if(e.cellXfs=[],rf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",An(s,o,PI(t.Props,e)),i.coreprops.push(o),dr(e.rels,2,o,Yn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,An(s,o,OI(t.Props)),i.extprops.push(o),dr(e.rels,3,o,Yn.EXT_PROPS),t.Custprops!==t.Props&&ds(t.Custprops||{}).length>0&&(o="docProps/custom.xml",An(s,o,LI(t.Custprops)),i.custprops.push(o),dr(e.rels,4,o,Yn.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var u={"!id":{}},d=t.Sheets[t.SheetNames[a-1]],h=(d||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,An(s,o,Wfe(a-1,o,e,t,u)),i.sheets.push(o),dr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,Yn.WS[0])}if(d){var p=d["!comments"],y=!1,x="";p&&p.length>0&&(x="xl/comments"+a+"."+n,An(s,x,qfe(p,x)),i.comments.push(x),dr(u,-1,"../comments"+a+"."+n,Yn.CMNT),y=!0),d["!legacy"]&&y&&An(s,"xl/drawings/vmlDrawing"+a+".vml",YI(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&An(s,TI(o),Jp(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,An(s,o,Hfe(e.Strings,o,e)),i.strs.push(o),dr(e.wbrels,-1,"sharedStrings."+n,Yn.SST)),o="xl/workbook."+n,An(s,o,$fe(t,o)),i.workbooks.push(o),dr(e.rels,1,o,Yn.WB),o="xl/theme/theme1.xml",An(s,o,KI(t.Themes,e)),i.themes.push(o),dr(e.wbrels,-1,"theme/theme1.xml",Yn.THEME),o="xl/styles."+n,An(s,o,Vfe(t,o,e)),i.styles.push(o),dr(e.wbrels,-1,"styles."+n,Yn.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",An(s,o,t.vbaraw),i.vba.push(o),dr(e.wbrels,-1,"vbaProject.bin",Yn.VBA)),o="xl/metadata."+n,An(s,o,Gfe(o)),i.metadata.push(o),dr(e.wbrels,-1,"metadata."+n,Yn.XLMETA),An(s,"[Content_Types].xml",AI(i,e)),An(s,"_rels/.rels",Jp(e.rels)),An(s,"xl/_rels/workbook."+n+".rels",Jp(e.wbrels)),delete e.revssf,delete e.ssf,s}function Uhe(t,e){Hp=1024,t&&!t.SSF&&(t.SSF=Po(Qr)),t&&t.SSF&&(x2(),y2(t.SSF),e.revssf=v2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,cg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=ZI.indexOf(e.bookType)>-1,i=EI();fk(e=e||{});var s=Y4(),o="",a=0;if(e.cellXfs=[],rf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",An(s,o,PI(t.Props,e)),i.coreprops.push(o),dr(e.rels,2,o,Yn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,An(s,o,OI(t.Props)),i.extprops.push(o),dr(e.rels,3,o,Yn.EXT_PROPS),t.Custprops!==t.Props&&ds(t.Custprops||{}).length>0&&(o="docProps/custom.xml",An(s,o,LI(t.Custprops)),i.custprops.push(o),dr(e.rels,4,o,Yn.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var d={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,An(s,o,aR(a-1,e,t,d)),i.sheets.push(o),dr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,Yn.WS[0])}if(h){var y=h["!comments"],x=!1,v="";if(y&&y.length>0){var b=!1;y.forEach(function(S){S[1].forEach(function(k){k.T==!0&&(b=!0)})}),b&&(v="xl/threadedComments/threadedComment"+a+"."+n,An(s,v,xce(y,u,e)),i.threadedcomments.push(v),dr(d,-1,"../threadedComments/threadedComment"+a+"."+n,Yn.TCMNT)),v="xl/comments"+a+"."+n,An(s,v,JI(y)),i.comments.push(v),dr(d,-1,"../comments"+a+"."+n,Yn.CMNT),x=!0}h["!legacy"]&&x&&An(s,"xl/drawings/vmlDrawing"+a+".vml",YI(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&An(s,TI(o),Jp(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,An(s,o,$I(e.Strings,e)),i.strs.push(o),dr(e.wbrels,-1,"sharedStrings."+n,Yn.SST)),o="xl/workbook."+n,An(s,o,uR(t)),i.workbooks.push(o),dr(e.rels,1,o,Yn.WB),o="xl/theme/theme1.xml",An(s,o,KI(t.Themes,e)),i.themes.push(o),dr(e.wbrels,-1,"theme/theme1.xml",Yn.THEME),o="xl/styles."+n,An(s,o,qI(t,e)),i.styles.push(o),dr(e.wbrels,-1,"styles."+n,Yn.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",An(s,o,t.vbaraw),i.vba.push(o),dr(e.wbrels,-1,"vbaProject.bin",Yn.VBA)),o="xl/metadata."+n,An(s,o,XI()),i.metadata.push(o),dr(e.wbrels,-1,"metadata."+n,Yn.XLMETA),u.length>1&&(o="xl/persons/person.xml",An(s,o,vce(u)),i.people.push(o),dr(e.wbrels,-1,"persons/person.xml",Yn.PEOPLE)),An(s,"[Content_Types].xml",AI(i,e)),An(s,"_rels/.rels",Jp(e.rels)),An(s,"xl/_rels/workbook."+n+".rels",Jp(e.wbrels)),delete e.revssf,delete e.ssf,s}function $he(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=hu(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function yR(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return w1(e.file,mr.write(t,{type:tr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return mr.write(t,e)}function Whe(t,e){var n=Po(e||{}),r=zhe(t,n);return Vhe(r,n)}function Vhe(t,e){var n={},r=tr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?mr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(g2(i))}return e.password&&typeof encrypt_agile<"u"?yR(encrypt_agile(i,e.password),e):e.type==="file"?w1(e.file,i):e.type=="string"?sg(i):i}function Hhe(t,e){var n=e||{},r=ahe(t,n);return yR(r,n)}function Jl(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return Gg(Xg(r));case"binary":return Xg(r);case"string":return t;case"file":return w1(e.file,r,"utf8");case"buffer":return tr?gu(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Jl(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function qhe(t,e){switch(e.type){case"base64":return Gg(t);case"binary":return t;case"string":return t;case"file":return w1(e.file,t,"binary");case"buffer":return tr?gu(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Uy(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?Gg(n):e.type=="string"?sg(n):n;case"file":return w1(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function xR(t,e){woe(),Pfe(t);var n=Po(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=xR(t,n);return n.type="array",g2(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Jl(she(t,n),n);case"slk":case"sylk":return Jl(Ale.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return Jl(hR(t.Sheets[t.SheetNames[i]],n),n);case"txt":return qhe(vR(t.Sheets[t.SheetNames[i]],n),n);case"csv":return Jl(hk(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return Jl(Tle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return Uy(Ele.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return Jl(jle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return Jl(Rle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return Jl(UI.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return Jl(gR(t,n),n);case"wk1":return Uy(lj.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return Uy(lj.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Uy(fR(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),Hhe(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Whe(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Ghe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Khe(t,e,n){var r={};return r.type="file",r.file=e,Ghe(r),xR(t,r)}function Xhe(t,e,n,r,i,s,o,a){var l=us(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),d=!0,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch{h.__rowNum__=n}else h.__rowNum__=n;if(!o||t[n])for(var p=e.s.c;p<=e.e.c;++p){var y=o?t[n][p]:t[r[p]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;s[p]!=null&&(h[s[p]]=c);continue}var x=y.v;switch(y.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(s[p]!=null){if(x==null)if(y.t=="e"&&x===null)h[s[p]]=null;else if(c!==void 0)h[s[p]]=c;else if(u&&x===null)h[s[p]]=null;else continue;else h[s[p]]=u&&(y.t!=="n"||y.t==="n"&&a.rawNumbers!==!1)?x:pu(y,x,a);x!=null&&(d=!1)}}return{row:h,isempty:d}}function _v(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=Lr(u);break;case"number":l=Lr(t["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var d=us(l.s.r),h=[],p=[],y=0,x=0,v=Array.isArray(t),b=l.s.r,S=0,k={};v&&!t[b]&&(t[b]=[]);var T=c.skipHidden&&t["!cols"]||[],j=c.skipHidden&&t["!rows"]||[];for(S=l.s.c;S<=l.e.c;++S)if(!(T[S]||{}).hidden)switch(h[S]=Is(S),n=v?t[b][S]:t[h[S]+d],r){case 1:s[S]=S-l.s.c;break;case 2:s[S]=h[S];break;case 3:s[S]=c.header[S-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=pu(n,null,c),x=k[o]||0,!x)k[o]=1;else{do a=o+"_"+x++;while(k[a]);k[o]=x,k[a]=1}s[S]=a}for(b=l.s.r+i;b<=l.e.r;++b)if(!(j[b]||{}).hidden){var P=Xhe(t,l,b,h,r,s,v,c);(P.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(p[y++]=P.row)}return p.length=y,p}var gj=/"/g;function Yhe(t,e,n,r,i,s,o,a){for(var l=!0,c=[],u="",d=us(n),h=e.s.c;h<=e.e.c;++h)if(r[h]){var p=a.dense?(t[n]||[])[h]:t[r[h]+d];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(a.rawNumbers&&p.t=="n"?p.v:pu(p,null,a));for(var y=0,x=0;y!==u.length;++y)if((x=u.charCodeAt(y))===i||x===s||x===34||a.forceQuotes){u='"'+u.replace(gj,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(gj,'""')+'"')):u="";c.push(u)}return a.blankrows===!1&&l?null:c.join(o)}function hk(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=Lr(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",d=[];r.dense=Array.isArray(t);for(var h=r.skipHidden&&t["!cols"]||[],p=r.skipHidden&&t["!rows"]||[],y=i.s.c;y<=i.e.c;++y)(h[y]||{}).hidden||(d[y]=Is(y));for(var x=0,v=i.s.r;v<=i.e.r;++v)(p[v]||{}).hidden||(u=Yhe(t,i,v,d,o,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&n.push((x++?a:"")+u)));return delete r.dense,n.join("")}function vR(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=hk(t,e);return n}function Jhe(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=Lr(t["!ref"]),s="",o=[],a,l=[],c=Array.isArray(t);for(a=i.s.c;a<=i.e.c;++a)o[a]=Is(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=us(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,n=c?(t[u]||[])[a]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function wR(t,e,n){var r=n||{},i=+!r.skipHeader,s=t||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?zi(r.origin):r.origin;o=l.r,a=l.c}var c,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var d=Lr(s["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(o=d.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var h=r.header||[],p=0;e.forEach(function(x,v){ds(x).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var S=x[b],k="z",T="",j=pr({c:a+p,r:o+v+i});c=Zg(s,j),S&&typeof S=="object"&&!(S instanceof Date)?s[j]=S:(typeof S=="number"?k="n":typeof S=="boolean"?k="b":typeof S=="string"?k="s":S instanceof Date?(k="d",r.cellDates||(k="n",S=jo(S)),T=r.dateNF||Qr[14]):S===null&&r.nullError&&(k="e",S=0),c?(c.t=k,c.v=S,delete c.w,delete c.R,T&&(c.z=T)):s[j]=c={t:k,v:S},T&&(c.z=T))})}),u.e.c=Math.max(u.e.c,a+h.length-1);var y=us(o);if(i)for(p=0;p<h.length;++p)s[Is(p+a)+y]={t:"s",v:h[p]};return s["!ref"]=xi(u),s}function Zhe(t,e){return wR(null,t,e)}function Zg(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=zi(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Zg(t,pr(e)):Zg(t,pr({r:e,c:n||0}))}function Qhe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function epe(){return{SheetNames:[],Sheets:{}}}function tpe(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(cR(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function npe(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=Qhe(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function rpe(t,e){return t.z=e,t}function bR(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function ipe(t,e,n){return bR(t,"#"+e,n)}function spe(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function ope(t,e,n,r){for(var i=typeof e!="string"?e:Lr(e),s=typeof e=="string"?e:xi(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=Zg(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return t}var Jb={encode_col:Is,encode_row:us,encode_cell:pr,encode_range:xi,decode_col:nk,decode_row:tk,split_cell:wae,decode_cell:zi,decode_range:ca,format_cell:pu,sheet_add_aoa:bI,sheet_add_json:wR,sheet_add_dom:pR,aoa_to_sheet:O0,json_to_sheet:Zhe,table_to_sheet:mR,table_to_book:The,sheet_to_csv:hk,sheet_to_txt:vR,sheet_to_json:_v,sheet_to_html:hR,sheet_to_formulae:Jhe,sheet_to_row_object_array:_v,sheet_get_cell:Zg,book_new:epe,book_append_sheet:tpe,book_set_sheet_visibility:npe,cell_set_number_format:rpe,cell_set_hyperlink:bR,cell_set_internal_link:ipe,cell_add_comment:spe,sheet_set_array_formula:ope,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const ape=()=>{const t=kl(),[e,n]=Y.useState([]),[r,i]=Y.useState(!0),[s,o]=Y.useState(null),[a,l]=Y.useState("table"),[c,u]=Y.useState({search:"",payoffStatus:"all",sortBy:"name",sortOrder:"asc"}),[d,h]=Y.useState(!1);Y.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const{data:S,error:k}=await lt.from("equipment").select(`
          id,
          name,
          purchase_price,
          purchase_date,
          price,
          promotional_price,
          deposit,
          image,
          categories,
          quantity,
          description
        `);if(k)throw k;const T=await Promise.all(S.map(async j=>{const{data:P,error:C}=await lt.from("reservations").select("total_price").eq("equipment_id",j.id).eq("status","completed");if(C)throw C;const N=(P==null?void 0:P.reduce((z,L)=>z+(L.total_price||0),0))||0,O=j.purchase_price?N/j.purchase_price*100:0;return{...j,total_revenue:N,payoff_percentage:O}}));n(T),o(null)}catch(S){console.error("Error loading stats:",S),o("Nie udało się załadować statystyk")}finally{i(!1)}},y=S=>S>=100?"bg-green-500":S>=75?"bg-emerald-400":S>=50?"bg-yellow-400":S>=25?"bg-orange-400":"bg-red-400",x=Y.useMemo(()=>e.filter(S=>{const k=S.name.toLowerCase().includes(c.search.toLowerCase()),T=c.payoffStatus==="all"?!0:c.payoffStatus==="paid"?S.payoff_percentage>=100:S.payoff_percentage<100;return k&&T}).sort((S,k)=>{const T=C=>{switch(c.sortBy){case"name":return C.name;case"purchase_price":return C.purchase_price;case"total_revenue":return C.total_revenue;case"payoff_percentage":return C.payoff_percentage;default:return C.name}},j=T(S),P=T(k);return typeof j=="string"?c.sortOrder==="asc"?j.localeCompare(P):P.localeCompare(j):c.sortOrder==="asc"?j-P:P-j}),[e,c]),v=()=>{const S=x.map(P=>({"Nazwa sprzętu":P.name,"Cena zakupu (zł)":P.purchase_price.toFixed(2),"Przychód łączny (zł)":P.total_revenue.toFixed(2),"Postęp spłaty (%)":P.payoff_percentage.toFixed(1),Status:P.payoff_percentage>=100?"Spłacono":"W trakcie","Data zakupu":new Date(P.purchase_date).toLocaleDateString("pl-PL")})),k=Jb.json_to_sheet(S),T=Jb.book_new();Jb.book_append_sheet(T,k,"Statystyki sprzętu");const j=[{wch:30},{wch:15},{wch:15},{wch:15},{wch:12},{wch:12}];k["!cols"]=j,Khe(T,`Statystyki_sprzętu_${new Date().toISOString().split("T")[0]}.xlsx`)},b=S=>{t(`/admin/panel/equipment-stats/${S}`)};return r?g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"})}):s?g.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:g.jsx("p",{children:s})}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Statystyki spłaty sprzętu"}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[g.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-md transition-colors ${a==="table"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Widok tabeli",children:g.jsx(yz,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-md transition-colors ${a==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Widok kafelków",children:g.jsx(hz,{className:"w-5 h-5"})})]}),g.jsx("button",{onClick:()=>h(!d),className:`p-2 rounded-lg transition-colors ${d?"bg-gray-200":"bg-gray-100 hover:bg-gray-200"}`,title:"Filtry",children:g.jsx(Sz,{className:"w-5 h-5"})}),g.jsxs("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[g.jsx(Nh,{className:"w-5 h-5"}),"Eksportuj do Excel"]})]})]}),d&&g.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wyszukaj"}),g.jsxs("div",{className:"relative",children:[g.jsx(Y_,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),g.jsx("input",{type:"text",value:c.search,onChange:S=>u(k=>({...k,search:S.target.value})),placeholder:"Nazwa sprzętu...",className:"pl-10 w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status spłaty"}),g.jsxs("select",{value:c.payoffStatus,onChange:S=>u(k=>({...k,payoffStatus:S.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange",children:[g.jsx("option",{value:"all",children:"Wszystkie"}),g.jsx("option",{value:"paid",children:"Spłacone"}),g.jsx("option",{value:"pending",children:"W trakcie spłaty"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sortuj według"}),g.jsxs("select",{value:c.sortBy,onChange:S=>u(k=>({...k,sortBy:S.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange",children:[g.jsx("option",{value:"name",children:"Nazwa"}),g.jsx("option",{value:"purchase_price",children:"Cena zakupu"}),g.jsx("option",{value:"total_revenue",children:"Przychód"}),g.jsx("option",{value:"payoff_percentage",children:"Postęp spłaty"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolejność"}),g.jsxs("select",{value:c.sortOrder,onChange:S=>u(k=>({...k,sortOrder:S.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange",children:[g.jsx("option",{value:"asc",children:"Rosnąco"}),g.jsx("option",{value:"desc",children:"Malejąco"})]})]})]}),a==="table"?g.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nazwa sprzętu"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cena zakupu"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Przychód łączny"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Postęp spłaty"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(S=>g.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>b(S.id),children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"text-sm text-gray-900",children:[S.purchase_price.toFixed(2)," zł"]})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"text-sm text-gray-900",children:[S.total_revenue.toFixed(2)," zł"]})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:g.jsx("div",{className:`h-2.5 rounded-full ${y(S.payoff_percentage)}`,style:{width:`${Math.min(S.payoff_percentage,100)}%`}})}),g.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[S.payoff_percentage.toFixed(1),"%"]})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S.payoff_percentage>=100?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:S.payoff_percentage>=100?"Spłacono":"W trakcie"})})]},S.id))})]})}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(S=>g.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>b(S.id),children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:S.name}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Cena zakupu"}),g.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[S.purchase_price.toFixed(2)," zł"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Przychód łączny"}),g.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[S.total_revenue.toFixed(2)," zł"]})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Postęp spłaty"}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[S.payoff_percentage.toFixed(1),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:g.jsx("div",{className:`h-2.5 rounded-full ${y(S.payoff_percentage)}`,style:{width:`${Math.min(S.payoff_percentage,100)}%`}})})]}),g.jsx("div",{className:"pt-2",children:g.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${S.payoff_percentage>=100?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:S.payoff_percentage>=100?"Spłacono":"W trakcie"})})]})]},S.id))})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function N1(t){return t+.5|0}const Ed=(t,e,n)=>Math.max(Math.min(t,n),e);function Lm(t){return Ed(N1(t*2.55),0,255)}function Fd(t){return Ed(N1(t*255),0,255)}function Qc(t){return Ed(N1(t/2.55)/100,0,1)}function yj(t){return Ed(N1(t*100),0,100)}const Pa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},P_=[..."0123456789ABCDEF"],lpe=t=>P_[t&15],cpe=t=>P_[(t&240)>>4]+P_[t&15],$y=t=>(t&240)>>4===(t&15),upe=t=>$y(t.r)&&$y(t.g)&&$y(t.b)&&$y(t.a);function dpe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Pa[t[1]]*17,g:255&Pa[t[2]]*17,b:255&Pa[t[3]]*17,a:e===5?Pa[t[4]]*17:255}:(e===7||e===9)&&(n={r:Pa[t[1]]<<4|Pa[t[2]],g:Pa[t[3]]<<4|Pa[t[4]],b:Pa[t[5]]<<4|Pa[t[6]],a:e===9?Pa[t[7]]<<4|Pa[t[8]]:255})),n}const fpe=(t,e)=>t<255?e(t):"";function hpe(t){var e=upe(t)?lpe:cpe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+fpe(t.a,e):void 0}const ppe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _R(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function mpe(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function gpe(t,e,n){const r=_R(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function ype(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function pk(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=ype(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function mk(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Fd)}function gk(t,e,n){return mk(_R,t,e,n)}function xpe(t,e,n){return mk(gpe,t,e,n)}function vpe(t,e,n){return mk(mpe,t,e,n)}function SR(t){return(t%360+360)%360}function wpe(t){const e=ppe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Lm(+e[5]):Fd(+e[5]));const i=SR(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=xpe(i,s,o):e[1]==="hsv"?r=vpe(i,s,o):r=gk(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function bpe(t,e){var n=pk(t);n[0]=SR(n[0]+e),n=gk(n),t.r=n[0],t.g=n[1],t.b=n[2]}function _pe(t){if(!t)return;const e=pk(t),n=e[0],r=yj(e[1]),i=yj(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Qc(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const xj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Spe(){const t={},e=Object.keys(vj),n=Object.keys(xj);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,xj[s]);s=parseInt(vj[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Wy;function kpe(t){Wy||(Wy=Spe(),Wy.transparent=[0,0,0,0]);const e=Wy[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Npe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Cpe(t){const e=Npe.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Lm(o):Ed(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Lm(r):Ed(r,0,255)),i=255&(e[4]?Lm(i):Ed(i,0,255)),s=255&(e[6]?Lm(s):Ed(s,0,255)),{r,g:i,b:s,a:n}}}function Epe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Qc(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Zb=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,jp=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ape(t,e,n){const r=jp(Qc(t.r)),i=jp(Qc(t.g)),s=jp(Qc(t.b));return{r:Fd(Zb(r+n*(jp(Qc(e.r))-r))),g:Fd(Zb(i+n*(jp(Qc(e.g))-i))),b:Fd(Zb(s+n*(jp(Qc(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Vy(t,e,n){if(t){let r=pk(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=gk(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function kR(t,e){return t&&Object.assign(e||{},t)}function wj(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Fd(t[3]))):(e=kR(t,{r:0,g:0,b:0,a:1}),e.a=Fd(e.a)),e}function Tpe(t){return t.charAt(0)==="r"?Cpe(t):wpe(t)}class Qg{constructor(e){if(e instanceof Qg)return e;const n=typeof e;let r;n==="object"?r=wj(e):n==="string"&&(r=dpe(e)||kpe(e)||Tpe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=kR(this._rgb);return e&&(e.a=Qc(e.a)),e}set rgb(e){this._rgb=wj(e)}rgbString(){return this._valid?Epe(this._rgb):void 0}hexString(){return this._valid?hpe(this._rgb):void 0}hslString(){return this._valid?_pe(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Ape(this._rgb,e._rgb,n)),this}clone(){return new Qg(this.rgb)}alpha(e){return this._rgb.a=Fd(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=N1(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vy(this._rgb,2,e),this}darken(e){return Vy(this._rgb,2,-e),this}saturate(e){return Vy(this._rgb,1,e),this}desaturate(e){return Vy(this._rgb,1,-e),this}rotate(e){return bpe(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gc(){}const jpe=(()=>{let t=0;return()=>t++})();function _r(t){return t==null}function Fi(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function nr(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Wa(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Gl(t,e){return Wa(t)?t:e}function $n(t,e){return typeof t>"u"?e:t}const Ppe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function fr(t,e,n,r){let i,s,o;if(Fi(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(nr(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Sv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function kv(t){if(Fi(t))return t.map(kv);if(nr(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=kv(t[n[i]]);return e}return t}function NR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Dpe(t,e,n,r){if(!NR(t))return;const i=e[t],s=n[t];nr(i)&&nr(s)?e1(i,s,r):e[t]=kv(s)}function e1(t,e,n){const r=Fi(e)?e:[e],i=r.length;if(!nr(t))return t;n=n||{};const s=n.merger||Dpe;let o;for(let a=0;a<i;++a){if(o=r[a],!nr(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function ug(t,e){return e1(t,e,{merger:Ope})}function Ope(t,e,n){if(!NR(t))return;const r=e[t],i=n[t];nr(r)&&nr(i)?ug(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=kv(i))}const bj={"":t=>t,x:t=>t.x,y:t=>t.y};function Lpe(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Mpe(t){const e=Lpe(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Nv(t,e){return(bj[e]||(bj[e]=Mpe(e)))(t)}function yk(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Cv=t=>typeof t<"u",Jd=t=>typeof t=="function",_j=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Ipe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Vi=Math.PI,cc=2*Vi,Rpe=cc+Vi,Ev=Number.POSITIVE_INFINITY,Fpe=Vi/180,wl=Vi/2,Rf=Vi/4,Sj=Vi*2/3,CR=Math.log10,g0=Math.sign;function dg(t,e,n){return Math.abs(t-e)<n}function kj(t){const e=Math.round(t);t=dg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(CR(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function zpe(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Bpe(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function t1(t){return!Bpe(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Upe(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function $pe(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function rh(t){return t*(Vi/180)}function Wpe(t){return t*(180/Vi)}function Nj(t){if(!Wa(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Vpe(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Vi&&(s+=cc),{angle:s,distance:i}}function D_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hpe(t,e){return(t-e+Rpe)%cc-Vi}function dd(t){return(t%cc+cc)%cc}function ER(t,e,n,r){const i=dd(t),s=dd(e),o=dd(n),a=dd(s-i),l=dd(o-i),c=dd(i-s),u=dd(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function za(t,e,n){return Math.max(e,Math.min(n,t))}function qpe(t){return za(t,-32768,32767)}function Mm(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function xk(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ih=(t,e,n,r)=>xk(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Gpe=(t,e,n)=>xk(t,n,r=>t[r][e]>=n);function Kpe(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const AR=["push","pop","shift","splice","unshift"];function Xpe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),AR.forEach(n=>{const r="_onData"+yk(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Cj(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(AR.forEach(s=>{delete t[s]}),delete t._chartjs)}function Ype(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const TR=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function jR(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,TR.call(window,()=>{r=!1,t.apply(e,n)}))}}function Jpe(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const vk=t=>t==="start"?"left":t==="end"?"right":"center",Ts=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Zpe=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function Qpe(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(i=Math.min(ih(l,u,d).lo,n?r:ih(e,u,o.getPixelForValue(d)).lo),c){const x=l.slice(0,i+1).reverse().findIndex(v=>!_r(v[a.axis]));i-=Math.max(0,x)}i=za(i,0,r-1)}if(y){let x=Math.max(ih(l,o.axis,h,!0).hi+1,n?0:ih(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const v=l.slice(x-1).findIndex(b=>!_r(b[a.axis]));x+=Math.max(0,v)}s=za(x,i,r)-i}else s=r-i}return{start:i,count:s}}function e0e(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Hy=t=>t===0||t===1,Ej=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*cc/n)),Aj=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*cc/n)+1,fg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*wl)+1,easeOutSine:t=>Math.sin(t*wl),easeInOutSine:t=>-.5*(Math.cos(Vi*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Hy(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Hy(t)?t:Ej(t,.075,.3),easeOutElastic:t=>Hy(t)?t:Aj(t,.075,.3),easeInOutElastic(t){return Hy(t)?t:t<.5?.5*Ej(t*2,.1125,.45):.5+.5*Aj(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-fg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?fg.easeInBounce(t*2)*.5:fg.easeOutBounce(t*2-1)*.5+.5};function wk(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tj(t){return wk(t)?t:new Qg(t)}function Qb(t){return wk(t)?t:new Qg(t).saturate(.5).darken(.1).hexString()}const t0e=["x","y","borderWidth","radius","tension"],n0e=["color","borderColor","backgroundColor"];function r0e(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:n0e},numbers:{type:"number",properties:t0e}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function i0e(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const jj=new Map;function s0e(t,e){e=e||{};const n=t+JSON.stringify(e);let r=jj.get(n);return r||(r=new Intl.NumberFormat(t,e),jj.set(n,r)),r}function PR(t,e,n){return s0e(e,n).format(t)}const o0e={values(t){return Fi(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=a0e(t,n)}const o=CR(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),PR(t,r,l)}};function a0e(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var DR={formatters:o0e};function l0e(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:DR.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const kh=Object.create(null),O_=Object.create(null);function hg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function e5(t,e,n){return typeof e=="string"?e1(hg(t,e),n):e1(hg(t,""),e)}class c0e{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Qb(i.backgroundColor),this.hoverBorderColor=(r,i)=>Qb(i.borderColor),this.hoverColor=(r,i)=>Qb(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return e5(this,e,n)}get(e){return hg(this,e)}describe(e,n){return e5(O_,e,n)}override(e,n){return e5(kh,e,n)}route(e,n,r,i){const s=hg(this,e),o=hg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return nr(l)?Object.assign({},c,l):$n(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ui=new c0e({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[r0e,i0e,l0e]);function u0e(t){return!t||_r(t.size)||_r(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Pj(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ff(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Dj(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function L_(t,e,n,r){OR(t,e,n,r,null)}function OR(t,e,n,r,i){let s,o,a,l,c,u,d,h;const p=e.pointStyle,y=e.rotation,x=e.radius;let v=(y||0)*Fpe;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,x,0,0,cc):t.arc(n,r,x,0,cc),t.closePath();break;case"triangle":u=i?i/2:x,t.moveTo(n+Math.sin(v)*u,r-Math.cos(v)*x),v+=Sj,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*x),v+=Sj,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(v+Rf)*l,d=Math.cos(v+Rf)*(i?i/2-c:l),a=Math.sin(v+Rf)*l,h=Math.sin(v+Rf)*(i?i/2-c:l),t.arc(n-d,r-a,c,v-Vi,v-wl),t.arc(n+h,r-o,c,v-wl,v),t.arc(n+d,r+a,c,v,v+wl),t.arc(n-h,r+o,c,v+wl,v+Vi),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}v+=Rf;case"rectRot":d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":v+=Rf;case"cross":d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),v+=Rf,d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(v)*x,a=Math.sin(v)*x,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(i?i/2:x),r+Math.sin(v)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function n1(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function bk(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function _k(t){t.restore()}function d0e(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function f0e(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function h0e(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_r(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function p0e(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function m0e(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function r1(t,e,n,r,i,s={}){const o=Fi(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,h0e(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&m0e(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_r(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),p0e(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function M_(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Vi,Vi,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Vi,wl,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,wl,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-wl,!0),t.lineTo(n+o.topLeft,r)}const g0e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,y0e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function x0e(t,e){const n=(""+t).match(g0e);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const v0e=t=>+t||0;function LR(t,e){const n={},r=nr(e),i=r?Object.keys(e):e,s=nr(t)?r?o=>$n(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=v0e(s(o));return n}function w0e(t){return LR(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pg(t){return LR(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Va(t){const e=w0e(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ms(t,e){t=t||{},e=e||ui.font;let n=$n(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=$n(t.style,e.style);r&&!(""+r).match(y0e)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:$n(t.family,e.family),lineHeight:x0e($n(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:$n(t.weight,e.weight),string:""};return i.string=u0e(i),i}function qy(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function b0e(t,e,n){const{min:r,max:i}=t,s=Ppe(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ih(t,e){return Object.assign(Object.create(t),e)}function Sk(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=FR("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Sk([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return IR(a,l,()=>T0e(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Lj(a).includes(l)},ownKeys(a){return Lj(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function y0(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:MR(t,r),setContext:s=>y0(t,s,n,r),override:s=>y0(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return IR(s,o,()=>S0e(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function MR(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Jd(n)?n:()=>n,isIndexable:Jd(r)?r:()=>r}}const _0e=(t,e)=>t?t+yk(e):e,kk=(t,e)=>nr(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function IR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function S0e(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Jd(a)&&o.isScriptable(e)&&(a=k0e(e,a,t,n)),Fi(a)&&a.length&&(a=N0e(e,a,t,o.isIndexable)),kk(e,a)&&(a=y0(a,i,s&&s[e],o)),a}function k0e(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),kk(t,l)&&(l=Nk(i._scopes,i,t,l)),l}function N0e(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(nr(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=Nk(c,i,t,u);e.push(y0(d,s,o&&o[t],a))}}return e}function RR(t,e,n){return Jd(t)?t(e,n):t}const C0e=(t,e)=>t===!0?e:typeof t=="string"?Nv(e,t):void 0;function E0e(t,e,n,r,i){for(const s of e){const o=C0e(n,s);if(o){t.add(o);const a=RR(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Nk(t,e,n,r){const i=e._rootScopes,s=RR(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Oj(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Oj(a,o,s,l,r),l===null)?!1:Sk(Array.from(a),[""],i,s,()=>A0e(e,n,r))}function Oj(t,e,n,r,i){for(;n;)n=E0e(t,e,n,r,i);return n}function A0e(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Fi(i)&&nr(n)?n:i||{}}function T0e(t,e,n,r){let i;for(const s of e)if(i=FR(_0e(s,t),n),typeof i<"u")return kk(t,i)?Nk(n,r,t,i):i}function FR(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Lj(t){let e=t._keys;return e||(e=t._keys=j0e(t._scopes)),e}function j0e(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const P0e=Number.EPSILON||1e-14,x0=(t,e)=>e<t.length&&!t[e].skip&&t[e],zR=t=>t==="x"?"y":"x";function D0e(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=D_(s,i),l=D_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function O0e(t,e,n){const r=t.length;let i,s,o,a,l,c=x0(t,0);for(let u=0;u<r-1;++u)if(l=c,c=x0(t,u+1),!(!l||!c)){if(dg(e[u],0,P0e)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function L0e(t,e,n="x"){const r=zR(n),i=t.length;let s,o,a,l=x0(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=x0(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function M0e(t,e="x"){const n=zR(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=x0(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=x0(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?g0(i[o-1])!==g0(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}O0e(t,i,s),L0e(t,s,e)}function Gy(t,e,n){return Math.max(Math.min(t,n),e)}function I0e(t,e){let n,r,i,s,o,a=n1(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&n1(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Gy(i.cp1x,e.left,e.right),i.cp1y=Gy(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Gy(i.cp2x,e.left,e.right),i.cp2y=Gy(i.cp2y,e.top,e.bottom)))}function R0e(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")M0e(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=D0e(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&I0e(t,n)}function Ck(){return typeof window<"u"&&typeof document<"u"}function Ek(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Av(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const k2=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function F0e(t,e){return k2(t).getPropertyValue(e)}const z0e=["top","right","bottom","left"];function gh(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=z0e[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const B0e=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function U0e(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(B0e(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Hf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=k2(n),s=i.boxSizing==="border-box",o=gh(i,"padding"),a=gh(i,"border","width"),{x:l,y:c,box:u}=U0e(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-h)/y*n.height/r)}}function $0e(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Ek(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=k2(s),l=gh(a,"border","width"),c=gh(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Av(a.maxWidth,s,"clientWidth"),i=Av(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ev,maxHeight:i||Ev}}const Ky=t=>Math.round(t*10)/10;function W0e(t,e,n,r){const i=k2(t),s=gh(i,"margin"),o=Av(i.maxWidth,t,"clientWidth")||Ev,a=Av(i.maxHeight,t,"clientHeight")||Ev,l=$0e(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=gh(i,"border","width"),p=gh(i,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Ky(Math.min(c,o,l.maxWidth)),u=Ky(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ky(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ky(Math.floor(u*r))),{width:c,height:u}}function Mj(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const V0e=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ck()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ij(t,e){const n=F0e(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function qf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function H0e(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function q0e(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=qf(t,i,n),a=qf(i,s,n),l=qf(s,e,n),c=qf(o,a,n),u=qf(a,l,n);return qf(c,u,n)}const G0e=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},K0e=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function e0(t,e,n){return t?G0e(e,n):K0e()}function BR(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function UR(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function $R(t){return t==="angle"?{between:ER,compare:Hpe,normalize:dd}:{between:Mm,compare:(e,n)=>e-n,normalize:e=>e}}function Rj({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function X0e(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=$R(r),l=e.length;let{start:c,end:u,loop:d}=t,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(e[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function Y0e(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=$R(r),{start:u,end:d,loop:h,style:p}=X0e(t,e,n),y=[];let x=!1,v=null,b,S,k;const T=()=>l(i,k,b)&&a(i,k)!==0,j=()=>a(s,b)===0||l(s,k,b),P=()=>x||T(),C=()=>!x||j();for(let N=u,O=u;N<=d;++N)S=e[N%o],!S.skip&&(b=c(S[r]),b!==k&&(x=l(b,i,s),v===null&&P()&&(v=a(b,i)===0?N:O),v!==null&&C()&&(y.push(Rj({start:v,end:N,loop:h,count:o,style:p})),v=null),O=N,k=b));return v!==null&&y.push(Rj({start:v,end:d,loop:h,count:o,style:p})),y}function J0e(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=Y0e(r[i],t.points,e);s.length&&n.push(...s)}return n}function Z0e(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Q0e(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function eme(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=Z0e(n,i,s,r);if(r===!0)return Fj(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Fj(t,Q0e(n,o,l,c),n,e)}function Fj(t,e,n,r){return!r||!r.setContext||!n?e:tme(t,e,n,r)}function tme(t,e,n,r){const i=t._chart.getContext(),s=zj(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function p(y,x,v,b){const S=a?-1:1;if(y!==x){for(y+=l;n[y%l].skip;)y-=S;for(;n[x%l].skip;)x+=S;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:v,style:b}),u=b,d=x%l)}}for(const y of e){d=a?d:y.start;let x=n[d%l],v;for(h=d+1;h<=y.end;h++){const b=n[h%l];v=zj(r.setContext(Ih(i,{type:"segment",p0:x,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),nme(v,u)&&p(d,h-1,y.loop,u),x=b,u=v}d<h-1&&p(d,h-1,y.loop,u)}return c}function zj(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function nme(t,e){if(!e)return!1;const n=[],r=function(i,s){return wk(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class rme{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=TR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Kc=new rme;const Bj="transparent",ime={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Tj(t||Bj),i=r.valid&&Tj(e||Bj);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class sme{constructor(e,n,r,i){const s=n[r];i=qy([e.to,i,s,e.from]);const o=qy([e.from,s,i]);this._active=!0,this._fn=e.fn||ime[e.type||typeof o],this._easing=fg[e.easing]||fg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=qy([e.to,n,i,e.from]),this._from=qy([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class WR{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!nr(e))return;const n=Object.keys(ui.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!nr(s))return;const o={};for(const a of n)o[a]=s[a];(Fi(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=ame(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&ome(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new sme(h,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Kc.add(this._chart,r),!0}}function ome(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function ame(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Uj(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function lme(t,e,n){if(n===!1)return!1;const r=Uj(t,n),i=Uj(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function cme(t){let e,n,r,i;return nr(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function VR(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function $j(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Wa(c)&&(s||e===0||g0(e)===g0(c))&&(e+=c)}return!u&&!r.all?0:e}function ume(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function t5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function dme(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function fme(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function hme(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Wj(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Vj(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=dme(s,o,r),d=e.length;let h;for(let p=0;p<d;++p){const y=e[p],{[l]:x,[c]:v}=y,b=y._stacks||(y._stacks={});h=b[c]=hme(i,u,x),h[a]=v,h._top=Wj(h,o,!0,r.type),h._bottom=Wj(h,o,!1,r.type);const S=h._visualValues||(h._visualValues={});S[a]=v}}function n5(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function pme(t,e){return Ih(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function mme(t,e,n){return Ih(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function wm(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const r5=t=>t==="reset"||t==="none",Hj=(t,e)=>e?t:Object.assign({},t),gme=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:VR(n,!0),values:null};class mg{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=t5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&wm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,h,p,y)=>d==="x"?h:d==="r"?y:p,s=n.xAxisID=$n(r.xAxisID,n5(e,"x")),o=n.yAxisID=$n(r.yAxisID,n5(e,"y")),a=n.rAxisID=$n(r.rAxisID,n5(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Cj(this._data,this),e._stacked&&wm(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(nr(n)){const i=this._cachedMeta;this._data=ume(n,i)}else if(r!==n){if(r){Cj(r,this);const i=this._cachedMeta;wm(i),i._parsed=[]}n&&Object.isExtensible(n)&&Xpe(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=t5(n.vScale,n),n.stack!==r.stack&&(i=!0,wm(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Vj(this,n._parsed),n._stacked=t5(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{Fi(i[e])?h=this.parseArrayData(r,i,e,n):nr(i[e])?h=this.parseObjectData(r,i,e,n):h=this.parsePrimitiveData(r,i,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&Vj(this,h)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let h,p,y;for(h=0,p=i;h<p;++h)y=h+r,d[h]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,p;for(u=0,d=i;u<d;++u)h=u+r,p=n[h],c[u]={x:s.parse(Nv(p,a),h),y:o.parse(Nv(p,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:VR(i,!0),values:n._stacks[e.axis]._visualValues};return $j(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=$j(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=gme(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=fme(a);let h,p;function y(){p=i[h];const x=p[a.axis];return!Wa(p[e.axis])||u>x||d<x}for(h=0;h<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Wa(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=cme($n(this.options.clip,lme(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=mme(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=pme(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Cv(r);if(a)return Hj(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ui.elements[e]),y=()=>this.getContext(r,i,n),x=c.resolveNamedOptions(h,p,y,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(Hj(x,l))),x}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new WR(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||r5(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){r5(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!r5(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&wm(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Cn(mg,"defaults",{}),Cn(mg,"datasetElementType",null),Cn(mg,"dataElementType",null);class mx extends mg{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=Qpe(n,i,o);this._drawStart=a,this._drawCount=l,e0e(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),h=o.axis,p=a.axis,{spanGaps:y,segment:x}=this.options,v=t1(y)?y:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||i==="none",S=n+r,k=e.length;let T=n>0&&this.getParsed(n-1);for(let j=0;j<k;++j){const P=e[j],C=b?P:{};if(j<n||j>=S){C.skip=!0;continue}const N=this.getParsed(j),O=_r(N[p]),z=C[h]=o.getPixelForValue(N[h],j),L=C[p]=s||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[p],j);C.skip=isNaN(z)||isNaN(L)||O,C.stop=j>0&&Math.abs(N[h]-T[h])>v,x&&(C.parsed=N,C.raw=c.data[j]),d&&(C.options=u||this.resolveDataElementOptions(j,P.active?"active":i)),b||this.updateElement(P,j,C,i),T=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Cn(mx,"id","line"),Cn(mx,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Cn(mx,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function zf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ak{constructor(e){Cn(this,"options");this.options=e||{}}static override(e){Object.assign(Ak.prototype,e)}init(){}formats(){return zf()}parse(){return zf()}format(){return zf()}add(){return zf()}diff(){return zf()}startOf(){return zf()}endOf(){return zf()}}var yme={_date:Ak};function xme(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?Gpe:ih;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,n-d),p=c(s,e,n+d);return{lo:h.lo,hi:p.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=t,p=h.slice(0,u.lo+1).reverse().findIndex(x=>!_r(x[d.axis]));u.lo-=Math.max(0,p);const y=h.slice(u.hi).findIndex(x=>!_r(x[d.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function N2(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=xme(s[a],e,o,i);for(let p=d;p<=h;++p){const y=u[p];y.skip||r(y,c,p)}}}function vme(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function i5(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||N2(t,n,e,function(a,l,c){!i&&!n1(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function wme(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=Vpe(o,{x:e.x,y:e.y});ER(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return N2(t,n,e,s),i}function bme(t,e,n,r,i,s){let o=[];const a=vme(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!p)return;const v=a(e,y);v<l?(o=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:h})}return N2(t,n,e,c),o}function s5(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?wme(t,e,n,i):bme(t,e,n,r,i,s)}function qj(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return N2(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var _me={modes:{index(t,e,n,r){const i=Hf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?i5(t,i,s,r,o):s5(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Hf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?i5(t,i,s,r,o):s5(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Hf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return i5(t,i,s,r,o)},nearest(t,e,n,r){const i=Hf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return s5(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Hf(e,t);return qj(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Hf(e,t);return qj(t,i,"y",n.intersect,r)}}};const HR=["left","top","right","bottom"];function bm(t,e){return t.filter(n=>n.pos===e)}function Gj(t,e){return t.filter(n=>HR.indexOf(n.pos)===-1&&n.box.axis===e)}function _m(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Sme(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function kme(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!HR.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Nme(t,e){const n=kme(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function Cme(t){const e=Sme(t),n=_m(e.filter(c=>c.box.fullSize),!0),r=_m(bm(e,"left"),!0),i=_m(bm(e,"right")),s=_m(bm(e,"top"),!0),o=_m(bm(e,"bottom")),a=Gj(e,"x"),l=Gj(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:bm(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function Kj(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function qR(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Eme(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!nr(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&qR(o,s.getPadding());const a=Math.max(0,e.outerWidth-Kj(o,t,"left","right")),l=Math.max(0,e.outerHeight-Kj(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Ame(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Tme(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Im(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Tme(a.horizontal,e));const{same:d,other:h}=Eme(e,n,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Im(i,e,n,r)||u}function Xy(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Xj(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;Cv(c.start)&&(o=c.start),l.fullSize?Xy(l,i.left,o,n.outerWidth-i.right-i.left,h):Xy(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;Cv(c.start)&&(s=c.start),l.fullSize?Xy(l,s,i.top,h,n.outerHeight-i.bottom-i.top):Xy(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Ba={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Va(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=Cme(t.boxes),l=a.vertical,c=a.horizontal;fr(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);qR(h,Va(r));const p=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),y=Nme(l.concat(c),d);Im(a.fullSize,p,d,y),Im(l,p,d,y),Im(c,p,d,y)&&Im(l,p,d,y),Ame(p),Xj(a.leftAndTop,p,d,y),p.x+=p.w,p.y+=p.h,Xj(a.rightAndBottom,p,d,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},fr(a.chartArea,x=>{const v=x.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class GR{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class jme extends GR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gx="$chartjs",Pme={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Yj=t=>t===null||t==="";function Dme(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[gx]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Yj(i)){const s=Ij(t,"width");s!==void 0&&(t.width=s)}if(Yj(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Ij(t,"height");s!==void 0&&(t.height=s)}return t}const KR=V0e?{passive:!0}:!1;function Ome(t,e,n){t&&t.addEventListener(e,n,KR)}function Lme(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,KR)}function Mme(t,e){const n=Pme[t.type]||t.type,{x:r,y:i}=Hf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Tv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Ime(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Tv(a.addedNodes,r),o=o&&!Tv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Rme(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Tv(a.removedNodes,r),o=o&&!Tv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const i1=new Map;let Jj=0;function XR(){const t=window.devicePixelRatio;t!==Jj&&(Jj=t,i1.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Fme(t,e){i1.size||window.addEventListener("resize",XR),i1.set(t,e)}function zme(t){i1.delete(t),i1.size||window.removeEventListener("resize",XR)}function Bme(t,e,n){const r=t.canvas,i=r&&Ek(r);if(!i)return;const s=jR((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),Fme(t,s),o}function o5(t,e,n){n&&n.disconnect(),e==="resize"&&zme(t)}function Ume(t,e,n){const r=t.canvas,i=jR(s=>{t.ctx!==null&&n(Mme(s,t))},t);return Ome(r,e,i),i}class $me extends GR{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Dme(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[gx])return!1;const r=n[gx].initial;["height","width"].forEach(s=>{const o=r[s];_r(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[gx],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:Ime,detach:Rme,resize:Bme}[n]||Ume;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:o5,detach:o5,resize:o5}[n]||Lme)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return W0e(e,n,r,i)}isAttached(e){const n=e&&Ek(e);return!!(n&&n.isConnected)}}function Wme(t){return!Ck()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?jme:$me}var nx;let Rh=(nx=class{constructor(){Cn(this,"x");Cn(this,"y");Cn(this,"active",!1);Cn(this,"options");Cn(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return t1(this.x)&&t1(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Cn(nx,"defaults",{}),Cn(nx,"defaultRoutes"),nx);function Vme(t,e){const n=t.options.ticks,r=Hme(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Gme(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return Kme(e,c,s,o/i),c;const u=qme(s,e,i);if(o>0){let d,h;const p=o>1?Math.round((l-a)/(o-1)):null;for(Yy(e,c,u,_r(p)?0:a-p,a),d=0,h=o-1;d<h;d++)Yy(e,c,u,s[d],s[d+1]);return Yy(e,c,u,l,_r(p)?e.length:l+p),c}return Yy(e,c,u),c}function Hme(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function qme(t,e,n){const r=Xme(t),i=e.length/n;if(!r)return Math.max(i,1);const s=zpe(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Gme(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Kme(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Yy(t,e,n,r,i){const s=$n(r,0),o=Math.min($n(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function Xme(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Yme=t=>t==="left"?"right":t==="right"?"left":t,Zj=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Qj=(t,e)=>Math.min(e||t,t);function eP(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function Jme(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function Zme(t,e){fr(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Sm(t){return t.drawTicks?t.tickLength:0}function tP(t,e){if(!t.display)return 0;const n=Ms(t.font,e),r=Va(t.padding);return(Fi(t.text)?t.text.length:1)*n.lineHeight+r.height}function Qme(t,e){return Ih(t,{scale:e,type:"scale"})}function ege(t,e,n){return Ih(t,{tick:n,index:e,type:"tick"})}function tge(t,e,n){let r=vk(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Yme(r)),r}function nge(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,p,y;const x=o-i,v=a-s;if(t.isHorizontal()){if(p=Ts(r,s,a),nr(n)){const b=Object.keys(n)[0],S=n[b];y=u[b].getPixelForValue(S)+x-e}else n==="center"?y=(c.bottom+c.top)/2+x-e:y=Zj(t,n,e);h=a-s}else{if(nr(n)){const b=Object.keys(n)[0],S=n[b];p=u[b].getPixelForValue(S)-v+e}else n==="center"?p=(c.left+c.right)/2-v+e:p=Zj(t,n,e);y=Ts(r,o,i),d=n==="left"?-wl:wl}return{titleX:p,titleY:y,maxWidth:h,rotation:d}}class I0 extends Rh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Gl(e,Number.POSITIVE_INFINITY),n=Gl(n,Number.NEGATIVE_INFINITY),r=Gl(r,Number.POSITIVE_INFINITY),i=Gl(i,Number.NEGATIVE_INFINITY),{min:Gl(e,r),max:Gl(n,i),minDefined:Wa(e),maxDefined:Wa(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Gl(n,Gl(r,n)),max:Gl(r,Gl(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pr(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=b0e(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?eP(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Vme(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pr(this.options.afterUpdate,[this])}beforeSetDimensions(){Pr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Pr(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Pr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Qj(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=za(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Sm(e.grid)-n.padding-tP(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=Wpe(Math.min(Math.asin(za((u.highest.height+6)/a,-1,1)),Math.asin(za(l/c,-1,1))-Math.asin(za(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=tP(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Sm(s)+l):(e.height=this.maxHeight,e.width=Sm(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=r.padding*2,y=rh(this.labelRotation),x=Math.cos(y),v=Math.sin(y);if(a){const b=r.mirror?0:v*d.width+x*h.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{const b=r.mirror?0:x*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(c,u,v,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=i*e.width,p=r*n.height):(h=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_r(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=eP(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Qj(n,r));let c=0,u=0,d,h,p,y,x,v,b,S,k,T,j;for(d=0;d<n;d+=l){if(y=e[d].label,x=this._resolveTickFontOptions(d),i.font=v=x.string,b=s[v]=s[v]||{data:{},gc:[]},S=x.lineHeight,k=T=0,!_r(y)&&!Fi(y))k=Pj(i,b.data,b.gc,k,y),T=S;else if(Fi(y))for(h=0,p=y.length;h<p;++h)j=y[h],!_r(j)&&!Fi(j)&&(k=Pj(i,b.data,b.gc,k,j),T+=S);o.push(k),a.push(T),c=Math.max(k,c),u=Math.max(T,u)}Zme(s,n);const P=o.indexOf(c),C=a.indexOf(u),N=O=>({width:o[O]||0,height:a[O]||0});return{first:N(0),last:N(n-1),widest:N(P),highest:N(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return qpe(this._alignToPixels?Ff(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=ege(this.getContext(),e,r))}return this.$context||(this.$context=Qme(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=rh(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Sm(s),p=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,v=x/2,b=function(U){return Ff(r,U,x)};let S,k,T,j,P,C,N,O,z,L,M,K;if(o==="top")S=b(this.bottom),C=this.bottom-h,O=S-v,L=b(e.top)+v,K=e.bottom;else if(o==="bottom")S=b(this.top),L=e.top,K=b(e.bottom)-v,C=S+v,O=this.top+h;else if(o==="left")S=b(this.right),P=this.right-h,N=S-v,z=b(e.left)+v,M=e.right;else if(o==="right")S=b(this.left),z=e.left,M=b(e.right)-v,P=S+v,N=this.left+h;else if(n==="x"){if(o==="center")S=b((e.top+e.bottom)/2+.5);else if(nr(o)){const U=Object.keys(o)[0],F=o[U];S=b(this.chart.scales[U].getPixelForValue(F))}L=e.top,K=e.bottom,C=S+v,O=C+h}else if(n==="y"){if(o==="center")S=b((e.left+e.right)/2);else if(nr(o)){const U=Object.keys(o)[0],F=o[U];S=b(this.chart.scales[U].getPixelForValue(F))}P=S-v,N=P-h,z=e.left,M=e.right}const W=$n(i.ticks.maxTicksLimit,d),Z=Math.max(1,Math.ceil(d/W));for(k=0;k<d;k+=Z){const U=this.getContext(k),F=s.setContext(U),J=a.setContext(U),Q=F.lineWidth,ee=F.color,ne=J.dash||[],D=J.dashOffset,G=F.tickWidth,V=F.tickColor,H=F.tickBorderDash||[],te=F.tickBorderDashOffset;T=Jme(this,k,l),T!==void 0&&(j=Ff(r,T,Q),c?P=N=z=M=j:C=O=L=K=j,p.push({tx1:P,ty1:C,tx2:N,ty2:O,x1:z,y1:L,x2:M,y2:K,width:Q,color:ee,borderDash:ne,borderDashOffset:D,tickWidth:G,tickColor:V,tickBorderDash:H,tickBorderDashOffset:te}))}return this._ticksLength=d,this._borderValue=S,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=Sm(r.grid),p=h+u,y=d?-u:p,x=-rh(this.labelRotation),v=[];let b,S,k,T,j,P,C,N,O,z,L,M,K="middle";if(i==="top")P=this.bottom-y,C=this._getXAxisLabelAlignment();else if(i==="bottom")P=this.top+y,C=this._getXAxisLabelAlignment();else if(i==="left"){const Z=this._getYAxisLabelAlignment(h);C=Z.textAlign,j=Z.x}else if(i==="right"){const Z=this._getYAxisLabelAlignment(h);C=Z.textAlign,j=Z.x}else if(n==="x"){if(i==="center")P=(e.top+e.bottom)/2+p;else if(nr(i)){const Z=Object.keys(i)[0],U=i[Z];P=this.chart.scales[Z].getPixelForValue(U)+p}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")j=(e.left+e.right)/2-p;else if(nr(i)){const Z=Object.keys(i)[0],U=i[Z];j=this.chart.scales[Z].getPixelForValue(U)}C=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const W=this._getLabelSizes();for(b=0,S=a.length;b<S;++b){k=a[b],T=k.label;const Z=s.setContext(this.getContext(b));N=this.getPixelForTick(b)+s.labelOffset,O=this._resolveTickFontOptions(b),z=O.lineHeight,L=Fi(T)?T.length:1;const U=L/2,F=Z.color,J=Z.textStrokeColor,Q=Z.textStrokeWidth;let ee=C;o?(j=N,C==="inner"&&(b===S-1?ee=this.options.reverse?"left":"right":b===0?ee=this.options.reverse?"right":"left":ee="center"),i==="top"?c==="near"||x!==0?M=-L*z+z/2:c==="center"?M=-W.highest.height/2-U*z+z:M=-W.highest.height+z/2:c==="near"||x!==0?M=z/2:c==="center"?M=W.highest.height/2-U*z:M=W.highest.height-L*z,d&&(M*=-1),x!==0&&!Z.showLabelBackdrop&&(j+=z/2*Math.sin(x))):(P=N,M=(1-L)*z/2);let ne;if(Z.showLabelBackdrop){const D=Va(Z.backdropPadding),G=W.heights[b],V=W.widths[b];let H=M-D.top,te=0-D.left;switch(K){case"middle":H-=G/2;break;case"bottom":H-=G;break}switch(C){case"center":te-=V/2;break;case"right":te-=V;break;case"inner":b===S-1?te-=V:b>0&&(te-=V/2);break}ne={left:te,top:H,width:V+D.width,height:G+D.height,color:Z.backdropColor}}v.push({label:T,font:O,textOffset:M,options:{rotation:x,color:F,strokeColor:J,strokeWidth:Q,textAlign:ee,textBaseline:K,translation:[j,P],backdrop:ne}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-rh(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=Ff(e,this.left,o)-o/2,u=Ff(e,this.right,a)+a/2,d=h=l):(d=Ff(e,this.top,o)-o/2,h=Ff(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&bk(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;r1(r,c,0,u,l,a)}i&&_k(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Ms(r.font),o=Va(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||nr(n)?(l+=o.bottom,Fi(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=nge(this,l,n,a);r1(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:tge(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=$n(e.grid&&e.grid.z,-1),i=$n(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==I0.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ms(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Jy{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;sge(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,rge(e,o,r),this.override&&ui.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in ui[i]&&(delete ui[i][r],this.override&&delete kh[r])}}function rge(t,e,n){const r=e1(Object.create(null),[n?ui.get(n):{},ui.get(e),t.defaults]);ui.set(e,r),t.defaultRoutes&&ige(e,t.defaultRoutes),t.descriptors&&ui.describe(e,t.descriptors)}function ige(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ui.route(s,i,l,a)})}function sge(t){return"id"in t&&"defaults"in t}class oge{constructor(){this.controllers=new Jy(mg,"datasets",!0),this.elements=new Jy(Rh,"elements"),this.plugins=new Jy(Object,"plugins"),this.scales=new Jy(I0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):fr(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=yk(e);Pr(r["before"+i],[],r),n[e](r),Pr(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ec=new oge;class age{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Pr(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){_r(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=$n(r.options&&r.options.plugins,{}),s=lge(r);return i===!1&&!n?[]:uge(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function lge(t){const e={},n=[],r=Object.keys(ec.plugins.items);for(let s=0;s<r.length;s++)n.push(ec.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function cge(t,e){return!e&&t===!1?null:t===!0?{}:t}function uge(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=cge(r[l],i);c!==null&&s.push({plugin:a,options:dge(t.config,{plugin:a,local:n[l]},c,o)})}return s}function dge(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function I_(t,e){const n=ui.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function fge(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function hge(t,e){return t===e?"_index_":"_value_"}function nP(t){if(t==="x"||t==="y"||t==="r")return t}function pge(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function R_(t,...e){if(nP(t))return t;for(const n of e){const r=n.axis||pge(n.position)||t.length>1&&nP(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rP(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function mge(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return rP(t,"x",n[0])||rP(t,"y",n[0])}return{}}function gge(t,e){const n=kh[t.type]||{scales:{}},r=e.scales||{},i=I_(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!nr(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=R_(o,a,mge(o,t),ui.scales[a.type]),c=hge(l,i),u=n.scales||{};s[o]=ug(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||I_(a,e),u=(kh[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=fge(d,l),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),ug(s[p],[{axis:h},r[p],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];ug(a,[ui.scales[a.type],ui.scale])}),s}function YR(t){const e=t.options||(t.options={});e.plugins=$n(e.plugins,{}),e.scales=gge(t,e)}function JR(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function yge(t){return t=t||{},t.data=JR(t.data),YR(t),t}const iP=new Map,ZR=new Set;function Zy(t,e){let n=iP.get(t);return n||(n=e(),iP.set(t,n),ZR.add(n)),n}const km=(t,e,n)=>{const r=Nv(e,n);r!==void 0&&t.add(r)};class xge{constructor(e){this._config=yge(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=JR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),YR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Zy(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Zy(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Zy(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Zy(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>km(l,e,d))),u.forEach(d=>km(l,i,d)),u.forEach(d=>km(l,kh[s]||{},d)),u.forEach(d=>km(l,ui,d)),u.forEach(d=>km(l,O_,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ZR.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,kh[n]||{},ui.datasets[n]||{},{type:n},ui,O_]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=sP(this._resolverCache,e,i);let l=o;if(wge(o,n)){s.$shared=!1,r=Jd(r)?r():r;const c=this.createResolver(e,r,a);l=y0(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=sP(this._resolverCache,e,r);return nr(n)?y0(s,n,void 0,i):s}}function sP(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Sk(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const vge=t=>nr(t)&&Object.getOwnPropertyNames(t).some(e=>Jd(t[e]));function wge(t,e){const{isScriptable:n,isIndexable:r}=MR(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Jd(a)||vge(a))||o&&Fi(a))return!0}return!1}var bge="4.4.8";const _ge=["top","bottom","left","right","chartArea"];function oP(t,e){return t==="top"||t==="bottom"||_ge.indexOf(t)===-1&&e==="x"}function aP(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function lP(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Pr(n&&n.onComplete,[t],e)}function Sge(t){const e=t.chart,n=e.options.animation;Pr(n&&n.onProgress,[t],e)}function QR(t){return Ck()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const yx={},cP=t=>{const e=QR(t);return Object.values(yx).filter(n=>n.canvas===e).pop()};function kge(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Nge(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Qy(t,e,n){return t.options.clip?t[n]:e[n]}function Cge(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Qy(n,e,"left"),right:Qy(n,e,"right"),top:Qy(r,e,"top"),bottom:Qy(r,e,"bottom")}:e}var od;let C2=(od=class{static register(...e){ec.add(...e),uP()}static unregister(...e){ec.remove(...e),uP()}constructor(e,n){const r=this.config=new xge(n),i=QR(e),s=cP(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Wme(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=jpe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new age,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jpe(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],yx[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Kc.listen(this,"complete",lP),Kc.listen(this,"progress",Sge),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return _r(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ec}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mj(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Dj(this.canvas,this.ctx),this}stop(){return Kc.stop(this),this}resize(e,n){Kc.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mj(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pr(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};fr(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=R_(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),fr(s,o=>{const a=o.options,l=a.id,c=R_(l,a),u=$n(a.type,o.dtype);(a.position===void 0||oP(a.position,c)!==oP(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=ec.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),fr(i,(o,a)=>{o||delete r[a]}),fr(r,o=>{Ba.configure(this,o,o.options),Ba.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(aP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||I_(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ec.getController(a),{datasetElementType:c,dataElementType:u}=ui.datasets[a];Object.assign(l,{dataElementType:ec.getElement(u),datasetElementType:c&&ec.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){fr(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||fr(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(aP("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){fr(this.scales,e=>{Ba.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!_j(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;kge(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!_j(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ba.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],fr(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Jd(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kc.has(this)?this.attached&&!Kc.running(this)&&Kc.start(this):(this.draw(),lP({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Cge(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&bk(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&_k(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return n1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=_me.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ih(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Cv(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Kc.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Dj(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete yx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};fr(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){fr(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},fr(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Sv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Ipe(e),c=Nge(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Pr(s.onHover,[e,a,this],this),l&&Pr(s.onClick,[e,a,this],this));const u=!Sv(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},Cn(od,"defaults",ui),Cn(od,"instances",yx),Cn(od,"overrides",kh),Cn(od,"registry",ec),Cn(od,"version",bge),Cn(od,"getChart",cP),od);function uP(){return fr(C2.instances,t=>t._plugins.invalidate())}function eF(t,e,n=e){t.lineCap=$n(n.borderCapStyle,e.borderCapStyle),t.setLineDash($n(n.borderDash,e.borderDash)),t.lineDashOffset=$n(n.borderDashOffset,e.borderDashOffset),t.lineJoin=$n(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=$n(n.borderWidth,e.borderWidth),t.strokeStyle=$n(n.borderColor,e.borderColor)}function Ege(t,e,n){t.lineTo(n.x,n.y)}function Age(t){return t.stepped?d0e:t.tension||t.cubicInterpolationMode==="monotone"?f0e:Ege}function tF(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Tge(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=tF(i,n,r),u=Age(s);let{move:d=!0,reverse:h}=r||{},p,y,x;for(p=0;p<=c;++p)y=i[(a+(h?c-p:p))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):u(t,x,y,h,s.stepped),x=y);return l&&(y=i[(a+(h?c:0))%o],u(t,x,y,h,s.stepped)),!!l}function jge(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=tF(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,p,y,x,v,b;const S=T=>(o+(c?a-T:T))%s,k=()=>{x!==v&&(t.lineTo(u,v),t.lineTo(u,x),t.lineTo(u,b))};for(l&&(p=i[S(0)],t.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=i[S(h)],p.skip)continue;const T=p.x,j=p.y,P=T|0;P===y?(j<x?x=j:j>v&&(v=j),u=(d*u+T)/++d):(k(),t.lineTo(T,j),y=P,d=0,x=v=j),b=j}k()}function F_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?jge:Tge}function Pge(t){return t.stepped?H0e:t.tension||t.cubicInterpolationMode==="monotone"?q0e:qf}function Dge(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),eF(t,e.options),t.stroke(i)}function Oge(t,e,n,r){const{segments:i,options:s}=e,o=F_(e);for(const a of i)eF(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Lge=typeof Path2D=="function";function Mge(t,e,n,r){Lge&&!e.options.segment?Dge(t,e,n,r):Oge(t,e,n,r)}class Rm extends Rh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;R0e(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eme(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=J0e(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Pge(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],p=s[d],y=s[h];if(p===y){a.push(p);continue}const x=Math.abs((i-p[n])/(y[n]-p[n])),v=l(p,y,x,r.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,r){return F_(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=F_(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Mge(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Cn(Rm,"id","line"),Cn(Rm,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Cn(Rm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Cn(Rm,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function dP(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class xx extends Rh{constructor(n){super();Cn(this,"parsed");Cn(this,"skip");Cn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return dP(this,n,"x",r)}inYRange(n,r){return dP(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!n1(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,L_(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Cn(xx,"id","point"),Cn(xx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Cn(xx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const fP=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Ige=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class hP extends Rh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Pr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ms(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fP(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((y,x)=>{const v=r+n/2+s.measureText(y.text).width;(x===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,h++),l[x]={left:0,top:p,row:h,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,p=0,y=0,x=0;return this.legendItems.forEach((v,b)=>{const{itemWidth:S,itemHeight:k}=Rge(r,n,s,v,i);b>0&&p+k+2*a>u&&(d+=h+a,c.push({width:h,height:p}),y+=h+a,x++,h=p=0),l[b]={left:y,top:p,col:x,width:S,height:k},h=Math.max(h,S),p+=k+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=e0(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ts(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ts(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ts(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ts(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;bk(e,this),this._draw(),_k(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=ui.color,l=e0(e.rtl,this.left,this.width),c=Ms(o.font),{padding:u}=o,d=c.size,h=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:v}=fP(o,d),b=function(P,C,N){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;i.save();const O=$n(N.lineWidth,1);if(i.fillStyle=$n(N.fillStyle,a),i.lineCap=$n(N.lineCap,"butt"),i.lineDashOffset=$n(N.lineDashOffset,0),i.lineJoin=$n(N.lineJoin,"miter"),i.lineWidth=O,i.strokeStyle=$n(N.strokeStyle,a),i.setLineDash($n(N.lineDash,[])),o.usePointStyle){const z={radius:x*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:O},L=l.xPlus(P,y/2),M=C+h;OR(i,z,L,M,o.pointStyleWidth&&y)}else{const z=C+Math.max((d-x)/2,0),L=l.leftForLtr(P,y),M=pg(N.borderRadius);i.beginPath(),Object.values(M).some(K=>K!==0)?M_(i,{x:L,y:z,w:y,h:x,radius:M}):i.rect(L,z,y,x),i.fill(),O!==0&&i.stroke()}i.restore()},S=function(P,C,N){r1(i,N.text,P,C+v/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},k=this.isHorizontal(),T=this._computeTitleHeight();k?p={x:Ts(s,this.left+u,this.right-r[0]),y:this.top+u+T,line:0}:p={x:this.left+u,y:Ts(s,this.top+T+u,this.bottom-n[0].height),line:0},BR(this.ctx,e.textDirection);const j=v+u;this.legendItems.forEach((P,C)=>{i.strokeStyle=P.fontColor,i.fillStyle=P.fontColor;const N=i.measureText(P.text).width,O=l.textAlign(P.textAlign||(P.textAlign=o.textAlign)),z=y+h+N;let L=p.x,M=p.y;l.setWidth(this.width),k?C>0&&L+z+u>this.right&&(M=p.y+=j,p.line++,L=p.x=Ts(s,this.left+u,this.right-r[p.line])):C>0&&M+j>this.bottom&&(L=p.x=L+n[p.line].width+u,p.line++,M=p.y=Ts(s,this.top+T+u,this.bottom-n[p.line].height));const K=l.x(L);if(b(K,M,P),L=Zpe(O,L+y+h,k?L+z:this.right,e.rtl),S(l.x(L),M,P),k)p.x+=z+u;else if(typeof P.text!="string"){const W=c.lineHeight;p.y+=nF(P,W)+u}else p.y+=j}),UR(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ms(n.font),i=Va(n.padding);if(!n.display)return;const s=e0(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ts(e.align,d,this.right-h);else{const y=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);u=c+Ts(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Ts(a,d,d+h);o.textAlign=s.textAlign(vk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,r1(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=Ms(e.font),r=Va(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Mm(e,this.left,this.right)&&Mm(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Mm(e,i.left,i.left+i.width)&&Mm(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Bge(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Ige(i,r);i&&!s&&Pr(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Pr(n.onHover,[e,r,this],this)}else r&&Pr(n.onClick,[e,r,this],this)}}function Rge(t,e,n,r,i){const s=Fge(r,t,e,n),o=zge(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Fge(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function zge(t,e,n){let r=t;return typeof e.text!="string"&&(r=nF(e,n)),r}function nF(t,e){const n=t.text?t.text.length:0;return e*n}function Bge(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Uge={id:"legend",_element:hP,start(t,e,n){const r=t.legend=new hP({ctx:t.ctx,options:n,chart:t});Ba.configure(t,r,n),Ba.addBox(t,r)},stop(t){Ba.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ba.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Va(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class rF extends Rh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Fi(r.text)?r.text.length:1;this._padding=Va(r.padding);const s=i*Ms(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ts(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Ts(a,i,n),l=Vi*-.5):(u=s-e,d=Ts(a,n,i),l=Vi*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Ms(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);r1(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:vk(n.align),textBaseline:"middle",translation:[o,a]})}}function $ge(t,e){const n=new rF({ctx:t.ctx,options:e,chart:t});Ba.configure(t,n,e),Ba.addBox(t,n),t.titleBlock=n}var Wge={id:"title",_element:rF,start(t,e,n){$ge(t,n)},stop(t){const e=t.titleBlock;Ba.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ba.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fm={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=D_(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Zl(t,e){return e&&(Fi(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xc(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Vge(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function pP(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ms(e.bodyFont),c=Ms(e.titleFont),u=Ms(e.footerFont),d=s.length,h=i.length,p=r.length,y=Va(e.padding);let x=y.height,v=0,b=r.reduce((T,j)=>T+j.before.length+j.lines.length+j.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const T=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*T+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}h&&(x+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let S=0;const k=function(T){v=Math.max(v,n.measureText(T).width+S)};return n.save(),n.font=c.string,fr(t.title,k),n.font=l.string,fr(t.beforeBody.concat(t.afterBody),k),S=e.displayColors?o+2+e.boxPadding:0,fr(r,T=>{fr(T.before,k),fr(T.lines,k),fr(T.after,k)}),S=0,n.font=u.string,fr(t.footer,k),n.restore(),v+=y.width,{width:v,height:x}}function Hge(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function qge(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Gge(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),qge(c,t,e,n)&&(c="center"),c}function mP(t,e,n){const r=n.yAlign||e.yAlign||Hge(t,n);return{xAlign:n.xAlign||e.xAlign||Gge(t,e,n,r),yAlign:r}}function Kge(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Xge(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function gP(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=pg(o);let y=Kge(e,a);const x=Xge(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,h)+i:a==="right"&&(y+=Math.max(d,p)+i),{x:za(y,0,r.width-e.width),y:za(x,0,r.height-e.height)}}function ex(t,e,n){const r=Va(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function yP(t){return Zl([],Xc(t))}function Yge(t,e,n){return Ih(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function xP(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const iF={beforeTitle:Gc,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Gc,beforeBody:Gc,beforeLabel:Gc,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _r(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gc,afterBody:Gc,beforeFooter:Gc,footer:Gc,afterFooter:Gc};function _o(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?iF[e].call(n,r):i}class z_ extends Rh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new WR(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Yge(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=_o(r,"beforeTitle",this,e),s=_o(r,"title",this,e),o=_o(r,"afterTitle",this,e);let a=[];return a=Zl(a,Xc(i)),a=Zl(a,Xc(s)),a=Zl(a,Xc(o)),a}getBeforeBody(e,n){return yP(_o(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return fr(e,s=>{const o={before:[],lines:[],after:[]},a=xP(r,s);Zl(o.before,Xc(_o(a,"beforeLabel",this,s))),Zl(o.lines,_o(a,"label",this,s)),Zl(o.after,Xc(_o(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return yP(_o(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=_o(r,"beforeFooter",this,e),s=_o(r,"footer",this,e),o=_o(r,"afterFooter",this,e);let a=[];return a=Zl(a,Xc(i)),a=Zl(a,Xc(s)),a=Zl(a,Xc(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Vge(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),fr(a,u=>{const d=xP(e.callbacks,u);i.push(_o(d,"labelColor",this,u)),s.push(_o(d,"labelPointStyle",this,u)),o.push(_o(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Fm[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=pP(this,r),c=Object.assign({},a,l),u=mP(this.chart,r,c),d=gP(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=pg(a),{x:h,y:p}=e,{width:y,height:x}=n;let v,b,S,k,T,j;return s==="center"?(T=p+x/2,i==="left"?(v=h,b=v-o,k=T+o,j=T-o):(v=h+y,b=v+o,k=T-o,j=T+o),S=v):(i==="left"?b=h+Math.max(l,u)+o:i==="right"?b=h+y-Math.max(c,d)-o:b=this.caretX,s==="top"?(k=p,T=k-o,v=b-o,S=b+o):(k=p+x,T=k+o,v=b+o,S=b-o),j=k),{x1:v,x2:b,x3:S,y1:k,y2:T,y3:j}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=e0(r.rtl,this.x,this.width);for(e.x=ex(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Ms(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Ms(s.bodyFont),d=ex(this,"left",s),h=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(h,c)+c/2,b=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,L_(e,x,v,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,L_(e,x,v,b)}else{e.lineWidth=nr(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=i.leftForLtr(h,c),v=i.leftForLtr(i.xPlus(h,1),c-2),b=pg(o.borderRadius);Object.values(b).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,M_(e,{x,y,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),M_(e,{x:v,y:y+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Ms(r.bodyFont);let h=d.lineHeight,p=0;const y=e0(r.rtl,this.x,this.width),x=function(N){n.fillText(N,y.x(e.x+p),e.y+h/2),e.y+=h+s},v=y.textAlign(o);let b,S,k,T,j,P,C;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=ex(this,v,r),n.fillStyle=r.bodyColor,fr(this.beforeBody,x),p=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,T=0,P=i.length;T<P;++T){for(b=i[T],S=this.labelTextColors[T],n.fillStyle=S,fr(b.before,x),k=b.lines,a&&k.length&&(this._drawColorBox(n,e,T,y,r),h=Math.max(d.lineHeight,l)),j=0,C=k.length;j<C;++j)x(k[j]),h=d.lineHeight;fr(b.after,x)}p=0,h=d.lineHeight,fr(this.afterBody,x),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=e0(r.rtl,this.x,this.width);for(e.x=ex(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Ms(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:y}=pg(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Fm[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=pP(this,e),l=Object.assign({},o,this._size),c=mP(n,e,l),u=gP(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Va(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),BR(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),UR(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Sv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Sv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Fm[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Cn(z_,"positioners",Fm);var Jge={id:"tooltip",_element:z_,positioners:Fm,afterInit(t,e,n){n&&(t.tooltip=new z_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:iF},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Zge=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Qge(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Zge(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const e1e=(t,e)=>t===null?null:za(Math.round(t),0,e);function vP(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class B_ extends I0{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_r(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Qge(r,e,$n(n,e),this._addedLabels),e1e(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return vP.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Cn(B_,"id","category"),Cn(B_,"defaults",{ticks:{callback:vP}});function t1e(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,p=s||1,y=u-1,{min:x,max:v}=e,b=!_r(o),S=!_r(a),k=!_r(c),T=(v-x)/(d+1);let j=kj((v-x)/y/p)*p,P,C,N,O;if(j<1e-14&&!b&&!S)return[{value:x},{value:v}];O=Math.ceil(v/j)-Math.floor(x/j),O>y&&(j=kj(O*j/y/p)*p),_r(l)||(P=Math.pow(10,l),j=Math.ceil(j*P)/P),i==="ticks"?(C=Math.floor(x/j)*j,N=Math.ceil(v/j)*j):(C=x,N=v),b&&S&&s&&Upe((a-o)/s,j/1e3)?(O=Math.round(Math.min((a-o)/j,u)),j=(a-o)/O,C=o,N=a):k?(C=b?o:C,N=S?a:N,O=c-1,j=(N-C)/O):(O=(N-C)/j,dg(O,Math.round(O),j/1e3)?O=Math.round(O):O=Math.ceil(O));const z=Math.max(Nj(j),Nj(C));P=Math.pow(10,_r(l)?z:l),C=Math.round(C*P)/P,N=Math.round(N*P)/P;let L=0;for(b&&(h&&C!==o?(n.push({value:o}),C<o&&L++,dg(Math.round((C+L*j)*P)/P,o,wP(o,T,t))&&L++):C<o&&L++);L<O;++L){const M=Math.round((C+L*j)*P)/P;if(S&&M>a)break;n.push({value:M})}return S&&h&&N!==a?n.length&&dg(n[n.length-1].value,a,wP(a,T,t))?n[n.length-1].value=a:n.push({value:a}):(!S||N===a)&&n.push({value:N}),n}function wP(t,e,{horizontal:n,minRotation:r}){const i=rh(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class n1e extends I0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _r(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=g0(i),c=g0(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=t1e(i,s);return e.bounds==="ticks"&&$pe(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return PR(e,this.chart.options.locale,this.options.ticks.format)}}class U_ extends n1e{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Wa(e)?e:0,this.max=Wa(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=rh(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Cn(U_,"id","linear"),Cn(U_,"defaults",{ticks:{callback:DR.formatters.numeric}});const E2={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},No=Object.keys(E2);function bP(t,e){return t-e}function _P(t,e){if(_r(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Wa(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(t1(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function SP(t,e,n,r){const i=No.length;for(let s=No.indexOf(t);s<i-1;++s){const o=E2[No[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return No[s]}return No[i-1]}function r1e(t,e,n,r,i){for(let s=No.length-1;s>=No.indexOf(n);s--){const o=No[s];if(E2[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return No[n?No.indexOf(n):0]}function i1e(t){for(let e=No.indexOf(t)+1,n=No.length;e<n;++e)if(E2[No[e]].common)return No[e]}function kP(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=xk(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function s1e(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function NP(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:s1e(t,r,i,n)}class jv extends I0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new yme._date(e.adapters.date);i.init(n),ug(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:_P(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Wa(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Wa(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Kpe(i,s,o);return this._unit=n.unit||(r.autoSkip?SP(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):r1e(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:i1e(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),NP(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=za(n,0,o),r=za(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||SP(s.minUnit,n,r,this._getLabelCapacity(n)),a=$n(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=t1(l)||l===!0,u={};let d=n,h,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<r;h=+e.add(h,a,o),p++)kP(u,h,y);return(h===r||i.bounds==="ticks"||p===1)&&kP(u,h,y),Object.keys(u).sort(bP).map(x=>+x)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Pr(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],p=c&&d&&h&&h.major;return this._adapter.format(e,i||(p?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=rh(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,NP(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(_P(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ype(e.sort(bP))}}Cn(jv,"id","time"),Cn(jv,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function tx(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ih(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ih(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class CP extends jv{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=tx(n,this.min),this._tableRange=tx(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(tx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return tx(this._table,r*this._tableRange+this._minPos,!0)}}Cn(CP,"id","timeseries"),Cn(CP,"defaults",jv.defaults);const sF="label";function EP(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function o1e(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function oF(t,e){t.labels=e}function aF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sF;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function a1e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sF;const n={labels:[],datasets:[]};return oF(n,t.labels),aF(n,t.datasets,e),n}function l1e(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,p=Y.useRef(null),y=Y.useRef(null),x=()=>{p.current&&(y.current=new C2(p.current,{type:o,data:a1e(a,s),options:l&&{...l},plugins:c}),EP(e,y.current))},v=()=>{EP(e,null),y.current&&(y.current.destroy(),y.current=null)};return Y.useEffect(()=>{!i&&y.current&&l&&o1e(y.current,l)},[i,l]),Y.useEffect(()=>{!i&&y.current&&oF(y.current.config.data,a.labels)},[i,a.labels]),Y.useEffect(()=>{!i&&y.current&&a.datasets&&aF(y.current.config.data,a.datasets,s)},[i,a.datasets]),Y.useEffect(()=>{y.current&&(i?(v(),setTimeout(x)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),Y.useEffect(()=>{y.current&&(v(),setTimeout(x))},[o]),Y.useEffect(()=>(x(),()=>v()),[]),Mt.createElement("canvas",{ref:p,role:"img",height:n,width:r,...h},u)}const c1e=Y.forwardRef(l1e);function u1e(t,e){return C2.register(e),Y.forwardRef((n,r)=>Mt.createElement(c1e,{...n,ref:r,type:t}))}const d1e=u1e("line",mx);C2.register(B_,U_,xx,Rm,Wge,Jge,Uge);const f1e=()=>{const{id:t}=q_(),[e,n]=Y.useState(null),[r,i]=Y.useState(!0),[s,o]=Y.useState(null);Y.useEffect(()=>{t?a():(o("Nie znaleziono identyfikatora sprzętu"),i(!1))},[t]);const a=async()=>{try{i(!0);const{data:h,error:p}=await lt.from("equipment").select("*").eq("id",t).single();if(p)throw p;const{data:y,error:x}=await lt.from("reservation_items").select("reservation_id, quantity").eq("equipment_id",t);if(x)throw x;if(!y||y.length===0){n({...h,total_revenue:0,payoff_percentage:0,rental_history:[],monthly_revenue:[]}),o(null),i(!1);return}const v=y.map(z=>z.reservation_id),{data:b,error:S}=await lt.from("reservations").select(`
          id,
          start_date,
          end_date,
          total_price,
          status,
          customers (
            first_name,
            last_name
          )
        `).in("id",v).order("start_date",{ascending:!1});if(S)throw S;const k=b.filter(z=>z.status==="completed").reduce((z,L)=>{const M=new Date(L.start_date).toISOString().slice(0,7);return z[M]=(z[M]||0)+L.total_price,z},{}),T=Object.keys(k).sort();let j=0;const P=T.map(z=>(j+=k[z],{month:z,revenue:k[z],cumulative_revenue:j})),C=b.map(z=>({id:z.id,start_date:z.start_date,end_date:z.end_date,total_price:z.total_price,customer_name:z.customers?`${z.customers.first_name} ${z.customers.last_name}`:"Nieznany klient",status:z.status})),N=b.filter(z=>z.status==="completed").reduce((z,L)=>z+(L.total_price||0),0),O=h.purchase_price?N/h.purchase_price*100:0;n({...h,total_revenue:N,payoff_percentage:O,rental_history:C,monthly_revenue:P}),o(null)}catch(h){console.error("Error loading equipment details:",h),o("Nie udało się załadować szczegółów sprzętu")}finally{i(!1)}},l=()=>{if(!e||e.payoff_percentage>=100)return null;const h=e.monthly_revenue;if(h.length<2)return null;const p=h.slice(-3),y=p.reduce((S,k)=>S+k.revenue,0)/p.length;if(y<=0)return null;const x=e.purchase_price-e.total_revenue,v=Math.ceil(x/y),b=new Date;return b.setMonth(b.getMonth()+v),b.toLocaleDateString("pl-PL")};if(r)return g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"})});if(s||!e)return g.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:g.jsx("p",{children:s||"Nie znaleziono sprzętu"})});const c={labels:e.monthly_revenue.map(h=>{const[p,y]=h.month.split("-");return`${y}/${p}`}),datasets:[{label:"Miesięczny przychód",data:e.monthly_revenue.map(h=>h.revenue),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.1},{label:"Przychód skumulowany",data:e.monthly_revenue.map(h=>h.cumulative_revenue),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",tension:.1}]},u={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Przychody w czasie"}},scales:{y:{beginAtZero:!0,ticks:{callback:h=>`${h.toFixed(2)} zł`}}}},d=l();return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:e.name}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Cena zakupu"}),g.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[e.purchase_price.toFixed(2)," zł"]})]}),g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Przychód łączny"}),g.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[e.total_revenue.toFixed(2)," zł"]})]}),g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Postęp spłaty"}),g.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[e.payoff_percentage.toFixed(1),"%"]})]})]}),d&&g.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:g.jsxs("p",{className:"text-sm text-blue-800",children:["Szacowana data pełnej spłaty: ",g.jsx("span",{className:"font-medium",children:d})]})})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Wykres przychodów"}),g.jsx(d1e,{data:c,options:u})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Historia wypożyczeń"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data rozpoczęcia"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data zakończenia"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Klient"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kwota"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.rental_history.map(h=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(h.start_date).toLocaleDateString("pl-PL")}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(h.end_date).toLocaleDateString("pl-PL")}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.customer_name}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[h.total_price.toFixed(2)," zł"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status==="completed"?"Zakończone":h.status==="pending"?"Oczekujące":h.status==="cancelled"?"Anulowane":h.status})})]},h.id))})]})})]})]})},h1e=()=>(Y.useEffect(()=>{window.location.href="/"},[]),null);function p1e(){return g.jsx(Z7,{children:g.jsx("div",{className:"relative min-h-screen",children:g.jsxs(H7,{children:[g.jsx(mi,{path:"/admin",element:g.jsx(kH,{onLogin:()=>window.location.href="/admin/panel"})}),g.jsx(mi,{path:"/admin/forgot-password",element:g.jsx(CH,{})}),g.jsx(mi,{path:"/admin/reset-password",element:g.jsx(AH,{})}),g.jsxs(mi,{path:"/admin/panel",element:g.jsx(TH,{onLogout:()=>window.location.href="/admin"}),children:[g.jsx(mi,{index:!0,element:g.jsx($7,{to:"/admin/panel/dashboard",replace:!0})}),g.jsx(mi,{path:"dashboard",element:g.jsx(PH,{})}),g.jsx(mi,{path:"reservations",element:g.jsx(pG,{})}),g.jsx(mi,{path:"reservations/:id",element:g.jsx(goe,{})}),g.jsx(mi,{path:"crm",element:g.jsx(gG,{})}),g.jsx(mi,{path:"equipment",element:g.jsx(use,{})}),g.jsx(mi,{path:"equipment-stats",element:g.jsx(ape,{})}),g.jsx(mi,{path:"equipment-stats/:id",element:g.jsx(f1e,{})}),g.jsx(mi,{path:"advertisements",element:g.jsx(dse,{})}),g.jsx(mi,{path:"calendar",element:g.jsx(hse,{})}),g.jsx(mi,{path:"customers",element:g.jsx(mG,{})}),g.jsx(mi,{path:"customers/:id",element:g.jsx(yoe,{})}),g.jsx(mi,{path:"statistics",element:g.jsx(poe,{})})]}),g.jsx(mi,{path:"/admin/*",element:g.jsx(h1e,{})}),g.jsx(mi,{path:"/",element:g.jsxs("div",{className:"min-h-screen bg-solrent-light relative",children:[g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative pt-28",children:[g.jsx("img",{src:"/assets/solrent-logo.png",alt:"SOLRENT Logo",className:"absolute top-4 left-4 md:left-8 h-20 object-contain"}),g.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-8 md:mb-12 text-solrent-dark max-w-4xl mx-auto",children:"Rezerwacja sprzętu budowlanego i ogrodniczego"}),g.jsx("div",{className:"max-w-6xl mx-auto",children:g.jsx(hH,{})})]}),g.jsx(gH,{})]})})]})})})}const m1e=()=>g.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Regulamin wypożyczalni SOLRENT"}),g.jsxs("div",{className:"space-y-6 text-gray-600",children:[g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§1. Postanowienia ogólne"}),g.jsx("p",{children:"1. Niniejszy regulamin określa zasady wypożyczania sprzętu budowlanego i ogrodniczego przez SOLRENT Sp. z o.o."}),g.jsx("p",{children:"2. Wypożyczalnia prowadzi działalność w zakresie krótkoterminowego wynajmu sprzętu budowlanego i ogrodniczego."})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§2. Zasady wypożyczania sprzętu"}),g.jsx("p",{children:"1. Wypożyczenie sprzętu następuje na podstawie złożonego zamówienia online lub bezpośrednio w siedzibie firmy."}),g.jsx("p",{children:"2. Warunkiem wypożyczenia sprzętu jest:"}),g.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[g.jsx("li",{children:"Ukończenie 18 roku życia"}),g.jsx("li",{children:"Posiadanie ważnego dokumentu tożsamości"}),g.jsx("li",{children:"Wpłacenie kaucji zwrotnej"})]})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§3. Obowiązki Wypożyczającego"}),g.jsx("p",{children:"Wypożyczający zobowiązuje się do:"}),g.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[g.jsx("li",{children:"Użytkowania sprzętu zgodnie z jego przeznaczeniem i instrukcją obsługi"}),g.jsx("li",{children:"Zwrotu sprzętu w stanie niepogorszonym"}),g.jsx("li",{children:"Terminowego regulowania należności"}),g.jsx("li",{children:"Pokrycia kosztów ewentualnych napraw lub odszkodowania"})]})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§4. Rezerwacja sprzętu"}),g.jsx("p",{children:"1. Rezerwacji można dokonać online poprzez stronę internetową lub telefonicznie."}),g.jsx("p",{children:"2. Rezerwacja jest ważna po otrzymaniu potwierdzenia od wypożyczalni."}),g.jsx("p",{children:"3. Wypożyczalnia zastrzega sobie prawo do odmowy realizacji rezerwacji w przypadku:"}),g.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[g.jsx("li",{children:"Braku dostępności sprzętu"}),g.jsx("li",{children:"Niespełnienia warunków wypożyczenia"}),g.jsx("li",{children:"Wcześniejszych naruszeń regulaminu przez klienta"})]})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§5. Płatności i kaucja"}),g.jsx("p",{children:"1. Opłata za wypożyczenie naliczana jest zgodnie z aktualnym cennikiem."}),g.jsx("p",{children:"2. Kaucja zwrotna jest zabezpieczeniem na wypadek uszkodzenia lub nieterminowego zwrotu sprzętu."}),g.jsx("p",{children:"3. Wysokość kaucji jest uzależniona od rodzaju wypożyczanego sprzętu."})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§6. Odpowiedzialność"}),g.jsx("p",{children:"1. Wypożyczający ponosi pełną odpowiedzialność za wypożyczony sprzęt od momentu jego odbioru do zwrotu."}),g.jsx("p",{children:"2. W przypadku uszkodzenia, zniszczenia lub utraty sprzętu, Wypożyczający zobowiązany jest do pokrycia kosztów naprawy lub odkupienia sprzętu."})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"§7. Postanowienia końcowe"}),g.jsx("p",{children:"1. W sprawach nieuregulowanych niniejszym regulaminem zastosowanie mają przepisy Kodeksu Cywilnego."}),g.jsx("p",{children:"2. Wszelkie spory będą rozstrzygane przez sąd właściwy dla siedziby Wypożyczalni."})]})]}),g.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:g.jsx("p",{className:"text-sm text-gray-500",children:"Regulamin obowiązuje od dnia 01.03.2025 r. SOLRENT Sp. z o.o."})})]})}),g1e=window.location.pathname,y1e=g1e==="/terms"?m1e:p1e;ZF.createRoot(document.getElementById("root")).render(g.jsx(Y.StrictMode,{children:g.jsx(y1e,{})}));export{$Q as _,WF as c,Pv as g};
